{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Assiduity/routes/CallRegister/DetailsCallRegister.js\";\nimport React from 'react';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { connect } from 'react-redux';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport moment from 'moment';\nimport { withStyles } from '@material-ui/core/styles';\nimport Switch from '@material-ui/core/Switch';\nimport AccessAlarmsIcon from '@material-ui/icons/AccessAlarms';\nimport ReportIcon from '@material-ui/icons/Report';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport PrintIcon from '@material-ui/icons/Print';\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\nimport BigCalendar from 'react-big-calendar';\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop';\nimport 'react-big-calendar/lib/addons/dragAndDrop/styles.css';\nimport { ButtonGroup } from 'reactstrap';\nimport Button from '@material-ui/core/Button';\nimport _ from 'lodash';\nimport { getEventCallRegisterForAdmin, getEventCallRegisterForProf } from '../../../../../actions/planningActions';\nimport { Redirect } from 'react-router-dom';\nimport { getStudentsCallRegister } from '../../../../../actions/studentAction';\nimport ContainerHeader from '../../../../../components/ContainerHeader';\nimport { roleIdProfessor } from '../../../../../config/config';\nimport { saveCallRegister, getObservationList, getEncouragementList, getSanctionList } from '../../../../../actions/RegistreAction';\nimport { classService } from '../../../../../_services/class.service';\nimport OtherPopover from './OtherPopover';\nimport SanctionPopover from './SanctionPopover';\nimport SweetAlert from 'react-bootstrap-sweetalert';\nconst localizer = BigCalendar.momentLocalizer(moment);\nconst DragAndDropCalendar = withDragAndDrop(BigCalendar);\n\nconst styles = theme => ({\n  textColorPrimary: {\n    color: 'red'\n  }\n});\n\nvar options = {\n  weekday: 'long',\n  day: 'numeric',\n  month: 'long'\n};\nvar options1 = {\n  day: 'numeric',\n  month: 'long'\n};\n\nclass DetailsCallRegister extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.changeEvent = event => {\n      this.setState({\n        event: event\n      });\n      let dateFormat = moment(event.start).format('YYYY-MM-DD');\n      let timeFormat = moment(event.start).add(-1, 'h').format('HH:mm:ss[Z]');\n      let TimeDate = dateFormat + 'T' + timeFormat;\n      let eventId = event.id; // let apiEndpoint = `/call_registers?access_token=${localStorage.token}?filter[where][and][0][fk_id_planning_events]=${124}&filter[where][and][1][start_date]=${TimeDate}`;\n\n      let apiEndpoint = `/call_registers?access_token=${localStorage.token}?filter[where][and][0][fk_id_planning_events]=${eventId}&filter[where][and][1][start_date]=${TimeDate}&filter[include][studentCall][student][profile][user]`;\n      classService.get(apiEndpoint).then(res => {\n        if (res) {\n          console.log(TimeDate, 'TimeDate changeeeeeeee');\n          console.log(res.data, 'res.data changeeeeeeee');\n\n          if (res.data.length > 0) {\n            let historiqRegistre = res.data[0].studentCall.map(element => {\n              return {\n                name: element.student.profile.user.name,\n                surname: element.student.profile.user.surname,\n                presence: element.presence,\n                delay: element.delay,\n                sanction: element.sanction,\n                description_sanction: element.description_sanction,\n                observation: element.observation,\n                description_observation: element.description_observation,\n                encouragement: element.encouragement,\n                description_encouragement: element.description_encouragement,\n                studentId: element.fk_id_student,\n                photo: element.student.profile.user.photo\n              };\n            });\n            this.setState({\n              callRegister: historiqRegistre\n            });\n          } else {\n            this.setState({\n              callRegister: this.props.students\n            });\n          }\n        }\n      });\n    };\n\n    this.handleChangeSanctions = selectedOption => {\n      this.setState({\n        sanctionSelected: selectedOption\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleChangeEncouragement = selectedOption => {\n      this.setState({\n        encouragementSelected: selectedOption\n      });\n    };\n\n    this.handleChangeObservations = selectedOption => {\n      this.setState({\n        observationSelected: selectedOption\n      });\n    };\n\n    this.CustomToolbar = toolbar => {\n      let dayCall = new Date(toolbar.date);\n\n      const goToBack = () => {\n        toolbar.onNavigate('PREV');\n        dayCall.setDate(dayCall.getDate() + -1);\n        let title = this.state.event.classeName + '/' + this.state.event.subjectName + '/' + new Date(dayCall).toLocaleDateString('fr-FR', options);\n        this.setState({\n          title: title,\n          dateEvent: new Date(dayCall).toLocaleDateString('fr-FR', options1)\n        });\n      };\n\n      const goToNext = () => {\n        dayCall.setDate(dayCall.getDate() + 1);\n        let curentDay = new Date();\n        let checkDate = moment(dayCall).isAfter(curentDay);\n\n        if (!checkDate) {\n          toolbar.onNavigate('NEXT');\n          let title = this.state.event.classeName + '/' + this.state.event.subjectName + '/' + new Date(dayCall).toLocaleDateString('fr-FR', options);\n          this.setState({\n            title: title,\n            dateEvent: new Date(dayCall).toLocaleDateString('fr-FR', options1),\n            colorSelected: '#0000CD'\n          });\n        } else {\n          this.setState({\n            colorSelected: '#C0C0C0'\n          });\n        }\n      };\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-row bd-highlight mb-3 d-flex \\njustify-content-around\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 646,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 651,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ButtonGroup, {\n        vertical: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 652,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: \" jr-btn active\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 653,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"label-filter-off\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 654,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.day\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 655,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(Button, {\n        className: \"jr-btn\",\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 658,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"label-filter-off\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 15\n        }\n      }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.week\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 661,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(Button, {\n        className: \"jr-btn\",\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"label-filter-off\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 665,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.month\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 666,\n          columnNumber: 17\n        }\n      })))), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h6\",\n        style: {\n          color: '#3F51B5',\n          fontWeight: 'normal',\n          fontFamily: 'Roboto',\n          marginLeft: '60px',\n          marginTop: '20px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 670,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-chevron-left zmdi-hc-1x mr-3\",\n        style: {\n          color: '#0000CD'\n        },\n        onClick: goToBack,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 680,\n          columnNumber: 13\n        }\n      }), this.state.dateEvent, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-chevron-right zmdi-hc-1x ml-3\",\n        style: {\n          color: this.state.colorSelected\n        },\n        onClick: goToNext,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 686,\n          columnNumber: 13\n        }\n      }))));\n    };\n\n    this.state = {\n      isRedirect: false,\n      colorSelected: '#C0C0C0',\n      title: '',\n      dateEvent: '',\n      callRegister: [],\n      event: {},\n      callRegisterSetting: {},\n      isOpen: false,\n      sutdentId: null,\n      observations: [],\n      encouragements: [],\n      sanctions: [],\n      observationSelected: [],\n      descriptionObservation: '',\n      encouragementSelected: [],\n      descriptionEncouragement: '',\n      isOpenSanction: false,\n      sanctionSelected: [],\n      descriptionSanction: '',\n      isOpenAlert: false\n    };\n    this.CustomToolbar = this.CustomToolbar.bind(this);\n    this.event = this.event.bind(this);\n    this.handleChangePresence = this.handleChangePresence.bind(this);\n    this.handleChangeDelay = this.handleChangeDelay.bind(this);\n    this.handleChangeSanction = this.handleChangeSanction.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChangeOther = this.handleChangeOther.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeObservations = this.handleChangeObservations.bind(this);\n    this.handleChangeEncouragement = this.handleChangeEncouragement.bind(this);\n    this.handleSubmitOther = this.handleSubmitOther.bind(this);\n    this.handleSubmitSanction = this.handleSubmitSanction.bind(this);\n    this.handleChangeSanctions = this.handleChangeSanctions.bind(this);\n    this.onConfirm = this.onConfirm.bind(this);\n    this.changeEvent = this.changeEvent.bind(this);\n  }\n\n  onConfirm() {\n    this.setState({\n      isOpenAlert: false\n    });\n  }\n\n  handleCancel() {\n    this.setState({\n      isOpen: false,\n      isOpenSanction: false\n    });\n  }\n\n  handleChangeOther(event, id, student) {\n    console.log(student, 'otheeeer');\n    event.preventDefault();\n    let observationSelected = this.state.observations.filter(observation => observation.value == student.observation);\n    let encouragementSelected = this.state.encouragements.filter(encouragement => encouragement.value == student.encouragement);\n    this.setState({\n      isOpen: true,\n      sutdentId: id,\n      descriptionObservation: student.description_observation,\n      descriptionEncouragement: student.description_encouragement,\n      observationSelected,\n      encouragementSelected\n    });\n  }\n\n  handleChangePresence(event, name, id) {\n    event.preventDefault();\n    let newCallRegister = this.state.callRegister.map(studentCall => studentCall.studentId === parseInt(id) ? { ...studentCall,\n      [name]: !studentCall.presence\n    } : studentCall);\n    this.setState({\n      callRegister: newCallRegister\n    });\n  }\n\n  handleChangeDelay(event, name, id) {\n    event.preventDefault();\n    let newCallRegister = this.state.callRegister.map(studentCall => studentCall.studentId === parseInt(id) ? { ...studentCall,\n      [name]: !studentCall.delay\n    } : studentCall);\n    this.setState({\n      callRegister: newCallRegister\n    });\n  }\n\n  handleChangeSanction(event, id, student) {\n    let sanctionSelected = this.state.sanctions.filter(sanction => sanction.value == student.sanction);\n    event.preventDefault();\n    this.setState({\n      isOpenSanction: true,\n      sutdentId: id,\n      descriptionSanction: student.description_sanction,\n      sanctionSelected\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    let callRegister = {\n      plannningEventsId: this.state.event.id,\n      creatorProfileId: this.props.userProfile.id,\n      startDate: this.state.event.start,\n      endDate: this.state.event.end,\n      callDate: moment()._d,\n      studentsCalls: this.state.callRegister\n    };\n    let otherData = {\n      classId: this.state.event.classId,\n      establishementId: this.props.userProfile.establishment_id,\n      schoolYearId: this.props.userProfile.school_year_id,\n      roleId: this.props.userProfile.role_id,\n      profileId: this.props.userProfile.id\n    };\n    this.props.dispatch(saveCallRegister(callRegister, otherData));\n    this.setState({\n      isRedirect: true\n    });\n  }\n\n  handleSubmitOther(e, id) {\n    e.preventDefault();\n    this.setState({\n      isOpen: false\n    });\n    let newCallRegister = this.state.callRegister.map(studentCall => studentCall.studentId === parseInt(id) ? { ...studentCall,\n      observation: this.state.observationSelected.value,\n      description_observation: this.state.descriptionObservation,\n      encouragement: this.state.encouragementSelected.value,\n      description_encouragement: this.state.descriptionEncouragement\n    } : studentCall);\n    this.setState({\n      callRegister: newCallRegister,\n      observationSelected: '',\n      descriptionObservation: '',\n      encouragementSelected: '',\n      descriptionEncouragement: ''\n    });\n  }\n\n  handleSubmitSanction(e, id) {\n    e.preventDefault();\n    this.setState({\n      isOpenSanction: false\n    });\n    let newCallRegister = this.state.callRegister.map(studentCall => studentCall.studentId === parseInt(id) ? { ...studentCall,\n      sanction: this.state.sanctionSelected.value,\n      description_sanction: this.state.descriptionSanction\n    } : studentCall);\n    this.setState({\n      callRegister: newCallRegister,\n      sanctionSelected: '',\n      descriptionSanction: ''\n    });\n  }\n\n  UNSAFE_componentWillMount() {\n    this.props.dispatch(getEventCallRegisterForAdmin(this.props.userProfile.establishment_id, this.props.userProfile.school_year_id, this.props.match.params.classId));\n    let dateFormat = moment(this.props.match.params.startDate).format('YYYY-MM-DD');\n    let timeFormat = moment(this.props.match.params.startDate).add(-1, 'h').format('HH:mm:ss[Z]');\n    let TimeDate = dateFormat + 'T' + timeFormat;\n    let eventId = this.props.match.params.eventId;\n    let apiEndpoint = `/call_registers?access_token=${localStorage.token}?filter[where][and][0][fk_id_planning_events]=${eventId}&filter[where][and][1][start_date]=${TimeDate}&filter[include][studentCall][student][profile][user]`;\n    classService.get(apiEndpoint).then(res => {\n      if (res) {\n        if (res.data.length > 0) {\n          console.log(TimeDate, 'TimeDate TimeDate');\n          console.log(res.data, 'ressssssssss');\n          let historiqRegistre = res.data[0].studentCall.map(element => {\n            return {\n              name: element.student.profile.user.name,\n              surname: element.student.profile.user.surname,\n              presence: element.presence,\n              delay: element.delay,\n              sanction: element.sanction,\n              description_sanction: element.description_sanction,\n              observation: element.observation,\n              description_observation: element.description_observation,\n              encouragement: element.encouragement,\n              description_encouragement: element.description_encouragement,\n              studentId: element.fk_id_student,\n              photo: element.student.profile.user.photo\n            };\n          });\n          this.setState({\n            callRegister: historiqRegistre\n          });\n        } else {\n          this.setState({\n            callRegister: this.props.students\n          });\n        }\n      }\n    });\n    const startDateEvent = moment(this.props.match.params.startDate).format('DD/MM/YYYY HH:mm');\n    let eventSelected = this.props.events.filter(element => element.id === parseInt(this.props.match.params.eventId, 10) && moment(element.start).format('DD/MM/YYYY HH:mm') === startDateEvent);\n\n    if (!_.isEmpty(eventSelected)) {\n      const classId = eventSelected[0].classId;\n      let apiEndpoint = `/class_v4/${classId}?access_token=${localStorage.token}&filter[include][level][educationType][callRegisterSetting]`;\n      classService.get(apiEndpoint).then(res => {\n        if (res) {\n          let callRegisterSetting = res.data.level.educationType.callRegisterSetting;\n\n          if (!_.isEmpty(callRegisterSetting)) {\n            let callRegisterSetting = res.data.level.educationType.callRegisterSetting[0];\n            this.setState({\n              callRegisterSetting\n            });\n\n            if (callRegisterSetting.observation) {\n              this.props.dispatch(getObservationList());\n            }\n\n            if (callRegisterSetting.encouragement) {\n              this.props.dispatch(getEncouragementList());\n            }\n\n            if (callRegisterSetting.sanction) {\n              this.props.dispatch(getSanctionList());\n            }\n          } else {\n            this.setState({\n              isOpenAlert: true\n            });\n          }\n        }\n      });\n      let title = eventSelected[0].classeName + '/' + eventSelected[0].subjectName + '/' + new Date(eventSelected[0].start).toLocaleDateString('fr-FR', options);\n      let curentDay = new Date();\n      let checkDate = moment(eventSelected[0].start).isAfter(curentDay);\n\n      if (!checkDate) {\n        this.setState({\n          colorSelected: '#0000CD'\n        });\n      }\n\n      this.setState({\n        title: title,\n        dateEvent: new Date(eventSelected[0].start).toLocaleDateString('fr-FR', options1),\n        event: eventSelected[0]\n      });\n    }\n  }\n\n  event({\n    event\n  }) {\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: 'Popover-' + event.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 11\n        }\n      }, event.eventType === 'lesson' ? /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontFamily: 'Roboto',\n          fontSize: '17px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 15\n        }\n      }, ' ', /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 17\n        }\n      }, event.subjectName), \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 44\n        }\n      }), \" \", event.roomName, ' ', event.tagCallRegister ? /*#__PURE__*/React.createElement(\"i\", {\n        class: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'green',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 19\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        class: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'red',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 19\n        }\n      }), ' ') : event.eventType === 'exam' ? /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontFamily: 'Roboto',\n          fontSize: '17px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 15\n        }\n      }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.note.exam\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 17\n        }\n      }), \" \", /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 60\n        }\n      }, event.subjectName), \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 87\n        }\n      }), ' ', event.roomName, ' ', event.tagCallRegister ? /*#__PURE__*/React.createElement(\"i\", {\n        class: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'green',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 19\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        class: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'red',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 19\n        }\n      }), ' ') : ''));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: 'Popover-' + event.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 11\n        }\n      }, event.eventType === 'lesson' ? /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          fontFamily: 'Roboto',\n          fontSize: '17px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 15\n        }\n      }, ' ', /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 17\n        }\n      }, event.subjectName), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 17\n        }\n      }), ' ', event.profGender === 'Féminin' ? /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 19\n        }\n      }, \"Mme. \", event.profName, \" \", event.profSurname, \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 63\n        }\n      }), \" \", event.roomName, ' ', /*#__PURE__*/React.createElement(\"i\", {\n        class: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'green',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 21\n        }\n      }), ' ') : /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 19\n        }\n      }, \"M. \", event.profName, \" \", event.profSurname, \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 61\n        }\n      }), \" \", event.roomName, ' ', event.tagCallRegister ? /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'green',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 23\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'red',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 23\n        }\n      }), ' '), ' ') : event.eventType === 'exam' ? /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          fontFamily: 'Roboto',\n          fontSize: '17px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 15\n        }\n      }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.note.exam\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 17\n        }\n      }), \": \", /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 61\n        }\n      }, event.subjectName), \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 88\n        }\n      }), event.profGender === 'Féminin' ? /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 19\n        }\n      }, \"Mme. \", event.profName, \" \", event.profSurname, \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 63\n        }\n      }), \" \", event.roomName, ' ', /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'green',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 21\n        }\n      }), ' ') : /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 19\n        }\n      }, \"M. \", event.profName, \" \", event.profSurname, \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 61\n        }\n      }), \" \", event.roomName, ' ', event.tagCallRegister ? /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'green',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 23\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'red',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 23\n        }\n      }), ' ')) : ''));\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.userProfile !== this.props.userProfile) {\n      this.props.dispatch(getEventCallRegisterForAdmin(this.props.userProfile.establishment_id, this.props.userProfile.school_year_id, this.props.match.params.classId));\n      this.props.dispatch(getStudentsCallRegister(this.props.match.params.classId, this.props.userProfile.school_year_id));\n    }\n\n    if (prevProps.students !== this.props.students) {\n      this.setState({\n        callRegister: this.props.students\n      });\n    }\n\n    if (prevProps.events !== this.props.events) {\n      const startDateEvent = moment(this.props.match.params.startDate).format('DD/MM/YYYY HH:mm');\n      let eventSelected = this.props.events.filter(element => element.id === parseInt(this.props.match.params.eventId, 10) && moment(element.start).format('DD/MM/YYYY HH:mm') === startDateEvent);\n\n      if (!_.isEmpty(eventSelected)) {\n        const classId = eventSelected[0].classId;\n        let apiEndpoint = `/class_v4/${classId}?access_token=${localStorage.token}&filter[include][level][educationType][callRegisterSetting]`;\n        classService.get(apiEndpoint).then(res => {\n          if (res) {\n            let callRegisterSetting = res.data.level.educationType.callRegisterSetting;\n\n            if (!_.isEmpty(callRegisterSetting)) {\n              let callRegisterSetting = res.data.level.educationType.callRegisterSetting[0];\n              this.setState({\n                callRegisterSetting\n              });\n\n              if (callRegisterSetting.observation) {\n                this.props.dispatch(getObservationList());\n              }\n\n              if (callRegisterSetting.encouragement) {\n                this.props.dispatch(getEncouragementList());\n              }\n\n              if (callRegisterSetting.sanction) {\n                this.props.dispatch(getSanctionList());\n              }\n            } else {\n              this.setState({\n                isOpenAlert: true\n              });\n            }\n          }\n        });\n        let title = eventSelected[0].classeName + '/' + eventSelected[0].subjectName + '/' + new Date(eventSelected[0].start).toLocaleDateString('fr-FR', options);\n        this.setState({\n          title: title,\n          dateEvent: new Date(eventSelected[0].start).toLocaleDateString('fr-FR', options1),\n          event: eventSelected[0]\n        });\n      }\n    }\n\n    if (prevProps.observations !== this.props.observations) {\n      let options = [];\n      this.props.observations.forEach((element, index) => {\n        let option = {\n          label: element.name_fr,\n          value: element.value,\n          key: index\n        };\n        options.push(option);\n      });\n      this.setState({\n        observations: options\n      });\n    }\n\n    if (prevProps.encouragements !== this.props.encouragements) {\n      let options = [];\n      this.props.encouragements.forEach((element, index) => {\n        let option = {\n          label: element.name_fr,\n          value: element.value,\n          key: index\n        };\n        options.push(option);\n      });\n      this.setState({\n        encouragements: options\n      });\n    }\n\n    if (prevProps.sanctions !== this.props.sanctions) {\n      let options = [];\n      this.props.sanctions.forEach((element, index) => {\n        let option = {\n          label: element.name_fr,\n          value: element.value,\n          key: index\n        };\n        options.push(option);\n      });\n      this.setState({\n        sanctions: options\n      });\n    }\n  }\n\n  eventStyleGetter(event, start, end, isSelected) {\n    let diff = moment.utc(moment(event.end, 'DD/MM/YYYY HH:mm').diff(moment(event.start, 'DD/MM/YYYY HH:mm'))).format('HH:mm');\n    const mn = moment.duration(diff).asMinutes();\n    let height = mn * 1.3 * 0.33 + 'px';\n    var backgroundColor = event.subjectColor;\n    var style = {\n      backgroundColor: backgroundColor,\n      opacity: 0.8,\n      color: 'black',\n      border: '0px',\n      display: 'block',\n      borderRadius: '0px',\n      paddingTop: height\n    };\n    return {\n      style: style\n    };\n  }\n\n  render() {\n    let newMatch = {\n      path: '/app/assiduity/DetailsCallRegister',\n      url: this.props.match.url,\n      isExact: this.props.match.isExact,\n      params: this.props.match.params\n    }; // console.log(this.state,\"staaaaaate\");\n\n    const startDayTime = new Date('2020-11-30T07:00:00.000Z');\n    const endDayTime = new Date('2020-11-30T17:00:00.000Z');\n    let events = this.props.events ? this.props.events : [];\n\n    if (this.state.isRedirect == true) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: `/app/assiduity/call_register`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 730,\n          columnNumber: 14\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column    col-lg-12 col-md-12 col-sm-6 bd-highlight \",\n        style: {\n          paddingRight: 'auto',\n          paddingLeft: '2%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 733,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ContainerHeader, {\n        title: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"call_register\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 740,\n            columnNumber: 35\n          }\n        }),\n        match: newMatch,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 740,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column    col-lg-12 col-md-12 col-sm-6 bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 741,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pointer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 742,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        style: {\n          color: 'blue',\n          fontWeight: 'normal',\n          fontFamily: 'Roboto',\n          fontSize: '12px',\n          marginRight: '50%'\n        },\n        onClick: () => this.setState({\n          isRedirect: true\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 743,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"sidebar.components.assiduity\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 753,\n          columnNumber: 18\n        }\n      }), \"/\", /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"call_register\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 754,\n          columnNumber: 18\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" d-flex flex-row bd-highlight  justify-content-between  \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 758,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 759,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(ListItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 760,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(ListItemText, {\n        primary: /*#__PURE__*/React.createElement(\"div\", {\n          className: \" d-flex row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 763,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(Typography, {\n          variant: \"h6\",\n          style: {\n            color: '#3F51B5',\n            fontWeight: 'normal',\n            fontFamily: 'Roboto',\n            marginLeft: '-20px'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 764,\n            columnNumber: 25\n          }\n        }, this.state.title)),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 761,\n          columnNumber: 19\n        }\n      }), ' ')), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bd-highlight \",\n        style: {\n          fontSize: '13px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 780,\n          columnNumber: 15\n        }\n      }, moment(this.state.event.start).format('HH:mm'), \" \\xA0 \\xE0 \\xA0\", moment(this.state.event.end).format('HH:mm')), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 784,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(PrintIcon, {\n        style: {\n          fontSize: '35'\n        },\n        color: \"inherit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 785,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(PictureAsPdfIcon, {\n        style: {\n          fontSize: '35'\n        },\n        color: \"inherit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 791,\n          columnNumber: 17\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row col-lg-12 col-md-12 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 801,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row col-lg-12 col-md-12 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 802,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-xl-3 col-lg-4 col-md-7 col-sm-12 col-12 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 803,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(DragAndDropCalendar, {\n        style: {\n          backgroundColor: 'white'\n        },\n        localizer: localizer,\n        events: events,\n        defaultView: \"day\",\n        timeslots: 1,\n        min: startDayTime,\n        max: endDayTime,\n        eventPropGetter: this.eventStyleGetter,\n        defaultDate: new Date(this.props.match.params.startDate),\n        resizableAccessor: () => false,\n        messages: {\n          month: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"timetable.month\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 818,\n              columnNumber: 26\n            }\n          }),\n          day: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"timetable.day\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 819,\n              columnNumber: 24\n            }\n          }),\n          today: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"timetable.today\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 820,\n              columnNumber: 26\n            }\n          }),\n          previous: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"appModule.back\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 821,\n              columnNumber: 29\n            }\n          }),\n          next: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"appModule.next\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 822,\n              columnNumber: 25\n            }\n          }),\n          agenda: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"timetable.agenda\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 823,\n              columnNumber: 27\n            }\n          }),\n          week: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"timetable.week\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 824,\n              columnNumber: 25\n            }\n          })\n        },\n        onSelectEvent: event => this.changeEvent(event),\n        components: {\n          event: this.event,\n          toolbar: this.CustomToolbar\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 804,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 834,\n          columnNumber: 13\n        }\n      }, this.state.callRegister.slice(0, Math.ceil(this.state.callRegister.length / 2)).map((element, index) => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-wrap flex-row justify-content-around  bd-highlight card shadow\",\n        key: index,\n        id: 'Popover-' + element.studentId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 838,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mr-2 mt-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 843,\n          columnNumber: 21\n        }\n      }, ' ', /*#__PURE__*/React.createElement(Avatar, {\n        alt: \"...\",\n        src: \"\",\n        className: \"size-40\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 845,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mr-2  bd-highlight description\",\n        style: {\n          marginTop: '13px',\n          marginRight: '15px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 847,\n          columnNumber: 21\n        }\n      }, ' ', /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 852,\n          columnNumber: 23\n        }\n      }, element.name, \" \", element.surname)), this.state.callRegisterSetting.presence ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 857,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 858,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 859,\n          columnNumber: 27\n        }\n      }, ' ', /*#__PURE__*/React.createElement(Switch, {\n        classes: {\n          checked: 'text-success'\n        },\n        onChange: event => this.handleChangePresence(event, 'presence', element.studentId),\n        checked: element.presence,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 861,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        style: {\n          fontSize: '9px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 871,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.presence\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 872,\n          columnNumber: 29\n        }\n      })))) : '', this.state.callRegisterSetting.delay ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 880,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 881,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 882,\n          columnNumber: 27\n        }\n      }, ' ', /*#__PURE__*/React.createElement(AccessAlarmsIcon, {\n        style: {\n          color: element.delay ? 'black' : 'Grey'\n        },\n        onClick: event => this.handleChangeDelay(event, 'delay', element.studentId),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 884,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        style: {\n          fontSize: '9px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 893,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.retard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 894,\n          columnNumber: 29\n        }\n      })))) : '', this.state.callRegisterSetting.sanction ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 902,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 903,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 904,\n          columnNumber: 27\n        }\n      }, ' ', /*#__PURE__*/React.createElement(ReportIcon, {\n        style: {\n          color: element.sanction ? 'pink' : 'Grey'\n        },\n        onClick: event => this.handleChangeSanction(event, element.studentId, element),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 906,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        style: {\n          fontSize: '9px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 920,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.punition\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 921,\n          columnNumber: 29\n        }\n      })))) : '', this.state.callRegisterSetting.encouragement || this.state.callRegisterSetting.observation ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 930,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 931,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 932,\n          columnNumber: 27\n        }\n      }, ' ', /*#__PURE__*/React.createElement(AddCircleIcon, {\n        color: \"primary\",\n        onClick: event => this.handleChangeOther(event, element.studentId, element),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 934,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        style: {\n          fontSize: '9px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 941,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.autre\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 942,\n          columnNumber: 29\n        }\n      })))) : ''))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 953,\n          columnNumber: 13\n        }\n      }, this.state.callRegister.slice(Math.ceil(this.state.callRegister.length / 2), this.state.callRegister.length).map((element, index) => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-wrap flex-row justify-content-around  bd-highlight card shadow\",\n        key: index,\n        id: 'Popover-' + element.studentId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 960,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mr-2 mt-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 965,\n          columnNumber: 21\n        }\n      }, ' ', /*#__PURE__*/React.createElement(Avatar, {\n        alt: \"...\",\n        src: \"\",\n        className: \"size-40\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 967,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mr-2  bd-highlight description\",\n        style: {\n          marginTop: '13px',\n          marginRight: '15px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 969,\n          columnNumber: 21\n        }\n      }, ' ', /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 974,\n          columnNumber: 23\n        }\n      }, element.name, \" \", element.surname)), this.state.callRegisterSetting.presence ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 979,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 980,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 981,\n          columnNumber: 27\n        }\n      }, ' ', /*#__PURE__*/React.createElement(Switch, {\n        classes: {\n          checked: 'text-success'\n        },\n        onChange: event => this.handleChangePresence(event, 'presence', element.studentId),\n        checked: element.presence,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 983,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        style: {\n          fontSize: '9px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 993,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.presence\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 994,\n          columnNumber: 29\n        }\n      })))) : '', this.state.callRegisterSetting.delay ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1002,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1003,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1004,\n          columnNumber: 27\n        }\n      }, ' ', /*#__PURE__*/React.createElement(AccessAlarmsIcon, {\n        style: {\n          color: element.delay ? 'black' : 'Grey'\n        },\n        onClick: event => this.handleChangeDelay(event, 'delay', element.studentId),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1006,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        style: {\n          fontSize: '9px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1015,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.retard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1016,\n          columnNumber: 29\n        }\n      })))) : '', this.state.callRegisterSetting.sanction ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1024,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1025,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1026,\n          columnNumber: 27\n        }\n      }, ' ', /*#__PURE__*/React.createElement(ReportIcon, {\n        style: {\n          color: element.sanction ? 'pink' : 'Grey'\n        },\n        onClick: event => this.handleChangeSanction(event, element.studentId, element),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1028,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        style: {\n          fontSize: '9px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1037,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.punition\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1038,\n          columnNumber: 29\n        }\n      })))) : '', this.state.callRegisterSetting.encouragement || this.state.callRegisterSetting.observation ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1047,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1048,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1049,\n          columnNumber: 27\n        }\n      }, ' ', /*#__PURE__*/React.createElement(AddCircleIcon, {\n        color: \"primary\",\n        onClick: event => this.handleChangeOther(event, element.studentId, element),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1051,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        style: {\n          fontSize: '9px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1058,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.autre\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1059,\n          columnNumber: 29\n        }\n      })))) : '')), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-end mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1068,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        style: {\n          borderBottomLeftRadius: '16px',\n          borderBottomRightRadius: '16px',\n          borderTopLeftRadius: '16px',\n          borderTopRightRadius: '16px',\n          width: '100px',\n          height: '40px',\n          marginRight: '10%'\n        },\n        className: \" bg-indigo text-white \",\n        onClick: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1069,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"button.save.registreAppel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1083,\n          columnNumber: 19\n        }\n      }))))), this.state.isOpen ? /*#__PURE__*/React.createElement(OtherPopover, {\n        values: this.state,\n        handleCancel: this.handleCancel,\n        handleChange: this.handleChange,\n        handleChangeObservations: this.handleChangeObservations,\n        handleChangeEncouragement: this.handleChangeEncouragement,\n        handleSubmitOther: this.handleSubmitOther,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1090,\n          columnNumber: 13\n        }\n      }) : '', this.state.isOpenSanction ? /*#__PURE__*/React.createElement(SanctionPopover, {\n        values: this.state,\n        handleCancel: this.handleCancel,\n        handleSubmitSanction: this.handleSubmitSanction,\n        handleChangeSanctions: this.handleChangeSanctions,\n        handleChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1102,\n          columnNumber: 13\n        }\n      }) : '', /*#__PURE__*/React.createElement(SweetAlert, {\n        show: this.state.isOpenAlert,\n        title: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"alert.setting.call.register\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1114,\n            columnNumber: 20\n          }\n        }),\n        onConfirm: this.onConfirm,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1112,\n          columnNumber: 11\n        }\n      }));\n    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    settings: state.settings.locale.languageId,\n    events: state.planning.callRegisterEvents,\n    userProfile: state.auth.userProfile,\n    students: state.student.remoteStudents,\n    observations: state.callRegister.observations,\n    encouragements: state.callRegister.encouragements,\n    sanctions: state.callRegister.sanctions\n  };\n};\n\nexport default withStyles(styles)(connect(mapStateToProps)(DetailsCallRegister));","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Assiduity/routes/CallRegister/DetailsCallRegister.js"],"names":["React","IntlMessages","ListItem","ListItemText","connect","Avatar","Typography","moment","withStyles","Switch","AccessAlarmsIcon","ReportIcon","AddCircleIcon","PrintIcon","PictureAsPdfIcon","BigCalendar","withDragAndDrop","ButtonGroup","Button","_","getEventCallRegisterForAdmin","getEventCallRegisterForProf","Redirect","getStudentsCallRegister","ContainerHeader","roleIdProfessor","saveCallRegister","getObservationList","getEncouragementList","getSanctionList","classService","OtherPopover","SanctionPopover","SweetAlert","localizer","momentLocalizer","DragAndDropCalendar","styles","theme","textColorPrimary","color","options","weekday","day","month","options1","DetailsCallRegister","Component","constructor","props","changeEvent","event","setState","dateFormat","start","format","timeFormat","add","TimeDate","eventId","id","apiEndpoint","localStorage","token","get","then","res","console","log","data","length","historiqRegistre","studentCall","map","element","name","student","profile","user","surname","presence","delay","sanction","description_sanction","observation","description_observation","encouragement","description_encouragement","studentId","fk_id_student","photo","callRegister","students","handleChangeSanctions","selectedOption","sanctionSelected","handleChange","target","value","handleChangeEncouragement","encouragementSelected","handleChangeObservations","observationSelected","CustomToolbar","toolbar","dayCall","Date","date","goToBack","onNavigate","setDate","getDate","title","state","classeName","subjectName","toLocaleDateString","dateEvent","goToNext","curentDay","checkDate","isAfter","colorSelected","fontWeight","fontFamily","marginLeft","marginTop","isRedirect","callRegisterSetting","isOpen","sutdentId","observations","encouragements","sanctions","descriptionObservation","descriptionEncouragement","isOpenSanction","descriptionSanction","isOpenAlert","bind","handleChangePresence","handleChangeDelay","handleChangeSanction","handleSubmit","handleChangeOther","handleCancel","handleSubmitOther","handleSubmitSanction","onConfirm","preventDefault","filter","newCallRegister","parseInt","e","plannningEventsId","creatorProfileId","userProfile","startDate","endDate","end","callDate","_d","studentsCalls","otherData","classId","establishementId","establishment_id","schoolYearId","school_year_id","roleId","role_id","profileId","dispatch","UNSAFE_componentWillMount","match","params","startDateEvent","eventSelected","events","isEmpty","level","educationType","eventType","fontSize","roomName","tagCallRegister","float","profGender","profName","profSurname","componentDidUpdate","prevProps","forEach","index","option","label","name_fr","key","push","eventStyleGetter","isSelected","diff","utc","mn","duration","asMinutes","height","backgroundColor","subjectColor","style","opacity","border","display","borderRadius","paddingTop","render","newMatch","path","url","isExact","startDayTime","endDayTime","paddingRight","paddingLeft","marginRight","today","previous","next","agenda","week","slice","Math","ceil","checked","borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius","width","mapStateToProps","settings","locale","languageId","planning","callRegisterEvents","auth","remoteStudents"],"mappings":"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","sourcesContent":["import React from 'react';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { connect } from 'react-redux';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport moment from 'moment';\nimport { withStyles } from '@material-ui/core/styles';\nimport Switch from '@material-ui/core/Switch';\nimport AccessAlarmsIcon from '@material-ui/icons/AccessAlarms';\nimport ReportIcon from '@material-ui/icons/Report';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport PrintIcon from '@material-ui/icons/Print';\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\nimport BigCalendar from 'react-big-calendar';\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop';\nimport 'react-big-calendar/lib/addons/dragAndDrop/styles.css';\nimport { ButtonGroup } from 'reactstrap';\nimport Button from '@material-ui/core/Button';\nimport _ from 'lodash';\nimport {\n  getEventCallRegisterForAdmin,\n  getEventCallRegisterForProf,\n} from '../../../../../actions/planningActions';\nimport { Redirect } from 'react-router-dom';\nimport { getStudentsCallRegister } from '../../../../../actions/studentAction';\nimport ContainerHeader from '../../../../../components/ContainerHeader';\nimport { roleIdProfessor } from '../../../../../config/config';\nimport {\n  saveCallRegister,\n  getObservationList,\n  getEncouragementList,\n  getSanctionList,\n} from '../../../../../actions/RegistreAction';\nimport { classService } from '../../../../../_services/class.service';\nimport OtherPopover from './OtherPopover';\nimport SanctionPopover from './SanctionPopover';\nimport SweetAlert from 'react-bootstrap-sweetalert';\n\nconst localizer = BigCalendar.momentLocalizer(moment);\nconst DragAndDropCalendar = withDragAndDrop(BigCalendar);\nconst styles = (theme) => ({\n  textColorPrimary: {\n    color: 'red',\n  },\n});\n\nvar options = {\n  weekday: 'long',\n  day: 'numeric',\n  month: 'long',\n};\nvar options1 = {\n  day: 'numeric',\n  month: 'long',\n};\n\nclass DetailsCallRegister extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isRedirect: false,\n      colorSelected: '#C0C0C0',\n      title: '',\n      dateEvent: '',\n      callRegister: [],\n      event: {},\n      callRegisterSetting: {},\n      isOpen: false,\n      sutdentId: null,\n      observations: [],\n      encouragements: [],\n      sanctions: [],\n      observationSelected: [],\n      descriptionObservation: '',\n      encouragementSelected: [],\n      descriptionEncouragement: '',\n      isOpenSanction: false,\n      sanctionSelected: [],\n      descriptionSanction: '',\n      isOpenAlert: false,\n    };\n    this.CustomToolbar = this.CustomToolbar.bind(this);\n    this.event = this.event.bind(this);\n    this.handleChangePresence = this.handleChangePresence.bind(this);\n    this.handleChangeDelay = this.handleChangeDelay.bind(this);\n    this.handleChangeSanction = this.handleChangeSanction.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChangeOther = this.handleChangeOther.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeObservations = this.handleChangeObservations.bind(this);\n    this.handleChangeEncouragement = this.handleChangeEncouragement.bind(this);\n    this.handleSubmitOther = this.handleSubmitOther.bind(this);\n    this.handleSubmitSanction = this.handleSubmitSanction.bind(this);\n    this.handleChangeSanctions = this.handleChangeSanctions.bind(this);\n    this.onConfirm = this.onConfirm.bind(this);\n    this.changeEvent = this.changeEvent.bind(this);\n  }\n\n  changeEvent = (event) => {\n    this.setState({ event: event });\n    let dateFormat = moment(event.start).format('YYYY-MM-DD');\n    let timeFormat = moment(event.start)\n      .add(-1, 'h')\n      .format('HH:mm:ss[Z]');\n    let TimeDate = dateFormat + 'T' + timeFormat;\n    let eventId = event.id;\n\n    // let apiEndpoint = `/call_registers?access_token=${localStorage.token}?filter[where][and][0][fk_id_planning_events]=${124}&filter[where][and][1][start_date]=${TimeDate}`;\n\n    let apiEndpoint = `/call_registers?access_token=${localStorage.token}?filter[where][and][0][fk_id_planning_events]=${eventId}&filter[where][and][1][start_date]=${TimeDate}&filter[include][studentCall][student][profile][user]`;\n    classService.get(apiEndpoint).then((res) => {\n      if (res) {\n        console.log(TimeDate, 'TimeDate changeeeeeeee');\n        console.log(res.data, 'res.data changeeeeeeee');\n        if (res.data.length > 0) {\n          let historiqRegistre = res.data[0].studentCall.map((element) => {\n            return {\n              name: element.student.profile.user.name,\n              surname: element.student.profile.user.surname,\n              presence: element.presence,\n              delay: element.delay,\n              sanction: element.sanction,\n              description_sanction: element.description_sanction,\n              observation: element.observation,\n              description_observation: element.description_observation,\n              encouragement: element.encouragement,\n              description_encouragement: element.description_encouragement,\n              studentId: element.fk_id_student,\n              photo: element.student.profile.user.photo,\n            };\n          });\n\n          this.setState({ callRegister: historiqRegistre });\n        } else {\n          this.setState({ callRegister: this.props.students });\n        }\n      }\n    });\n  };\n\n  onConfirm() {\n    this.setState({ isOpenAlert: false });\n  }\n\n  handleChangeSanctions = (selectedOption) => {\n    this.setState({ sanctionSelected: selectedOption });\n  };\n\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n\n  handleChangeEncouragement = (selectedOption) => {\n    this.setState({ encouragementSelected: selectedOption });\n  };\n\n  handleChangeObservations = (selectedOption) => {\n    this.setState({ observationSelected: selectedOption });\n  };\n\n  handleCancel() {\n    this.setState({ isOpen: false, isOpenSanction: false });\n  }\n\n  handleChangeOther(event, id, student) {\n    console.log(student, 'otheeeer');\n    event.preventDefault();\n    let observationSelected = this.state.observations.filter(\n      (observation) => observation.value == student.observation\n    );\n    let encouragementSelected = this.state.encouragements.filter(\n      (encouragement) => encouragement.value == student.encouragement\n    );\n    this.setState({\n      isOpen: true,\n      sutdentId: id,\n      descriptionObservation: student.description_observation,\n      descriptionEncouragement: student.description_encouragement,\n      observationSelected,\n      encouragementSelected\n\n    });\n  }\n\n  handleChangePresence(event, name, id) {\n    event.preventDefault();\n\n    let newCallRegister = this.state.callRegister.map((studentCall) =>\n      studentCall.studentId === parseInt(id)\n        ? {\n            ...studentCall,\n            [name]: !studentCall.presence,\n          }\n        : studentCall\n    );\n    this.setState({ callRegister: newCallRegister });\n  }\n\n  handleChangeDelay(event, name, id) {\n    event.preventDefault();\n    let newCallRegister = this.state.callRegister.map((studentCall) =>\n      studentCall.studentId === parseInt(id)\n        ? {\n            ...studentCall,\n            [name]: !studentCall.delay,\n          }\n        : studentCall\n    );\n    this.setState({ callRegister: newCallRegister });\n  }\n\n  handleChangeSanction(event, id, student) {\n    let sanctionSelected = this.state.sanctions.filter(\n      (sanction) => sanction.value == student.sanction\n    );\n    event.preventDefault();\n    this.setState({\n      isOpenSanction: true,\n      sutdentId: id,\n      descriptionSanction: student.description_sanction,\n      sanctionSelected,\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    let callRegister = {\n      plannningEventsId: this.state.event.id,\n      creatorProfileId: this.props.userProfile.id,\n      startDate: this.state.event.start,\n      endDate: this.state.event.end,\n      callDate: moment()._d,\n      studentsCalls: this.state.callRegister,\n    };\n    let otherData = {\n      classId: this.state.event.classId,\n      establishementId: this.props.userProfile.establishment_id,\n      schoolYearId: this.props.userProfile.school_year_id,\n      roleId: this.props.userProfile.role_id,\n      profileId: this.props.userProfile.id,\n    };\n    this.props.dispatch(saveCallRegister(callRegister, otherData));\n    this.setState({ isRedirect: true });\n  }\n\n  handleSubmitOther(e, id) {\n    e.preventDefault();\n    this.setState({ isOpen: false });\n\n    let newCallRegister = this.state.callRegister.map((studentCall) =>\n      studentCall.studentId === parseInt(id)\n        ? {\n            ...studentCall,\n            observation: this.state.observationSelected.value,\n            description_observation: this.state.descriptionObservation,\n            encouragement: this.state.encouragementSelected.value,\n            description_encouragement: this.state.descriptionEncouragement,\n          }\n        : studentCall\n    );\n    this.setState({\n      callRegister: newCallRegister,\n      observationSelected: '',\n      descriptionObservation: '',\n      encouragementSelected: '',\n      descriptionEncouragement: '',\n    });\n  }\n\n  handleSubmitSanction(e, id) {\n    e.preventDefault();\n    this.setState({ isOpenSanction: false });\n    let newCallRegister = this.state.callRegister.map((studentCall) =>\n      studentCall.studentId === parseInt(id)\n        ? {\n            ...studentCall,\n            sanction: this.state.sanctionSelected.value,\n            description_sanction: this.state.descriptionSanction,\n          }\n        : studentCall\n    );\n    this.setState({\n      callRegister: newCallRegister,\n      sanctionSelected: '',\n      descriptionSanction: '',\n    });\n  }\n\n  UNSAFE_componentWillMount() {\n    this.props.dispatch(\n      getEventCallRegisterForAdmin(\n        this.props.userProfile.establishment_id,\n        this.props.userProfile.school_year_id,\n        this.props.match.params.classId\n      )\n    );\n    let dateFormat = moment(this.props.match.params.startDate).format('YYYY-MM-DD');\n    let timeFormat = moment(this.props.match.params.startDate)\n      .add(-1, 'h')\n      .format('HH:mm:ss[Z]');\n    let TimeDate = dateFormat + 'T' + timeFormat;\n    let eventId = this.props.match.params.eventId;\n    let apiEndpoint = `/call_registers?access_token=${localStorage.token}?filter[where][and][0][fk_id_planning_events]=${eventId}&filter[where][and][1][start_date]=${TimeDate}&filter[include][studentCall][student][profile][user]`;\n    classService.get(apiEndpoint).then((res) => {\n      if (res) {\n        if (res.data.length > 0) {\n          console.log(TimeDate, 'TimeDate TimeDate');\n          console.log(res.data, 'ressssssssss');\n          let historiqRegistre = res.data[0].studentCall.map((element) => {\n            return {\n              name: element.student.profile.user.name,\n              surname: element.student.profile.user.surname,\n              presence: element.presence,\n              delay: element.delay,\n              sanction: element.sanction,\n              description_sanction: element.description_sanction,\n              observation: element.observation,\n              description_observation: element.description_observation,\n              encouragement: element.encouragement,\n              description_encouragement: element.description_encouragement,\n              studentId: element.fk_id_student,\n              photo: element.student.profile.user.photo,\n            };\n          });\n\n          this.setState({ callRegister: historiqRegistre });\n        } else {\n          this.setState({ callRegister: this.props.students });\n        }\n      }\n    });\n    const startDateEvent = moment(this.props.match.params.startDate).format('DD/MM/YYYY HH:mm');\n    let eventSelected = this.props.events.filter(\n      (element) =>\n        element.id === parseInt(this.props.match.params.eventId, 10) &&\n        moment(element.start).format('DD/MM/YYYY HH:mm') === startDateEvent\n    );\n\n    if (!_.isEmpty(eventSelected)) {\n      const classId = eventSelected[0].classId;\n      let apiEndpoint = `/class_v4/${classId}?access_token=${localStorage.token}&filter[include][level][educationType][callRegisterSetting]`;\n      classService.get(apiEndpoint).then((res) => {\n        if (res) {\n          let callRegisterSetting = res.data.level.educationType.callRegisterSetting;\n          if (!_.isEmpty(callRegisterSetting)) {\n            let callRegisterSetting = res.data.level.educationType.callRegisterSetting[0];\n            this.setState({ callRegisterSetting });\n            if (callRegisterSetting.observation) {\n              this.props.dispatch(getObservationList());\n            }\n            if (callRegisterSetting.encouragement) {\n              this.props.dispatch(getEncouragementList());\n            }\n            if (callRegisterSetting.sanction) {\n              this.props.dispatch(getSanctionList());\n            }\n          } else {\n            this.setState({ isOpenAlert: true });\n          }\n        }\n      });\n      let title =\n        eventSelected[0].classeName +\n        '/' +\n        eventSelected[0].subjectName +\n        '/' +\n        new Date(eventSelected[0].start).toLocaleDateString('fr-FR', options);\n\n      let curentDay = new Date();\n      let checkDate = moment(eventSelected[0].start).isAfter(curentDay);\n      if (!checkDate) {\n        this.setState({ colorSelected: '#0000CD' });\n      }\n      this.setState({\n        title: title,\n        dateEvent: new Date(eventSelected[0].start).toLocaleDateString('fr-FR', options1),\n        event: eventSelected[0],\n      });\n    }\n  }\n\n  event({ event }) {\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      return (\n        <div id={'Popover-' + event.id}>\n          <span>\n            {event.eventType === 'lesson' ? (\n              <p style={{ fontFamily: 'Roboto', fontSize: '17px' }}>\n                {' '}\n                <b>{event.subjectName}</b> <br /> {event.roomName}{' '}\n                {event.tagCallRegister ? (\n                  <i\n                    class=\"zmdi zmdi-circle zmdi-hc-lg \"\n                    style={{ color: 'green', float: 'right' }}\n                  ></i>\n                ) : (\n                  <i\n                    class=\"zmdi zmdi-circle zmdi-hc-lg \"\n                    style={{ color: 'red', float: 'right' }}\n                  ></i>\n                )}{' '}\n              </p>\n            ) : event.eventType === 'exam' ? (\n              <p style={{ fontFamily: 'Roboto', fontSize: '17px' }}>\n                {' '}\n                <IntlMessages id=\"components.note.exam\" /> <b>{event.subjectName}</b> <br />{' '}\n                {event.roomName}{' '}\n                {event.tagCallRegister ? (\n                  <i\n                    class=\"zmdi zmdi-circle zmdi-hc-lg \"\n                    style={{ color: 'green', float: 'right' }}\n                  ></i>\n                ) : (\n                  <i\n                    class=\"zmdi zmdi-circle zmdi-hc-lg \"\n                    style={{ color: 'red', float: 'right' }}\n                  ></i>\n                )}{' '}\n              </p>\n            ) : (\n              ''\n            )}\n          </span>\n        </div>\n      );\n    } else {\n      return (\n        <div id={'Popover-' + event.id}>\n          <span>\n            {event.eventType === 'lesson' ? (\n              <div style={{ fontFamily: 'Roboto', fontSize: '17px' }}>\n                {' '}\n                <b>{event.subjectName}</b>\n                <br />{' '}\n                {event.profGender === 'Féminin' ? (\n                  <p>\n                    Mme. {event.profName} {event.profSurname} <br /> {event.roomName}{' '}\n                    <i\n                      class=\"zmdi zmdi-circle zmdi-hc-lg \"\n                      style={{ color: 'green', float: 'right' }}\n                    ></i>{' '}\n                  </p>\n                ) : (\n                  <p>\n                    M. {event.profName} {event.profSurname} <br /> {event.roomName}{' '}\n                    {event.tagCallRegister ? (\n                      <i\n                        className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                        style={{ color: 'green', float: 'right' }}\n                      ></i>\n                    ) : (\n                      <i\n                        className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                        style={{ color: 'red', float: 'right' }}\n                      ></i>\n                    )}{' '}\n                  </p>\n                )}{' '}\n              </div>\n            ) : event.eventType === 'exam' ? (\n              <div style={{ fontFamily: 'Roboto', fontSize: '17px' }}>\n                {' '}\n                <IntlMessages id=\"components.note.exam\" />: <b>{event.subjectName}</b> <br />\n                {event.profGender === 'Féminin' ? (\n                  <p>\n                    Mme. {event.profName} {event.profSurname} <br /> {event.roomName}{' '}\n                    <i\n                      className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                      style={{ color: 'green', float: 'right' }}\n                    ></i>{' '}\n                  </p>\n                ) : (\n                  <p>\n                    M. {event.profName} {event.profSurname} <br /> {event.roomName}{' '}\n                    {event.tagCallRegister ? (\n                      <i\n                        className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                        style={{ color: 'green', float: 'right' }}\n                      ></i>\n                    ) : (\n                      <i\n                        className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                        style={{ color: 'red', float: 'right' }}\n                      ></i>\n                    )}{' '}\n                  </p>\n                )}\n              </div>\n            ) : (\n              ''\n            )}\n          </span>\n        </div>\n      );\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.userProfile !== this.props.userProfile) {\n      this.props.dispatch(\n        getEventCallRegisterForAdmin(\n          this.props.userProfile.establishment_id,\n          this.props.userProfile.school_year_id,\n          this.props.match.params.classId\n        )\n      );\n      this.props.dispatch(\n        getStudentsCallRegister(\n          this.props.match.params.classId,\n          this.props.userProfile.school_year_id\n        )\n      );\n    }\n    if (prevProps.students !== this.props.students) {\n      this.setState({ callRegister: this.props.students });\n    }\n\n    if (prevProps.events !== this.props.events) {\n      const startDateEvent = moment(this.props.match.params.startDate).format('DD/MM/YYYY HH:mm');\n      let eventSelected = this.props.events.filter(\n        (element) =>\n          element.id === parseInt(this.props.match.params.eventId, 10) &&\n          moment(element.start).format('DD/MM/YYYY HH:mm') === startDateEvent\n      );\n\n      if (!_.isEmpty(eventSelected)) {\n        const classId = eventSelected[0].classId;\n\n        let apiEndpoint = `/class_v4/${classId}?access_token=${localStorage.token}&filter[include][level][educationType][callRegisterSetting]`;\n        classService.get(apiEndpoint).then((res) => {\n          if (res) {\n            let callRegisterSetting = res.data.level.educationType.callRegisterSetting;\n            if (!_.isEmpty(callRegisterSetting)) {\n              let callRegisterSetting = res.data.level.educationType.callRegisterSetting[0];\n              this.setState({ callRegisterSetting });\n              if (callRegisterSetting.observation) {\n                this.props.dispatch(getObservationList());\n              }\n              if (callRegisterSetting.encouragement) {\n                this.props.dispatch(getEncouragementList());\n              }\n              if (callRegisterSetting.sanction) {\n                this.props.dispatch(getSanctionList());\n              }\n            } else {\n              this.setState({ isOpenAlert: true });\n            }\n          }\n        });\n        let title =\n          eventSelected[0].classeName +\n          '/' +\n          eventSelected[0].subjectName +\n          '/' +\n          new Date(eventSelected[0].start).toLocaleDateString('fr-FR', options);\n        this.setState({\n          title: title,\n          dateEvent: new Date(eventSelected[0].start).toLocaleDateString('fr-FR', options1),\n          event: eventSelected[0],\n        });\n      }\n    }\n\n    if (prevProps.observations !== this.props.observations) {\n      let options = [];\n      this.props.observations.forEach((element, index) => {\n        let option = {\n          label: element.name_fr,\n          value: element.value,\n          key: index,\n        };\n        options.push(option);\n      });\n      this.setState({ observations: options });\n    }\n    if (prevProps.encouragements !== this.props.encouragements) {\n      let options = [];\n      this.props.encouragements.forEach((element, index) => {\n        let option = {\n          label: element.name_fr,\n          value: element.value,\n          key: index,\n        };\n        options.push(option);\n      });\n      this.setState({ encouragements: options });\n    }\n    if (prevProps.sanctions !== this.props.sanctions) {\n      let options = [];\n      this.props.sanctions.forEach((element, index) => {\n        let option = {\n          label: element.name_fr,\n          value: element.value,\n          key: index,\n        };\n        options.push(option);\n      });\n      this.setState({ sanctions: options });\n    }\n  }\n\n  CustomToolbar = (toolbar) => {\n    let dayCall = new Date(toolbar.date);\n    const goToBack = () => {\n      toolbar.onNavigate('PREV');\n      dayCall.setDate(dayCall.getDate() + -1);\n      let title =\n        this.state.event.classeName +\n        '/' +\n        this.state.event.subjectName +\n        '/' +\n        new Date(dayCall).toLocaleDateString('fr-FR', options);\n      this.setState({\n        title: title,\n        dateEvent: new Date(dayCall).toLocaleDateString('fr-FR', options1),\n      });\n    };\n\n    const goToNext = () => {\n      dayCall.setDate(dayCall.getDate() + 1);\n      let curentDay = new Date();\n      let checkDate = moment(dayCall).isAfter(curentDay);\n      if (!checkDate) {\n        toolbar.onNavigate('NEXT');\n        let title =\n          this.state.event.classeName +\n          '/' +\n          this.state.event.subjectName +\n          '/' +\n          new Date(dayCall).toLocaleDateString('fr-FR', options);\n        this.setState({\n          title: title,\n          dateEvent: new Date(dayCall).toLocaleDateString('fr-FR', options1),\n          colorSelected: '#0000CD',\n        });\n      } else {\n        this.setState({ colorSelected: '#C0C0C0' });\n      }\n    };\n\n    return (\n      <div\n        className=\"d-flex flex-row bd-highlight mb-3 d-flex \njustify-content-around\"\n      >\n        <div className=\"p-2 bd-highlight\"></div>\n        <div className=\"p-2 bd-highlight\">\n          <ButtonGroup vertical={false}>\n            <Button className=\" jr-btn active\">\n              <span className=\"label-filter-off\">\n                <IntlMessages id=\"timetable.day\" />\n              </span>\n            </Button>\n            <Button className=\"jr-btn\" disabled={true}>\n              <span className=\"label-filter-off\">\n                {' '}\n                <IntlMessages id=\"timetable.week\" />\n              </span>\n            </Button>\n            <Button className=\"jr-btn\" disabled={true}>\n              <span className=\"label-filter-off\">\n                <IntlMessages id=\"timetable.month\" />\n              </span>\n            </Button>\n          </ButtonGroup>\n          <Typography\n            variant=\"h6\"\n            style={{\n              color: '#3F51B5',\n              fontWeight: 'normal',\n              fontFamily: 'Roboto',\n              marginLeft: '60px',\n              marginTop: '20px',\n            }}\n          >\n            <i\n              className=\"zmdi zmdi-chevron-left zmdi-hc-1x mr-3\"\n              style={{ color: '#0000CD' }}\n              onClick={goToBack}\n            ></i>\n            {this.state.dateEvent}\n            <i\n              className=\"zmdi zmdi-chevron-right zmdi-hc-1x ml-3\"\n              style={{ color: this.state.colorSelected }}\n              onClick={goToNext}\n            ></i>\n          </Typography>\n        </div>\n      </div>\n    );\n  };\n\n  eventStyleGetter(event, start, end, isSelected) {\n    let diff = moment\n      .utc(moment(event.end, 'DD/MM/YYYY HH:mm').diff(moment(event.start, 'DD/MM/YYYY HH:mm')))\n      .format('HH:mm');\n    const mn = moment.duration(diff).asMinutes();\n    let height = mn * 1.3 * 0.33 + 'px';\n    var backgroundColor = event.subjectColor;\n    var style = {\n      backgroundColor: backgroundColor,\n      opacity: 0.8,\n      color: 'black',\n      border: '0px',\n      display: 'block',\n      borderRadius: '0px',\n      paddingTop: height,\n    };\n    return {\n      style: style,\n    };\n  }\n\n  render() {\n    let newMatch = {\n      path: '/app/assiduity/DetailsCallRegister',\n      url: this.props.match.url,\n      isExact: this.props.match.isExact,\n      params: this.props.match.params,\n    };\n    // console.log(this.state,\"staaaaaate\");\n    const startDayTime = new Date('2020-11-30T07:00:00.000Z');\n    const endDayTime = new Date('2020-11-30T17:00:00.000Z');\n    let events = this.props.events ? this.props.events : [];\n    if (this.state.isRedirect == true) {\n      return <Redirect to={`/app/assiduity/call_register`} />;\n    } else {\n      return (\n        <div\n          className=\"d-flex flex-column    col-lg-12 col-md-12 col-sm-6 bd-highlight \"\n          style={{\n            paddingRight: 'auto',\n            paddingLeft: '2%',\n          }}\n        >\n          <ContainerHeader title={<IntlMessages id=\"call_register\" />} match={newMatch} />\n          <div className=\"d-flex flex-column    col-lg-12 col-md-12 col-sm-6 bd-highlight \">\n            <div className=\"pointer\">\n              <h5\n                style={{\n                  color: 'blue',\n                  fontWeight: 'normal',\n                  fontFamily: 'Roboto',\n                  fontSize: '12px',\n                  marginRight: '50%',\n                }}\n                onClick={() => this.setState({ isRedirect: true })}\n              >\n                {<IntlMessages id=\"sidebar.components.assiduity\" />}/\n                {<IntlMessages id=\"call_register\" />}\n              </h5>\n            </div>\n\n            <div className=\" d-flex flex-row bd-highlight  justify-content-between  \">\n              <div className=\"bd-highlight\">\n                <ListItem>\n                  <ListItemText\n                    primary={\n                      <div className=\" d-flex row\">\n                        <Typography\n                          variant=\"h6\"\n                          style={{\n                            color: '#3F51B5',\n                            fontWeight: 'normal',\n                            fontFamily: 'Roboto',\n                            marginLeft: '-20px',\n                          }}\n                        >\n                          {this.state.title}\n                        </Typography>\n                      </div>\n                    }\n                  />{' '}\n                </ListItem>\n              </div>\n              <div className=\"bd-highlight \" style={{ fontSize: '13px' }}>\n                {moment(this.state.event.start).format('HH:mm')} &nbsp; à &nbsp;\n                {moment(this.state.event.end).format('HH:mm')}\n              </div>\n              <div className=\" bd-highlight \">\n                <PrintIcon\n                  style={{\n                    fontSize: '35',\n                  }}\n                  color=\"inherit\"\n                />\n                <PictureAsPdfIcon\n                  style={{\n                    fontSize: '35',\n                  }}\n                  color=\"inherit\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"row col-lg-12 col-md-12 \">\n            <div className=\"row col-lg-12 col-md-12 \"></div>\n            <div className=\"col-xl-3 col-lg-4 col-md-7 col-sm-12 col-12 \">\n              <DragAndDropCalendar\n                style={{\n                  backgroundColor: 'white',\n                }}\n                localizer={localizer}\n                events={events}\n                defaultView=\"day\"\n                timeslots={1}\n                min={startDayTime}\n                max={endDayTime}\n                eventPropGetter={this.eventStyleGetter}\n                defaultDate={new Date(this.props.match.params.startDate)}\n                resizableAccessor={() => false}\n                messages={{\n                  month: <IntlMessages id=\"timetable.month\" />,\n                  day: <IntlMessages id=\"timetable.day\" />,\n                  today: <IntlMessages id=\"timetable.today\" />,\n                  previous: <IntlMessages id=\"appModule.back\" />,\n                  next: <IntlMessages id=\"appModule.next\" />,\n                  agenda: <IntlMessages id=\"timetable.agenda\" />,\n                  week: <IntlMessages id=\"timetable.week\" />,\n                }}\n                onSelectEvent={(event) => this.changeEvent(event)}\n                components={{\n                  event: this.event,\n                  toolbar: this.CustomToolbar,\n                }}\n              />\n            </div>\n\n            <div className=\"col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12 \">\n              {this.state.callRegister\n                .slice(0, Math.ceil(this.state.callRegister.length / 2))\n                .map((element, index) => (\n                  <div\n                    className=\"d-flex flex-wrap flex-row justify-content-around  bd-highlight card shadow\"\n                    key={index}\n                    id={'Popover-' + element.studentId}\n                  >\n                    <div className=\"mr-2 mt-2 bd-highlight\">\n                      {' '}\n                      <Avatar alt=\"...\" src=\"\" className=\"size-40\" />\n                    </div>\n                    <div\n                      className=\"mr-2  bd-highlight description\"\n                      style={{ marginTop: '13px', marginRight: '15px' }}\n                    >\n                      {' '}\n                      <h5>\n                        {element.name} {element.surname}\n                      </h5>\n                    </div>\n                    {this.state.callRegisterSetting.presence ? (\n                      <div className=\" bd-highlight\">\n                        <div className=\"d-flex flex-column bd-highlight \">\n                          <div className=\" bd-highlight\">\n                            {' '}\n                            <Switch\n                              classes={{\n                                checked: 'text-success',\n                              }}\n                              onChange={(event) =>\n                                this.handleChangePresence(event, 'presence', element.studentId)\n                              }\n                              checked={element.presence}\n                            />\n                          </div>\n                          <div className=\" bd-highlight\" style={{ fontSize: '9px' }}>\n                            <IntlMessages id=\"timetable.presence\" />\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      ''\n                    )}\n                    {this.state.callRegisterSetting.delay ? (\n                      <div className=\"p-2 bd-highlight\">\n                        <div className=\"d-flex flex-column bd-highlight \">\n                          <div className=\" bd-highlight\">\n                            {' '}\n                            <AccessAlarmsIcon\n                              style={{\n                                color: element.delay ? 'black' : 'Grey',\n                              }}\n                              onClick={(event) =>\n                                this.handleChangeDelay(event, 'delay', element.studentId)\n                              }\n                            />\n                          </div>\n                          <div className=\" bd-highlight\" style={{ fontSize: '9px' }}>\n                            <IntlMessages id=\"timetable.retard\" />\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      ''\n                    )}\n                    {this.state.callRegisterSetting.sanction ? (\n                      <div className=\"p-2 bd-highlight\">\n                        <div className=\"d-flex flex-column bd-highlight \">\n                          <div className=\" bd-highlight\">\n                            {' '}\n                            <ReportIcon\n                              style={{\n                                color: element.sanction ? 'pink' : 'Grey',\n                              }}\n                              onClick={(event) =>\n                                this.handleChangeSanction(\n                                  event,\n\n                                  element.studentId,\n                                  element\n                                )\n                              }\n                            />\n                          </div>\n                          <div className=\" bd-highlight\" style={{ fontSize: '9px' }}>\n                            <IntlMessages id=\"timetable.punition\" />\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      ''\n                    )}\n                    {this.state.callRegisterSetting.encouragement ||\n                    this.state.callRegisterSetting.observation ? (\n                      <div className=\"p-2 bd-highlight\">\n                        <div className=\"d-flex flex-column bd-highlight \">\n                          <div className=\" bd-highlight\">\n                            {' '}\n                            <AddCircleIcon\n                              color=\"primary\"\n                              onClick={(event) =>\n                                this.handleChangeOther(event, element.studentId, element)\n                              }\n                            />\n                          </div>\n                          <div className=\" bd-highlight\" style={{ fontSize: '9px' }}>\n                            <IntlMessages id=\"timetable.autre\" />\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      ''\n                    )}\n                  </div>\n                ))}\n            </div>\n\n            <div className=\"col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12 \">\n              {this.state.callRegister\n                .slice(\n                  Math.ceil(this.state.callRegister.length / 2),\n                  this.state.callRegister.length\n                )\n                .map((element, index) => (\n                  <div\n                    className=\"d-flex flex-wrap flex-row justify-content-around  bd-highlight card shadow\"\n                    key={index}\n                    id={'Popover-' + element.studentId}\n                  >\n                    <div className=\"mr-2 mt-2 bd-highlight\">\n                      {' '}\n                      <Avatar alt=\"...\" src=\"\" className=\"size-40\" />\n                    </div>\n                    <div\n                      className=\"mr-2  bd-highlight description\"\n                      style={{ marginTop: '13px', marginRight: '15px' }}\n                    >\n                      {' '}\n                      <h5>\n                        {element.name} {element.surname}\n                      </h5>\n                    </div>\n                    {this.state.callRegisterSetting.presence ? (\n                      <div className=\" bd-highlight\">\n                        <div className=\"d-flex flex-column bd-highlight \">\n                          <div className=\" bd-highlight\">\n                            {' '}\n                            <Switch\n                              classes={{\n                                checked: 'text-success',\n                              }}\n                              onChange={(event) =>\n                                this.handleChangePresence(event, 'presence', element.studentId)\n                              }\n                              checked={element.presence}\n                            />\n                          </div>\n                          <div className=\" bd-highlight\" style={{ fontSize: '9px' }}>\n                            <IntlMessages id=\"timetable.presence\" />\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      ''\n                    )}\n                    {this.state.callRegisterSetting.delay ? (\n                      <div className=\"p-2 bd-highlight\">\n                        <div className=\"d-flex flex-column bd-highlight \">\n                          <div className=\" bd-highlight\">\n                            {' '}\n                            <AccessAlarmsIcon\n                              style={{\n                                color: element.delay ? 'black' : 'Grey',\n                              }}\n                              onClick={(event) =>\n                                this.handleChangeDelay(event, 'delay', element.studentId)\n                              }\n                            />\n                          </div>\n                          <div className=\" bd-highlight\" style={{ fontSize: '9px' }}>\n                            <IntlMessages id=\"timetable.retard\" />\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      ''\n                    )}\n                    {this.state.callRegisterSetting.sanction ? (\n                      <div className=\"p-2 bd-highlight\">\n                        <div className=\"d-flex flex-column bd-highlight \">\n                          <div className=\" bd-highlight\">\n                            {' '}\n                            <ReportIcon\n                              style={{\n                                color: element.sanction ? 'pink' : 'Grey',\n                              }}\n                              onClick={(event) =>\n                                this.handleChangeSanction(event, element.studentId, element)\n                              }\n                            />\n                          </div>\n                          <div className=\" bd-highlight\" style={{ fontSize: '9px' }}>\n                            <IntlMessages id=\"timetable.punition\" />\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      ''\n                    )}\n                    {this.state.callRegisterSetting.encouragement ||\n                    this.state.callRegisterSetting.observation ? (\n                      <div className=\"p-2 bd-highlight\">\n                        <div className=\"d-flex flex-column bd-highlight \">\n                          <div className=\" bd-highlight\">\n                            {' '}\n                            <AddCircleIcon\n                              color=\"primary\"\n                              onClick={(event) =>\n                                this.handleChangeOther(event, element.studentId, element)\n                              }\n                            />\n                          </div>\n                          <div className=\" bd-highlight\" style={{ fontSize: '9px' }}>\n                            <IntlMessages id=\"timetable.autre\" />\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      ''\n                    )}\n                  </div>\n                ))}\n              <div className=\"d-flex justify-content-end mt-5\">\n                <Button\n                  variant=\"contained\"\n                  style={{\n                    borderBottomLeftRadius: '16px',\n                    borderBottomRightRadius: '16px',\n                    borderTopLeftRadius: '16px',\n                    borderTopRightRadius: '16px',\n                    width: '100px',\n                    height: '40px',\n                    marginRight: '10%',\n                  }}\n                  className=\" bg-indigo text-white \"\n                  onClick={this.handleSubmit}\n                >\n                  <IntlMessages id=\"button.save.registreAppel\" />\n                </Button>\n              </div>\n            </div>\n          </div>\n\n          {this.state.isOpen ? (\n            <OtherPopover\n              values={this.state}\n              handleCancel={this.handleCancel}\n              handleChange={this.handleChange}\n              handleChangeObservations={this.handleChangeObservations}\n              handleChangeEncouragement={this.handleChangeEncouragement}\n              handleSubmitOther={this.handleSubmitOther}\n            />\n          ) : (\n            ''\n          )}\n          {this.state.isOpenSanction ? (\n            <SanctionPopover\n              values={this.state}\n              handleCancel={this.handleCancel}\n              handleSubmitSanction={this.handleSubmitSanction}\n              handleChangeSanctions={this.handleChangeSanctions}\n              handleChange={this.handleChange}\n            />\n          ) : (\n            ''\n          )}\n          <SweetAlert\n            show={this.state.isOpenAlert}\n            title={<IntlMessages id=\"alert.setting.call.register\" />}\n            onConfirm={this.onConfirm}\n          ></SweetAlert>\n        </div>\n      );\n    }\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    settings: state.settings.locale.languageId,\n    events: state.planning.callRegisterEvents,\n    userProfile: state.auth.userProfile,\n    students: state.student.remoteStudents,\n    observations: state.callRegister.observations,\n    encouragements: state.callRegister.encouragements,\n    sanctions: state.callRegister.sanctions,\n  };\n};\nexport default withStyles(styles)(connect(mapStateToProps)(DetailsCallRegister));\n"]},"metadata":{},"sourceType":"module"}