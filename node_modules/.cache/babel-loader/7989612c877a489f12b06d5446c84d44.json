{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Learning/routes/Homeworks/Homework.js\";\nimport React from \"react\";\nimport IconWithTextCard from \"../../../CommonComponents/IconWithTextCard\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport HomeworkInProgress from \"./HomeworkInProgress\";\nimport CardBox from \"../../../../../components/CardBox/index\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport Fab from \"@material-ui/core/Fab\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport RemoveSharpIcon from \"@material-ui/icons/RemoveSharp\";\nimport { connect } from \"react-redux\";\nimport AddHomework from \"./AddHomework\";\nimport { UncontrolledAlert } from \"reactstrap\";\nimport { classService } from \"../../../../../_services/class.service\";\nimport HomeworkList from \"./HomeworkList\";\nimport _ from \"lodash\";\nimport { addNewHomework } from \"../../../../../actions/HomeworkAction\";\n\nclass Homework extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangeClassList = selectedOption => {\n      this.setState({\n        classesId: [selectedOption.value]\n      });\n    };\n\n    this.handleChangeClass = name => event => {\n      if (_.isEmpty(this.state.classes)) {\n        this.setState({\n          errorClass: true\n        });\n      } else {\n        this.setState({\n          [name]: event.target.value\n        });\n        this.setState({\n          errorClass: false\n        });\n\n        if (event.target.value === \"allClasses\") {\n          let classesId = _.map(this.state.classes, \"id\");\n\n          this.setState({\n            classesId\n          });\n        } else {\n          this.setState({\n            classesList: this.state.classes\n          });\n        }\n      }\n    };\n\n    this.handleChangePublicationDate = date => {\n      this.setState({\n        publicationDate: date\n      });\n    };\n\n    this.handleChangePostTime = time => {\n      this.setState({\n        postTime: time._d\n      });\n    };\n\n    this.handleChangeSubject = selectedOption => {\n      this.setState({\n        subjectId: selectedOption.value,\n        subjectColor: selectedOption.color,\n        errorClass: false\n      });\n      let apiEndpoint = `/assignment_class_subjects?access_token=${localStorage.token}&filter[where][fk_id_subject_v4]=${selectedOption.value}&filter[include][class]`;\n      classService.get(apiEndpoint).then(response => {\n        if (response) {\n          let newList = response.data.map(element => {\n            let object = {};\n            object.label = element.class.name;\n            object.id = element.fk_id_class_v4;\n            object.value = element.fk_id_class_v4;\n            return object;\n          });\n          this.setState({\n            classes: newList\n          });\n        }\n      });\n    };\n\n    this.handleChangeHomeworkType = selectedOption => {\n      this.setState({\n        HomeworkType: selectedOption.value\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.state = {\n      isOpenAddModal: false,\n      nameFile: \"\",\n      HomeworkTypes: [{\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"toDo.book.exercise\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 18\n          }\n        }),\n        value: \"book\",\n        id: 1\n      }, {\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"toDo.series.exercise\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 18\n          }\n        }),\n        value: \"serie\",\n        id: 2\n      }, {\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"toDo.other.exercise\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 18\n          }\n        }),\n        value: \"other\",\n        id: 3\n      }],\n      homeworkType: \"\",\n      subjectId: null,\n      subjectColor: \"\",\n      description: \"\",\n      courseUrl: \"\",\n      homeworkFiles: [],\n      nameFiles: [],\n      publicationDate: new Date(),\n      postTime: new Date(),\n      classes: [],\n      subjects: [],\n      eventChecked: \"\",\n      classesId: [],\n      errorClass: false,\n      classesList: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeHomeworkType = this.handleChangeHomeworkType.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.attachFile = this.attachFile.bind(this);\n    this.deleteFile = this.deleteFile.bind(this);\n    this.handleChangePostTime = this.handleChangePostTime.bind(this);\n    this.handleChangePublicationDate = this.handleChangePublicationDate.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleChangeClassList = this.handleChangeClassList.bind(this);\n    this.addNewHomework = this.addNewHomework.bind(this);\n    this.cancelModal = this.cancelModal.bind(this);\n  }\n\n  cancelModal() {\n    this.setState({\n      isOpenAddModal: false,\n      nameFile: \"\",\n      homeworkType: \"\",\n      subjectId: null,\n      subjectColor: \"\",\n      description: \"\",\n      courseUrl: \"\",\n      homeworkFiles: [],\n      nameFiles: [],\n      publicationDate: new Date(),\n      postTime: new Date(),\n      classes: [],\n      subjects: [],\n      eventChecked: \"\",\n      classesId: [],\n      errorClass: false,\n      classesList: []\n    });\n  }\n\n  addNewHomework(e) {\n    e.preventDefault();\n    let dataHomework = {};\n    dataHomework.nameFile = this.state.nameFile;\n    dataHomework.homeworkType = this.state.homeworkType;\n    dataHomework.subjectId = this.state.subjectId;\n    dataHomework.subjectColor = this.state.subjectColor;\n    dataHomework.classesId = this.state.classesId;\n    dataHomework.publicationDate = this.state.publicationDate;\n    dataHomework.postTime = this.state.postTime;\n    dataHomework.courseUrl = this.state.courseUrl;\n    dataHomework.description = this.state.description; // this.props.dispatch(addNewHomework(dataHomework));\n\n    this.cancelModal();\n  }\n\n  deleteFile(filename) {\n    let nameFiles = this.state.nameFiles.filter(element => element != filename);\n    let homeworkFiles = this.state.homeworkFiles.filter(element => element.name != filename);\n    this.setState({\n      nameFiles,\n      homeworkFiles\n    });\n  }\n\n  attachFile(e) {\n    var oldFiles = this.state.homeworkFiles;\n    var files = Object.values(e.target.files);\n    var nameFiles = this.state.nameFiles;\n\n    if (files !== undefined && this.state.nameFiles.length + files.length < 6) {\n      files.map(element => {\n        nameFiles.push(element.name);\n        oldFiles.push(element);\n      });\n      this.setState({\n        homeworkFiles: oldFiles,\n        nameFiles\n      });\n    } else {\n      this.setState({\n        messageAlerte: \"Vous avez dépasser 5 fichiers\",\n        alerteStatus: true\n      });\n      setTimeout(() => {\n        this.setState({\n          messageAlerte: \"\",\n          alerteStatus: false\n        });\n      }, 4000);\n    }\n  }\n\n  openAddModal() {\n    this.setState({\n      isOpenAddModal: !this.state.isOpenAddModal\n    });\n  }\n\n  UNSAFE_componentWillMount() {\n    let subjects = createListSubject(this.props.subjects);\n    this.setState({\n      subjects\n    });\n  }\n\n  componentDidUpdate(previouProps) {\n    if (previouProps.subjects !== this.props.subjects) {\n      let subjects = createListSubject(this.props.subjects);\n      this.setState({\n        subjects\n      });\n    }\n  }\n\n  render() {\n    console.log(\"this.state\", this.state);\n    let detailCards = [{\n      cardColor: \"primary\",\n      imageIcon: require(\"../../../../../assets/images/dashboard/teams-icon.png\"),\n      // title: this.props.virtualClasses.length,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `message.Numbers.of.students`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 19\n        }\n      })\n    }, {\n      cardColor: \"secondary\",\n      imageIcon: require(\"../../../../../assets/images/dashboard/tasks-icon.png\"),\n      // title: this.state.prog,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `homework.file`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 19\n        }\n      })\n    }, {\n      cardColor: \"info\",\n      imageIcon: require(\"../../../../../assets/images/dashboard/project-icon.png\"),\n      // title: this.state.encours,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `homework.uncorrected`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 19\n        }\n      })\n    }, {\n      cardColor: \"success\",\n      imageIcon: require(\"../../../../../assets/images/dashboard/files-icon.png\"),\n      // title: this.state.encours,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `homework.educational.files`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 19\n        }\n      })\n    }];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper col-lg-12 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-column mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row col-lg-12 col-md- col-sm-12  \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 11\n      }\n    }, detailCards.map((data, index) => /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"col-xl-3 col-lg-3 col-md-6 col-sm-6 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IconWithTextCard, {\n      data: data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 11\n      }\n    }, this.state.alerteStatus && /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-danger bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 17\n      }\n    }, \" \", this.state.messageAlerte, \" \"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 col-md-auto \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(HomeworkInProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Fab, {\n      size: \"small\",\n      color: \"secondary\",\n      \"aria-label\": \"Add\",\n      onClick: this.openAddModal.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 21\n      }\n    }, this.state.isOpenAddModal ? /*#__PURE__*/React.createElement(RemoveSharpIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 25\n      }\n    }) : /*#__PURE__*/React.createElement(AddIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2\",\n      style: {\n        fontFamily: \"Roboto\",\n        fontSize: \"17px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"modal.addToDo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pl-5 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Fab, {\n      size: \"small\",\n      \"aria-label\": \"Add\",\n      style: {\n        backgroundColor: \"#ffbb33\",\n        color: \"#ffffff\"\n      } // onClick={this.props.openAddModal}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(DeleteOutlineIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2\",\n      style: {\n        fontFamily: \"Roboto\",\n        fontSize: \"17px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"icon.archives\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 21\n      }\n    })))), this.state.isOpenAddModal && /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(AddHomework, {\n      values: this.state,\n      handleChange: this.handleChange,\n      handleChangeHomeworkType: this.handleChangeHomeworkType,\n      subjects: this.state.subjects,\n      handleChangeSubject: this.handleChangeSubject,\n      attachFile: this.attachFile,\n      deleteFile: this.deleteFile,\n      handleChangePostTime: this.handleChangePostTime,\n      handleChangePublicationDate: this.handleChangePublicationDate,\n      handleChangeClass: this.handleChangeClass,\n      handleChangeClassList: this.handleChangeClassList,\n      addNewHomework: this.addNewHomework,\n      cancelModal: this.cancelModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(HomeworkList, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userProfile: state.auth.userProfile,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    subjects: state.subject.subjects\n  };\n};\n\nexport default connect(mapStateToProps)(Homework);\n\nfunction createListSubject(subjects) {\n  let newList = subjects.map(element => {\n    let object = {};\n    object.label = element.name;\n    object.id = element.id;\n    object.value = element.id;\n    object.color = element.color;\n    return object;\n  });\n  return newList;\n}","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Learning/routes/Homeworks/Homework.js"],"names":["React","IconWithTextCard","IntlMessages","HomeworkInProgress","CardBox","AddIcon","Fab","DeleteOutlineIcon","RemoveSharpIcon","connect","AddHomework","UncontrolledAlert","classService","HomeworkList","_","addNewHomework","Homework","Component","constructor","props","handleChangeClassList","selectedOption","setState","classesId","value","handleChangeClass","name","event","isEmpty","state","classes","errorClass","target","map","classesList","handleChangePublicationDate","date","publicationDate","handleChangePostTime","time","postTime","_d","handleChangeSubject","subjectId","subjectColor","color","apiEndpoint","localStorage","token","get","then","response","newList","data","element","object","label","class","id","fk_id_class_v4","handleChangeHomeworkType","HomeworkType","handleChange","isOpenAddModal","nameFile","HomeworkTypes","homeworkType","description","courseUrl","homeworkFiles","nameFiles","Date","subjects","eventChecked","bind","attachFile","deleteFile","cancelModal","e","preventDefault","dataHomework","filename","filter","oldFiles","files","Object","values","undefined","length","push","messageAlerte","alerteStatus","setTimeout","openAddModal","UNSAFE_componentWillMount","createListSubject","componentDidUpdate","previouProps","render","console","log","detailCards","cardColor","imageIcon","require","subTitle","index","fontFamily","fontSize","backgroundColor","mapStateToProps","userProfile","auth","successStatus","alert","success","errorStatus","error","message","subject"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport IconWithTextCard from \"../../../CommonComponents/IconWithTextCard\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport HomeworkInProgress from \"./HomeworkInProgress\";\nimport CardBox from \"../../../../../components/CardBox/index\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport Fab from \"@material-ui/core/Fab\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport RemoveSharpIcon from \"@material-ui/icons/RemoveSharp\";\nimport { connect } from \"react-redux\";\nimport AddHomework from \"./AddHomework\";\nimport { UncontrolledAlert } from \"reactstrap\";\nimport { classService } from \"../../../../../_services/class.service\";\nimport HomeworkList from \"./HomeworkList\";\nimport _ from \"lodash\";\nimport {addNewHomework} from \"../../../../../actions/HomeworkAction\"\n\nclass Homework extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpenAddModal: false,\n      nameFile: \"\",\n      HomeworkTypes: [\n        {\n          label: <IntlMessages id=\"toDo.book.exercise\" />,\n          value: \"book\",\n          id: 1,\n        },\n        {\n          label: <IntlMessages id=\"toDo.series.exercise\" />,\n          value: \"serie\",\n          id: 2,\n        },\n        {\n          label: <IntlMessages id=\"toDo.other.exercise\" />,\n          value: \"other\",\n          id: 3,\n        },\n      ],\n      homeworkType: \"\",\n      subjectId: null,\n      subjectColor: \"\",\n      description: \"\",\n      courseUrl: \"\",\n      homeworkFiles: [],\n      nameFiles: [],\n      publicationDate: new Date(),\n      postTime: new Date(),\n      classes: [],\n      subjects: [],\n      eventChecked: \"\",\n      classesId: [],\n      errorClass: false,\n      classesList: [],\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeHomeworkType = this.handleChangeHomeworkType.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.attachFile = this.attachFile.bind(this);\n    this.deleteFile = this.deleteFile.bind(this);\n    this.handleChangePostTime = this.handleChangePostTime.bind(this);\n    this.handleChangePublicationDate = this.handleChangePublicationDate.bind(\n      this\n    );\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleChangeClassList = this.handleChangeClassList.bind(this);\n    this.addNewHomework = this.addNewHomework.bind(this);\n    this.cancelModal = this.cancelModal.bind(this);\n  }\n\n  cancelModal() {\n    this.setState({\n      isOpenAddModal: false,\n      nameFile: \"\",\n      homeworkType: \"\",\n      subjectId: null,\n      subjectColor: \"\",\n      description: \"\",\n      courseUrl: \"\",\n      homeworkFiles: [],\n      nameFiles: [],\n      publicationDate: new Date(),\n      postTime: new Date(),\n      classes: [],\n      subjects: [],\n      eventChecked: \"\",\n      classesId: [],\n      errorClass: false,\n      classesList: [],\n    });\n  }\n\n  addNewHomework(e) {\n    e.preventDefault();\n    let dataHomework = {};\n    dataHomework.nameFile = this.state.nameFile;\n    dataHomework.homeworkType = this.state.homeworkType;\n    dataHomework.subjectId = this.state.subjectId;\n    dataHomework.subjectColor = this.state.subjectColor;\n    dataHomework.classesId = this.state.classesId;\n    dataHomework.publicationDate = this.state.publicationDate;\n    dataHomework.postTime = this.state.postTime;\n    dataHomework.courseUrl = this.state.courseUrl;\n    dataHomework.description = this.state.description;\n\n    // this.props.dispatch(addNewHomework(dataHomework));\n    this.cancelModal();\n  }\n\n  handleChangeClassList = (selectedOption) => {\n    this.setState({ classesId: [selectedOption.value] });\n  };\n\n  handleChangeClass = (name) => (event) => {\n    if (_.isEmpty(this.state.classes)) {\n      this.setState({ errorClass: true });\n    } else {\n      this.setState({ [name]: event.target.value });\n      this.setState({ errorClass: false });\n      if (event.target.value === \"allClasses\") {\n        let classesId = _.map(this.state.classes, \"id\");\n        this.setState({ classesId });\n      } else {\n        this.setState({ classesList: this.state.classes });\n      }\n    }\n  };\n\n  handleChangePublicationDate = (date) => {\n    this.setState({ publicationDate: date });\n  };\n\n  handleChangePostTime = (time) => {\n    this.setState({ postTime: time._d });\n  };\n\n  deleteFile(filename) {\n    let nameFiles = this.state.nameFiles.filter(\n      (element) => element != filename\n    );\n\n    let homeworkFiles = this.state.homeworkFiles.filter(\n      (element) => element.name != filename\n    );\n\n    this.setState({ nameFiles, homeworkFiles });\n  }\n\n  attachFile(e) {\n    var oldFiles = this.state.homeworkFiles;\n    var files = Object.values(e.target.files);\n    var nameFiles = this.state.nameFiles;\n    if (files !== undefined && this.state.nameFiles.length + files.length < 6) {\n      files.map((element) => {\n        nameFiles.push(element.name);\n        oldFiles.push(element);\n      });\n      this.setState({ homeworkFiles: oldFiles, nameFiles });\n    } else {\n      this.setState({\n        messageAlerte: \"Vous avez dépasser 5 fichiers\",\n        alerteStatus: true,\n      });\n      setTimeout(() => {\n        this.setState({ messageAlerte: \"\", alerteStatus: false });\n      }, 4000);\n    }\n  }\n\n  handleChangeSubject = (selectedOption) => {\n    this.setState({\n      subjectId: selectedOption.value,\n      subjectColor: selectedOption.color,\n      errorClass: false,\n    });\n    let apiEndpoint = `/assignment_class_subjects?access_token=${localStorage.token}&filter[where][fk_id_subject_v4]=${selectedOption.value}&filter[include][class]`;\n    classService.get(apiEndpoint).then((response) => {\n      if (response) {\n        let newList = response.data.map((element) => {\n          let object = {};\n          object.label = element.class.name;\n          object.id = element.fk_id_class_v4;\n          object.value = element.fk_id_class_v4;\n          return object;\n        });\n        this.setState({ classes: newList });\n      }\n    });\n  };\n\n  handleChangeHomeworkType = (selectedOption) => {\n    this.setState({ HomeworkType: selectedOption.value });\n  };\n\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n\n  openAddModal() {\n    this.setState({ isOpenAddModal: !this.state.isOpenAddModal });\n  }\n\n  UNSAFE_componentWillMount() {\n    let subjects = createListSubject(this.props.subjects);\n    this.setState({ subjects });\n  }\n  componentDidUpdate(previouProps) {\n    if (previouProps.subjects !== this.props.subjects) {\n      let subjects = createListSubject(this.props.subjects);\n      this.setState({ subjects });\n    }\n  }\n\n  render() {\n    console.log(\"this.state\", this.state);\n    let detailCards = [\n      {\n        cardColor: \"primary\",\n        imageIcon: require(\"../../../../../assets/images/dashboard/teams-icon.png\"),\n\n        // title: this.props.virtualClasses.length,\n        subTitle: <IntlMessages id={`message.Numbers.of.students`} />,\n      },\n      {\n        cardColor: \"secondary\",\n        imageIcon: require(\"../../../../../assets/images/dashboard/tasks-icon.png\"),\n        // title: this.state.prog,\n        subTitle: <IntlMessages id={`homework.file`} />,\n      },\n      {\n        cardColor: \"info\",\n        imageIcon: require(\"../../../../../assets/images/dashboard/project-icon.png\"),\n        // title: this.state.encours,\n        subTitle: <IntlMessages id={`homework.uncorrected`} />,\n      },\n      {\n        cardColor: \"success\",\n        imageIcon: require(\"../../../../../assets/images/dashboard/files-icon.png\"),\n        // title: this.state.encours,\n        subTitle: <IntlMessages id={`homework.educational.files`} />,\n      },\n    ];\n    return (\n      <div className=\"app-wrapper col-lg-12 col-md-12\">\n        <div className=\"d-flex flex-column mb-3\">\n          <div className=\"row col-lg-12 col-md- col-sm-12  \">\n            {detailCards.map((data, index) => (\n              <div\n                key={index}\n                className=\"col-xl-3 col-lg-3 col-md-6 col-sm-6 col-12\"\n              >\n                <IconWithTextCard data={data} />\n              </div>\n            ))}\n          </div>\n          <div>\n            {this.state.alerteStatus && (\n              <UncontrolledAlert className=\"alert-addon-card bg-danger bg-success text-white shadow-lg\">\n                <span className=\"icon-addon alert-addon\">\n                  <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n                </span>\n                <span className=\"d-inline-block\">\n                  {\" \"}\n                  {this.state.messageAlerte}{\" \"}\n                </span>\n              </UncontrolledAlert>\n            )}\n          </div>\n          <div className=\"row\">\n            <div className=\"col-12 col-md-auto \">\n              <CardBox styleName=\"row\">\n                <HomeworkInProgress />\n              </CardBox>\n            </div>\n\n            <div className=\"col \">\n              <CardBox styleName=\"col-lg-12 \">\n                <div className=\"row\">\n                  <div>\n                    <Fab\n                      size=\"small\"\n                      color=\"secondary\"\n                      aria-label=\"Add\"\n                      onClick={this.openAddModal.bind(this)}\n                    >\n                      {this.state.isOpenAddModal ? (\n                        <RemoveSharpIcon />\n                      ) : (\n                        <AddIcon />\n                      )}\n                    </Fab>\n                  </div>\n                  <div\n                    className=\"p-2\"\n                    style={{ fontFamily: \"Roboto\", fontSize: \"17px\" }}\n                  >\n                    <IntlMessages id=\"modal.addToDo\" />\n                  </div>\n\n                  <div className=\"pl-5 \">\n                    <Fab\n                      size=\"small\"\n                      aria-label=\"Add\"\n                      style={{ backgroundColor: \"#ffbb33\", color: \"#ffffff\" }}\n                      // onClick={this.props.openAddModal}\n                    >\n                      {/* {this.props.values.isOpen ? (\n                          <RemoveSharpIcon />\n                        ) : ( */}\n                      <DeleteOutlineIcon />\n                      {/* )} */}\n                    </Fab>\n                  </div>\n                  <div\n                    className=\"p-2\"\n                    style={{ fontFamily: \"Roboto\", fontSize: \"17px\" }}\n                  >\n                    <IntlMessages id=\"icon.archives\" />\n                  </div>\n                </div>\n              </CardBox>\n              {this.state.isOpenAddModal && (\n                <CardBox styleName=\"col-lg-12\">\n                  <AddHomework\n                    values={this.state}\n                    handleChange={this.handleChange}\n                    handleChangeHomeworkType={this.handleChangeHomeworkType}\n                    subjects={this.state.subjects}\n                    handleChangeSubject={this.handleChangeSubject}\n                    attachFile={this.attachFile}\n                    deleteFile={this.deleteFile}\n                    handleChangePostTime={this.handleChangePostTime}\n                    handleChangePublicationDate={\n                      this.handleChangePublicationDate\n                    }\n                    handleChangeClass={this.handleChangeClass}\n                    handleChangeClassList={this.handleChangeClassList}\n                    addNewHomework={this.addNewHomework}\n                    cancelModal={this.cancelModal}\n                  />\n                </CardBox>\n              )}\n              <HomeworkList />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    userProfile: state.auth.userProfile,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    subjects: state.subject.subjects,\n  };\n};\nexport default connect(mapStateToProps)(Homework);\n\nfunction createListSubject(subjects) {\n  let newList = subjects.map((element) => {\n    let object = {};\n    object.label = element.name;\n    object.id = element.id;\n    object.value = element.id;\n    object.color = element.color;\n    return object;\n  });\n  return newList;\n}\n"]},"metadata":{},"sourceType":"module"}