{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/PermissionSetting/PermissionList.js\";\nimport React, { Component } from 'react';\nimport CardBox from '../../../../../components/CardBox/index';\nimport { connect } from 'react-redux';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport Button from '@material-ui/core/Button';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport PermissionListItem from './PermissionListItem';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ResetPermission from './ResetPermission';\nimport PermissionConfirmation from './PermissionConfirmation';\nimport { applyPermissionSetting } from '../../../../../actions/PermissionAction';\nexport class PermissionList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      listPermissions: [],\n      listPermissionsModified: [],\n      modalReset: false,\n      modalConfirmation: false\n    };\n    this.addPermission = this.addPermission.bind(this);\n    this.deletePermission = this.deletePermission.bind(this);\n    this.resetPermission = this.resetPermission.bind(this);\n    this.applyPermission = this.applyPermission.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      listPermissions: this.props.listPermissions\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.listPermissions !== this.props.listPermissions) {\n      this.setState({\n        listPermissions: this.props.listPermissions\n      });\n    }\n  }\n\n  handleCancel() {\n    this.setState({\n      modalReset: false,\n      modalConfirmation: false\n    });\n  }\n\n  applyPermission() {\n    let listPermissionsModified = this.state.listPermissions.filter(permission => permission.modified);\n    let data = listPermissionsModified.map(element => {\n      return {\n        permissionId: element.id,\n        estabId: this.props.userProfile.establishment_id,\n        rolesArray: element.roles\n      };\n    });\n    this.props.dispatch(applyPermissionSetting(data));\n    this.setState({\n      listPermissionsModified,\n      modalConfirmation: false\n    });\n  }\n\n  resetPermission() {\n    this.setState({\n      listPermissions: this.props.listPermissions,\n      listPermissionsModified: [],\n      modalReset: false\n    });\n  }\n\n  deletePermission(idPermission, idRole) {\n    let newListPermissions = this.state.listPermissions.map(permission => {\n      let newPermission = permission.id === parseInt(idPermission) ? { ...permission,\n        roles: permission.roles.filter(role => role != idRole),\n        modified: true\n      } : permission;\n      return newPermission;\n    });\n    this.setState({\n      listPermissions: newListPermissions\n    });\n  }\n\n  addPermission(idPermission, idRole) {\n    let newListPermissions = this.state.listPermissions.map(permission => {\n      let newPermission = permission.id === parseInt(idPermission) ? { ...permission,\n        roles: permission.roles.concat([idRole]),\n        modified: true\n      } : permission;\n      return newPermission;\n    });\n    this.setState({\n      listPermissions: newListPermissions\n    });\n  }\n\n  render() {\n    const {\n      values\n    } = this.props; // console.log(values, 'valuuues');\n\n    console.log(this.state.listPermissionsModified, 'listPermissionsModified');\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 col-lg-12 col-sm-12 d-flex flex-column bd-highlight mb-3 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ResetPermission, {\n      modal: this.state.modalReset,\n      handleCancelReset: this.handleCancel,\n      handleSubmit: this.resetPermission,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(PermissionConfirmation, {\n      modal: this.state.modalConfirmation,\n      handleCancel: this.handleCancel,\n      handleSubmit: this.applyPermission,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-md-12 col-lg-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-row bd-highlight  \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-3 col-md-6 col-lg-6 col-sm-6  mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      style: {\n        color: '#0000CD',\n        fontFamily: 'Roboto'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 15\n      }\n    }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"sidebar.components.permissionSetting\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 col-md-2 col-lg-2 col-sm-2    \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      id: \"moduleId\",\n      name: \"moduleId\",\n      select: true,\n      value: values.moduleId,\n      onChange: this.props.handleChange('moduleId'),\n      SelectProps: {},\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `sidebar.modules`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 24\n        }\n      }),\n      InputProps: {\n        disableUnderline: true\n      },\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      key: 0,\n      value: 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `userStuppDisplay.all`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 19\n      }\n    })), this.props.estabModule.map((element, index) => /*#__PURE__*/React.createElement(MenuItem, {\n      key: index,\n      value: element.module.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `sidebar.components.${element.module.path}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 col-md-2 col-lg-2 col-sm-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      id: \"subModuleId\",\n      name: \"subModuleId\",\n      select: true,\n      value: values.subModuleId,\n      onChange: this.props.handleChange('subModuleId'),\n      SelectProps: {},\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `sidebar.modules`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 24\n        }\n      }),\n      InputProps: {\n        disableUnderline: true\n      },\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 15\n      }\n    }, values.subModuleList.map(subModule => /*#__PURE__*/React.createElement(MenuItem, {\n      key: subModule.id,\n      value: subModule.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `sidebar.components.${subModule.name}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }\n    }))))))), /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-md-12 col-lg-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive-material\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TableHead, {\n      className: \"th-border-b\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(TableRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 19\n      }\n    }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `action.type.of.education`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `role.admin`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 19\n      }\n    }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `component.etablishments.info.director`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 19\n      }\n    }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `role.Supervisor`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 19\n      }\n    }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `toDo.professor`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 19\n      }\n    }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `userStuppDisplay.Student`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 19\n      }\n    }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `userStuppDisplay.Parent`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(TableBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 15\n      }\n    }, this.state.listPermissions.map((element, index) => {\n      return /*#__PURE__*/React.createElement(PermissionListItem, {\n        key: index,\n        permission: element,\n        addPermission: this.addPermission,\n        deletePermission: this.deletePermission,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 21\n        }\n      });\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-row-reverse bd-highlight col-md-12 col-lg-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bd-highlight \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      className: \"bg-secondary text-white \",\n      style: {\n        borderBottomLeftRadius: '10px',\n        borderBottomRightRadius: '10px',\n        borderTopLeftRadius: '10px',\n        borderTopRightRadius: '10px',\n        width: '100%',\n        height: '80%',\n        textTransform: 'capitalize'\n      },\n      onClick: () => this.setState({\n        modalConfirmation: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 13\n      }\n    }, true ? /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"superadmin.apply.button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 17\n      }\n    }) : /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"button.modify\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bd-highlight mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      style: {\n        borderBottomLeftRadius: '10px',\n        borderBottomRightRadius: '10px',\n        borderTopLeftRadius: '10px',\n        borderTopRightRadius: '10px',\n        width: '100%',\n        height: '80%',\n        textTransform: 'capitalize'\n      },\n      className: \" bg-grey text-white \",\n      onClick: () => this.setState({\n        modalReset: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.classes.formadd.buttonCancel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    userProfile: state.auth.userProfile\n  };\n}\n\nexport default connect(mapStateToProps)(PermissionList);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/PermissionSetting/PermissionList.js"],"names":["React","Component","CardBox","connect","IntlMessages","Button","Table","TableBody","TableCell","TableHead","TableRow","PermissionListItem","TextField","MenuItem","ResetPermission","PermissionConfirmation","applyPermissionSetting","PermissionList","constructor","props","state","listPermissions","listPermissionsModified","modalReset","modalConfirmation","addPermission","bind","deletePermission","resetPermission","applyPermission","handleCancel","componentDidMount","setState","componentDidUpdate","prevProps","filter","permission","modified","data","map","element","permissionId","id","estabId","userProfile","establishment_id","rolesArray","roles","dispatch","idPermission","idRole","newListPermissions","newPermission","parseInt","role","concat","render","values","console","log","color","fontFamily","moduleId","handleChange","disableUnderline","estabModule","index","module","path","subModuleId","subModuleList","subModule","name","borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius","width","height","textTransform","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport CardBox from '../../../../../components/CardBox/index';\nimport { connect } from 'react-redux';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport Button from '@material-ui/core/Button';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport PermissionListItem from './PermissionListItem';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ResetPermission from './ResetPermission';\nimport PermissionConfirmation from './PermissionConfirmation';\nimport { applyPermissionSetting } from '../../../../../actions/PermissionAction';\n\nexport class PermissionList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      listPermissions: [],\n      listPermissionsModified: [],\n      modalReset: false,\n      modalConfirmation: false,\n    };\n\n    this.addPermission = this.addPermission.bind(this);\n    this.deletePermission = this.deletePermission.bind(this);\n    this.resetPermission = this.resetPermission.bind(this);\n    this.applyPermission = this.applyPermission.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n  }\n  componentDidMount() {\n    this.setState({ listPermissions: this.props.listPermissions });\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.listPermissions !== this.props.listPermissions) {\n      this.setState({ listPermissions: this.props.listPermissions });\n    }\n  }\n  handleCancel() {\n    this.setState({ modalReset: false, modalConfirmation: false });\n  }\n  applyPermission() {\n    let listPermissionsModified = this.state.listPermissions.filter(\n      (permission) => permission.modified\n    );\n    let data = listPermissionsModified.map((element) => {\n      return {\n        permissionId: element.id,\n        estabId: this.props.userProfile.establishment_id,\n        rolesArray: element.roles,\n      };\n    });\n    this.props.dispatch(applyPermissionSetting(data));\n     this.setState({ listPermissionsModified, modalConfirmation: false });\n  }\n  resetPermission() {\n    this.setState({\n      listPermissions: this.props.listPermissions,\n      listPermissionsModified: [],\n      modalReset: false,\n    });\n  }\n  deletePermission(idPermission, idRole) {\n    let newListPermissions = this.state.listPermissions.map((permission) => {\n      let newPermission =\n        permission.id === parseInt(idPermission)\n          ? {\n              ...permission,\n              roles: permission.roles.filter((role) => role != idRole),\n              modified: true,\n            }\n          : permission;\n      return newPermission;\n    });\n    this.setState({\n      listPermissions: newListPermissions,\n    });\n  }\n  addPermission(idPermission, idRole) {\n    let newListPermissions = this.state.listPermissions.map((permission) => {\n      let newPermission =\n        permission.id === parseInt(idPermission)\n          ? {\n              ...permission,\n              roles: permission.roles.concat([idRole]),\n              modified: true,\n            }\n          : permission;\n      return newPermission;\n    });\n    this.setState({\n      listPermissions: newListPermissions,\n    });\n  }\n  render() {\n    const { values } = this.props;\n    // console.log(values, 'valuuues');\n    console.log(this.state.listPermissionsModified, 'listPermissionsModified');\n\n    return (\n      <div className=\"col-md-12 col-lg-12 col-sm-12 d-flex flex-column bd-highlight mb-3 \">\n        <ResetPermission\n          modal={this.state.modalReset}\n          handleCancelReset={this.handleCancel}\n          handleSubmit={this.resetPermission}\n        ></ResetPermission>\n        <PermissionConfirmation\n          modal={this.state.modalConfirmation}\n          handleCancel={this.handleCancel}\n          handleSubmit={this.applyPermission}\n        ></PermissionConfirmation>\n        <CardBox styleName=\"col-md-12 col-lg-12 col-sm-12\">\n          <div className=\"d-flex flex-row bd-highlight  \">\n            <div className=\"p-3 col-md-6 col-lg-6 col-sm-6  mt-4\">\n              <h1 style={{ color: '#0000CD', fontFamily: 'Roboto' }}>\n                {' '}\n                <IntlMessages id=\"sidebar.components.permissionSetting\" />\n              </h1>\n            </div>\n            <div className=\"p-2 col-md-2 col-lg-2 col-sm-2    \">\n              <TextField\n                id=\"moduleId\"\n                name=\"moduleId\"\n                select\n                value={values.moduleId}\n                onChange={this.props.handleChange('moduleId')}\n                SelectProps={{}}\n                label={<IntlMessages id={`sidebar.modules`} />}\n                InputProps={{ disableUnderline: true }}\n                margin=\"normal\"\n                fullWidth\n              >\n                <MenuItem key={0} value={0}>\n                  <IntlMessages id={`userStuppDisplay.all`} />\n                </MenuItem>\n                {this.props.estabModule.map((element, index) => (\n                  <MenuItem key={index} value={element.module.id}>\n                    {/* {element.module.name} */}\n                    <IntlMessages id={`sidebar.components.${element.module.path}`} />\n                  </MenuItem>\n                ))}\n              </TextField>\n            </div>\n            <div className=\"p-2 col-md-2 col-lg-2 col-sm-2\">\n              <TextField\n                id=\"subModuleId\"\n                name=\"subModuleId\"\n                select\n                value={values.subModuleId}\n                onChange={this.props.handleChange('subModuleId')}\n                SelectProps={{}}\n                label={<IntlMessages id={`sidebar.modules`} />}\n                InputProps={{ disableUnderline: true }}\n                margin=\"normal\"\n                fullWidth\n              >\n                {values.subModuleList.map((subModule) => (\n                  <MenuItem key={subModule.id} value={subModule.id}>\n                    {/* {subModule.name} */}\n                    <IntlMessages id={`sidebar.components.${subModule.name}`} />\n                  </MenuItem>\n                ))}\n              </TextField>\n            </div>\n          </div>\n        </CardBox>\n        <CardBox styleName=\"col-md-12 col-lg-12 col-sm-12\">\n          <div className=\"table-responsive-material\">\n            <Table>\n              <TableHead className=\"th-border-b\">\n                <TableRow>\n                  <TableCell>\n                    {' '}\n                    <IntlMessages id={`action.type.of.education`} />\n                  </TableCell>\n\n                  <TableCell>\n                    <IntlMessages id={`role.admin`} />\n                  </TableCell>\n                  <TableCell>\n                    {' '}\n                    <IntlMessages id={`component.etablishments.info.director`} />\n                  </TableCell>\n                  <TableCell>\n                    {' '}\n                    <IntlMessages id={`role.Supervisor`} />\n                  </TableCell>\n                  <TableCell>\n                    {' '}\n                    <IntlMessages id={`toDo.professor`} />\n                  </TableCell>\n                  <TableCell>\n                    {' '}\n                    <IntlMessages id={`userStuppDisplay.Student`} />\n                  </TableCell>\n                  <TableCell>\n                    {' '}\n                    <IntlMessages id={`userStuppDisplay.Parent`} />\n                  </TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {this.state.listPermissions.map((element, index) => {\n                  return (\n                    <PermissionListItem\n                      key={index}\n                      permission={element}\n                      addPermission={this.addPermission}\n                      deletePermission={this.deletePermission}\n                    />\n                  );\n                })}\n              </TableBody>\n            </Table>\n          </div>\n        </CardBox>\n        <div className=\"d-flex flex-row-reverse bd-highlight col-md-12 col-lg-12 col-sm-12\">\n          <div className=\" bd-highlight \">\n            <Button\n              variant=\"contained\"\n              className=\"bg-secondary text-white \"\n              style={{\n                borderBottomLeftRadius: '10px',\n                borderBottomRightRadius: '10px',\n                borderTopLeftRadius: '10px',\n                borderTopRightRadius: '10px',\n                width: '100%',\n                height: '80%',\n                textTransform: 'capitalize',\n              }}\n              onClick={() => this.setState({ modalConfirmation: true })}\n            >\n              {true ? (\n                <IntlMessages id=\"superadmin.apply.button\" />\n              ) : (\n                <IntlMessages id=\"button.modify\" />\n              )}\n            </Button>\n          </div>\n          <div className=\" bd-highlight mr-2\">\n            <Button\n              variant=\"contained\"\n              style={{\n                borderBottomLeftRadius: '10px',\n                borderBottomRightRadius: '10px',\n                borderTopLeftRadius: '10px',\n                borderTopRightRadius: '10px',\n                width: '100%',\n                height: '80%',\n                textTransform: 'capitalize',\n              }}\n              className=\" bg-grey text-white \"\n              onClick={() => this.setState({ modalReset: true })}\n            >\n              <IntlMessages id=\"components.classes.formadd.buttonCancel\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    userProfile: state.auth.userProfile,\n  };\n}\n\nexport default connect(mapStateToProps)(PermissionList);\n"]},"metadata":{},"sourceType":"module"}