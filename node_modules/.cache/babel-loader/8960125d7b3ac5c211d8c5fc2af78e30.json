{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/LevelTest/Questions/QuestionListItems.js\";\nimport React, { Component } from \"react\";\nimport IntlMessages from \"../../../../util/IntlMessages\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport CardBox from \"../../../../components/CardBox/index\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport { connect } from \"react-redux\";\nimport DeleteQuestion from \"./DeleteQuestion\";\nimport ShowQuestion from \"./ShowQuestion\";\nimport { deleteQuestion, editQuestionAction, getChoicesByQuestionId, addChoice, editChoice } from \"../../../../actions/QuestionActions\";\nimport EditQuestion from \"./EditQuestion\";\nimport _ from \"lodash\";\nimport { classService } from \"../../../../_services/class.service\";\n\nclass QuestionListItems extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.OpenEditShowModal = () => {\n      this.setState({\n        openShowQuestion: false\n      });\n      this.EditQuestionItem();\n    };\n\n    this.EditQuestionItem = () => {\n      this.setState({\n        question_description: this.props.question.question_desc,\n        topic: this.props.question.question_subject,\n        level_id: this.props.question.level_id,\n        subject_id: this.props.question.subject_id,\n        id_profile_creator: this.props.question.id_profile_creator,\n        openEditQuestion: true,\n        ItemToEdit: this.props.question,\n        id: this.props.question.id,\n        menuState: false\n      });\n    };\n\n    this.handleChangeChoice = idChoice => event => {\n      let listChoices = this.state.listChoices;\n\n      let indexChoice = _.findIndex(listChoices, {\n        index: idChoice\n      });\n\n      _.fill(listChoices, { ...listChoices[indexChoice],\n        proposal: event.target.value\n      }, indexChoice, indexChoice + 1);\n\n      this.setState({\n        listChoices\n      });\n    };\n\n    this.handleChangeRadio = name => event => {\n      console.log(\"event.target.value\", event.target.value);\n      this.setState({\n        choiceChecked: parseInt(event.target.value, 10)\n      });\n    };\n\n    this.deleteChoice = idChoice => {\n      let listChoices = this.state.listChoices.filter(choice => choice.index !== idChoice);\n      let choiceDeleted = this.state.listChoices.find(element => element.index === idChoice);\n      this.setState({\n        listChoices\n      });\n      let listChoicesDeleted = this.state.listChoicesDeleted;\n\n      if (choiceDeleted.id !== \"\") {\n        listChoicesDeleted.push({ ...choiceDeleted,\n          status: false\n        });\n      }\n\n      this.setState({\n        listChoicesDeleted\n      });\n    };\n\n    this.addChoice = () => {\n      let listChoices = this.state.listChoices;\n      listChoices.push({\n        index: listChoices[listChoices.length - 1].index + 1,\n        proposal: \"\",\n        status: true,\n        id_question_proposal: this.props.question.id,\n        id: \"\"\n      });\n      this.setState({\n        listChoices\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleEdit = () => {\n      ////// edit   question //////\n      var data = {};\n      data.question_desc = this.state.question_description;\n      data.question_subject = this.state.topic;\n      data.subject_id = this.state.subject_id;\n      data.level_id = this.state.level_id;\n      data.id_profile_creator = this.state.id_profile_creator;\n      data.status = true;\n      data.id = this.state.id;\n      data.id = this.state.id;\n      this.props.editQuestionAction(data, this.props.question.question_test); ///////edit choices //////\n\n      var oldData = this.state.listChoicesDeleted;\n      var newData = [];\n      this.state.listChoices.map((choice, index) => {\n        if (choice.id === \"\") {\n          let {\n            id,\n            index,\n            ...rest\n          } = choice;\n          newData.push({ ...rest,\n            propasal_status: choice.index == this.state.choiceChecked\n          });\n        } else {\n          let {\n            index,\n            ...rest\n          } = choice;\n          oldData.push({ ...rest,\n            propasal_status: choice.index == this.state.choiceChecked\n          });\n        }\n      });\n\n      if (newData.length > 0) {\n        this.props.addChoice(newData);\n      }\n\n      if (oldData.length > 0) {\n        oldData.map(item => {\n          this.props.editChoice(item);\n        });\n      }\n\n      this.setState({\n        openEditQuestion: false,\n        menuState: false\n      });\n    };\n\n    this.handleDelete = () => {\n      console.log(\"Lets delete it\", this.state.ItemToDelete);\n      this.props.deleteQuestion(this.state.ItemToDelete);\n      this.setState({\n        openDeleteQuestion: false\n      });\n    };\n\n    this.openShowQuestionModal = () => {\n      this.setState({\n        menuState: false,\n        openShowQuestion: true,\n        questionItem: this.props.question\n      });\n    };\n\n    this.cancelModal = () => {\n      this.setState({\n        openDeleteQuestion: false,\n        openShowQuestion: false,\n        openEditQuestion: false\n      });\n    };\n\n    this.onOptionMenuSelect = event => {\n      let apiEndpoint = `/question_proposals?access_token=${localStorage.token}&filter[where][id_question_proposal]=` + this.props.question.id;\n      classService.get(apiEndpoint).then(response => {\n        const listChoices = response.data.filter(item => item.status);\n        const listChoicesShow = response.data.filter(item => item.status);\n        let choiceChecked = [];\n        let data = listChoices.map((choice, index) => ({ ...choice,\n          index: index + 1\n        }));\n        this.setState({\n          listChoicesShow\n        });\n        this.setState({\n          listChoices: data\n        });\n        choiceChecked = data.filter(item => item.propasal_status)[0].index;\n        this.setState({\n          choiceChecked\n        });\n      }).catch(err => {});\n      this.setState({\n        menuState: true,\n        anchorEl: event.currentTarget,\n        itemId: event.currentTarget.value\n      });\n    };\n\n    this.handleRequestClose = () => {\n      this.setState({\n        menuState: false\n      });\n    };\n\n    this.state = {\n      openDeleteQuestion: false,\n      openShowQuestion: false,\n      anchorEl: undefined,\n      menuState: false,\n      itemId: 0,\n      questionItem: {},\n      ItemToDelete: 0,\n      openEditQuestion: false,\n      ItemToEdit: {},\n      choices: {},\n      topic: \"\",\n      question_description: \"\",\n      choiceChecked: \"\",\n      level_id: \"\",\n      subject_id: \"\",\n      id_profile_creator: \"\",\n      listChoices: [],\n      listChoicesDeleted: [],\n      listChoicesShow: []\n    };\n    this.OpenEditShowModal = this.OpenEditShowModal.bind(this);\n    this.openShowQuestionModal = this.openShowQuestionModal.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n    this.addChoice = this.addChoice.bind(this);\n    this.deleteChoice = this.deleteChoice.bind(this);\n    this.handleChangeChoice = this.handleChangeChoice.bind(this);\n    this.handleChangeRadio = this.handleChangeRadio.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(TableRow, {\n      key: this.props.question.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }\n    }, \" \", this.props.question.question_subject), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }\n    }, this.props.levels.map(level => {\n      if (level.id == this.props.question.level_id) {\n        return level.name;\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }\n    }, this.props.profSubjectList.map(subject => {\n      if (subject.id == this.props.question.subject_id) {\n        return /*#__PURE__*/React.createElement(MenuItem, {\n          key: subject.id,\n          value: subject.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 17\n          }\n        }, this.props.settings.languageId == \"tunisia\" ? subject.name_AR : this.props.settings.languageId == \"french\" ? subject.name_FR : subject.name_EN);\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }\n    }, this.props.question.question_test), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      onClick: this.onOptionMenuSelect.bind(this) //   value={room.id}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-more-vert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Menu, {\n      id: \"long-menu\",\n      anchorEl: this.state.anchorEl,\n      open: this.state.menuState,\n      onClose: this.handleRequestClose.bind(this),\n      MenuListProps: {\n        style: {\n          width: 150,\n          paddingTop: 0,\n          paddingBottom: 0\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: this.openShowQuestionModal //value={room.id}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"Reclam.Afficher\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: this.EditQuestionItem,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"button.modify\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 16\n      }\n    })), /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: () => this.setState({\n        openDeleteQuestion: true,\n        ItemToDelete: this.props.question.id,\n        menuState: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"button.delete\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 16\n      }\n    })))), this.state.openShowQuestion === true ? /*#__PURE__*/React.createElement(ShowQuestion, {\n      openShowQuestion: this.state.openShowQuestion,\n      cancelModal: this.cancelModal,\n      questionItem: this.state.questionItem,\n      levels: this.props.levels,\n      profSubjectList: this.props.profSubjectList,\n      modify: this.OpenEditShowModal,\n      listChoices: this.state.listChoicesShow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 11\n      }\n    }) : \"\", this.state.openDeleteQuestion === true ? /*#__PURE__*/React.createElement(DeleteQuestion, {\n      openDeleteQuestion: this.state.openDeleteQuestion,\n      cancelModal: this.cancelModal,\n      handleDelete: this.handleDelete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 11\n      }\n    }) : \"\", this.state.openEditQuestion === true ? /*#__PURE__*/React.createElement(EditQuestion, {\n      cancelModal: this.cancelModal,\n      handleEdit: this.handleEdit,\n      values: this.state,\n      handleChangeRadio: this.handleChangeRadio,\n      handleChange: this.handleChange,\n      profSubjectList: this.props.profSubjectList,\n      profLevels: this.props.profLevels,\n      classLevels: this.props.classLevels,\n      deleteChoice: this.deleteChoice,\n      addChoice: this.addChoice,\n      handleChangeChoice: this.handleChangeChoice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 11\n      }\n    }) : \"\");\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userProfile: state.auth.userProfile,\n    settings: state.settings.locale,\n    classLevels: state.ClassLevels.remoteLevels\n  };\n};\n\nexport default connect(mapStateToProps, {\n  deleteQuestion,\n  editQuestionAction,\n  getChoicesByQuestionId,\n  addChoice,\n  editChoice\n})(QuestionListItems);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/LevelTest/Questions/QuestionListItems.js"],"names":["React","Component","IntlMessages","Table","TableBody","TableCell","TableHead","TableRow","CardBox","IconButton","Menu","MenuItem","connect","DeleteQuestion","ShowQuestion","deleteQuestion","editQuestionAction","getChoicesByQuestionId","addChoice","editChoice","EditQuestion","_","classService","QuestionListItems","constructor","props","OpenEditShowModal","setState","openShowQuestion","EditQuestionItem","question_description","question","question_desc","topic","question_subject","level_id","subject_id","id_profile_creator","openEditQuestion","ItemToEdit","id","menuState","handleChangeChoice","idChoice","event","listChoices","state","indexChoice","findIndex","index","fill","proposal","target","value","handleChangeRadio","name","console","log","choiceChecked","parseInt","deleteChoice","filter","choice","choiceDeleted","find","element","listChoicesDeleted","push","status","length","id_question_proposal","handleChange","handleEdit","data","question_test","oldData","newData","map","rest","propasal_status","item","handleDelete","ItemToDelete","openDeleteQuestion","openShowQuestionModal","questionItem","cancelModal","onOptionMenuSelect","apiEndpoint","localStorage","token","get","then","response","listChoicesShow","catch","err","anchorEl","currentTarget","itemId","handleRequestClose","undefined","choices","bind","render","levels","level","profSubjectList","subject","settings","languageId","name_AR","name_FR","name_EN","style","width","paddingTop","paddingBottom","profLevels","classLevels","mapStateToProps","userProfile","auth","locale","ClassLevels","remoteLevels"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,YAAP,MAAyB,+BAAzB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,OAAP,MAAoB,sCAApB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SACEC,cADF,EAEEC,kBAFF,EAGEC,sBAHF,EAIEC,SAJF,EAKEC,UALF,QAMO,qCANP;AAOA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,YAAT,QAA6B,qCAA7B;;AAEA,MAAMC,iBAAN,SAAgCvB,KAAK,CAACC,SAAtC,CAAgD;AAC9CuB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAmCnBC,iBAnCmB,GAmCC,MAAM;AACxB,WAAKC,QAAL,CAAc;AACZC,QAAAA,gBAAgB,EAAE;AADN,OAAd;AAGA,WAAKC,gBAAL;AACD,KAxCkB;;AAAA,SAyCnBA,gBAzCmB,GAyCA,MAAM;AACvB,WAAKF,QAAL,CAAc;AACZG,QAAAA,oBAAoB,EAAE,KAAKL,KAAL,CAAWM,QAAX,CAAoBC,aAD9B;AAEZC,QAAAA,KAAK,EAAE,KAAKR,KAAL,CAAWM,QAAX,CAAoBG,gBAFf;AAGZC,QAAAA,QAAQ,EAAE,KAAKV,KAAL,CAAWM,QAAX,CAAoBI,QAHlB;AAIZC,QAAAA,UAAU,EAAE,KAAKX,KAAL,CAAWM,QAAX,CAAoBK,UAJpB;AAKZC,QAAAA,kBAAkB,EAAE,KAAKZ,KAAL,CAAWM,QAAX,CAAoBM,kBAL5B;AAMZC,QAAAA,gBAAgB,EAAE,IANN;AAOZC,QAAAA,UAAU,EAAE,KAAKd,KAAL,CAAWM,QAPX;AAQZS,QAAAA,EAAE,EAAE,KAAKf,KAAL,CAAWM,QAAX,CAAoBS,EARZ;AASZC,QAAAA,SAAS,EAAE;AATC,OAAd;AAWD,KArDkB;;AAAA,SAuDnBC,kBAvDmB,GAuDGC,QAAD,IAAeC,KAAD,IAAW;AAC5C,UAAIC,WAAW,GAAG,KAAKC,KAAL,CAAWD,WAA7B;;AACA,UAAIE,WAAW,GAAG1B,CAAC,CAAC2B,SAAF,CAAYH,WAAZ,EAAyB;AAAEI,QAAAA,KAAK,EAAEN;AAAT,OAAzB,CAAlB;;AACAtB,MAAAA,CAAC,CAAC6B,IAAF,CACEL,WADF,EAEE,EACE,GAAGA,WAAW,CAACE,WAAD,CADhB;AAEEI,QAAAA,QAAQ,EAAEP,KAAK,CAACQ,MAAN,CAAaC;AAFzB,OAFF,EAMEN,WANF,EAOEA,WAAW,GAAG,CAPhB;;AASA,WAAKpB,QAAL,CAAc;AAAEkB,QAAAA;AAAF,OAAd;AACD,KApEkB;;AAAA,SAsEnBS,iBAtEmB,GAsEEC,IAAD,IAAWX,KAAD,IAAW;AACvCY,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCb,KAAK,CAACQ,MAAN,CAAaC,KAA/C;AAEA,WAAK1B,QAAL,CAAc;AACZ+B,QAAAA,aAAa,EAAEC,QAAQ,CAACf,KAAK,CAACQ,MAAN,CAAaC,KAAd,EAAqB,EAArB;AADX,OAAd;AAGD,KA5EkB;;AAAA,SA8EnBO,YA9EmB,GA8EHjB,QAAD,IAAc;AAC3B,UAAIE,WAAW,GAAG,KAAKC,KAAL,CAAWD,WAAX,CAAuBgB,MAAvB,CACfC,MAAD,IAAYA,MAAM,CAACb,KAAP,KAAiBN,QADb,CAAlB;AAGA,UAAIoB,aAAa,GAAG,KAAKjB,KAAL,CAAWD,WAAX,CAAuBmB,IAAvB,CACjBC,OAAD,IAAaA,OAAO,CAAChB,KAAR,KAAkBN,QADb,CAApB;AAGA,WAAKhB,QAAL,CAAc;AAAEkB,QAAAA;AAAF,OAAd;AACA,UAAIqB,kBAAkB,GAAG,KAAKpB,KAAL,CAAWoB,kBAApC;;AAEA,UAAIH,aAAa,CAACvB,EAAd,KAAqB,EAAzB,EAA6B;AAC3B0B,QAAAA,kBAAkB,CAACC,IAAnB,CAAwB,EACtB,GAAGJ,aADmB;AAEtBK,UAAAA,MAAM,EAAE;AAFc,SAAxB;AAID;;AACD,WAAKzC,QAAL,CAAc;AAAEuC,QAAAA;AAAF,OAAd;AACD,KA/FkB;;AAAA,SAiGnBhD,SAjGmB,GAiGP,MAAM;AAChB,UAAI2B,WAAW,GAAG,KAAKC,KAAL,CAAWD,WAA7B;AAEAA,MAAAA,WAAW,CAACsB,IAAZ,CAAiB;AACflB,QAAAA,KAAK,EAAEJ,WAAW,CAACA,WAAW,CAACwB,MAAZ,GAAqB,CAAtB,CAAX,CAAoCpB,KAApC,GAA4C,CADpC;AAEfE,QAAAA,QAAQ,EAAE,EAFK;AAGfiB,QAAAA,MAAM,EAAE,IAHO;AAIfE,QAAAA,oBAAoB,EAAE,KAAK7C,KAAL,CAAWM,QAAX,CAAoBS,EAJ3B;AAKfA,QAAAA,EAAE,EAAE;AALW,OAAjB;AAQA,WAAKb,QAAL,CAAc;AAAEkB,QAAAA;AAAF,OAAd;AACD,KA7GkB;;AAAA,SA+GnB0B,YA/GmB,GA+GHhB,IAAD,IAAWX,KAAD,IAAW;AAClC,WAAKjB,QAAL,CAAc;AAAE,SAAC4B,IAAD,GAAQX,KAAK,CAACQ,MAAN,CAAaC;AAAvB,OAAd;AACD,KAjHkB;;AAAA,SAmHnBmB,UAnHmB,GAmHN,MAAM;AACjB;AACA,UAAIC,IAAI,GAAG,EAAX;AAEAA,MAAAA,IAAI,CAACzC,aAAL,GAAqB,KAAKc,KAAL,CAAWhB,oBAAhC;AACA2C,MAAAA,IAAI,CAACvC,gBAAL,GAAwB,KAAKY,KAAL,CAAWb,KAAnC;AACAwC,MAAAA,IAAI,CAACrC,UAAL,GAAkB,KAAKU,KAAL,CAAWV,UAA7B;AACAqC,MAAAA,IAAI,CAACtC,QAAL,GAAgB,KAAKW,KAAL,CAAWX,QAA3B;AACAsC,MAAAA,IAAI,CAACpC,kBAAL,GAA0B,KAAKS,KAAL,CAAWT,kBAArC;AACAoC,MAAAA,IAAI,CAACL,MAAL,GAAc,IAAd;AACAK,MAAAA,IAAI,CAACjC,EAAL,GAAU,KAAKM,KAAL,CAAWN,EAArB;AACAiC,MAAAA,IAAI,CAACjC,EAAL,GAAU,KAAKM,KAAL,CAAWN,EAArB;AAEA,WAAKf,KAAL,CAAWT,kBAAX,CAA8ByD,IAA9B,EAAoC,KAAKhD,KAAL,CAAWM,QAAX,CAAoB2C,aAAxD,EAbiB,CAejB;;AACA,UAAIC,OAAO,GAAG,KAAK7B,KAAL,CAAWoB,kBAAzB;AACA,UAAIU,OAAO,GAAG,EAAd;AACA,WAAK9B,KAAL,CAAWD,WAAX,CAAuBgC,GAAvB,CAA2B,CAACf,MAAD,EAASb,KAAT,KAAmB;AAC5C,YAAIa,MAAM,CAACtB,EAAP,KAAc,EAAlB,EAAsB;AACpB,cAAI;AAAEA,YAAAA,EAAF;AAAMS,YAAAA,KAAN;AAAa,eAAG6B;AAAhB,cAAyBhB,MAA7B;AACAc,UAAAA,OAAO,CAACT,IAAR,CAAa,EACX,GAAGW,IADQ;AAEXC,YAAAA,eAAe,EAAEjB,MAAM,CAACb,KAAP,IAAgB,KAAKH,KAAL,CAAWY;AAFjC,WAAb;AAID,SAND,MAMO;AACL,cAAI;AAAET,YAAAA,KAAF;AAAS,eAAG6B;AAAZ,cAAqBhB,MAAzB;AACAa,UAAAA,OAAO,CAACR,IAAR,CAAa,EACX,GAAGW,IADQ;AAEXC,YAAAA,eAAe,EAAEjB,MAAM,CAACb,KAAP,IAAgB,KAAKH,KAAL,CAAWY;AAFjC,WAAb;AAID;AACF,OAdD;;AAgBA,UAAIkB,OAAO,CAACP,MAAR,GAAiB,CAArB,EAAwB;AACtB,aAAK5C,KAAL,CAAWP,SAAX,CAAqB0D,OAArB;AACD;;AACD,UAAID,OAAO,CAACN,MAAR,GAAiB,CAArB,EAAwB;AACtBM,QAAAA,OAAO,CAACE,GAAR,CAAaG,IAAD,IAAU;AACpB,eAAKvD,KAAL,CAAWN,UAAX,CAAsB6D,IAAtB;AACD,SAFD;AAGD;;AAED,WAAKrD,QAAL,CAAc;AACZW,QAAAA,gBAAgB,EAAE,KADN;AAEZG,QAAAA,SAAS,EAAE;AAFC,OAAd;AAID,KAlKkB;;AAAA,SAoKnBwC,YApKmB,GAoKJ,MAAM;AACnBzB,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8B,KAAKX,KAAL,CAAWoC,YAAzC;AAEA,WAAKzD,KAAL,CAAWV,cAAX,CAA0B,KAAK+B,KAAL,CAAWoC,YAArC;AACA,WAAKvD,QAAL,CAAc;AACZwD,QAAAA,kBAAkB,EAAE;AADR,OAAd;AAGD,KA3KkB;;AAAA,SA4KnBC,qBA5KmB,GA4KK,MAAM;AAC5B,WAAKzD,QAAL,CAAc;AACZc,QAAAA,SAAS,EAAE,KADC;AAEZb,QAAAA,gBAAgB,EAAE,IAFN;AAGZyD,QAAAA,YAAY,EAAE,KAAK5D,KAAL,CAAWM;AAHb,OAAd;AAKD,KAlLkB;;AAAA,SAmLnBuD,WAnLmB,GAmLL,MAAM;AAClB,WAAK3D,QAAL,CAAc;AACZwD,QAAAA,kBAAkB,EAAE,KADR;AAEZvD,QAAAA,gBAAgB,EAAE,KAFN;AAGZU,QAAAA,gBAAgB,EAAE;AAHN,OAAd;AAKD,KAzLkB;;AAAA,SA2LnBiD,kBA3LmB,GA2LG3C,KAAD,IAAW;AAC9B,UAAI4C,WAAW,GACZ,oCAAmCC,YAAY,CAACC,KAAM,uCAAvD,GACA,KAAKjE,KAAL,CAAWM,QAAX,CAAoBS,EAFtB;AAGAlB,MAAAA,YAAY,CACTqE,GADH,CACOH,WADP,EAEGI,IAFH,CAESC,QAAD,IAAc;AAClB,cAAMhD,WAAW,GAAGgD,QAAQ,CAACpB,IAAT,CAAcZ,MAAd,CAAsBmB,IAAD,IAAUA,IAAI,CAACZ,MAApC,CAApB;AACA,cAAM0B,eAAe,GAAGD,QAAQ,CAACpB,IAAT,CAAcZ,MAAd,CAAsBmB,IAAD,IAAUA,IAAI,CAACZ,MAApC,CAAxB;AACA,YAAIV,aAAa,GAAG,EAApB;AACA,YAAIe,IAAI,GAAG5B,WAAW,CAACgC,GAAZ,CAAgB,CAACf,MAAD,EAASb,KAAT,MAAoB,EAC7C,GAAGa,MAD0C;AAE7Cb,UAAAA,KAAK,EAAEA,KAAK,GAAG;AAF8B,SAApB,CAAhB,CAAX;AAIA,aAAKtB,QAAL,CAAc;AAAEmE,UAAAA;AAAF,SAAd;AAEA,aAAKnE,QAAL,CAAc;AAAEkB,UAAAA,WAAW,EAAE4B;AAAf,SAAd;AACAf,QAAAA,aAAa,GAAGe,IAAI,CAACZ,MAAL,CAAamB,IAAD,IAAUA,IAAI,CAACD,eAA3B,EAA4C,CAA5C,EAA+C9B,KAA/D;AACA,aAAKtB,QAAL,CAAc;AAAE+B,UAAAA;AAAF,SAAd;AACD,OAfH,EAgBGqC,KAhBH,CAgBUC,GAAD,IAAS,CAAE,CAhBpB;AAiBA,WAAKrE,QAAL,CAAc;AACZc,QAAAA,SAAS,EAAE,IADC;AAEZwD,QAAAA,QAAQ,EAAErD,KAAK,CAACsD,aAFJ;AAGZC,QAAAA,MAAM,EAAEvD,KAAK,CAACsD,aAAN,CAAoB7C;AAHhB,OAAd;AAKD,KArNkB;;AAAA,SAuNnB+C,kBAvNmB,GAuNE,MAAM;AACzB,WAAKzE,QAAL,CAAc;AAAEc,QAAAA,SAAS,EAAE;AAAb,OAAd;AACD,KAzNkB;;AAGjB,SAAKK,KAAL,GAAa;AACXqC,MAAAA,kBAAkB,EAAE,KADT;AAEXvD,MAAAA,gBAAgB,EAAE,KAFP;AAGXqE,MAAAA,QAAQ,EAAEI,SAHC;AAIX5D,MAAAA,SAAS,EAAE,KAJA;AAKX0D,MAAAA,MAAM,EAAE,CALG;AAMXd,MAAAA,YAAY,EAAE,EANH;AAOXH,MAAAA,YAAY,EAAE,CAPH;AAQX5C,MAAAA,gBAAgB,EAAE,KARP;AASXC,MAAAA,UAAU,EAAE,EATD;AAUX+D,MAAAA,OAAO,EAAE,EAVE;AAWXrE,MAAAA,KAAK,EAAE,EAXI;AAYXH,MAAAA,oBAAoB,EAAE,EAZX;AAaX4B,MAAAA,aAAa,EAAE,EAbJ;AAcXvB,MAAAA,QAAQ,EAAE,EAdC;AAeXC,MAAAA,UAAU,EAAE,EAfD;AAgBXC,MAAAA,kBAAkB,EAAE,EAhBT;AAiBXQ,MAAAA,WAAW,EAAE,EAjBF;AAkBXqB,MAAAA,kBAAkB,EAAE,EAlBT;AAmBX4B,MAAAA,eAAe,EAAE;AAnBN,KAAb;AAqBA,SAAKpE,iBAAL,GAAyB,KAAKA,iBAAL,CAAuB6E,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKnB,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BmB,IAA3B,CAAgC,IAAhC,CAA7B;AACA,SAAKtB,YAAL,GAAoB,KAAKA,YAAL,CAAkBsB,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAK/B,UAAL,GAAkB,KAAKA,UAAL,CAAgB+B,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKrF,SAAL,GAAiB,KAAKA,SAAL,CAAeqF,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAK3C,YAAL,GAAoB,KAAKA,YAAL,CAAkB2C,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAK7D,kBAAL,GAA0B,KAAKA,kBAAL,CAAwB6D,IAAxB,CAA6B,IAA7B,CAA1B;AACA,SAAKjD,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBiD,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKhC,YAAL,GAAoB,KAAKA,YAAL,CAAkBgC,IAAlB,CAAuB,IAAvB,CAApB;AACD;;AA0LDC,EAAAA,MAAM,GAAG;AACP,wBACE,oBAAC,QAAD;AAAU,MAAA,GAAG,EAAE,KAAK/E,KAAL,CAAWM,QAAX,CAAoBS,EAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAa,KAAKf,KAAL,CAAWM,QAAX,CAAoBG,gBAAjC,CADF,eAEE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKT,KAAL,CAAWgF,MAAX,CAAkB5B,GAAlB,CAAuB6B,KAAD,IAAW;AAChC,UAAIA,KAAK,CAAClE,EAAN,IAAY,KAAKf,KAAL,CAAWM,QAAX,CAAoBI,QAApC,EAA8C;AAC5C,eAAOuE,KAAK,CAACnD,IAAb;AACD;AACF,KAJA,CADH,CAFF,eASE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAK9B,KAAL,CAAWkF,eAAX,CAA2B9B,GAA3B,CAAgC+B,OAAD,IAAa;AAC3C,UAAIA,OAAO,CAACpE,EAAR,IAAc,KAAKf,KAAL,CAAWM,QAAX,CAAoBK,UAAtC,EAAkD;AAChD,4BACE,oBAAC,QAAD;AAAU,UAAA,GAAG,EAAEwE,OAAO,CAACpE,EAAvB;AAA2B,UAAA,KAAK,EAAEoE,OAAO,CAACpE,EAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG,KAAKf,KAAL,CAAWoF,QAAX,CAAoBC,UAApB,IAAkC,SAAlC,GACGF,OAAO,CAACG,OADX,GAEG,KAAKtF,KAAL,CAAWoF,QAAX,CAAoBC,UAApB,IAAkC,QAAlC,GACAF,OAAO,CAACI,OADR,GAEAJ,OAAO,CAACK,OALd,CADF;AASD;AACF,KAZA,CADH,CATF,eAwBE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAY,KAAKxF,KAAL,CAAWM,QAAX,CAAoB2C,aAAhC,CAxBF,eA0BE,oBAAC,SAAD;AAAW,MAAA,KAAK,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,UAAD;AACE,MAAA,OAAO,EAAE,KAAKa,kBAAL,CAAwBgB,IAAxB,CAA6B,IAA7B,CADX,CAEE;AAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAIE;AAAG,MAAA,SAAS,EAAC,qBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJF,CADF,eAOE,oBAAC,IAAD;AACE,MAAA,EAAE,EAAC,WADL;AAEE,MAAA,QAAQ,EAAE,KAAKzD,KAAL,CAAWmD,QAFvB;AAGE,MAAA,IAAI,EAAE,KAAKnD,KAAL,CAAWL,SAHnB;AAIE,MAAA,OAAO,EAAE,KAAK2D,kBAAL,CAAwBG,IAAxB,CAA6B,IAA7B,CAJX;AAKE,MAAA,aAAa,EAAE;AACbW,QAAAA,KAAK,EAAE;AACLC,UAAAA,KAAK,EAAE,GADF;AAELC,UAAAA,UAAU,EAAE,CAFP;AAGLC,UAAAA,aAAa,EAAE;AAHV;AADM,OALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAaE,oBAAC,QAAD;AACE,MAAA,OAAO,EAAE,KAAKjC,qBADhB,CACuC;AADvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAGE,oBAAC,YAAD;AAAc,MAAA,EAAE,EAAC,iBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,CAbF,eAmBE,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAE,KAAKvD,gBAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG,oBAAC,YAAD;AAAc,MAAA,EAAE,EAAC,eAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADH,CAnBF,eAuBE,oBAAC,QAAD;AACE,MAAA,OAAO,EAAE,MACP,KAAKF,QAAL,CAAc;AACZwD,QAAAA,kBAAkB,EAAE,IADR;AAEZD,QAAAA,YAAY,EAAE,KAAKzD,KAAL,CAAWM,QAAX,CAAoBS,EAFtB;AAGZC,QAAAA,SAAS,EAAE;AAHC,OAAd,CAFJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBASG,oBAAC,YAAD;AAAc,MAAA,EAAE,EAAC,eAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATH,CAvBF,CAPF,CA1BF,EAsEG,KAAKK,KAAL,CAAWlB,gBAAX,KAAgC,IAAhC,gBACC,oBAAC,YAAD;AACE,MAAA,gBAAgB,EAAE,KAAKkB,KAAL,CAAWlB,gBAD/B;AAEE,MAAA,WAAW,EAAE,KAAK0D,WAFpB;AAGE,MAAA,YAAY,EAAE,KAAKxC,KAAL,CAAWuC,YAH3B;AAIE,MAAA,MAAM,EAAE,KAAK5D,KAAL,CAAWgF,MAJrB;AAKE,MAAA,eAAe,EAAE,KAAKhF,KAAL,CAAWkF,eAL9B;AAME,MAAA,MAAM,EAAE,KAAKjF,iBANf;AAOE,MAAA,WAAW,EAAE,KAAKoB,KAAL,CAAWgD,eAP1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAWC,EAjFJ,EAoFG,KAAKhD,KAAL,CAAWqC,kBAAX,KAAkC,IAAlC,gBACC,oBAAC,cAAD;AACE,MAAA,kBAAkB,EAAE,KAAKrC,KAAL,CAAWqC,kBADjC;AAEE,MAAA,WAAW,EAAE,KAAKG,WAFpB;AAGE,MAAA,YAAY,EAAE,KAAKL,YAHrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAOC,EA3FJ,EA8FG,KAAKnC,KAAL,CAAWR,gBAAX,KAAgC,IAAhC,gBACC,oBAAC,YAAD;AACE,MAAA,WAAW,EAAE,KAAKgD,WADpB;AAEE,MAAA,UAAU,EAAE,KAAKd,UAFnB;AAGE,MAAA,MAAM,EAAE,KAAK1B,KAHf;AAIE,MAAA,iBAAiB,EAAE,KAAKQ,iBAJ1B;AAKE,MAAA,YAAY,EAAE,KAAKiB,YALrB;AAME,MAAA,eAAe,EAAE,KAAK9C,KAAL,CAAWkF,eAN9B;AAOE,MAAA,UAAU,EAAE,KAAKlF,KAAL,CAAW6F,UAPzB;AAQE,MAAA,WAAW,EAAE,KAAK7F,KAAL,CAAW8F,WAR1B;AASE,MAAA,YAAY,EAAE,KAAK3D,YATrB;AAUE,MAAA,SAAS,EAAE,KAAK1C,SAVlB;AAWE,MAAA,kBAAkB,EAAE,KAAKwB,kBAX3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAeC,EA7GJ,CADF;AAkHD;;AA/U6C;;AAkVhD,MAAM8E,eAAe,GAAI1E,KAAD,IAAW;AACjC,SAAO;AACL2E,IAAAA,WAAW,EAAE3E,KAAK,CAAC4E,IAAN,CAAWD,WADnB;AAELZ,IAAAA,QAAQ,EAAE/D,KAAK,CAAC+D,QAAN,CAAec,MAFpB;AAGLJ,IAAAA,WAAW,EAAEzE,KAAK,CAAC8E,WAAN,CAAkBC;AAH1B,GAAP;AAKD,CAND;;AAQA,eAAejH,OAAO,CACpB4G,eADoB,EAEpB;AACEzG,EAAAA,cADF;AAEEC,EAAAA,kBAFF;AAGEC,EAAAA,sBAHF;AAIEC,EAAAA,SAJF;AAKEC,EAAAA;AALF,CAFoB,CAAP,CASbI,iBATa,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport IntlMessages from \"../../../../util/IntlMessages\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport CardBox from \"../../../../components/CardBox/index\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport { connect } from \"react-redux\";\nimport DeleteQuestion from \"./DeleteQuestion\";\nimport ShowQuestion from \"./ShowQuestion\";\nimport {\n  deleteQuestion,\n  editQuestionAction,\n  getChoicesByQuestionId,\n  addChoice,\n  editChoice,\n} from \"../../../../actions/QuestionActions\";\nimport EditQuestion from \"./EditQuestion\";\nimport _ from \"lodash\";\nimport { classService } from \"../../../../_services/class.service\";\n\nclass QuestionListItems extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      openDeleteQuestion: false,\n      openShowQuestion: false,\n      anchorEl: undefined,\n      menuState: false,\n      itemId: 0,\n      questionItem: {},\n      ItemToDelete: 0,\n      openEditQuestion: false,\n      ItemToEdit: {},\n      choices: {},\n      topic: \"\",\n      question_description: \"\",\n      choiceChecked: \"\",\n      level_id: \"\",\n      subject_id: \"\",\n      id_profile_creator: \"\",\n      listChoices: [],\n      listChoicesDeleted: [],\n      listChoicesShow: [],\n    };\n    this.OpenEditShowModal = this.OpenEditShowModal.bind(this);\n    this.openShowQuestionModal = this.openShowQuestionModal.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n    this.addChoice = this.addChoice.bind(this);\n    this.deleteChoice = this.deleteChoice.bind(this);\n    this.handleChangeChoice = this.handleChangeChoice.bind(this);\n    this.handleChangeRadio = this.handleChangeRadio.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  OpenEditShowModal = () => {\n    this.setState({\n      openShowQuestion: false,\n    });\n    this.EditQuestionItem();\n  };\n  EditQuestionItem = () => {\n    this.setState({\n      question_description: this.props.question.question_desc,\n      topic: this.props.question.question_subject,\n      level_id: this.props.question.level_id,\n      subject_id: this.props.question.subject_id,\n      id_profile_creator: this.props.question.id_profile_creator,\n      openEditQuestion: true,\n      ItemToEdit: this.props.question,\n      id: this.props.question.id,\n      menuState: false,\n    });\n  };\n\n  handleChangeChoice = (idChoice) => (event) => {\n    let listChoices = this.state.listChoices;\n    let indexChoice = _.findIndex(listChoices, { index: idChoice });\n    _.fill(\n      listChoices,\n      {\n        ...listChoices[indexChoice],\n        proposal: event.target.value,\n      },\n      indexChoice,\n      indexChoice + 1\n    );\n    this.setState({ listChoices });\n  };\n\n  handleChangeRadio = (name) => (event) => {\n    console.log(\"event.target.value\", event.target.value);\n\n    this.setState({\n      choiceChecked: parseInt(event.target.value, 10),\n    });\n  };\n\n  deleteChoice = (idChoice) => {\n    let listChoices = this.state.listChoices.filter(\n      (choice) => choice.index !== idChoice\n    );\n    let choiceDeleted = this.state.listChoices.find(\n      (element) => element.index === idChoice\n    );\n    this.setState({ listChoices });\n    let listChoicesDeleted = this.state.listChoicesDeleted;\n\n    if (choiceDeleted.id !== \"\") {\n      listChoicesDeleted.push({\n        ...choiceDeleted,\n        status: false,\n      });\n    }\n    this.setState({ listChoicesDeleted });\n  };\n\n  addChoice = () => {\n    let listChoices = this.state.listChoices;\n\n    listChoices.push({\n      index: listChoices[listChoices.length - 1].index + 1,\n      proposal: \"\",\n      status: true,\n      id_question_proposal: this.props.question.id,\n      id: \"\",\n    });\n\n    this.setState({ listChoices });\n  };\n\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n\n  handleEdit = () => {\n    ////// edit   question //////\n    var data = {};\n\n    data.question_desc = this.state.question_description;\n    data.question_subject = this.state.topic;\n    data.subject_id = this.state.subject_id;\n    data.level_id = this.state.level_id;\n    data.id_profile_creator = this.state.id_profile_creator;\n    data.status = true;\n    data.id = this.state.id;\n    data.id = this.state.id;\n\n    this.props.editQuestionAction(data, this.props.question.question_test);\n\n    ///////edit choices //////\n    var oldData = this.state.listChoicesDeleted;\n    var newData = [];\n    this.state.listChoices.map((choice, index) => {\n      if (choice.id === \"\") {\n        let { id, index, ...rest } = choice;\n        newData.push({\n          ...rest,\n          propasal_status: choice.index == this.state.choiceChecked,\n        });\n      } else {\n        let { index, ...rest } = choice;\n        oldData.push({\n          ...rest,\n          propasal_status: choice.index == this.state.choiceChecked,\n        });\n      }\n    });\n\n    if (newData.length > 0) {\n      this.props.addChoice(newData);\n    }\n    if (oldData.length > 0) {\n      oldData.map((item) => {\n        this.props.editChoice(item);\n      });\n    }\n\n    this.setState({\n      openEditQuestion: false,\n      menuState: false,\n    });\n  };\n\n  handleDelete = () => {\n    console.log(\"Lets delete it\", this.state.ItemToDelete);\n\n    this.props.deleteQuestion(this.state.ItemToDelete);\n    this.setState({\n      openDeleteQuestion: false,\n    });\n  };\n  openShowQuestionModal = () => {\n    this.setState({\n      menuState: false,\n      openShowQuestion: true,\n      questionItem: this.props.question,\n    });\n  };\n  cancelModal = () => {\n    this.setState({\n      openDeleteQuestion: false,\n      openShowQuestion: false,\n      openEditQuestion: false,\n    });\n  };\n\n  onOptionMenuSelect = (event) => {\n    let apiEndpoint =\n      `/question_proposals?access_token=${localStorage.token}&filter[where][id_question_proposal]=` +\n      this.props.question.id;\n    classService\n      .get(apiEndpoint)\n      .then((response) => {\n        const listChoices = response.data.filter((item) => item.status);\n        const listChoicesShow = response.data.filter((item) => item.status);\n        let choiceChecked = [];\n        let data = listChoices.map((choice, index) => ({\n          ...choice,\n          index: index + 1,\n        }));\n        this.setState({ listChoicesShow });\n\n        this.setState({ listChoices: data });\n        choiceChecked = data.filter((item) => item.propasal_status)[0].index;\n        this.setState({ choiceChecked });\n      })\n      .catch((err) => {});\n    this.setState({\n      menuState: true,\n      anchorEl: event.currentTarget,\n      itemId: event.currentTarget.value,\n    });\n  };\n\n  handleRequestClose = () => {\n    this.setState({ menuState: false });\n  };\n\n  render() {\n    return (\n      <TableRow key={this.props.question.id}>\n        <TableCell> {this.props.question.question_subject}</TableCell>\n        <TableCell>\n          {this.props.levels.map((level) => {\n            if (level.id == this.props.question.level_id) {\n              return level.name;\n            }\n          })}\n        </TableCell>\n        <TableCell>\n          {this.props.profSubjectList.map((subject) => {\n            if (subject.id == this.props.question.subject_id) {\n              return (\n                <MenuItem key={subject.id} value={subject.id}>\n                  {this.props.settings.languageId == \"tunisia\"\n                    ? subject.name_AR\n                    : this.props.settings.languageId == \"french\"\n                    ? subject.name_FR\n                    : subject.name_EN}\n                </MenuItem>\n              );\n            }\n          })}\n        </TableCell>\n        <TableCell>{this.props.question.question_test}</TableCell>\n\n        <TableCell align=\"right\">\n          <IconButton\n            onClick={this.onOptionMenuSelect.bind(this)}\n            //   value={room.id}\n          >\n            <i className=\"zmdi zmdi-more-vert\" />\n          </IconButton>\n          <Menu\n            id=\"long-menu\"\n            anchorEl={this.state.anchorEl}\n            open={this.state.menuState}\n            onClose={this.handleRequestClose.bind(this)}\n            MenuListProps={{\n              style: {\n                width: 150,\n                paddingTop: 0,\n                paddingBottom: 0,\n              },\n            }}\n          >\n            <MenuItem\n              onClick={this.openShowQuestionModal} //value={room.id}\n            >\n              <IntlMessages id=\"Reclam.Afficher\" />\n            </MenuItem>\n\n            <MenuItem onClick={this.EditQuestionItem}>\n              {<IntlMessages id=\"button.modify\" />}\n            </MenuItem>\n\n            <MenuItem\n              onClick={() =>\n                this.setState({\n                  openDeleteQuestion: true,\n                  ItemToDelete: this.props.question.id,\n                  menuState: false,\n                })\n              }\n            >\n              {<IntlMessages id=\"button.delete\" />}\n            </MenuItem>\n          </Menu>\n        </TableCell>\n\n        {this.state.openShowQuestion === true ? (\n          <ShowQuestion\n            openShowQuestion={this.state.openShowQuestion}\n            cancelModal={this.cancelModal}\n            questionItem={this.state.questionItem}\n            levels={this.props.levels}\n            profSubjectList={this.props.profSubjectList}\n            modify={this.OpenEditShowModal}\n            listChoices={this.state.listChoicesShow}\n          />\n        ) : (\n          \"\"\n        )}\n\n        {this.state.openDeleteQuestion === true ? (\n          <DeleteQuestion\n            openDeleteQuestion={this.state.openDeleteQuestion}\n            cancelModal={this.cancelModal}\n            handleDelete={this.handleDelete}\n          />\n        ) : (\n          \"\"\n        )}\n\n        {this.state.openEditQuestion === true ? (\n          <EditQuestion\n            cancelModal={this.cancelModal}\n            handleEdit={this.handleEdit}\n            values={this.state}\n            handleChangeRadio={this.handleChangeRadio}\n            handleChange={this.handleChange}\n            profSubjectList={this.props.profSubjectList}\n            profLevels={this.props.profLevels}\n            classLevels={this.props.classLevels}\n            deleteChoice={this.deleteChoice}\n            addChoice={this.addChoice}\n            handleChangeChoice={this.handleChangeChoice}\n          />\n        ) : (\n          \"\"\n        )}\n      </TableRow>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    userProfile: state.auth.userProfile,\n    settings: state.settings.locale,\n    classLevels: state.ClassLevels.remoteLevels,\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  {\n    deleteQuestion,\n    editQuestionAction,\n    getChoicesByQuestionId,\n    addChoice,\n    editChoice,\n  }\n)(QuestionListItems);\n"]},"metadata":{},"sourceType":"module"}