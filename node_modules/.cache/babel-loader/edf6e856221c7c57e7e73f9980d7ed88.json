{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Learning/routes/Homeworks/Homework.js\";\nimport React from \"react\";\nimport IconWithTextCard from \"../../../CommonComponents/IconWithTextCard\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport HomeworkInProgress from \"./HomeworkInProgress\";\nimport CardBox from \"../../../../../components/CardBox/index\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport Fab from \"@material-ui/core/Fab\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport RemoveSharpIcon from \"@material-ui/icons/RemoveSharp\";\nimport { connect } from \"react-redux\";\nimport AddHomework from \"./AddHomework\";\nimport { UncontrolledAlert } from \"reactstrap\";\nimport { classService } from \"../../../../../_services/class.service\";\nimport HomeworkList from \"./HomeworkList\";\nimport _ from \"lodash\";\nimport { addNewHomework, getHomework } from \"../../../../../actions/HomeworkAction\";\nimport ArchivedHomework from \"./ArchivedHomework\";\nimport Can from \"../../../../../can\";\nimport { RoleContext } from \"../../../../../Context\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { roleIdAdmin, roleIdProfessor, roleIdStudent } from \"../../../../../config/config\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport SweetAlert from 'react-bootstrap-sweetalert';\n\nclass Homework extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangeFilterStatus = name => event => {\n      this.setState({\n        idType: \"\"\n      });\n      let homeworksList = [];\n\n      if (this.state.classId !== null) {\n        homeworksList = this.state.homeworkClass;\n      } else {\n        homeworksList = this.props.homeworks;\n      }\n\n      if (event.target.value === \"all\") {\n        this.setState({\n          [name]: event.target.value,\n          homeworks: homeworksList\n        });\n      } else {\n        let homeworks = homeworksList.filter(element => element.status === event.target.value);\n        this.setState({\n          [name]: event.target.value,\n          homeworks,\n          homeworksListForStudent: homeworks\n        });\n      }\n    };\n\n    this.handleChangeFilterType = name => event => {\n      let homeworksList = [];\n\n      if (this.state.classId !== null) {\n        homeworksList = this.state.homeworkClass;\n      } else {\n        homeworksList = this.props.homeworks;\n      }\n\n      if (event.target.value === \"all\") {\n        this.setState({\n          [name]: event.target.value,\n          homeworks: homeworksList\n        });\n      } else {\n        let homeworks = homeworksList.filter(element => element.homework.homework_type === event.target.value);\n        this.setState({\n          [name]: event.target.value,\n          homeworks\n        });\n      }\n    };\n\n    this.handleChangeFilter = name => event => {\n      if (event.target.value === \"all\") {\n        this.setState({\n          homeworks: this.props.homeworks\n        });\n      } else {\n        let homeworks = this.props.homeworks.filter(element => element.classId === event.target.value);\n        this.setState({\n          homeworks,\n          homeworkClass: homeworks\n        });\n      }\n\n      this.setState({\n        [name]: event.target.value,\n        statusHomework: \"\",\n        idType: \"\"\n      });\n    };\n\n    this.handleChangeClassList = selectedOption => {\n      if (selectedOption != null) {\n        let classesId = _.map(selectedOption, \"id\");\n\n        this.setState({\n          classesId,\n          isEmptylistClass: false,\n          classesData: selectedOption\n        });\n      } else {\n        this.setState({\n          classesId: []\n        });\n      }\n    };\n\n    this.handleChangeDate = name => date => {\n      this.setState({\n        [name]: date\n      });\n    };\n\n    this.handleChangePostTime = time => {\n      this.setState({\n        postTime: time._d\n      });\n    };\n\n    this.handleChangeSubject = selectedOption => {\n      this.setState({\n        subjectId: selectedOption.id,\n        subjectColor: selectedOption.color,\n        subjectName: selectedOption.label,\n        errorClass: false\n      });\n\n      if (this.props.userProfile.role_id === roleIdAdmin) {\n        let apiEndpoint = `/assignment_class_subjects?access_token=${localStorage.token}&filter[where][fk_id_subject_v4]=${selectedOption.value}&filter[include]=class&filter[include]=course`;\n        classService.get(apiEndpoint).then(response => {\n          if (response) {\n            let classesSubjects = response.data.filter(element => element.status);\n            let newList = [];\n            classesSubjects.map(element => {\n              let object = {};\n\n              if (!_.isEmpty(element.course)) {\n                object.label = element.class.name;\n                object.id = element.course[0].id;\n                object.value = element.course[0].id;\n                newList.push(object);\n              }\n            });\n            this.setState({\n              classes: newList\n            });\n          }\n        });\n      } else {\n        let apiEndpoint = `/assignment_class_subjects/${selectedOption.value}?access_token=${localStorage.token}&filter[include]=class&filter[include]=course`;\n        classService.get(apiEndpoint).then(response => {\n          if (response) {\n            let element = response.data;\n\n            if (element.status) {\n              let object = {};\n              object.label = element.class.name;\n              object.id = element.course[0].id;\n              object.value = element.course[0].id;\n              this.setState({\n                classes: [object]\n              });\n            }\n          }\n        });\n      }\n    };\n\n    this.handleChangeHomeworkType = selectedOption => {\n      this.setState({\n        homeworkType: selectedOption.value\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.onConfirm = () => {\n      this.setState({\n        show: false\n      });\n    };\n\n    this.state = {\n      isOpenAddModal: false,\n      openArchive: false,\n      nameFile: \"\",\n      HomeworkTypes: [{\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"toDo.book.exercise\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 18\n          }\n        }),\n        value: \"book\",\n        id: 1\n      }, {\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"toDo.series.exercise\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 18\n          }\n        }),\n        value: \"serie\",\n        id: 2\n      }, {\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"toDo.other.exercise\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 18\n          }\n        }),\n        value: \"other\",\n        id: 3\n      }],\n      HomeworkStatus: [{\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"status.classe.virtual.programm\\xE9\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 18\n          }\n        }),\n        value: \"programed\",\n        id: 1\n      }, {\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"status.classe.virtual.progr\\xE9s\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 18\n          }\n        }),\n        value: \"progress\",\n        id: 2\n      }, {\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"status.classe.virtual.t\\xE9rmin\\xE9\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 18\n          }\n        }),\n        value: \"finished\",\n        id: 3\n      }],\n      homeworkType: \"\",\n      subjectId: null,\n      subjectColor: \"\",\n      description: \"\",\n      courseUrl: \"\",\n      homeworkFiles: [],\n      nameFiles: [],\n      publicationDate: new Date(),\n      postTime: new Date(),\n      classes: [],\n      subjects: [],\n      eventChecked: \"\",\n      classesId: [],\n      errorClass: false,\n      correctionDate: new Date(),\n      renderingDate: new Date(),\n      isEmptylistClass: false,\n      classesData: [],\n      subjectName: \"\",\n      classId: null,\n      classList: [],\n      homeworks: [],\n      statusHomework: null,\n      homeworkClass: [],\n      idType: \"\",\n      homeworksListForStudent: [],\n      classStudent: null,\n      show: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeHomeworkType = this.handleChangeHomeworkType.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.attachFile = this.attachFile.bind(this);\n    this.deleteFile = this.deleteFile.bind(this);\n    this.handleChangePostTime = this.handleChangePostTime.bind(this);\n    this.handleChangeDate = this.handleChangeDate.bind(this);\n    this.handleChangeClassList = this.handleChangeClassList.bind(this);\n    this.addNewHomework = this.addNewHomework.bind(this);\n    this.cancelModal = this.cancelModal.bind(this);\n    this.openArchive = this.openArchive.bind(this);\n    this.handleChangeFilter = this.handleChangeFilter.bind(this);\n    this.handleChangeFilterType = this.handleChangeFilterType.bind(this);\n    this.handleDate = this.handleDate.bind(this);\n    this.handleChangeFilterStatus = this.handleChangeFilterStatus.bind(this);\n  }\n\n  handleDate() {\n    let homeworksList = [];\n\n    if (this.state.classId !== null) {\n      homeworksList = this.state.homeworkClass;\n    } else {\n      homeworksList = this.props.homeworks;\n    }\n\n    let homeworks = [];\n    homeworksList.forEach(element => {\n      let item = { ...element,\n        date: new Date(element.homework.publication_date)\n      };\n      homeworks.push(item);\n    });\n    const sortedHomework = homeworks.slice().sort((a, b) => b.date - a.date);\n    this.setState({\n      homeworks: sortedHomework\n    });\n  }\n\n  cancelModal() {\n    this.setState({\n      isOpenAddModal: false,\n      nameFile: \"\",\n      homeworkType: \"\",\n      subjectId: null,\n      subjectColor: \"\",\n      description: \"\",\n      courseUrl: \"\",\n      homeworkFiles: [],\n      nameFiles: [],\n      publicationDate: new Date(),\n      postTime: new Date(),\n      classes: [],\n      eventChecked: \"\",\n      classesId: [],\n      errorClass: false,\n      correctionDate: new Date(),\n      renderingDate: new Date(),\n      isEmptylistClass: false,\n      classesData: [],\n      subjectName: \"\"\n    });\n  }\n\n  addNewHomework(e) {\n    e.preventDefault();\n\n    if (this.state.subjectId === null) {\n      this.setState({\n        errorClass: true\n      });\n    } else if (_.isEmpty(this.state.classesId)) {\n      this.setState({\n        isEmptylistClass: true\n      });\n    } else {\n      let dataHomework = {};\n      dataHomework.title = this.state.nameFile;\n      dataHomework.homeworkType = this.state.homeworkType;\n      dataHomework.subjectId = this.state.subjectId;\n      dataHomework.subjectColor = this.state.subjectColor;\n      dataHomework.classesId = this.state.classesId;\n      dataHomework.publicationDate = this.state.publicationDate;\n      dataHomework.publicationTime = this.state.postTime;\n      dataHomework.courseUrl = this.state.courseUrl;\n      dataHomework.description = this.state.description;\n      dataHomework.correctionDate = this.state.correctionDate;\n      dataHomework.renderingDate = this.state.renderingDate;\n      dataHomework.subjectName = this.state.subjectName;\n      this.props.dispatch(addNewHomework(dataHomework, this.state.homeworkFiles, this.state.classesData));\n      this.cancelModal();\n    }\n  }\n\n  deleteFile(filename) {\n    let nameFiles = this.state.nameFiles.filter(element => element != filename);\n    let homeworkFiles = this.state.homeworkFiles.filter(element => element.name != filename);\n    this.setState({\n      nameFiles,\n      homeworkFiles\n    });\n  }\n\n  attachFile(e) {\n    var oldFiles = this.state.homeworkFiles;\n    var files = Object.values(e.target.files);\n    var nameFiles = this.state.nameFiles;\n\n    if (files !== undefined && this.state.nameFiles.length + files.length < 6) {\n      files.map(element => {\n        nameFiles.push(element.name);\n        oldFiles.push(element);\n      });\n      this.setState({\n        homeworkFiles: oldFiles,\n        nameFiles\n      });\n    } else {\n      this.setState({\n        messageAlerte: \"Vous avez dÃ©passer 5 fichiers\",\n        alerteStatus: true\n      });\n      setTimeout(() => {\n        this.setState({\n          messageAlerte: \"\",\n          alerteStatus: false\n        });\n      }, 4000);\n    }\n  }\n\n  openAddModal() {\n    this.setState({\n      isOpenAddModal: !this.state.isOpenAddModal\n    });\n  }\n\n  openArchive() {\n    this.setState(previousState => ({\n      openArchive: !previousState.openArchive\n    }));\n  }\n\n  UNSAFE_componentWillMount() {\n    if (this.props.userProfile.role_id === roleIdAdmin) {\n      let subjects = createListSubject(this.props.subjects);\n      this.setState({\n        subjects,\n        classList: this.props.classSettings\n      });\n    } else if (this.props.userProfile.role_id === roleIdProfessor) {\n      const professorId = this.props.userProfile.user.profiles[0].professors[0].id;\n      let apiEndpoint = `/course_v4?access_token=${localStorage.token}&filter[where][fk_id_professor]=${professorId}&filter[include][assignmentClassSubject]=subject&filter[include][assignmentClassSubject]=class`;\n      classService.get(apiEndpoint).then(response => {\n        if (response) {\n          let subjects = [];\n          let classes = [];\n          response.data.map(element => {\n            let object = {};\n            let classItem = {};\n            object.label = element.assignmentClassSubject.subject.name;\n            object.id = element.assignmentClassSubject.subject.id;\n            object.value = element.assignmentClassSubject.id;\n            subjects.push(object);\n            classItem = element.assignmentClassSubject.class;\n            classes.push(classItem);\n          });\n          this.setState({\n            subjects,\n            classList: classes\n          });\n        }\n      });\n    } else if (this.props.userProfile.role_id === roleIdStudent) {\n      let classStudent = this.props.userProfile.user.profiles[0].students[0].inscription[0].fk_id_class_v4;\n      this.setState({\n        classStudent\n      });\n\n      if (classStudent === null) {\n        this.setState({\n          show: true\n        });\n      }\n\n      let subjects = createListSubject(this.props.subjects);\n      this.setState({\n        subjects\n      });\n    } else {\n      let subjects = createListSubject(this.props.subjects);\n      this.setState({\n        subjects\n      });\n    }\n\n    this.props.dispatch(getHomework(this.props.userProfile.establishment_id, this.props.userProfile.school_year_id, this.props.userProfile.id, this.props.userProfile.role_id));\n  }\n\n  componentDidUpdate(previouProps) {\n    if (previouProps.subjects !== this.props.subjects) {\n      if (this.props.userProfile.role_id !== roleIdProfessor) {\n        let subjects = createListSubject(this.props.subjects);\n        this.setState({\n          subjects\n        });\n      }\n    }\n\n    if (previouProps.classSettings !== this.props.classSettings) {\n      if (this.props.userProfile.role_id === roleIdAdmin) {\n        this.setState({\n          classList: this.props.classSettings\n        });\n      }\n    }\n\n    if (previouProps.homeworks !== this.props.homeworks) {\n      this.setState({\n        homeworks: this.props.homeworks\n      });\n    }\n  }\n\n  render() {\n    let detailCards = [{\n      cardColor: \"primary\",\n      imageIcon: require(\"../../../../../assets/images/dashboard/teams-icon.png\"),\n      // title: this.props.virtualClasses.length,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `message.Numbers.of.students`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 19\n        }\n      })\n    }, {\n      cardColor: \"secondary\",\n      imageIcon: require(\"../../../../../assets/images/dashboard/tasks-icon.png\"),\n      // title: this.state.prog,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `homework.file`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 19\n        }\n      })\n    }, {\n      cardColor: \"info\",\n      imageIcon: require(\"../../../../../assets/images/dashboard/project-icon.png\"),\n      // title: this.state.encours,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `homework.uncorrected`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 19\n        }\n      })\n    }, {\n      cardColor: \"success\",\n      imageIcon: require(\"../../../../../assets/images/dashboard/files-icon.png\"),\n      // title: this.state.encours,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `homework.educational.files`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 19\n        }\n      })\n    }];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper col-lg-12 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-column mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row col-lg-12 col-md- col-sm-12  \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 11\n      }\n    }, detailCards.map((data, index) => /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"col-xl-3 col-lg-3 col-md-6 col-sm-6 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IconWithTextCard, {\n      data: data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 11\n      }\n    }, this.state.alerteStatus && /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-danger bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 17\n      }\n    }, \" \", this.state.messageAlerte, \" \")), this.props.errorStatus && /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-danger   text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 502,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 17\n      }\n    }, \" \", this.props.message, \" \")), this.props.successStatus && /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 17\n      }\n    }, \" \", this.props.message, \" \"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 col-md-auto \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 519,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(HomeworkInProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(RoleContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 15\n      }\n    }, ({\n      role\n    }) => /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"user-permission\",\n      data: {\n        permission: \"add-homework\",\n        permissionList: this.props.userPermission\n      },\n      yes: () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CardBox, {\n        styleName: \"col-lg-12 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Fab, {\n        size: \"small\",\n        color: \"secondary\",\n        \"aria-label\": \"Add\",\n        onClick: this.openAddModal.bind(this),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 31\n        }\n      }, this.state.isOpenAddModal ? /*#__PURE__*/React.createElement(RemoveSharpIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 546,\n          columnNumber: 35\n        }\n      }) : /*#__PURE__*/React.createElement(AddIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 35\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2\",\n        style: {\n          fontFamily: \"Roboto\",\n          fontSize: \"17px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"modal.addToDo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 31\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pl-5 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Fab, {\n        size: \"small\",\n        \"aria-label\": \"Add\",\n        style: {\n          backgroundColor: \"#ffbb33\",\n          color: \"#ffffff\"\n        },\n        onClick: this.openArchive,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(DeleteOutlineIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 33\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2\",\n        style: {\n          fontFamily: \"Roboto\",\n          fontSize: \"17px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"icon.archives\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 31\n        }\n      })))), this.state.isOpenAddModal && /*#__PURE__*/React.createElement(CardBox, {\n        styleName: \"col-lg-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 582,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(AddHomework, {\n        values: this.state,\n        handleChange: this.handleChange,\n        handleChangeHomeworkType: this.handleChangeHomeworkType,\n        subjects: this.state.subjects,\n        handleChangeSubject: this.handleChangeSubject,\n        attachFile: this.attachFile,\n        deleteFile: this.deleteFile,\n        handleChangePostTime: this.handleChangePostTime,\n        handleChangeDate: this.handleChangeDate,\n        handleChangeClassList: this.handleChangeClassList,\n        addNewHomework: this.addNewHomework,\n        cancelModal: this.cancelModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 29\n        }\n      }))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(RoleContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 15\n      }\n    }, ({\n      role\n    }) => /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"user-permission\",\n      data: {\n        permission: \"get-homework\",\n        permissionList: this.props.userPermission\n      },\n      yes: () => /*#__PURE__*/React.createElement(React.Fragment, null, this.state.openArchive ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 619,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(ArchivedHomework, {\n        homeworks: this.props.archivedHomework,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 620,\n          columnNumber: 29\n        }\n      })) : \"\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(RoleContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 632,\n        columnNumber: 15\n      }\n    }, ({\n      role\n    }) => /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"user-permission\",\n      data: {\n        permission: \"get-homework\",\n        permissionList: this.props.userPermission\n      },\n      yes: () => /*#__PURE__*/React.createElement(React.Fragment, null, !this.state.openArchive ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 644,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-wrap flex-row bd-highlight mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 645,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(Can, {\n        role: role,\n        perform: \"homework-filter-class\",\n        yes: () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"p-2 s bd-highlight col-lg-2 col-md-6 col-sm-5\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 651,\n            columnNumber: 37\n          }\n        }, /*#__PURE__*/React.createElement(TextField, {\n          id: \"idClasse\",\n          name: \"idClasse\",\n          select: true,\n          value: this.state.classId,\n          onChange: this.handleChangeFilter(\"classId\"),\n          SelectProps: {},\n          label: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: `components.note.class`,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 43\n            }\n          }),\n          InputProps: {\n            disableUnderline: true\n          },\n          margin: \"normal\",\n          fullWidth: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 652,\n            columnNumber: 39\n          }\n        }, /*#__PURE__*/React.createElement(MenuItem, {\n          key: 0,\n          value: \"all\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 670,\n            columnNumber: 41\n          }\n        }, /*#__PURE__*/React.createElement(IntlMessages, {\n          id: `userStuppDisplay.all`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 673,\n            columnNumber: 45\n          }\n        })), this.state.classList.map(option => /*#__PURE__*/React.createElement(MenuItem, {\n          key: option.id,\n          value: option.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 679,\n            columnNumber: 43\n          }\n        }, option.name)))), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"pt-5 bd-highlight\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 37\n          }\n        }, \"|\")),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 646,\n          columnNumber: 31\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight col-lg-2 col-md-6 col-sm-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 693,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        id: \"statusHomework\",\n        name: \"statusHomework\",\n        select: true,\n        value: this.state.statusHomework,\n        onChange: this.handleChangeFilterStatus(\"statusHomework\"),\n        SelectProps: {},\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: `components.todo.etat`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 704,\n            columnNumber: 37\n          }\n        }),\n        InputProps: {\n          disableUnderline: true\n        },\n        margin: \"normal\",\n        fullWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 694,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        key: 0,\n        value: \"all\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 710,\n          columnNumber: 35\n        }\n      }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `userStuppDisplay.all`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 713,\n          columnNumber: 39\n        }\n      })), this.state.HomeworkStatus.map(option => /*#__PURE__*/React.createElement(MenuItem, {\n        key: option.id,\n        value: option.value,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 719,\n          columnNumber: 37\n        }\n      }, option.label)))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pt-5 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 728,\n          columnNumber: 31\n        }\n      }, \"|\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight col-lg-2 col-md-6 col-sm-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 729,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        id: \"idType\",\n        name: \"idType\",\n        select: true,\n        value: this.state.idType || \"\",\n        onChange: this.handleChangeFilterType(\"idType\"),\n        SelectProps: {},\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: `components.todo.type`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 740,\n            columnNumber: 37\n          }\n        }),\n        InputProps: {\n          disableUnderline: true\n        },\n        margin: \"normal\",\n        fullWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 730,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        key: 0,\n        value: \"all\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 746,\n          columnNumber: 35\n        }\n      }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `userStuppDisplay.all`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 749,\n          columnNumber: 39\n        }\n      })), this.state.HomeworkTypes.map(option => /*#__PURE__*/React.createElement(MenuItem, {\n        key: option.id,\n        value: option.value,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 755,\n          columnNumber: 37\n        }\n      }, option.label)))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pt-5 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 764,\n          columnNumber: 31\n        }\n      }, \"|\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pt-5  bd-highlight col-lg-2 col-md-6 col-sm-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 765,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        onClick: this.handleDate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 766,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"complaint.date\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 767,\n          columnNumber: 35\n        }\n      })))), /*#__PURE__*/React.createElement(HomeworkList, {\n        homeworks: this.state.homeworks,\n        subjects: this.state.subjects,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 772,\n          columnNumber: 29\n        }\n      })) : \"\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 634,\n        columnNumber: 19\n      }\n    }))))), this.props.userProfile.role_id === roleIdStudent && this.state.classStudent === null ? /*#__PURE__*/React.createElement(SweetAlert, {\n      show: this.state.show,\n      title: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"alert.affect.student\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 791,\n          columnNumber: 21\n        }\n      }),\n      onConfirm: this.onConfirm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 789,\n        columnNumber: 14\n      }\n    }) : '');\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userProfile: state.auth.userProfile,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    subjects: state.subject.subjects,\n    homeworks: state.HomeworkReducer.homeworks,\n    archivedHomework: state.HomeworkReducer.archivedHomework,\n    classSettings: state.ClassSettingsReducer.classSettings,\n    userPermission: state.PermissionReducer.userPermission\n  };\n};\n\nexport default connect(mapStateToProps)(Homework);\n\nfunction createListSubject(subjects) {\n  let newList = subjects.map(element => {\n    let object = {};\n    object.label = element.name;\n    object.id = element.id;\n    object.value = element.id;\n    object.color = element.color;\n    return object;\n  });\n  return newList;\n}","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Learning/routes/Homeworks/Homework.js"],"names":["React","IconWithTextCard","IntlMessages","HomeworkInProgress","CardBox","AddIcon","Fab","DeleteOutlineIcon","RemoveSharpIcon","connect","AddHomework","UncontrolledAlert","classService","HomeworkList","_","addNewHomework","getHomework","ArchivedHomework","Can","RoleContext","TextField","roleIdAdmin","roleIdProfessor","roleIdStudent","MenuItem","SweetAlert","Homework","Component","constructor","props","handleChangeFilterStatus","name","event","setState","idType","homeworksList","state","classId","homeworkClass","homeworks","target","value","filter","element","status","homeworksListForStudent","handleChangeFilterType","homework","homework_type","handleChangeFilter","statusHomework","handleChangeClassList","selectedOption","classesId","map","isEmptylistClass","classesData","handleChangeDate","date","handleChangePostTime","time","postTime","_d","handleChangeSubject","subjectId","id","subjectColor","color","subjectName","label","errorClass","userProfile","role_id","apiEndpoint","localStorage","token","get","then","response","classesSubjects","data","newList","object","isEmpty","course","class","push","classes","handleChangeHomeworkType","homeworkType","handleChange","onConfirm","show","isOpenAddModal","openArchive","nameFile","HomeworkTypes","HomeworkStatus","description","courseUrl","homeworkFiles","nameFiles","publicationDate","Date","subjects","eventChecked","correctionDate","renderingDate","classList","classStudent","bind","attachFile","deleteFile","cancelModal","handleDate","forEach","item","publication_date","sortedHomework","slice","sort","a","b","e","preventDefault","dataHomework","title","publicationTime","dispatch","filename","oldFiles","files","Object","values","undefined","length","messageAlerte","alerteStatus","setTimeout","openAddModal","previousState","UNSAFE_componentWillMount","createListSubject","classSettings","professorId","user","profiles","professors","classItem","assignmentClassSubject","subject","students","inscription","fk_id_class_v4","establishment_id","school_year_id","componentDidUpdate","previouProps","render","detailCards","cardColor","imageIcon","require","subTitle","index","errorStatus","message","successStatus","role","permission","permissionList","userPermission","fontFamily","fontSize","backgroundColor","archivedHomework","disableUnderline","option","mapStateToProps","auth","alert","success","error","HomeworkReducer","ClassSettingsReducer","PermissionReducer"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport IconWithTextCard from \"../../../CommonComponents/IconWithTextCard\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport HomeworkInProgress from \"./HomeworkInProgress\";\nimport CardBox from \"../../../../../components/CardBox/index\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport Fab from \"@material-ui/core/Fab\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport RemoveSharpIcon from \"@material-ui/icons/RemoveSharp\";\nimport { connect } from \"react-redux\";\nimport AddHomework from \"./AddHomework\";\nimport { UncontrolledAlert } from \"reactstrap\";\nimport { classService } from \"../../../../../_services/class.service\";\nimport HomeworkList from \"./HomeworkList\";\nimport _ from \"lodash\";\nimport {\n  addNewHomework,\n  getHomework,\n} from \"../../../../../actions/HomeworkAction\";\nimport ArchivedHomework from \"./ArchivedHomework\";\nimport Can from \"../../../../../can\";\nimport { RoleContext } from \"../../../../../Context\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { roleIdAdmin, roleIdProfessor, roleIdStudent } from \"../../../../../config/config\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport SweetAlert from 'react-bootstrap-sweetalert';\n\n\nclass Homework extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpenAddModal: false,\n      openArchive: false,\n      nameFile: \"\",\n      HomeworkTypes: [\n        {\n          label: <IntlMessages id=\"toDo.book.exercise\" />,\n          value: \"book\",\n          id: 1,\n        },\n        {\n          label: <IntlMessages id=\"toDo.series.exercise\" />,\n          value: \"serie\",\n          id: 2,\n        },\n        {\n          label: <IntlMessages id=\"toDo.other.exercise\" />,\n          value: \"other\",\n          id: 3,\n        },\n      ],\n\n      HomeworkStatus: [\n        {\n          label: <IntlMessages id=\"status.classe.virtual.programmÃ©\" />,\n          value: \"programed\",\n          id: 1,\n        },\n        {\n          label: <IntlMessages id=\"status.classe.virtual.progrÃ©s\" />,\n          value: \"progress\",\n          id: 2,\n        },\n        {\n          label: <IntlMessages id=\"status.classe.virtual.tÃ©rminÃ©\" />,\n          value: \"finished\",\n          id: 3,\n        },\n      ],\n\n      homeworkType: \"\",\n      subjectId: null,\n      subjectColor: \"\",\n      description: \"\",\n      courseUrl: \"\",\n      homeworkFiles: [],\n      nameFiles: [],\n      publicationDate: new Date(),\n      postTime: new Date(),\n      classes: [],\n      subjects: [],\n      eventChecked: \"\",\n      classesId: [],\n      errorClass: false,\n      correctionDate: new Date(),\n      renderingDate: new Date(),\n      isEmptylistClass: false,\n      classesData: [],\n      subjectName: \"\",\n      classId: null,\n      classList: [],\n      homeworks: [],\n      statusHomework: null,\n      homeworkClass: [],\n      idType: \"\",\n      homeworksListForStudent: [],\n      classStudent:null,\n      show:false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeHomeworkType = this.handleChangeHomeworkType.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.attachFile = this.attachFile.bind(this);\n    this.deleteFile = this.deleteFile.bind(this);\n    this.handleChangePostTime = this.handleChangePostTime.bind(this);\n    this.handleChangeDate = this.handleChangeDate.bind(this);\n    this.handleChangeClassList = this.handleChangeClassList.bind(this);\n    this.addNewHomework = this.addNewHomework.bind(this);\n    this.cancelModal = this.cancelModal.bind(this);\n    this.openArchive = this.openArchive.bind(this);\n    this.handleChangeFilter = this.handleChangeFilter.bind(this);\n    this.handleChangeFilterType = this.handleChangeFilterType.bind(this);\n    this.handleDate = this.handleDate.bind(this);\n    this.handleChangeFilterStatus = this.handleChangeFilterStatus.bind(this);\n  }\n\n  handleChangeFilterStatus = (name) => (event) => {\n    this.setState({ idType: \"\" });\n    let homeworksList = [];\n    if (this.state.classId !== null) {\n      homeworksList = this.state.homeworkClass;\n    } else {\n      homeworksList = this.props.homeworks;\n    }\n\n    if (event.target.value === \"all\") {\n      this.setState({\n        [name]: event.target.value,\n        homeworks: homeworksList,\n      });\n    } else {\n      let homeworks = homeworksList.filter(\n        (element) => element.status === event.target.value\n      );\n      this.setState({\n        [name]: event.target.value,\n        homeworks,\n        homeworksListForStudent: homeworks,\n      });\n    }\n  };\n\n  handleDate() {\n    let homeworksList = [];\n    if (this.state.classId !== null) {\n      homeworksList = this.state.homeworkClass;\n    } else {\n      homeworksList = this.props.homeworks;\n    }\n\n    let homeworks = [];\n    homeworksList.forEach((element) => {\n      let item = {\n        ...element,\n        date: new Date(element.homework.publication_date),\n      };\n      homeworks.push(item);\n    });\n    const sortedHomework = homeworks.slice().sort((a, b) => b.date - a.date);\n    this.setState({\n      homeworks: sortedHomework,\n    });\n  }\n\n  handleChangeFilterType = (name) => (event) => {\n    let homeworksList = [];\n    if (this.state.classId !== null) {\n      homeworksList = this.state.homeworkClass;\n    } else {\n      homeworksList = this.props.homeworks;\n    }\n    if (event.target.value === \"all\") {\n      this.setState({\n        [name]: event.target.value,\n        homeworks: homeworksList,\n      });\n    } else {\n      let homeworks = homeworksList.filter(\n        (element) => element.homework.homework_type === event.target.value\n      );\n      this.setState({ [name]: event.target.value, homeworks });\n    }\n  };\n\n  handleChangeFilter = (name) => (event) => {\n    if (event.target.value === \"all\") {\n      this.setState({\n        homeworks: this.props.homeworks,\n      });\n    } else {\n      let homeworks = this.props.homeworks.filter(\n        (element) => element.classId === event.target.value\n      );\n      this.setState({ homeworks, homeworkClass: homeworks });\n    }\n\n    this.setState({\n      [name]: event.target.value,\n      statusHomework: \"\",\n      idType: \"\",\n    });\n  };\n\n  cancelModal() {\n    this.setState({\n      isOpenAddModal: false,\n      nameFile: \"\",\n      homeworkType: \"\",\n      subjectId: null,\n      subjectColor: \"\",\n      description: \"\",\n      courseUrl: \"\",\n      homeworkFiles: [],\n      nameFiles: [],\n      publicationDate: new Date(),\n      postTime: new Date(),\n      classes: [],\n      eventChecked: \"\",\n      classesId: [],\n      errorClass: false,\n      correctionDate: new Date(),\n      renderingDate: new Date(),\n      isEmptylistClass: false,\n      classesData: [],\n      subjectName: \"\",\n    });\n  }\n\n  addNewHomework(e) {\n    e.preventDefault();\n    if (this.state.subjectId === null) {\n      this.setState({ errorClass: true });\n    } else if (_.isEmpty(this.state.classesId)) {\n      this.setState({ isEmptylistClass: true });\n    } else {\n      let dataHomework = {};\n      dataHomework.title = this.state.nameFile;\n      dataHomework.homeworkType = this.state.homeworkType;\n      dataHomework.subjectId = this.state.subjectId;\n      dataHomework.subjectColor = this.state.subjectColor;\n      dataHomework.classesId = this.state.classesId;\n      dataHomework.publicationDate = this.state.publicationDate;\n      dataHomework.publicationTime = this.state.postTime;\n      dataHomework.courseUrl = this.state.courseUrl;\n      dataHomework.description = this.state.description;\n      dataHomework.correctionDate = this.state.correctionDate;\n      dataHomework.renderingDate = this.state.renderingDate;\n      dataHomework.subjectName = this.state.subjectName;\n      this.props.dispatch(\n        addNewHomework(\n          dataHomework,\n          this.state.homeworkFiles,\n          this.state.classesData\n        )\n      );\n      this.cancelModal();\n    }\n  }\n\n  handleChangeClassList = (selectedOption) => {\n    if (selectedOption != null) {\n      let classesId = _.map(selectedOption, \"id\");\n      this.setState({\n        classesId,\n        isEmptylistClass: false,\n        classesData: selectedOption,\n      });\n    } else {\n      this.setState({ classesId: [] });\n    }\n  };\n\n  handleChangeDate = (name) => (date) => {\n    this.setState({ [name]: date });\n  };\n\n  handleChangePostTime = (time) => {\n    this.setState({ postTime: time._d });\n  };\n\n  deleteFile(filename) {\n    let nameFiles = this.state.nameFiles.filter(\n      (element) => element != filename\n    );\n\n    let homeworkFiles = this.state.homeworkFiles.filter(\n      (element) => element.name != filename\n    );\n\n    this.setState({ nameFiles, homeworkFiles });\n  }\n\n  attachFile(e) {\n    var oldFiles = this.state.homeworkFiles;\n    var files = Object.values(e.target.files);\n    var nameFiles = this.state.nameFiles;\n    if (files !== undefined && this.state.nameFiles.length + files.length < 6) {\n      files.map((element) => {\n        nameFiles.push(element.name);\n        oldFiles.push(element);\n      });\n      this.setState({ homeworkFiles: oldFiles, nameFiles });\n    } else {\n      this.setState({\n        messageAlerte: \"Vous avez dÃ©passer 5 fichiers\",\n        alerteStatus: true,\n      });\n      setTimeout(() => {\n        this.setState({ messageAlerte: \"\", alerteStatus: false });\n      }, 4000);\n    }\n  }\n\n  handleChangeSubject = (selectedOption) => {\n    this.setState({\n      subjectId: selectedOption.id,\n      subjectColor: selectedOption.color,\n      subjectName: selectedOption.label,\n      errorClass: false,\n    });\n    if (this.props.userProfile.role_id === roleIdAdmin) {\n      let apiEndpoint = `/assignment_class_subjects?access_token=${localStorage.token}&filter[where][fk_id_subject_v4]=${selectedOption.value}&filter[include]=class&filter[include]=course`;\n      classService.get(apiEndpoint).then((response) => {\n        if (response) {\n          let classesSubjects = response.data.filter(\n            (element) => element.status\n          );\n          let newList = [];\n          classesSubjects.map((element) => {\n            let object = {};\n            if (!_.isEmpty(element.course)) {\n              object.label = element.class.name;\n              object.id = element.course[0].id;\n              object.value = element.course[0].id;\n\n              newList.push(object);\n            }\n          });\n          this.setState({ classes: newList });\n        }\n      });\n    } else {\n      let apiEndpoint = `/assignment_class_subjects/${selectedOption.value}?access_token=${localStorage.token}&filter[include]=class&filter[include]=course`;\n      classService.get(apiEndpoint).then((response) => {\n        if (response) {\n          let element = response.data;\n          if (element.status) {\n            let object = {};\n            object.label = element.class.name;\n            object.id = element.course[0].id;\n            object.value = element.course[0].id;\n            this.setState({ classes: [object] });\n          }\n        }\n      });\n    }\n  };\n\n  handleChangeHomeworkType = (selectedOption) => {\n    this.setState({ homeworkType: selectedOption.value });\n  };\n\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n\n  openAddModal() {\n    this.setState({ isOpenAddModal: !this.state.isOpenAddModal });\n  }\n  openArchive() {\n    this.setState((previousState) => ({\n      openArchive: !previousState.openArchive,\n    }));\n  }\n\n  UNSAFE_componentWillMount() {\n    if (this.props.userProfile.role_id === roleIdAdmin) {\n      let subjects = createListSubject(this.props.subjects);\n      this.setState({ subjects, classList: this.props.classSettings });\n    } else if (this.props.userProfile.role_id === roleIdProfessor) {\n      const professorId = this.props.userProfile.user.profiles[0].professors[0]\n        .id;\n      let apiEndpoint = `/course_v4?access_token=${localStorage.token}&filter[where][fk_id_professor]=${professorId}&filter[include][assignmentClassSubject]=subject&filter[include][assignmentClassSubject]=class`;\n      classService.get(apiEndpoint).then((response) => {\n        if (response) {\n          let subjects = [];\n          let classes = [];\n          response.data.map((element) => {\n            let object = {};\n            let classItem = {};\n            object.label = element.assignmentClassSubject.subject.name;\n            object.id = element.assignmentClassSubject.subject.id;\n            object.value = element.assignmentClassSubject.id;\n            subjects.push(object);\n            classItem = element.assignmentClassSubject.class;\n            classes.push(classItem);\n          });\n          this.setState({ subjects, classList: classes });\n        }\n      });\n    } else if (this.props.userProfile.role_id === roleIdStudent) {\n      let classStudent = this.props.userProfile.user.profiles[0].students[0].inscription[0].fk_id_class_v4\n      this.setState({classStudent})\n      if (classStudent === null) {\n        this.setState({show: true})\n      }\n      let subjects = createListSubject(this.props.subjects);\n      this.setState({ subjects });\n    }else {\n      let subjects = createListSubject(this.props.subjects);\n      this.setState({ subjects });\n    }\n    this.props.dispatch(\n      getHomework(\n        this.props.userProfile.establishment_id,\n        this.props.userProfile.school_year_id,\n        this.props.userProfile.id,\n        this.props.userProfile.role_id\n      )\n    );\n  }\n  componentDidUpdate(previouProps) {\n    if (previouProps.subjects !== this.props.subjects) {\n      if (this.props.userProfile.role_id !== roleIdProfessor) {\n        let subjects = createListSubject(this.props.subjects);\n        this.setState({ subjects });\n      }\n    }\n    if (previouProps.classSettings !== this.props.classSettings) {\n      if (this.props.userProfile.role_id === roleIdAdmin) {\n        this.setState({ classList: this.props.classSettings });\n      }\n    }\n    if (previouProps.homeworks !== this.props.homeworks) {\n      this.setState({ homeworks: this.props.homeworks });\n    }\n  }\n  onConfirm = () => {\n    this.setState({\n      show: false,\n    });\n  };\n\n  render() {\n    let detailCards = [\n      {\n        cardColor: \"primary\",\n        imageIcon: require(\"../../../../../assets/images/dashboard/teams-icon.png\"),\n\n        // title: this.props.virtualClasses.length,\n        subTitle: <IntlMessages id={`message.Numbers.of.students`} />,\n      },\n      {\n        cardColor: \"secondary\",\n        imageIcon: require(\"../../../../../assets/images/dashboard/tasks-icon.png\"),\n        // title: this.state.prog,\n        subTitle: <IntlMessages id={`homework.file`} />,\n      },\n      {\n        cardColor: \"info\",\n        imageIcon: require(\"../../../../../assets/images/dashboard/project-icon.png\"),\n        // title: this.state.encours,\n        subTitle: <IntlMessages id={`homework.uncorrected`} />,\n      },\n      {\n        cardColor: \"success\",\n        imageIcon: require(\"../../../../../assets/images/dashboard/files-icon.png\"),\n        // title: this.state.encours,\n        subTitle: <IntlMessages id={`homework.educational.files`} />,\n      },\n    ];\n    return (\n      <div className=\"app-wrapper col-lg-12 col-md-12\">\n        <div className=\"d-flex flex-column mb-3\">\n          <div className=\"row col-lg-12 col-md- col-sm-12  \">\n            {detailCards.map((data, index) => (\n              <div\n                key={index}\n                className=\"col-xl-3 col-lg-3 col-md-6 col-sm-6 col-12\"\n              >\n                <IconWithTextCard data={data} />\n              </div>\n            ))}\n          </div>\n          <div>\n            {this.state.alerteStatus && (\n              <UncontrolledAlert className=\"alert-addon-card bg-danger bg-success text-white shadow-lg\">\n                <span className=\"icon-addon alert-addon\">\n                  <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n                </span>\n                <span className=\"d-inline-block\">\n                  {\" \"}\n                  {this.state.messageAlerte}{\" \"}\n                </span>\n              </UncontrolledAlert>\n            )}\n\n            {this.props.errorStatus && (\n              <UncontrolledAlert className=\"alert-addon-card bg-danger   text-white shadow-lg\">\n                <span className=\"icon-addon alert-addon\">\n                  <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n                </span>\n                <span className=\"d-inline-block\"> {this.props.message} </span>\n              </UncontrolledAlert>\n            )}\n            {this.props.successStatus && (\n              <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n                <span className=\"icon-addon alert-addon\">\n                  <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n                </span>\n                <span className=\"d-inline-block\"> {this.props.message} </span>\n              </UncontrolledAlert>\n            )}\n          </div>\n          <div className=\"row\">\n            <div className=\"col-12 col-md-auto \">\n              <CardBox styleName=\"row\">\n                <HomeworkInProgress />\n              </CardBox>\n            </div>\n\n            <div className=\"col \">\n              <RoleContext.Consumer>\n                {({ role }) => (\n                  <Can\n                    role={role}\n                    perform=\"user-permission\"\n                    data={{\n                      permission: \"add-homework\",\n                      permissionList: this.props.userPermission,\n                    }}\n                    yes={() => (\n                      <>\n                        <CardBox styleName=\"col-lg-12 \">\n                          <div className=\"row\">\n                            <div>\n                              <Fab\n                                size=\"small\"\n                                color=\"secondary\"\n                                aria-label=\"Add\"\n                                onClick={this.openAddModal.bind(this)}\n                              >\n                                {this.state.isOpenAddModal ? (\n                                  <RemoveSharpIcon />\n                                ) : (\n                                  <AddIcon />\n                                )}\n                              </Fab>\n                            </div>\n                            <div\n                              className=\"p-2\"\n                              style={{ fontFamily: \"Roboto\", fontSize: \"17px\" }}\n                            >\n                              <IntlMessages id=\"modal.addToDo\" />\n                            </div>\n\n                            <div className=\"pl-5 \">\n                              <Fab\n                                size=\"small\"\n                                aria-label=\"Add\"\n                                style={{\n                                  backgroundColor: \"#ffbb33\",\n                                  color: \"#ffffff\",\n                                }}\n                                onClick={this.openArchive}\n                              >\n                                <DeleteOutlineIcon />\n                              </Fab>\n                            </div>\n                            <div\n                              className=\"p-2\"\n                              style={{ fontFamily: \"Roboto\", fontSize: \"17px\" }}\n                            >\n                              <IntlMessages id=\"icon.archives\" />\n                            </div>\n                          </div>\n                        </CardBox>\n\n                        {this.state.isOpenAddModal && (\n                          <CardBox styleName=\"col-lg-12\">\n                            <AddHomework\n                              values={this.state}\n                              handleChange={this.handleChange}\n                              handleChangeHomeworkType={\n                                this.handleChangeHomeworkType\n                              }\n                              subjects={this.state.subjects}\n                              handleChangeSubject={this.handleChangeSubject}\n                              attachFile={this.attachFile}\n                              deleteFile={this.deleteFile}\n                              handleChangePostTime={this.handleChangePostTime}\n                              handleChangeDate={this.handleChangeDate}\n                              handleChangeClassList={this.handleChangeClassList}\n                              addNewHomework={this.addNewHomework}\n                              cancelModal={this.cancelModal}\n                            />\n                          </CardBox>\n                        )}\n                      </>\n                    )}\n                  />\n                )}\n              </RoleContext.Consumer>\n\n              <RoleContext.Consumer>\n                {({ role }) => (\n                  <Can\n                    role={role}\n                    perform=\"user-permission\"\n                    data={{\n                      permission: \"get-homework\",\n                      permissionList: this.props.userPermission,\n                    }}\n                    yes={() => (\n                      <>\n                        {this.state.openArchive ? (\n                          <div>\n                            <ArchivedHomework\n                              homeworks={this.props.archivedHomework}\n                            />\n                          </div>\n                        ) : (\n                          \"\"\n                        )}\n                      </>\n                    )}\n                  />\n                )}\n              </RoleContext.Consumer>\n              <RoleContext.Consumer>\n                {({ role }) => (\n                  <Can\n                    role={role}\n                    perform=\"user-permission\"\n                    data={{\n                      permission: \"get-homework\",\n                      permissionList: this.props.userPermission,\n                    }}\n                    yes={() => (\n                      <>\n                        {!this.state.openArchive ? (\n                          <div>\n                            <div className=\"d-flex flex-wrap flex-row bd-highlight mb-3\">\n                              <Can\n                                role={role}\n                                perform=\"homework-filter-class\"\n                                yes={() => (\n                                  <>\n                                    <div className=\"p-2 s bd-highlight col-lg-2 col-md-6 col-sm-5\">\n                                      <TextField\n                                        id=\"idClasse\"\n                                        name=\"idClasse\"\n                                        select\n                                        value={this.state.classId}\n                                        onChange={this.handleChangeFilter(\n                                          \"classId\"\n                                        )}\n                                        SelectProps={{}}\n                                        label={\n                                          <IntlMessages\n                                            id={`components.note.class`}\n                                          />\n                                        }\n                                        InputProps={{ disableUnderline: true }}\n                                        margin=\"normal\"\n                                        fullWidth\n                                      >\n                                        <MenuItem key={0} value=\"all\">\n                                          \n                                          {\n                                            <IntlMessages\n                                              id={`userStuppDisplay.all`}\n                                            />\n                                          }\n                                        </MenuItem>\n                                        {this.state.classList.map((option) => (\n                                          <MenuItem\n                                            key={option.id}\n                                            value={option.id}\n                                          >\n                                            {option.name}\n                                          </MenuItem>\n                                        ))}\n                                      </TextField>\n                                    </div>\n\n                                    <div className=\"pt-5 bd-highlight\">|</div>\n                                  </>\n                                )}\n                              />\n                              <div className=\"p-2 bd-highlight col-lg-2 col-md-6 col-sm-6\">\n                                <TextField\n                                  id=\"statusHomework\"\n                                  name=\"statusHomework\"\n                                  select\n                                  value={this.state.statusHomework}\n                                  onChange={this.handleChangeFilterStatus(\n                                    \"statusHomework\"\n                                  )}\n                                  SelectProps={{}}\n                                  label={\n                                    <IntlMessages id={`components.todo.etat`} />\n                                  }\n                                  InputProps={{ disableUnderline: true }}\n                                  margin=\"normal\"\n                                  fullWidth\n                                >\n                                  <MenuItem key={0} value=\"all\">\n                                    {\" \"}\n                                    {\n                                      <IntlMessages\n                                        id={`userStuppDisplay.all`}\n                                      />\n                                    }\n                                  </MenuItem>\n                                  {this.state.HomeworkStatus.map((option) => (\n                                    <MenuItem\n                                      key={option.id}\n                                      value={option.value}\n                                    >\n                                      {option.label}\n                                    </MenuItem>\n                                  ))}\n                                </TextField>\n                              </div>\n                              <div className=\"pt-5 bd-highlight\">|</div>\n                              <div className=\"p-2 bd-highlight col-lg-2 col-md-6 col-sm-6\">\n                                <TextField\n                                  id=\"idType\"\n                                  name=\"idType\"\n                                  select\n                                  value={this.state.idType || \"\"}\n                                  onChange={this.handleChangeFilterType(\n                                    \"idType\"\n                                  )}\n                                  SelectProps={{}}\n                                  label={\n                                    <IntlMessages id={`components.todo.type`} />\n                                  }\n                                  InputProps={{ disableUnderline: true }}\n                                  margin=\"normal\"\n                                  fullWidth\n                                >\n                                  <MenuItem key={0} value=\"all\">\n                                    {\" \"}\n                                    {\n                                      <IntlMessages\n                                        id={`userStuppDisplay.all`}\n                                      />\n                                    }\n                                  </MenuItem>\n                                  {this.state.HomeworkTypes.map((option) => (\n                                    <MenuItem\n                                      key={option.id}\n                                      value={option.value}\n                                    >\n                                      {option.label}\n                                    </MenuItem>\n                                  ))}\n                                </TextField>\n                              </div>\n                              <div className=\"pt-5 bd-highlight\">|</div>\n                              <div className=\"pt-5  bd-highlight col-lg-2 col-md-6 col-sm-6\">\n                                <h5 onClick={this.handleDate}>\n                                  <IntlMessages id=\"complaint.date\" />\n                                </h5>\n                              </div>\n                            </div>\n\n                            <HomeworkList\n                              homeworks={this.state.homeworks}\n                              subjects={this.state.subjects}\n                            />\n                          </div>\n                        ) : (\n                          \"\"\n                        )}\n                      </>\n                    )}\n                  />\n                )}\n              </RoleContext.Consumer>\n            </div>\n          </div>\n        </div>\n        {this.props.userProfile.role_id === roleIdStudent && this.state.classStudent === null ?\n             <SweetAlert\n             show={this.state.show}\n             title={<IntlMessages id=\"alert.affect.student\" />}\n             onConfirm={this.onConfirm}\n           ></SweetAlert> :''\n      }\n   \n      </div>\n    );\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    userProfile: state.auth.userProfile,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    subjects: state.subject.subjects,\n    homeworks: state.HomeworkReducer.homeworks,\n    archivedHomework: state.HomeworkReducer.archivedHomework,\n    classSettings: state.ClassSettingsReducer.classSettings,\n    userPermission: state.PermissionReducer.userPermission,\n  };\n};\nexport default connect(mapStateToProps)(Homework);\n\nfunction createListSubject(subjects) {\n  let newList = subjects.map((element) => {\n    let object = {};\n    object.label = element.name;\n    object.id = element.id;\n    object.value = element.id;\n    object.color = element.color;\n    return object;\n  });\n  return newList;\n}\n"]},"metadata":{},"sourceType":"module"}