{"ast":null,"code":"import { getName } from './countriesAction';\nimport { classService } from '../_services/class.service';\nimport _ from 'lodash';\nimport { SHOW_ERROR_MESSAGE, HIDE_ERROR_MESSAGE, HIDE_SUCCESS_MESSAGE, SHOW_SUCCESS_MESSAGE, ADD_SUBJECT_SETTING, EDIT_SUBJECT_SETTING, GET_SUBJECT_SETTING, DELETE_SUBJECT_SETTING, GET_SUBJECT_BY_Establishment_AND_SCHOOLYEAR } from \"../constants/ActionTypes\";\n\nfunction getSubjectName(subjects, subject_id) {\n  let subjectName = subjects.find(element => element.id === subject_id);\n  return getName(subjectName);\n}\n\nfunction subjectsByEstabType(estab_type_id) {\n  return dispatch => {\n    let apiEndpoint = `/subjects?access_token=${localStorage.token}&filter[where][estab_type_id]=` + estab_type_id;\n    classService.get(apiEndpoint).then(response => {\n      let subjectsList = [];\n      response.data.forEach(element => {\n        subjectsList.push({\n          id: element.id,\n          name: getName(element),\n          name_FR: element.name_FR,\n          name_AR: element.name_AR,\n          name_EN: element.name_EN,\n          coefficient: element.coefficient,\n          level_id: element.level_id,\n          section_id: element.section_id,\n          horaires_officiels: element.horaires_officiels,\n          horaires_supplementaires: element.horaires_supplementaires,\n          hexa_color: element.hexa_color\n        });\n      });\n      dispatch({\n        type: 'DATA_LOADED_SUBJECT',\n        payload: subjectsList\n      });\n    }).catch(error => {});\n  };\n}\n\nfunction subjectsByLevelBySection(subjects, level_id, section_id) {\n  let subjectList = [];\n\n  if (section_id === 0 && level_id === 0) {\n    subjectList = [];\n  } else if (level_id === 0) {\n    subjectList = subjects.filter(element => element.section_id === section_id);\n  } else if (section_id === 0) {\n    subjectList = subjects.filter(element => element.level_id === level_id);\n  } else {\n    subjectList = subjects.filter(element => element.level_id === level_id && element.section_id === section_id);\n  }\n\n  return subjectList;\n}\n\nfunction getSubject() {\n  return dispatch => {\n    let apiEndpoint = `/subjects?access_token=${localStorage.token}`;\n    classService.get(apiEndpoint).then(response => {\n      let subjectsList = [];\n      response.data.forEach(element => {\n        subjectsList.push({\n          id: element.id,\n          name: getName(element),\n          name_FR: element.name_FR,\n          name_AR: element.name_AR,\n          name_EN: element.name_EN,\n          coefficient: element.coefficient,\n          level_id: element.level_id,\n          section_id: element.section_id,\n          horaires_officiels: element.horaires_officiels,\n          horaires_supplementaires: element.horaires_supplementaires,\n          hexa_color: element.hexa_color\n        });\n      });\n      dispatch({\n        type: 'DATA_LOADED_SUBJECT',\n        payload: subjectsList\n      });\n    }).catch(err => {});\n  };\n}\n\nexport { getSubject, getSubjectName, subjectsByEstabType, subjectsByLevelBySection };\nexport function addData(subject) {\n  return dispatch => {\n    let subjectData = {\n      name: subject.name,\n      description: subject.description,\n      coefficient: subject.coefficient,\n      status: true,\n      establishment_id: subject.establishment_id\n    };\n    let apiEndpoint = `/subjects?access_token=${localStorage.token}`;\n    classService.post(apiEndpoint, subjectData).then(response => {\n      dispatch({\n        type: 'ADD_SUBJECT',\n        payload: response.data\n      });\n      alert(\"L'ajout est effectué avec succès\");\n    }).catch(error => {});\n  };\n}\nexport function deleteData(idItem) {\n  return dispatch => {\n    let apiEndpoint = `/subjects/` + idItem + `?access_token=${localStorage.token}`;\n    classService.get(apiEndpoint).then(response => {\n      const dataSubject = response.data;\n      let subjectData = {\n        name: dataSubject.name,\n        description: dataSubject.description,\n        coefficient: dataSubject.coefficient,\n        status: false,\n        establishment_id: dataSubject.establishment_id,\n        id: dataSubject.id\n      };\n      let apiEndpoint2 = `/subjects/` + dataSubject.id + `?access_token=${localStorage.token}`;\n      classService.put(apiEndpoint2, subjectData).then(response => {\n        dispatch({\n          type: 'DELETE_SUBJECT',\n          payload: response.data\n        });\n      }).catch(error => {});\n    }).catch(error => {});\n  };\n}\nexport function editData(data) {\n  return dispatch => {\n    let subjectData = {\n      name: data.name,\n      description: data.description,\n      coefficient: data.coefficient,\n      status: true,\n      establishment_id: data.establishment_id,\n      id: data.id\n    };\n    let apiEndpoint = `/subjects/` + data.id + `?access_token=${localStorage.token}`;\n    classService.put(apiEndpoint, subjectData).then(response => {\n      dispatch({\n        type: 'EDIT_SUBJECT',\n        payload: response.data\n      });\n    }).catch(error => {});\n  };\n}\nexport function getSubjectsByEstablishmentId(id) {\n  let apiEndpoint = '';\n  return dispatch => {\n    apiEndpoint = `/establishments/${id}?access_token=${localStorage.token}`;\n    classService.get(apiEndpoint).then(response => {\n      if (response) {\n        const establishmentType = response.data.estab_type_id;\n        apiEndpoint = `/subjects?access_token=${localStorage.token}&filter[where][estab_type_id]=` + establishmentType;\n        classService.get(apiEndpoint).then(response => {\n          if (response) {\n            let subjectsList = [];\n            response.data.forEach(element => {\n              subjectsList.push({\n                id: element.id,\n                name: getName(element),\n                name_FR: element.name_FR,\n                name_AR: element.name_AR,\n                name_EN: element.name_EN,\n                coefficient: element.coefficient,\n                level_id: element.level_id,\n                section_id: element.section_id,\n                horaires_officiels: element.horaires_officiels,\n                horaires_supplementaires: element.horaires_supplementaires,\n                hexa_color: element.hexa_color\n              });\n            });\n            dispatch({\n              type: 'DATA_LOADED_SUBJECT',\n              payload: subjectsList\n            });\n          }\n        });\n      }\n    });\n  };\n}\nexport function getSubjectsForProf(id) {\n  return dispatch => {\n    let apiEndpoint = `/professors?access_token=${localStorage.token}&filter[where][profile_id]=${id}&filter[include][profSubjects][subject]`;\n    classService.get(apiEndpoint).then(res => {\n      let subjectsFiltred = _.map(res.data[0].profSubjects, 'subject');\n\n      dispatch({\n        type: 'DATA_LOADED_SUBJECT_PROFESSOR',\n        payload: subjectsFiltred\n      });\n    });\n  };\n}\nexport function addSubjectSetting(data) {\n  return dispatch => {\n    let apiEndpoint = `/subjects_v3?access_token=${localStorage.token}`;\n    classService.post(apiEndpoint, data).then(response => {\n      if (response) {\n        dispatch({\n          type: ADD_SUBJECT_SETTING,\n          payload: response.data\n        });\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: \"La création est effectuée avec succès\"\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_SUCCESS_MESSAGE\n          });\n        }, 4000);\n      } else {\n        dispatch({\n          type: SHOW_ERROR_MESSAGE,\n          payload: \"Une erreur est survenue lors de la création merci d'essayer à nouveau\"\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_ERROR_MESSAGE\n          });\n        }, 4000);\n      }\n    });\n  };\n}\nexport function editSubjectSetting(data, idItem) {\n  return dispatch => {\n    let apiEndpoint = `/subjects_v3/${idItem}?access_token=${localStorage.token}`;\n    classService.patch(apiEndpoint, data).then(response => {\n      if (response) {\n        dispatch({\n          type: EDIT_SUBJECT_SETTING,\n          payload: response.data\n        });\n      }\n    });\n  };\n}\nexport function getSubjectSetting(establishementId, schoolYearId) {\n  return dispatch => {\n    let apiEndpoint = `/subjects_v3?access_token=${localStorage.token}&filter[where][and][0][fk_id_establishment]=${establishementId}&filter[where][and][1][fk_id_school_year]=${schoolYearId}`;\n    classService.get(apiEndpoint).then(response => {\n      if (response) {\n        dispatch({\n          type: GET_SUBJECT_SETTING,\n          payload: response.data\n        });\n      }\n    });\n  };\n}\nexport function deleteSubjectSetting(itemId) {\n  return dispatch => {\n    let apiEndpoint = `/subjects_v3/${itemId.id}?access_token=${localStorage.token}&filter[where][and][0][fk_id_establishment]=${localStorage.establishment_id}&filter[where][and][1][fk_id_school_year]=${localStorage.school_year_id}`;\n    classService.patch(apiEndpoint, {\n      status: false\n    }).then(response => {\n      if (response) {\n        dispatch({\n          type: DELETE_SUBJECT_SETTING,\n          payload: response.data\n        });\n      }\n    });\n  };\n}\nexport function assignSubjectSetting(data) {\n  return dispatch => {\n    let apiEndpoint = `/subject_level_sections?access_token=${localStorage.token}`;\n    classService.post(apiEndpoint, data).then(response => {\n      if (response) {\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: \"L'affectation du matière est effectuée avec succès\"\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_SUCCESS_MESSAGE\n          });\n        }, 4000);\n      } else {\n        dispatch({\n          type: SHOW_ERROR_MESSAGE,\n          payload: \"Une erreur est survenue lors d'affctation merci d'essayer à nouveau\"\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_ERROR_MESSAGE\n          });\n        }, 4000);\n      }\n    });\n  };\n}\nexport function getSubjectByEstablishmentAndSchoolYear(establishementId, schoolYearId) {\n  return dispatch => {\n    let apiEndpoint = `/education_types/getSubjectByEstablishmentAndSchoolYear/${establishementId}/${schoolYearId}?access_token=${localStorage.token}`;\n    classService.get(apiEndpoint).then(response => {\n      if (response) {\n        dispatch({\n          type: GET_SUBJECT_BY_Establishment_AND_SCHOOLYEAR,\n          payload: response.data.establishmentData\n        });\n      }\n    });\n  };\n}","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/actions/subjectAction.js"],"names":["getName","classService","_","SHOW_ERROR_MESSAGE","HIDE_ERROR_MESSAGE","HIDE_SUCCESS_MESSAGE","SHOW_SUCCESS_MESSAGE","ADD_SUBJECT_SETTING","EDIT_SUBJECT_SETTING","GET_SUBJECT_SETTING","DELETE_SUBJECT_SETTING","GET_SUBJECT_BY_Establishment_AND_SCHOOLYEAR","getSubjectName","subjects","subject_id","subjectName","find","element","id","subjectsByEstabType","estab_type_id","dispatch","apiEndpoint","localStorage","token","get","then","response","subjectsList","data","forEach","push","name","name_FR","name_AR","name_EN","coefficient","level_id","section_id","horaires_officiels","horaires_supplementaires","hexa_color","type","payload","catch","error","subjectsByLevelBySection","subjectList","filter","getSubject","err","addData","subject","subjectData","description","status","establishment_id","post","alert","deleteData","idItem","dataSubject","apiEndpoint2","put","editData","getSubjectsByEstablishmentId","establishmentType","getSubjectsForProf","res","subjectsFiltred","map","profSubjects","addSubjectSetting","setTimeout","editSubjectSetting","patch","getSubjectSetting","establishementId","schoolYearId","deleteSubjectSetting","itemId","school_year_id","assignSubjectSetting","getSubjectByEstablishmentAndSchoolYear","establishmentData"],"mappings":"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","sourcesContent":["import { getName } from './countriesAction';\nimport { classService } from '../_services/class.service';\nimport _ from 'lodash';\nimport {\n  SHOW_ERROR_MESSAGE,\n  HIDE_ERROR_MESSAGE,\n  HIDE_SUCCESS_MESSAGE,\n  SHOW_SUCCESS_MESSAGE,\n  ADD_SUBJECT_SETTING,\n  EDIT_SUBJECT_SETTING,\n  GET_SUBJECT_SETTING,\n  DELETE_SUBJECT_SETTING,\n  GET_SUBJECT_BY_Establishment_AND_SCHOOLYEAR\n} from \"../constants/ActionTypes\";\n\nfunction getSubjectName(subjects, subject_id) {\n  let subjectName = subjects.find((element) => element.id === subject_id);\n  return getName(subjectName);\n}\n\nfunction subjectsByEstabType(estab_type_id) {\n  return (dispatch) => {\n    let apiEndpoint =\n      `/subjects?access_token=${localStorage.token}&filter[where][estab_type_id]=` +\n      estab_type_id;\n    classService\n      .get(apiEndpoint)\n      .then((response) => {\n        let subjectsList = [];\n        response.data.forEach((element) => {\n          subjectsList.push({\n            id: element.id,\n            name: getName(element),\n            name_FR: element.name_FR,\n            name_AR: element.name_AR,\n            name_EN: element.name_EN,\n            coefficient: element.coefficient,\n            level_id: element.level_id,\n            section_id: element.section_id,\n            horaires_officiels: element.horaires_officiels,\n            horaires_supplementaires: element.horaires_supplementaires,\n            hexa_color: element.hexa_color,\n          });\n        });\n        dispatch({ type: 'DATA_LOADED_SUBJECT', payload: subjectsList });\n      })\n      .catch((error) => { });\n  };\n}\n\nfunction subjectsByLevelBySection(subjects, level_id, section_id) {\n  let subjectList = [];\n  if (section_id === 0 && level_id === 0) {\n    subjectList = [];\n  } else if (level_id === 0) {\n    subjectList = subjects.filter(\n      (element) => element.section_id === section_id\n    );\n  } else if (section_id === 0) {\n    subjectList = subjects.filter((element) => element.level_id === level_id);\n  } else {\n    subjectList = subjects.filter(\n      (element) =>\n        element.level_id === level_id && element.section_id === section_id\n    );\n  }\n  return subjectList;\n}\n\nfunction getSubject() {\n  return (dispatch) => {\n    let apiEndpoint = `/subjects?access_token=${localStorage.token}`;\n    classService\n      .get(apiEndpoint)\n      .then((response) => {\n        let subjectsList = [];\n        response.data.forEach((element) => {\n          subjectsList.push({\n            id: element.id,\n            name: getName(element),\n            name_FR: element.name_FR,\n            name_AR: element.name_AR,\n            name_EN: element.name_EN,\n            coefficient: element.coefficient,\n            level_id: element.level_id,\n            section_id: element.section_id,\n            horaires_officiels: element.horaires_officiels,\n            horaires_supplementaires: element.horaires_supplementaires,\n            hexa_color: element.hexa_color,\n          });\n        });\n\n        dispatch({ type: 'DATA_LOADED_SUBJECT', payload: subjectsList });\n      })\n      .catch((err) => { });\n  };\n}\n\nexport {\n  getSubject,\n  getSubjectName,\n  subjectsByEstabType,\n  subjectsByLevelBySection,\n};\n\nexport function addData(subject) {\n  return (dispatch) => {\n    let subjectData = {\n      name: subject.name,\n      description: subject.description,\n      coefficient: subject.coefficient,\n      status: true,\n      establishment_id: subject.establishment_id,\n    };\n    let apiEndpoint = `/subjects?access_token=${localStorage.token}`;\n    classService\n      .post(apiEndpoint, subjectData)\n      .then((response) => {\n        dispatch({ type: 'ADD_SUBJECT', payload: response.data });\n        alert(\"L'ajout est effectué avec succès\");\n      })\n      .catch((error) => { });\n  };\n}\n\nexport function deleteData(idItem) {\n  return (dispatch) => {\n    let apiEndpoint =\n      `/subjects/` + idItem + `?access_token=${localStorage.token}`;\n    classService\n      .get(apiEndpoint)\n      .then((response) => {\n        const dataSubject = response.data;\n        let subjectData = {\n          name: dataSubject.name,\n          description: dataSubject.description,\n          coefficient: dataSubject.coefficient,\n          status: false,\n          establishment_id: dataSubject.establishment_id,\n          id: dataSubject.id,\n        };\n        let apiEndpoint2 =\n          `/subjects/` + dataSubject.id + `?access_token=${localStorage.token}`;\n        classService\n          .put(apiEndpoint2, subjectData)\n\n          .then((response) => {\n            dispatch({ type: 'DELETE_SUBJECT', payload: response.data });\n          })\n          .catch((error) => { });\n      })\n      .catch((error) => { });\n  };\n}\n\nexport function editData(data) {\n  return (dispatch) => {\n    let subjectData = {\n      name: data.name,\n      description: data.description,\n      coefficient: data.coefficient,\n      status: true,\n      establishment_id: data.establishment_id,\n      id: data.id,\n    };\n    let apiEndpoint =\n      `/subjects/` + data.id + `?access_token=${localStorage.token}`;\n    classService\n      .put(apiEndpoint, subjectData)\n      .then((response) => {\n        dispatch({ type: 'EDIT_SUBJECT', payload: response.data });\n      })\n      .catch((error) => { });\n  };\n}\n\nexport function getSubjectsByEstablishmentId(id) {\n  let apiEndpoint = '';\n  return (dispatch) => {\n    apiEndpoint = `/establishments/${id}?access_token=${localStorage.token}`;\n\n    classService.get(apiEndpoint).then((response) => {\n      if (response) {\n        const establishmentType = response.data.estab_type_id;\n        apiEndpoint =\n          `/subjects?access_token=${localStorage.token}&filter[where][estab_type_id]=` +\n          establishmentType;\n        classService.get(apiEndpoint).then((response) => {\n          if (response) {\n            let subjectsList = [];\n            response.data.forEach((element) => {\n              subjectsList.push({\n                id: element.id,\n                name: getName(element),\n                name_FR: element.name_FR,\n                name_AR: element.name_AR,\n                name_EN: element.name_EN,\n                coefficient: element.coefficient,\n                level_id: element.level_id,\n                section_id: element.section_id,\n                horaires_officiels: element.horaires_officiels,\n                horaires_supplementaires: element.horaires_supplementaires,\n                hexa_color: element.hexa_color,\n              });\n            });\n            dispatch({ type: 'DATA_LOADED_SUBJECT', payload: subjectsList });\n          }\n        });\n      }\n    });\n  };\n}\nexport function getSubjectsForProf(id) {\n  return (dispatch) => {\n    let apiEndpoint = `/professors?access_token=${localStorage.token}&filter[where][profile_id]=${id}&filter[include][profSubjects][subject]`;\n    classService.get(apiEndpoint).then((res) => {\n      let subjectsFiltred = _.map(res.data[0].profSubjects, 'subject');\n      dispatch({\n        type: 'DATA_LOADED_SUBJECT_PROFESSOR',\n        payload: subjectsFiltred,\n      });\n    });\n  };\n}\n\nexport function addSubjectSetting(data) {\n\n  return (dispatch) => {\n    let apiEndpoint = `/subjects_v3?access_token=${localStorage.token}`;\n    classService.post(apiEndpoint, data)\n      .then((response) => {\n        if (response) {\n          dispatch({ type: ADD_SUBJECT_SETTING, payload: response.data });\n          dispatch({ type: SHOW_SUCCESS_MESSAGE, payload: \"La création est effectuée avec succès\" })\n          setTimeout(() => {\n            dispatch({ type: HIDE_SUCCESS_MESSAGE });\n          }, 4000);\n        } else {\n          dispatch({ type: SHOW_ERROR_MESSAGE, payload: \"Une erreur est survenue lors de la création merci d'essayer à nouveau\" });\n          setTimeout(() => {\n              dispatch({ type: HIDE_ERROR_MESSAGE });\n          }, 4000);\n        }\n      })\n\n  };\n}\n\n\n\n\n\nexport function editSubjectSetting(data, idItem) {\n  return (dispatch) => {\n    let apiEndpoint = `/subjects_v3/${idItem}?access_token=${localStorage.token}`;\n    classService.patch(apiEndpoint, data).then((response) => {\n      if (response) {\n        dispatch({ type: EDIT_SUBJECT_SETTING, payload: response.data });\n      }\n    });\n  };\n}\n\n\n\nexport function getSubjectSetting(establishementId, schoolYearId) {\n  return (dispatch) => {\n    let apiEndpoint = `/subjects_v3?access_token=${localStorage.token}&filter[where][and][0][fk_id_establishment]=${establishementId}&filter[where][and][1][fk_id_school_year]=${schoolYearId}`;\n    classService.get(apiEndpoint).then((response) => {\n      if (response) {\n        dispatch({ type: GET_SUBJECT_SETTING, payload: response.data });\n      }\n    });\n  };\n}\n\nexport function deleteSubjectSetting(itemId) {\n  return (dispatch) => {\n    let apiEndpoint = `/subjects_v3/${itemId.id}?access_token=${localStorage.token}&filter[where][and][0][fk_id_establishment]=${localStorage.establishment_id}&filter[where][and][1][fk_id_school_year]=${localStorage.school_year_id}`;\n    classService.patch(apiEndpoint, { status: false })\n      .then((response) => {\n        if (response) {\n          dispatch({ type: DELETE_SUBJECT_SETTING, payload: response.data });\n        }\n      })\n  };\n}\n\nexport function assignSubjectSetting(data) {\n\n  return (dispatch) => {\n    let apiEndpoint = `/subject_level_sections?access_token=${localStorage.token}`;\n    classService.post(apiEndpoint, data)\n      .then((response) => {\n        if (response) {\n          dispatch({ type: SHOW_SUCCESS_MESSAGE, payload: \"L'affectation du matière est effectuée avec succès\" })\n          setTimeout(() => {\n            dispatch({ type: HIDE_SUCCESS_MESSAGE });\n          }, 4000);\n        } else {\n          dispatch({ type: SHOW_ERROR_MESSAGE, payload: \"Une erreur est survenue lors d'affctation merci d'essayer à nouveau\" });\n          setTimeout(() => {\n              dispatch({ type: HIDE_ERROR_MESSAGE });\n          }, 4000);\n        }\n      })\n\n  };\n}\n\nexport function getSubjectByEstablishmentAndSchoolYear(establishementId, schoolYearId) {\n  return (dispatch) => {\n    let apiEndpoint = `/education_types/getSubjectByEstablishmentAndSchoolYear/${establishementId}/${schoolYearId}?access_token=${localStorage.token}`;\n    classService.get(apiEndpoint).then((response) => {\n      if (response) {\n\n         dispatch({ type: GET_SUBJECT_BY_Establishment_AND_SCHOOLYEAR, payload: response.data.establishmentData });\n      }\n    });\n  };\n}"]},"metadata":{},"sourceType":"module"}