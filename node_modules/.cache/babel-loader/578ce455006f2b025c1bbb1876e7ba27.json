{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/FinancialManagement/routes/Service/Service.js\";\nimport React from \"react\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport CardBox from \"../../../../../components/CardBox/index\";\nimport AddService from \"./AddService\";\nimport { getServiceV2 } from \"../../../../../actions/ServiceAction\";\nimport { connect } from \"react-redux\";\nimport ServiceItem from \"./ServiceItem\";\nimport { classService } from \"../../../../../_services\";\nimport ArchiveService from \"./ArchiveService\";\nimport { UncontrolledAlert } from \"reactstrap\";\n\nclass Service extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onOptionMenuSelect = event => {\n      this.setState({\n        menuState: true,\n        anchorEl: event.currentTarget,\n        itemId: event.currentTarget.value\n      });\n    };\n\n    this.handleRequestClose = () => {\n      this.setState({\n        menuState: false\n      });\n    };\n\n    this.state = {\n      open: false,\n      anchorEl: undefined,\n      menuState: false,\n      openEdit: false,\n      openDetails: false,\n      currency: [],\n      frequency: [],\n      services: [],\n      alerteFiltre: false,\n      messageAlerte: \"\"\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n    this.handleRequestDelete = this.handleRequestDelete.bind(this);\n    this.handleDetails = this.handleDetails.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleCancelDetails = this.handleCancelDetails.bind(this);\n    this.handleEditDetails = this.handleEditDetails.bind(this);\n    this.handleDate = this.handleDate.bind(this);\n    this.handleCategory = this.handleCategory.bind(this);\n    this.handlePrice = this.handlePrice.bind(this);\n  }\n\n  handleEditDetails() {\n    this.setState({\n      open: false,\n      openDetails: false\n    });\n    this.setState({\n      menuState: false,\n      openEdit: true\n    });\n  }\n\n  handleCancelDetails() {\n    this.setState({\n      open: false,\n      openDetails: false\n    });\n  }\n\n  handleCancel() {\n    this.setState({\n      open: false,\n      openEdit: false\n    });\n  }\n\n  openAddModal() {\n    this.setState({\n      open: true\n    });\n  }\n\n  handleEdit() {\n    this.setState({\n      menuState: false,\n      openEdit: true\n    });\n  }\n\n  handleDetails() {\n    this.setState({\n      menuState: false,\n      openDetails: true\n    });\n  }\n\n  handleRequestDelete(e) {\n    e.preventDefault();\n    this.setState({\n      menuState: false\n    });\n  }\n\n  componentWillMount() {\n    this.setState({\n      services: this.props.services\n    });\n    this.props.dispatch(getServiceV2(this.props.userProfile.establishment_id));\n    let apiEndpoint = \"\";\n    apiEndpoint = `/currency_v2?access_token=${localStorage.token}`;\n    classService.get(apiEndpoint).then(res => {\n      if (res) {\n        this.setState({\n          currency: res.data\n        });\n      }\n    });\n    apiEndpoint = `/frequency_v2?access_token=${localStorage.token}`;\n    classService.get(apiEndpoint).then(res => {\n      if (res) {\n        this.setState({\n          frequency: res.data\n        });\n      }\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.services !== this.props.services) {\n      this.setState({\n        services: this.props.services\n      });\n    }\n  }\n\n  handlePrice() {\n    const sortedServices = this.state.services.sort((a, b) => b.price_service - a.price_service);\n    this.setState({\n      services: sortedServices,\n      alerteFiltre: true,\n      messageAlerte: \"les prestations les plus chères sont affichées en premier lieu\"\n    });\n    setTimeout(() => {\n      this.setState({\n        alerteFiltre: false,\n        messageAlerte: \"\"\n      });\n    }, 3000);\n  }\n\n  handleCategory() {\n    const sortedServices = this.state.services.sort((a, b) => a.type_service > b.type_service ? 1 : b.type_service > a.type_service ? -1 : 0);\n    this.setState({\n      services: sortedServices,\n      alerteFiltre: true,\n      messageAlerte: \"les prestations obligatoirs sont affichées en premier lieu\"\n    });\n    setTimeout(() => {\n      this.setState({\n        alerteFiltre: false,\n        messageAlerte: \"\"\n      });\n    }, 3000);\n  }\n\n  handleDate() {\n    let newListService = [];\n    this.state.services.forEach(element => {\n      let item = { ...element,\n        date: new Date(element.start_date_service)\n      };\n      newListService.push(item);\n    });\n    const sortedServices = newListService.slice().sort((a, b) => b.date - a.date);\n    this.setState({\n      services: sortedServices,\n      alerteFiltre: true,\n      messageAlerte: \"les prestations les plus récentes sont affichées en premier lieu\"\n    });\n    setTimeout(() => {\n      this.setState({\n        alerteFiltre: false,\n        messageAlerte: \"\"\n      });\n    }, 3000);\n  }\n\n  render() {\n    let {\n      archives\n    } = this.props;\n    const {\n      anchorEl,\n      menuState,\n      services\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper\",\n      style: {\n        marginLeft: \"5%\",\n        marginRight: \"10%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"  d-flex flex-column mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight\",\n      style: {\n        marginLeft: \"4%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"sidebar.components.service\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-row bd-highlight mb-3\",\n      style: {\n        marginLeft: \"4%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight pointer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      onClick: this.handleDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"service.filter.with.date\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 13\n      }\n    }, \"|\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight pointer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      onClick: this.handleCategory,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 15\n      }\n    }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"service.filter.with.categorie\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 13\n      }\n    }, \"|\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight pointer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      onClick: this.handlePrice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"service.filter.with.Price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    })))), this.props.successStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 15\n      }\n    }, \" \", this.props.message, \" \")) : \"\", this.state.alerteFiltre ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 15\n      }\n    }, \" \", this.state.messageAlerte, \" \")) : \"\", /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bd-highlight\",\n      style: {\n        width: \"90%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 15\n      }\n    }, services.map(element => /*#__PURE__*/React.createElement(ServiceItem, {\n      services: services.concat(archives),\n      key: element.id,\n      item: element,\n      handleDetails: this.handleDetails,\n      handleEdit: this.handleEdit,\n      frequency: this.state.frequency,\n      currency: this.state.currency,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 19\n      }\n    })))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bd-highlight\",\n      style: {\n        width: \"90%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ArchiveService, {\n      services: services.concat(archives),\n      data: archives,\n      frequency: this.state.frequency,\n      currency: this.state.currency,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bd-highlight\",\n      style: {\n        width: \"90%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(AddService, {\n      services: services.concat(archives),\n      frequency: this.state.frequency,\n      currency: this.state.currency,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userProfile: state.auth.userProfile,\n    services: state.service.servicesV2,\n    archives: state.service.archiveServices,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message\n  };\n};\n\nexport default connect(mapStateToProps)(Service);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/FinancialManagement/routes/Service/Service.js"],"names":["React","IntlMessages","CardBox","AddService","getServiceV2","connect","ServiceItem","classService","ArchiveService","UncontrolledAlert","Service","Component","constructor","props","onOptionMenuSelect","event","setState","menuState","anchorEl","currentTarget","itemId","value","handleRequestClose","state","open","undefined","openEdit","openDetails","currency","frequency","services","alerteFiltre","messageAlerte","openAddModal","bind","handleCancel","handleEdit","handleRequestDelete","handleDetails","handleCancelDetails","handleEditDetails","handleDate","handleCategory","handlePrice","e","preventDefault","componentWillMount","dispatch","userProfile","establishment_id","apiEndpoint","localStorage","token","get","then","res","data","componentDidUpdate","prevProps","prevState","sortedServices","sort","a","b","price_service","setTimeout","type_service","newListService","forEach","element","item","date","Date","start_date_service","push","slice","render","archives","marginLeft","marginRight","successStatus","message","width","map","concat","id","mapStateToProps","auth","service","servicesV2","archiveServices","alert","success","errorStatus","error"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,kCAAzB;AACA,OAAOC,OAAP,MAAoB,yCAApB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,YAAT,QAA6B,sCAA7B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,SAASC,YAAT,QAA6B,0BAA7B;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,SAASC,iBAAT,QAAkC,YAAlC;;AAEA,MAAMC,OAAN,SAAsBV,KAAK,CAACW,SAA5B,CAAsC;AACpCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAwCnBC,kBAxCmB,GAwCGC,KAAD,IAAW;AAC9B,WAAKC,QAAL,CAAc;AACZC,QAAAA,SAAS,EAAE,IADC;AAEZC,QAAAA,QAAQ,EAAEH,KAAK,CAACI,aAFJ;AAGZC,QAAAA,MAAM,EAAEL,KAAK,CAACI,aAAN,CAAoBE;AAHhB,OAAd;AAKD,KA9CkB;;AAAA,SA+CnBC,kBA/CmB,GA+CE,MAAM;AACzB,WAAKN,QAAL,CAAc;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAd;AACD,KAjDkB;;AAGjB,SAAKM,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAE,KADK;AAEXN,MAAAA,QAAQ,EAAEO,SAFC;AAGXR,MAAAA,SAAS,EAAE,KAHA;AAIXS,MAAAA,QAAQ,EAAE,KAJC;AAKXC,MAAAA,WAAW,EAAE,KALF;AAMXC,MAAAA,QAAQ,EAAE,EANC;AAOXC,MAAAA,SAAS,EAAE,EAPA;AAQXC,MAAAA,QAAQ,EAAE,EARC;AASXC,MAAAA,YAAY,EAAE,KATH;AAUXC,MAAAA,aAAa,EAAE;AAVJ,KAAb;AAYA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKE,UAAL,GAAkB,KAAKA,UAAL,CAAgBF,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKG,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBH,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKI,aAAL,GAAqB,KAAKA,aAAL,CAAmBJ,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKK,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBL,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKM,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBN,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKO,UAAL,GAAkB,KAAKA,UAAL,CAAgBP,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKQ,cAAL,GAAsB,KAAKA,cAAL,CAAoBR,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKS,WAAL,GAAmB,KAAKA,WAAL,CAAiBT,IAAjB,CAAsB,IAAtB,CAAnB;AACD;;AACDM,EAAAA,iBAAiB,GAAG;AAClB,SAAKxB,QAAL,CAAc;AAAEQ,MAAAA,IAAI,EAAE,KAAR;AAAeG,MAAAA,WAAW,EAAE;AAA5B,KAAd;AACA,SAAKX,QAAL,CAAc;AAAEC,MAAAA,SAAS,EAAE,KAAb;AAAoBS,MAAAA,QAAQ,EAAE;AAA9B,KAAd;AACD;;AACDa,EAAAA,mBAAmB,GAAG;AACpB,SAAKvB,QAAL,CAAc;AAAEQ,MAAAA,IAAI,EAAE,KAAR;AAAeG,MAAAA,WAAW,EAAE;AAA5B,KAAd;AACD;;AACDQ,EAAAA,YAAY,GAAG;AACb,SAAKnB,QAAL,CAAc;AAAEQ,MAAAA,IAAI,EAAE,KAAR;AAAeE,MAAAA,QAAQ,EAAE;AAAzB,KAAd;AACD;;AACDO,EAAAA,YAAY,GAAG;AACb,SAAKjB,QAAL,CAAc;AAAEQ,MAAAA,IAAI,EAAE;AAAR,KAAd;AACD;;AAWDY,EAAAA,UAAU,GAAG;AACX,SAAKpB,QAAL,CAAc;AAAEC,MAAAA,SAAS,EAAE,KAAb;AAAoBS,MAAAA,QAAQ,EAAE;AAA9B,KAAd;AACD;;AACDY,EAAAA,aAAa,GAAG;AACd,SAAKtB,QAAL,CAAc;AAAEC,MAAAA,SAAS,EAAE,KAAb;AAAoBU,MAAAA,WAAW,EAAE;AAAjC,KAAd;AACD;;AACDU,EAAAA,mBAAmB,CAACO,CAAD,EAAI;AACrBA,IAAAA,CAAC,CAACC,cAAF;AACA,SAAK7B,QAAL,CAAc;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAAd;AACD;;AACD6B,EAAAA,kBAAkB,GAAG;AACnB,SAAK9B,QAAL,CAAc;AAAEc,MAAAA,QAAQ,EAAE,KAAKjB,KAAL,CAAWiB;AAAvB,KAAd;AACA,SAAKjB,KAAL,CAAWkC,QAAX,CAAoB3C,YAAY,CAAC,KAAKS,KAAL,CAAWmC,WAAX,CAAuBC,gBAAxB,CAAhC;AACA,QAAIC,WAAW,GAAG,EAAlB;AAEAA,IAAAA,WAAW,GAAI,6BAA4BC,YAAY,CAACC,KAAM,EAA9D;AACA7C,IAAAA,YAAY,CAAC8C,GAAb,CAAiBH,WAAjB,EAA8BI,IAA9B,CAAoCC,GAAD,IAAS;AAC1C,UAAIA,GAAJ,EAAS;AACP,aAAKvC,QAAL,CAAc;AAAEY,UAAAA,QAAQ,EAAE2B,GAAG,CAACC;AAAhB,SAAd;AACD;AACF,KAJD;AAMAN,IAAAA,WAAW,GAAI,8BAA6BC,YAAY,CAACC,KAAM,EAA/D;AACA7C,IAAAA,YAAY,CAAC8C,GAAb,CAAiBH,WAAjB,EAA8BI,IAA9B,CAAoCC,GAAD,IAAS;AAC1C,UAAIA,GAAJ,EAAS;AACP,aAAKvC,QAAL,CAAc;AAAEa,UAAAA,SAAS,EAAE0B,GAAG,CAACC;AAAjB,SAAd;AACD;AACF,KAJD;AAKD;;AACDC,EAAAA,kBAAkB,CAACC,SAAD,EAAYC,SAAZ,EAAuB;AACvC,QAAID,SAAS,CAAC5B,QAAV,KAAuB,KAAKjB,KAAL,CAAWiB,QAAtC,EAAgD;AAC9C,WAAKd,QAAL,CAAc;AAAEc,QAAAA,QAAQ,EAAE,KAAKjB,KAAL,CAAWiB;AAAvB,OAAd;AACD;AACF;;AAEDa,EAAAA,WAAW,GAAG;AACZ,UAAMiB,cAAc,GAAG,KAAKrC,KAAL,CAAWO,QAAX,CAAoB+B,IAApB,CACrB,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACC,aAAF,GAAkBF,CAAC,CAACE,aADT,CAAvB;AAIA,SAAKhD,QAAL,CAAc;AACZc,MAAAA,QAAQ,EAAE8B,cADE;AAEZ7B,MAAAA,YAAY,EAAE,IAFF;AAGZC,MAAAA,aAAa,EACX;AAJU,KAAd;AAMAiC,IAAAA,UAAU,CAAC,MAAM;AACf,WAAKjD,QAAL,CAAc;AAAEe,QAAAA,YAAY,EAAE,KAAhB;AAAuBC,QAAAA,aAAa,EAAE;AAAtC,OAAd;AACD,KAFS,EAEP,IAFO,CAAV;AAGD;;AAEDU,EAAAA,cAAc,GAAG;AACf,UAAMkB,cAAc,GAAG,KAAKrC,KAAL,CAAWO,QAAX,CAAoB+B,IAApB,CAAyB,CAACC,CAAD,EAAIC,CAAJ,KAC9CD,CAAC,CAACI,YAAF,GAAiBH,CAAC,CAACG,YAAnB,GACI,CADJ,GAEIH,CAAC,CAACG,YAAF,GAAiBJ,CAAC,CAACI,YAAnB,GACA,CAAC,CADD,GAEA,CALiB,CAAvB;AAOA,SAAKlD,QAAL,CAAc;AACZc,MAAAA,QAAQ,EAAE8B,cADE;AAEZ7B,MAAAA,YAAY,EAAE,IAFF;AAGZC,MAAAA,aAAa,EACX;AAJU,KAAd;AAMAiC,IAAAA,UAAU,CAAC,MAAM;AACf,WAAKjD,QAAL,CAAc;AAAEe,QAAAA,YAAY,EAAE,KAAhB;AAAuBC,QAAAA,aAAa,EAAE;AAAtC,OAAd;AACD,KAFS,EAEP,IAFO,CAAV;AAGD;;AAEDS,EAAAA,UAAU,GAAG;AACX,QAAI0B,cAAc,GAAG,EAArB;AACA,SAAK5C,KAAL,CAAWO,QAAX,CAAoBsC,OAApB,CAA6BC,OAAD,IAAa;AACvC,UAAIC,IAAI,GAAG,EACT,GAAGD,OADM;AAETE,QAAAA,IAAI,EAAE,IAAIC,IAAJ,CAASH,OAAO,CAACI,kBAAjB;AAFG,OAAX;AAIAN,MAAAA,cAAc,CAACO,IAAf,CAAoBJ,IAApB;AACD,KAND;AAQA,UAAMV,cAAc,GAAGO,cAAc,CAClCQ,KADoB,GAEpBd,IAFoB,CAEf,CAACC,CAAD,EAAIC,CAAJ,KAAUA,CAAC,CAACQ,IAAF,GAAST,CAAC,CAACS,IAFN,CAAvB;AAGA,SAAKvD,QAAL,CAAc;AACZc,MAAAA,QAAQ,EAAE8B,cADE;AAEZ7B,MAAAA,YAAY,EAAE,IAFF;AAGZC,MAAAA,aAAa,EACX;AAJU,KAAd;AAMAiC,IAAAA,UAAU,CAAC,MAAM;AACf,WAAKjD,QAAL,CAAc;AAAEe,QAAAA,YAAY,EAAE,KAAhB;AAAuBC,QAAAA,aAAa,EAAE;AAAtC,OAAd;AACD,KAFS,EAEP,IAFO,CAAV;AAGD;;AAED4C,EAAAA,MAAM,GAAG;AACP,QAAI;AAAEC,MAAAA;AAAF,QAAe,KAAKhE,KAAxB;AAEA,UAAM;AAAEK,MAAAA,QAAF;AAAYD,MAAAA,SAAZ;AAAuBa,MAAAA;AAAvB,QAAoC,KAAKP,KAA/C;AAEA,wBACE;AACE,MAAA,SAAS,EAAC,aADZ;AAEE,MAAA,KAAK,EAAE;AACLuD,QAAAA,UAAU,EAAE,IADP;AAELC,QAAAA,WAAW,EAAE;AAFR,OAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAOE;AAAK,MAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAkC,MAAA,KAAK,EAAE;AAAED,QAAAA,UAAU,EAAE;AAAd,OAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AAAc,MAAA,EAAE,EAAC,4BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CADF,CADF,eAQE;AACE,MAAA,SAAS,EAAC,mCADZ;AAEE,MAAA,KAAK,EAAE;AAAEA,QAAAA,UAAU,EAAE;AAAd,OAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAIE;AAAK,MAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,OAAO,EAAE,KAAKrC,UAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AAAc,MAAA,EAAE,EAAC,0BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CAJF,eASE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WATF,eAUE;AAAK,MAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,OAAO,EAAE,KAAKC,cAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,eAEE,oBAAC,YAAD;AAAc,MAAA,EAAE,EAAC,+BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CADF,CAVF,eAgBE;AAAK,MAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAhBF,eAiBE;AAAK,MAAA,SAAS,EAAC,0BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAI,MAAA,OAAO,EAAE,KAAKC,WAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AAAc,MAAA,EAAE,EAAC,2BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CAjBF,CARF,EA+BG,KAAK9B,KAAL,CAAWmE,aAAX,gBACC,oBAAC,iBAAD;AAAmB,MAAA,SAAS,EAAC,6DAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,4CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,eAIE;AAAM,MAAA,SAAS,EAAC,gBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAmC,KAAKnE,KAAL,CAAWoE,OAA9C,MAJF,CADD,GAQC,EAvCJ,EAyCG,KAAK1D,KAAL,CAAWQ,YAAX,gBACC,oBAAC,iBAAD;AAAmB,MAAA,SAAS,EAAC,6DAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,4CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,eAIE;AAAM,MAAA,SAAS,EAAC,gBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,EAEG,KAAKR,KAAL,CAAWS,aAFd,EAE6B,GAF7B,CAJF,CADD,GAWC,EApDJ,eAsDE;AAAK,MAAA,SAAS,EAAC,eAAf;AAA+B,MAAA,KAAK,EAAE;AAAEkD,QAAAA,KAAK,EAAE;AAAT,OAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,OAAD;AAAS,MAAA,SAAS,EAAC,WAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGpD,QAAQ,CAACqD,GAAT,CAAcd,OAAD,iBACZ,oBAAC,WAAD;AACE,MAAA,QAAQ,EAAEvC,QAAQ,CAACsD,MAAT,CAAgBP,QAAhB,CADZ;AAEE,MAAA,GAAG,EAAER,OAAO,CAACgB,EAFf;AAGE,MAAA,IAAI,EAAEhB,OAHR;AAIE,MAAA,aAAa,EAAE,KAAK/B,aAJtB;AAKE,MAAA,UAAU,EAAE,KAAKF,UALnB;AAME,MAAA,SAAS,EAAE,KAAKb,KAAL,CAAWM,SANxB;AAOE,MAAA,QAAQ,EAAE,KAAKN,KAAL,CAAWK,QAPvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,CADH,CADF,CADF,CAtDF,CAPF,eA+EE;AAAK,MAAA,SAAS,EAAC,eAAf;AAA+B,MAAA,KAAK,EAAE;AAAEsD,QAAAA,KAAK,EAAE;AAAT,OAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,OAAD;AAAS,MAAA,SAAS,EAAC,WAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,cAAD;AACE,MAAA,QAAQ,EAAEpD,QAAQ,CAACsD,MAAT,CAAgBP,QAAhB,CADZ;AAEE,MAAA,IAAI,EAAEA,QAFR;AAGE,MAAA,SAAS,EAAE,KAAKtD,KAAL,CAAWM,SAHxB;AAIE,MAAA,QAAQ,EAAE,KAAKN,KAAL,CAAWK,QAJvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CA/EF,eA0FE;AAAK,MAAA,SAAS,EAAC,eAAf;AAA+B,MAAA,KAAK,EAAE;AAAEsD,QAAAA,KAAK,EAAE;AAAT,OAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,OAAD;AAAS,MAAA,SAAS,EAAC,WAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,UAAD;AACE,MAAA,QAAQ,EAAEpD,QAAQ,CAACsD,MAAT,CAAgBP,QAAhB,CADZ;AAEE,MAAA,SAAS,EAAE,KAAKtD,KAAL,CAAWM,SAFxB;AAGE,MAAA,QAAQ,EAAE,KAAKN,KAAL,CAAWK,QAHvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CA1FF,CADF;AAsGD;;AA5PmC;;AA+PtC,MAAM0D,eAAe,GAAI/D,KAAD,IAAW;AACjC,SAAO;AACLyB,IAAAA,WAAW,EAAEzB,KAAK,CAACgE,IAAN,CAAWvC,WADnB;AAELlB,IAAAA,QAAQ,EAAEP,KAAK,CAACiE,OAAN,CAAcC,UAFnB;AAGLZ,IAAAA,QAAQ,EAAEtD,KAAK,CAACiE,OAAN,CAAcE,eAHnB;AAILV,IAAAA,aAAa,EAAEzD,KAAK,CAACoE,KAAN,CAAYC,OAJtB;AAKLC,IAAAA,WAAW,EAAEtE,KAAK,CAACoE,KAAN,CAAYG,KALpB;AAMLb,IAAAA,OAAO,EAAE1D,KAAK,CAACoE,KAAN,CAAYV;AANhB,GAAP;AAQD,CATD;;AAWA,eAAe5E,OAAO,CAACiF,eAAD,CAAP,CAAyB5E,OAAzB,CAAf","sourcesContent":["import React from \"react\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport CardBox from \"../../../../../components/CardBox/index\";\nimport AddService from \"./AddService\";\nimport { getServiceV2 } from \"../../../../../actions/ServiceAction\";\nimport { connect } from \"react-redux\";\nimport ServiceItem from \"./ServiceItem\";\nimport { classService } from \"../../../../../_services\";\nimport ArchiveService from \"./ArchiveService\";\nimport { UncontrolledAlert } from \"reactstrap\";\n\nclass Service extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      open: false,\n      anchorEl: undefined,\n      menuState: false,\n      openEdit: false,\n      openDetails: false,\n      currency: [],\n      frequency: [],\n      services: [],\n      alerteFiltre: false,\n      messageAlerte: \"\",\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n    this.handleRequestDelete = this.handleRequestDelete.bind(this);\n    this.handleDetails = this.handleDetails.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleCancelDetails = this.handleCancelDetails.bind(this);\n    this.handleEditDetails = this.handleEditDetails.bind(this);\n    this.handleDate = this.handleDate.bind(this);\n    this.handleCategory = this.handleCategory.bind(this);\n    this.handlePrice = this.handlePrice.bind(this);\n  }\n  handleEditDetails() {\n    this.setState({ open: false, openDetails: false });\n    this.setState({ menuState: false, openEdit: true });\n  }\n  handleCancelDetails() {\n    this.setState({ open: false, openDetails: false });\n  }\n  handleCancel() {\n    this.setState({ open: false, openEdit: false });\n  }\n  openAddModal() {\n    this.setState({ open: true });\n  }\n  onOptionMenuSelect = (event) => {\n    this.setState({\n      menuState: true,\n      anchorEl: event.currentTarget,\n      itemId: event.currentTarget.value,\n    });\n  };\n  handleRequestClose = () => {\n    this.setState({ menuState: false });\n  };\n  handleEdit() {\n    this.setState({ menuState: false, openEdit: true });\n  }\n  handleDetails() {\n    this.setState({ menuState: false, openDetails: true });\n  }\n  handleRequestDelete(e) {\n    e.preventDefault();\n    this.setState({ menuState: false });\n  }\n  componentWillMount() {\n    this.setState({ services: this.props.services });\n    this.props.dispatch(getServiceV2(this.props.userProfile.establishment_id));\n    let apiEndpoint = \"\";\n\n    apiEndpoint = `/currency_v2?access_token=${localStorage.token}`;\n    classService.get(apiEndpoint).then((res) => {\n      if (res) {\n        this.setState({ currency: res.data });\n      }\n    });\n\n    apiEndpoint = `/frequency_v2?access_token=${localStorage.token}`;\n    classService.get(apiEndpoint).then((res) => {\n      if (res) {\n        this.setState({ frequency: res.data });\n      }\n    });\n  }\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.services !== this.props.services) {\n      this.setState({ services: this.props.services });\n    }\n  }\n\n  handlePrice() {\n    const sortedServices = this.state.services.sort(\n      (a, b) => b.price_service - a.price_service\n    );\n\n    this.setState({\n      services: sortedServices,\n      alerteFiltre: true,\n      messageAlerte:\n        \"les prestations les plus chères sont affichées en premier lieu\",\n    });\n    setTimeout(() => {\n      this.setState({ alerteFiltre: false, messageAlerte: \"\" });\n    }, 3000);\n  }\n\n  handleCategory() {\n    const sortedServices = this.state.services.sort((a, b) =>\n      a.type_service > b.type_service\n        ? 1\n        : b.type_service > a.type_service\n        ? -1\n        : 0\n    );\n    this.setState({\n      services: sortedServices,\n      alerteFiltre: true,\n      messageAlerte:\n        \"les prestations obligatoirs sont affichées en premier lieu\",\n    });\n    setTimeout(() => {\n      this.setState({ alerteFiltre: false, messageAlerte: \"\" });\n    }, 3000);\n  }\n\n  handleDate() {\n    let newListService = [];\n    this.state.services.forEach((element) => {\n      let item = {\n        ...element,\n        date: new Date(element.start_date_service),\n      };\n      newListService.push(item);\n    });\n\n    const sortedServices = newListService\n      .slice()\n      .sort((a, b) => b.date - a.date);\n    this.setState({\n      services: sortedServices,\n      alerteFiltre: true,\n      messageAlerte:\n        \"les prestations les plus récentes sont affichées en premier lieu\",\n    });\n    setTimeout(() => {\n      this.setState({ alerteFiltre: false, messageAlerte: \"\" });\n    }, 3000);\n  }\n\n  render() {\n    let { archives } = this.props;\n\n    const { anchorEl, menuState, services } = this.state;\n\n    return (\n      <div\n        className=\"app-wrapper\"\n        style={{\n          marginLeft: \"5%\",\n          marginRight: \"10%\",\n        }}\n      >\n        <div className=\"  d-flex flex-column mb-3\">\n          <div className=\"p-2 bd-highlight\" style={{ marginLeft: \"4%\" }}>\n            <h1>\n              <b>\n                <IntlMessages id=\"sidebar.components.service\" />\n              </b>\n            </h1>\n          </div>\n          <div\n            className=\"d-flex flex-row bd-highlight mb-3\"\n            style={{ marginLeft: \"4%\" }}\n          >\n            <div className=\"p-2 bd-highlight pointer\">\n              <h5 onClick={this.handleDate}>\n                <IntlMessages id=\"service.filter.with.date\" />\n              </h5>\n            </div>\n            <div className=\"p-2 bd-highlight\">|</div>\n            <div className=\"p-2 bd-highlight pointer\">\n              <h5 onClick={this.handleCategory}>\n                {\" \"}\n                <IntlMessages id=\"service.filter.with.categorie\" />\n              </h5>\n            </div>\n            <div className=\"p-2 bd-highlight\">|</div>\n            <div className=\"p-2 bd-highlight pointer\">\n              <h5 onClick={this.handlePrice}>\n                <IntlMessages id=\"service.filter.with.Price\" />\n              </h5>\n            </div>\n          </div>\n          {this.props.successStatus ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\"> {this.props.message} </span>\n            </UncontrolledAlert>\n          ) : (\n            \"\"\n          )}\n          {this.state.alerteFiltre ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\">\n                {\" \"}\n                {this.state.messageAlerte}{\" \"}\n              </span>\n            </UncontrolledAlert>\n          ) : (\n            \"\"\n          )}\n          <div className=\" bd-highlight\" style={{ width: \"90%\" }}>\n            <CardBox styleName=\"col-lg-12\">\n              <div className=\"row\">\n                {services.map((element) => (\n                  <ServiceItem\n                    services={services.concat(archives)}\n                    key={element.id}\n                    item={element}\n                    handleDetails={this.handleDetails}\n                    handleEdit={this.handleEdit}\n                    frequency={this.state.frequency}\n                    currency={this.state.currency}\n                  />\n                ))}\n              </div>\n            </CardBox>\n          </div>\n        </div>\n        <div className=\" bd-highlight\" style={{ width: \"90%\" }}>\n          <CardBox styleName=\"col-lg-12\">\n            <ArchiveService\n              services={services.concat(archives)}\n              data={archives}\n              frequency={this.state.frequency}\n              currency={this.state.currency}\n            ></ArchiveService>\n          </CardBox>\n        </div>\n\n        <div className=\" bd-highlight\" style={{ width: \"90%\" }}>\n          <CardBox styleName=\"col-lg-12\">\n            <AddService\n              services={services.concat(archives)}\n              frequency={this.state.frequency}\n              currency={this.state.currency}\n            />\n          </CardBox>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    userProfile: state.auth.userProfile,\n    services: state.service.servicesV2,\n    archives: state.service.archiveServices,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n  };\n};\n\nexport default connect(mapStateToProps)(Service);\n"]},"metadata":{},"sourceType":"module"}