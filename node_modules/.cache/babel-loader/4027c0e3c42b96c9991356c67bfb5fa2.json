{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/User/EditUser.js\";\nimport React, { Component } from \"react\";\nimport { Modal, ModalBody, ModalHeader } from \"reactstrap\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport Button from \"@material-ui/core/Button\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CommonInformation from \"./UserInformation/CommonInformation\";\nimport RoleInformation from \"./UserInformation/RoleInformation\";\nimport EditSpecificInformation from \"./UserInformation/EditSpecificInformation\";\nimport EditparentInformation from \"./UserInformation/EditparentInformation\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../../../config/config\";\nimport { connect } from \"react-redux\";\nimport { getEstablishment } from \"../../../../../actions/establishmentAction\";\nimport { getServices } from \"../../../../../actions/ServiceAction\";\nimport { getUserProfile } from \"../../../../../actions/Auth\";\nimport { getAllUsers } from \"../../../../../actions/stuppUserAction\";\nimport { getSections } from \"../../../../../actions/sectionAction\";\nimport { getLevels } from \"../../../../../actions/classLevelAction\";\nimport { getClassesByEstablishmentId } from \"../../../../../actions/classeAction\";\nimport { getServicesByEstablishmentId } from \"../../../../../actions/ServiceAction\";\nimport { editUser, errorHandling, successHandling, successHandlingSteper, errorHandlingSteper } from \"../../../../../actions/stuppUserAction\";\nimport { getSectionFromLevel } from \"../../../../../actions/sectionAction\";\nimport moment from \"moment\";\nimport { parsePhoneNumberFromString } from \"libphonenumber-js\";\nimport _ from \"lodash\";\n\nclass EditUser extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangePhone = value => {\n      this.setState({\n        phone: value\n      });\n    };\n\n    this.handleChangeParentPhone = value => {\n      this.setState({\n        phoneParent: value\n      });\n    };\n\n    this.handleChangeDate = date => {\n      this.setState({\n        date_of_birth: date\n      });\n    };\n\n    this.handleChangeDateParent = date => {\n      this.setState({\n        date_of_birthParent: date\n      });\n    };\n\n    this.addNewParentFormulaire = () => {\n      this.setState({\n        newParent: !this.state.newParent\n      });\n    };\n\n    this.addNewParent = () => {\n      var parent = {\n        nameParent: this.state.nameParent,\n        surnameParent: this.state.surnameParent,\n        genderParent: this.state.genderParent,\n        date_of_birthParent: this.state.date_of_birthParent,\n        addressParent: this.state.addressParent,\n        phoneParent: this.state.phoneParent,\n        statusParent: true,\n        cinParent: this.state.cinParent,\n        zip_codeParent: this.state.zip_codeParent,\n        realmParent: this.state.nameParent,\n        passwordParent: \"123456\",\n        usernameParent: this.state.nameParent + \".\" + this.state.surnameParent,\n        emailParent: this.state.emailParent,\n        parentStudentphoto: this.state.parentStudentphoto,\n        emailVerifiedParent: false,\n        parentStudentphoto: this.state.parentStudentphoto\n      };\n      this.state.newParentsList.push(parent);\n      this.setState({\n        nameParent: \"\",\n        surnameParent: \"\",\n        genderParent: \"\",\n        date_of_birthParent: \"\",\n        addressParent: \"\",\n        phoneParent: \"\",\n        statusParent: true,\n        cinParent: \"\",\n        zip_codeParent: \"\",\n        realmParent: \"\",\n        passwordParent: \"123456\",\n        usernameParent: \"\",\n        emailParent: \"\",\n        emailVerifiedParent: false,\n        parentStudentphoto: null,\n        inputTextParent: \"\",\n        newParent: false,\n        Arabname: \"\",\n        Arabsurname: \"\"\n      });\n    };\n\n    this.addNewSubject = index => {\n      this.setState(prevState => ({\n        addedListSubject: [...prevState.addedListSubject, {\n          id: index,\n          level_id: 0,\n          section_id: 0,\n          subject_id: 0,\n          sectionDisabled: true\n        }],\n        added: true\n      }));\n    };\n\n    this.handleChangestudentLevel = name => event => {\n      this.setState({\n        section_id: 0,\n        class_id: 0\n      });\n\n      if (event.target.value > 10) {\n        this.setState({\n          [name]: event.target.value\n        });\n        this.setState({\n          Disable_studentsection: false\n        });\n        var studentSectionbyLevel = getSectionFromLevel(this.props.classSections, event.target.value);\n        this.setState({\n          studentsectionByLevels: studentSectionbyLevel\n        });\n      } else {\n        this.setState({\n          level_id: event.target.value,\n          Disable_studentsection: true,\n          section_id: 0\n        });\n        const levelID = event.target.value;\n        var studentfiltredClasses = this.props.classes.filter(classe => classe.level_id === levelID && classe.status);\n        this.setState({\n          studentClassesByLevelSectionID: studentfiltredClasses\n        });\n      }\n    };\n\n    this.handleChangestudentSection = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n      const levelID = this.state.level_id;\n      const sectionID = event.target.value;\n      var studentfiltredClasses = this.props.classes.filter(classe => classe.level_id === levelID && classe.section_id === sectionID && classe.status);\n      this.setState({\n        studentClassesByLevelSectionID: studentfiltredClasses\n      });\n    };\n\n    this.handleChangeService = name => event => {\n      this.setState({\n        serviceId: event.target.value\n      });\n    };\n\n    this.handleChangeSelectParent = name => event => {\n      this.setState({\n        affectedParents: event.target.value\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleChangeStartContract = date => {\n      this.setState({\n        date_start_contract: date\n      });\n    };\n\n    this.handleChangeEndContract = date => {\n      this.setState({\n        date_end_contract: date\n      });\n    };\n\n    this.handleChangeRole = name => event => {\n      this.setState({\n        [name]: event.target.value,\n        steps: event.target.value\n      });\n    };\n\n    this.handleChangeClass = name => event => {\n      if (this.props.userProfile.role_id === 2 || this.props.userProfile.role_id === 7) {\n        this.setState({\n          establishment_id: this.props.userProfile.establishment_id\n        });\n      }\n\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleChangeEstablishment = name => event => {\n      var type_establish = this.state.establishmentList.find(element => element.id === event.target.value);\n      this.setState({\n        [name]: event.target.value\n      });\n      this.setState({\n        estabType: type_establish.estab_type_id,\n        establishment_id: event.target.value\n      });\n      this.props.getClassesByEstablishmentId(event.target.value);\n      this.props.getServicesByEstablishmentId(event.target.value);\n      axios.get(`${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[where][and][0][establishment_id]=` + event.target.value + `&filter[where][and][1][role_id]=` + 4).then(res => {\n        const allEstablishmentParents = res.data.map(element => element.user);\n        this.setState({\n          allParentList: allEstablishmentParents\n        });\n      });\n    };\n\n    this.handleChangeLevel = event => {\n      event.target.value > 10 ? this.setState({\n        level_id: event.target.value,\n        sectionDisabled: false\n      }) : this.setState({\n        level_id: event.target.value,\n        sectionDisabled: true\n      });\n      let subjectListFiltered = [];\n      this.setState({\n        subjectListFiltered\n      });\n    };\n\n    this.handleChangeSection = name => event => {\n      let subjectListFiltered = [];\n      this.setState({\n        [name]: event.target.value,\n        subjectListFiltered\n      });\n    };\n\n    this.onDropUserParent = e => {\n      let file = e.target.files[0];\n      this.setState({\n        parentStudentphoto: file,\n        inputTextParent: file.name\n      });\n    };\n\n    this.onDrop = e => {\n      let file = e.target.files[0];\n      this.setState({\n        userPhotos: file,\n        inputText: file.name\n      });\n    };\n\n    this.handleNext = () => {\n      let commonInformation = {\n        id: this.state.id,\n        name: this.state.name,\n        surname: this.state.surname,\n        gender: this.state.gender,\n        date_of_birth: this.state.date_of_birth,\n        address: this.state.address,\n        phone: this.state.phone,\n        status: true,\n        cin: this.state.cin,\n        realm: this.state.name,\n        username: this.state.name + \".\" + this.state.surname,\n        zip_code: this.state.zip_code,\n        email: this.state.email,\n        name_ar: this.state.Arabname,\n        surname_ar: this.state.Arabsurname,\n        photo: this.state.userPhotos,\n        emailVerified: false\n      };\n      let specificInformation = {};\n\n      if (this.props.user.role_id === 3) {\n        specificInformation = {\n          idProfessor: this.state.professorId,\n          date_start_contract: this.state.date_start_contract,\n          date_end_contract: this.state.date_end_contract,\n          listOfSubjects: this.state.listOfSubjects\n        };\n      }\n\n      const {\n        activeStep\n      } = this.state;\n\n      if (activeStep === 0) {\n        axios.patch(`${baseUrl.baseUrl}/users/` + this.props.user.user.id + `?access_token=${localStorage.token}`, commonInformation).then(response => {\n          this.props.editUser(response.data);\n\n          if (this.props.user.user.id === this.props.userProfile.user_id) {\n            var object = commonInformation;\n            object.creation_date = this.props.user.user.creation_date;\n            object.first_connexion = this.props.user.user.first_connexion;\n            object.user_signature = this.props.user.user.user_signature;\n            localStorage.setItem(\"user\", JSON.stringify(object));\n            this.setState({\n              communsuccessAlert: true\n            });\n          }\n\n          setTimeout(function () {\n            this.setState({\n              activeStep: activeStep + 1\n            });\n          }.bind(this), 1000);\n        }).catch(error => {\n          //  this.props.errorHandlingSteper();\n          this.setState({\n            communFailedAlert: true\n          });\n        });\n      } else if (activeStep === 1) {\n        setTimeout(function () {\n          this.setState({\n            activeStep: activeStep + 1\n          });\n        }.bind(this), 500);\n      } else if (activeStep === 2 && this.props.user.role_id === 3) {\n        axios.patch(`${baseUrl.baseUrl}/professors/` + this.props.user.id + `?access_token=${localStorage.token}`, specificInformation).then(response => {}).catch(function (error) {});\n      } else if (activeStep === 2 && this.props.user.role_id === 5) {\n        var NewServiceList = this.state.serviceId;\n        var OldServiceList = this.state.oldService;\n        var difference = [];\n\n        if (OldServiceList.length === 0) {\n          difference = NewServiceList;\n        } else {\n          difference = _.difference(NewServiceList, OldServiceList);\n        }\n\n        specificInformation = {\n          id: this.props.user.students[0].id,\n          level_id: this.state.level_id,\n          class_id: this.state.class_id,\n          profile_id: this.props.user.students[0].profile_id,\n          service: difference\n        };\n        axios.patch(`${baseUrl.baseUrl}/students/edit-class-student?access_token=${localStorage.token}`, specificInformation).then(response => {\n          this.setState({\n            successStatus: true\n          });\n        }).catch(function (error) {});\n        setTimeout(function () {\n          this.setState({\n            activeStep: activeStep + 1\n          });\n        }.bind(this), 1000);\n      } else if (activeStep === 3 && this.props.user.role_id === 5) {\n        specificInformation = {\n          id: this.props.user.students[0].id,\n          newParentsList: this.state.newParentsList,\n          affectedParents: this.state.affectedParents,\n          establishment_id: this.props.user.establishment_id\n        };\n        axios.patch(`${baseUrl.baseUrl}/students/edit-parent-student?access_token=${localStorage.token}`, specificInformation).then(response => {}).catch(function (error) {});\n        setTimeout(function () {\n          this.props.editAlert();\n        }.bind(this), 1000);\n      } else {}\n    };\n\n    this.handleBack = () => {\n      const {\n        activeStep\n      } = this.state;\n      this.setState({\n        activeStep: activeStep - 1\n      });\n    };\n\n    this.handleReset = () => {\n      this.setState({\n        activeStep: 0\n      });\n    };\n\n    this.isValidphoneNumber = number => {\n      const tel = parsePhoneNumberFromString(number);\n      let res = false;\n\n      if (tel) {\n        res = tel.isValid();\n      }\n\n      return res;\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      let specificInformation = {};\n\n      if (this.props.user.role_id === 3) {\n        specificInformation = {\n          idProfessor: this.props.user.professors[0].id,\n          date_start_contract: this.state.date_start_contract,\n          date_end_contract: this.state.date_end_contract,\n          listOfSubjects: this.state.listOfSubjects,\n          addedListSubject: this.state.addedListSubject\n        };\n        axios.patch(`${baseUrl.baseUrl}/professors/edit-professor?access_token=${localStorage.token}`, specificInformation).then(response => {\n          if (response.status === 200) {\n            this.props.successHandling();\n          }\n        }).catch(error => {\n          this.props.errorHandling();\n        });\n      }\n\n      if (this.props.user.role_id === 5) {\n        var newAffectedList = _.difference(this.state.affectedParents, this.state.oldaffectedParents);\n\n        specificInformation = {\n          id: this.props.user.students[0].id,\n          newParentsList: this.state.newParentsList,\n          affectedParents: newAffectedList,\n          establishment_id: this.props.user.establishment_id\n        };\n        axios.patch(`${baseUrl.baseUrl}/students/edit-parent-student?access_token=${localStorage.token}`, specificInformation).then(response => {\n          this.setState({\n            affectedParents: [],\n            newParentsList: []\n          });\n        }).catch(function (error) {});\n        setTimeout(function () {\n          this.props.editAlert();\n        }.bind(this), 1000);\n      }\n\n      this.props.cancel();\n    };\n\n    this.state = {\n      //components Common information\n      id: \"\",\n      name: \"\",\n      surname: \"\",\n      Arabname: \"\",\n      Arabsurname: \"\",\n      gender: \"\",\n      date_of_birth: moment().year() - 6 + \"-01-01\",\n      email: \"\",\n      phone: 0,\n      cin: 0,\n      address: \"\",\n      zip_code: 0,\n      status: true,\n      activeStep: 0,\n      inputText: \"\",\n      userPhotos: null,\n      emailVerified: false,\n      //components role information\n      establishment_id: 0,\n      role_id: \"\",\n      steps: 1,\n      //components specific information\n      date_start_contract: \"\",\n      Disable_studentsection: true,\n      date_end_contract: \"\",\n      listOfSubjects: [],\n      serviceFilteredByEstablishment: [],\n      studentClassesByLevelSectionID: [],\n      studentsectionByLevels: [],\n      class_id: 0,\n      idProfessor: \"\",\n      SubjectsNewList: [],\n      //components Parent information\n      newParent: false,\n      newParentsList: [],\n      allParentList: [],\n      affectedParents: [],\n      oldaffectedParents: [],\n      oldService: [],\n      nameParent: \"\",\n      surnameParent: \"\",\n      genderParent: \"\",\n      date_of_birthParent: moment().year() - 18 + \"-01-01\",\n      addressParent: \"\",\n      phoneParent: 0,\n      statusParent: true,\n      cinParent: 0,\n      zip_codeParent: 0,\n      usernameParent: \"\",\n      emailParent: \"\",\n      inputTextParent: \"\",\n      parentStudentphoto: null,\n      emailVerifiedParent: false,\n      countrie_locale: \"\",\n      addedListSubject: [],\n      added: false,\n      listOfSubjects: [{\n        id: null,\n        level_id: 0,\n        section_id: 0,\n        subject_id: 0,\n        sectionDisabled: true\n      }],\n      establishmentList: [],\n      classeList: [],\n      classListFiltered: [],\n      estabType: 0,\n      serviceId: [],\n      successStatus: false,\n      communsuccessAlert: false,\n      communFailedAlert: false\n    };\n    this.getStepContent = this.getStepContent.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangePhone = this.handleChangePhone.bind(this);\n    this.handleChangeParentPhone = this.handleChangeParentPhone.bind(this);\n    this.handleChangeRole = this.handleChangeRole.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleChangeLevel = this.handleChangeLevel.bind(this);\n    this.handleChangeSection = this.handleChangeSection.bind(this);\n    this.handleChangeListSubjects = this.handleChangeListSubjects.bind(this);\n    this.handleChangeService = this.handleChangeService.bind(this);\n    this.handleChangeEstablishment = this.handleChangeEstablishment.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n    this.onDropUserParent = this.onDropUserParent.bind(this);\n    this.addNewSubject = this.addNewSubject.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.addNewParentFormulaire = this.addNewParentFormulaire.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleReset = this.handleReset.bind(this);\n    this.getSteps = this.getSteps.bind(this);\n    this.handleChangestudentLevel = this.handleChangestudentLevel.bind(this);\n    this.handleChangestudentSection = this.handleChangestudentSection.bind(this);\n    this.handleChangeListSubjectsAdd = this.handleChangeListSubjectsAdd.bind(this);\n    this.handleChangeEndContract = this.handleChangeEndContract.bind(this);\n    this.handleChangeStartContract = this.handleChangeStartContract.bind(this);\n    this.handleChangeDate = this.handleChangeDate.bind(this);\n    this.handleChangeDateParent = this.handleChangeDateParent.bind(this);\n  }\n\n  handleChangeListSubjectsAdd(event, name, index) {\n    if (name === \"level_id\") {\n      var newList = this.state.addedListSubject;\n      newList[index].level_id = event.target.value;\n      newList[index].section_id = this.state.addedListSubject[index].section_id;\n      newList[index].subject_id = this.state.addedListSubject[index].subject_id;\n      this.setState({\n        addedListSubject: newList\n      });\n    }\n\n    if (name === \"subject_id\") {\n      var newList = this.state.addedListSubject;\n      newList[index].level_id = this.state.addedListSubject[index].level_id;\n      newList[index].section_id = this.state.addedListSubject[index].section_id;\n      newList[index].subject_id = event.target.value;\n      this.setState({\n        addedListSubject: newList\n      });\n    }\n\n    let newListSubjects = this.state.addedListSubject.map(objSubject => name === \"level_id\" && event.target.value > 10 && objSubject.id === index ? { ...objSubject,\n      [name]: event.target.value,\n      sectionDisabled: false,\n      section_id: 0\n    } : objSubject.id === index ? { ...objSubject,\n      [name]: event.target.value,\n      sectionDisabled: true\n    } : objSubject);\n    this.setState({\n      addedListSubject: newListSubjects\n    });\n  }\n\n  handleChangeListSubjects(event, name, id, index) {\n    if (name === \"level_id\") {\n      var newList = this.state.listOfSubjects;\n      newList[index].level_id = event.target.value;\n      newList[index].section_id = this.state.listOfSubjects[index].section_id;\n      newList[index].subject_id = this.state.listOfSubjects[index].subject_id;\n      newList[index].id = id;\n      this.setState({\n        listOfSubjects: newList\n      });\n    }\n\n    if (name === \"subject_id\") {\n      var newList = this.state.listOfSubjects;\n      newList[index].level_id = this.state.listOfSubjects[index].level_id;\n      newList[index].section_id = this.state.listOfSubjects[index].section_id;\n      newList[index].subject_id = event.target.value;\n      newList[index].id = id;\n      this.setState({\n        listOfSubjects: newList\n      });\n    }\n\n    if (name === \"level_id\") {\n      const newList = this.state.listOfSubjects.map(listobject => {\n        if (listobject.id === index) {\n          listobject.section_id = 0;\n          return listobject;\n        }\n\n        return listobject;\n      });\n      this.setState({\n        listOfSubjects: newList\n      });\n    }\n\n    let newListSubjects = this.state.listOfSubjects.map(objSubject => name === \"level_id\" && event.target.value > 10 && objSubject.id === index ? { ...objSubject,\n      [name]: event.target.value,\n      sectionDisabled: false,\n      section_id: 0\n    } : objSubject.id === index ? { ...objSubject,\n      [name]: event.target.value,\n      sectionDisabled: true\n    } : objSubject);\n    this.setState({\n      listOfSubjects: newListSubjects\n    });\n  }\n\n  getStepContent(stepIndex, roleList, establishmentList, values, handleChange, handleBlur, touched, errors) {\n    switch (this.state.activeStep) {\n      case 0:\n        return /*#__PURE__*/React.createElement(CommonInformation, {\n          values: this.state,\n          handleChange: this.handleChange,\n          onDrop: this.onDrop,\n          user: this.props.user,\n          handleChangeDate: this.handleChangeDate,\n          handleChangePhone: this.handleChangePhone,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 11\n          }\n        });\n\n      case 1:\n        return /*#__PURE__*/React.createElement(RoleInformation, {\n          values: this.state,\n          handleChangeRole: this.handleChangeRole,\n          handleChangeEstablishment: this.handleChangeEstablishment,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 612,\n            columnNumber: 11\n          }\n        });\n\n      case 2:\n        return /*#__PURE__*/React.createElement(EditSpecificInformation, {\n          classList: this.props.classes,\n          serviceList: this.props.services,\n          classSections: this.props.classSections,\n          classLevels: this.props.classLevels,\n          values: this.state,\n          handleChange: this.handleChange,\n          handleChangeClass: this.handleChangeClass,\n          handleChangeService: this.handleChangeService,\n          handleChangeClass: this.handleChangeClass,\n          handleChangeListSubjects: this.handleChangeListSubjects,\n          addNewSubject: this.addNewSubject,\n          handleChangestudentLevel: this.handleChangestudentLevel,\n          handleChangestudentSection: this.handleChangestudentSection,\n          handleChangeListSubjectsAdd: this.handleChangeListSubjectsAdd,\n          handleChangeStartContract: this.handleChangeStartContract,\n          handleChangeEndContract: this.handleChangeEndContract,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 621,\n            columnNumber: 11\n          }\n        });\n\n      case 3:\n        return /*#__PURE__*/React.createElement(EditparentInformation, {\n          values: this.state,\n          handleChange: this.handleChange,\n          onDropUserParent: this.onDropUserParent,\n          addNewParent: this.addNewParent,\n          addNewParentFormulaire: this.addNewParentFormulaire,\n          handleChangeSelectParent: this.handleChangeSelectParent,\n          validateZipCode: this.validateZipCode,\n          handleChangeDateParent: this.handleChangeDateParent,\n          handleChangeParentPhone: this.handleChangeParentPhone,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 642,\n            columnNumber: 11\n          }\n        });\n\n      default:\n        return \"Uknown stepIndex\";\n    }\n  }\n\n  getSteps() {\n    switch (this.props.user.role_id) {\n      case 0:\n      case 1:\n      case 2:\n      case 4:\n      case 6:\n      case 7:\n        return [/*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.accountInfo\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 667,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.role\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 668,\n            columnNumber: 11\n          }\n        })];\n\n      case 3:\n        return [/*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.accountInfo\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 673,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.role\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 674,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.specInfo\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 675,\n            columnNumber: 11\n          }\n        })];\n\n      case 5:\n        return [/*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.accountInfo\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 680,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.role\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.specInfo\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 682,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.parentInfoOfStudent\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 683,\n            columnNumber: 11\n          }\n        })];\n\n      default:\n        return \"Uknown stepIndex\";\n    }\n  }\n\n  Validation_Steps(steps) {\n    // this methode is to able and disable next and finish button when we insert any user (created by bechir)\n    if (this.state.activeStep === 0) {\n      if (this.state.countrie_locale === \"ar\") {\n        if (this.state.name.length !== 0 && this.state.surname.length !== 0 && this.isemail(this.state.email) === true && this.state.email.length !== 0 && this.state.Arabname.length !== 0 && this.state.Arabsurname.length !== 0 && this.isValidphoneNumber(this.state.phone) === true) return true;else return false;\n      } else {\n        if (this.state.name.length !== 0 && this.state.surname.length !== 0 && this.isemail(this.state.email) === true && this.state.email.length !== 0 && this.isValidphoneNumber(this.state.phone) === true) return true;else return false;\n      }\n    }\n\n    if (this.state.activeStep === 1 && this.props.userProfile.role_id === 1) {\n      if (this.state.role_id !== 0 && this.state.establishment_id !== 0) return true;else return false;\n    }\n\n    if (this.state.activeStep === 2 && this.state.role_id === 5) {\n      if (this.state.level_id === undefined || this.state.class_id === 0) return false;else return true;\n    }\n\n    if (this.state.activeStep === 2 && this.state.role_id === 3) {\n      if (this.state.listOfSubjects.length === 1 && this.state.listOfSubjects[0].subject_id === 0) {\n        return false;\n      } else return true;\n    } else if (this.state.activeStep === 3 && this.state.role_id === 5) {\n      if (this.state.newParentsList.length === 0 && this.state.affectedParents.length === 0) return false;else return true;\n    }\n\n    if (this.state.activeStep === 1 && (this.props.userProfile.role_id === 2 || this.props.userProfile.role_id === 7)) {\n      if (this.state.role_id === 0) return false;else return true;\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.user) {\n      this.setState({\n        steps: this.props.userProfile.role_id,\n        id: this.props.user.user.id,\n        name: this.props.user.user.name,\n        surname: this.props.user.user.surname,\n        Arabname: this.props.user.user.name_ar,\n        Arabsurname: this.props.user.user.surname_ar,\n        gender: this.props.user.user.gender,\n        date_of_birth: moment(this.props.user.user.date_of_birth).toISOString(),\n        email: this.props.user.user.email,\n        phone: '+' + this.props.user.user.phone,\n        cin: this.props.user.user.cin,\n        address: this.props.user.user.address,\n        zip_code: this.props.user.user.zip_code,\n        role_id: this.props.user.role_id,\n        establishment_id: this.props.user.establishment_id\n      });\n\n      if (this.props.user.role_id === 3) {\n        axios.get(`${baseUrl.baseUrl}/professors?access_token=${localStorage.token}&filter[include]=profSubjects&filter[where][id]=` + this.props.user.professors[0].id).then(res => {\n          this.setState({\n            SubjectsNewList: res.data[0].profSubjects,\n            listOfSubjects: res.data[0].profSubjects,\n            idProfessor: this.props.user.professors[0].id,\n            date_start_contract: this.props.user.professors[0].date_start_contract,\n            date_end_contract: this.props.user.professors[0].date_end_contract\n          });\n        });\n      }\n\n      if (this.props.user.role_id === 5) {\n        this.setState({\n          level_id: this.props.user.students[0].level_id,\n          class_id: this.props.user.students[0].class_id\n        });\n\n        if (this.props.user.students[0].level_id > 10) {\n          this.setState({\n            Disable_studentsection: false\n          });\n          var studentSectionbyLevel = getSectionFromLevel(this.props.classSections, this.props.user.students[0].level_id);\n          this.setState({\n            studentsectionByLevels: studentSectionbyLevel\n          });\n          const levelID = this.props.user.students[0].level_id;\n          var studentfiltredClasses = this.props.classes.filter(classe => classe.level_id === levelID && classe.status);\n          this.setState({\n            studentClassesByLevelSectionID: studentfiltredClasses\n          });\n        } else {\n          this.setState({\n            level_id: this.props.user.students[0].level_id,\n            Disable_studentsection: true,\n            section_id: 0\n          });\n          const levelID = this.props.user.students[0].level_id;\n          var studentfiltredClasses = this.props.classes.filter(classe => classe.level_id === levelID && classe.status);\n          this.setState({\n            studentClassesByLevelSectionID: studentfiltredClasses\n          });\n        }\n\n        axios.get(`${baseUrl.baseUrl}/students_services?access_token=${localStorage.token}&filter[where][student_id]=` + this.props.user.students[0].id).then(response => {\n          let result = response.data.map(a => a.service_id);\n          this.setState({\n            serviceId: result,\n            oldService: result\n          });\n          axios.get(`${baseUrl.baseUrl}/students_parents?access_token=${localStorage.token}&filter[where][student_id]=` + this.props.user.students[0].id).then(response => {\n            let parents = response.data.map(a => a.parent_id);\n            this.setState({\n              affectedParents: parents,\n              oldaffectedParents: parents\n            });\n          });\n        });\n      }\n    }\n\n    this.props.getSections();\n    this.props.getLevels();\n\n    if (this.props.userProfile.role_id === 2 || this.props.userProfile.role_id === 7) {\n      axios.get(`${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[where][and][0][establishment_id]=` + this.props.userProfile.establishment_id + `&filter[where][and][1][role_id]=` + 4).then(res => {\n        const allEstablishmentParents = res.data.map(element => element.user);\n        this.setState({\n          allParentList: allEstablishmentParents\n        });\n      });\n      this.props.getClassesByEstablishmentId(this.props.userProfile.establishment_id);\n      this.props.getServicesByEstablishmentId(this.props.userProfile.establishment_id);\n      axios.get(`${baseUrl.baseUrl}/establishments/` + this.props.userProfile.establishment_id + `?access_token=${localStorage.token}`).then(res => {\n        this.setState({\n          estabType: res.data.estab_type_id\n        });\n        axios.get(`${baseUrl.baseUrl}/countries/` + res.data.countries_id + `?access_token=${localStorage.token}`).then(res => {\n          this.setState({\n            countrie_locale: res.data.locale\n          });\n        });\n      });\n      axios.get(`${baseUrl.baseUrl}/roles?access_token=${localStorage.token}`).then(res => {\n        let data = res.data;\n        const roleList = data.filter(element => element.id !== 1);\n        this.setState({\n          roleList\n        });\n      });\n    } else {\n      axios.get(`${baseUrl.baseUrl}/roles?access_token=${localStorage.token}`).then(res => {\n        const roleList = res.data;\n        this.setState({\n          roleList\n        });\n      });\n    }\n\n    axios.get(`${baseUrl.baseUrl}/establishments?access_token=${localStorage.token}`).then(res => {\n      const establishmentList = res.data.filter(element => element.status);\n      this.setState({\n        establishmentList\n      });\n    });\n    axios.get(`${baseUrl.baseUrl}/subjects?access_token=${localStorage.token}`).then(res => {\n      const subjectList = res.data;\n      this.setState({\n        subjectList\n      });\n    });\n  }\n\n  handleCancel() {\n    this.setState({\n      previewVisible: false,\n      name: \"\",\n      surname: \"\",\n      gender: \"\",\n      date_of_birth: \"\",\n      address: \"\",\n      phone: \"\",\n      zip_code: \"\",\n      status: true,\n      cin: \"\",\n      realm: \"\",\n      password: \"\",\n      username: \"\",\n      email: \"\",\n      emailVerified: false,\n      nameParent: \"\",\n      surnameParent: \"\",\n      genderParent: \"\",\n      date_of_birthParent: \"\",\n      addressParent: \"\",\n      phoneParent: \"\",\n      statusParent: true,\n      cinParent: \"\",\n      zip_codeParent: \"\",\n      realmParent: \"\",\n      passwordParent: \"123456\",\n      usernameParent: \"\",\n      emailParent: \"\",\n      emailVerifiedParent: false,\n      date_start_contract: \"\",\n      date_end_contract: \"\",\n      establishment_id: 0,\n      role_id: 0,\n      subject_id: \"\",\n      class_id: 0,\n      serviceId: [],\n      userPhotos: null,\n      parentStudentphoto: null,\n      Arabname: \"\",\n      Arabsurname: \"\",\n      affectedParents: [],\n      newParentsList: []\n    });\n    this.props.close();\n  }\n\n  isemail(value) {\n    if (value.length > 0) return /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@(([[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(value);else return true;\n  }\n\n  render() {\n    const steps = this.getSteps();\n    const {\n      activeStep,\n      roleList\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1063,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Modal, {\n      isOpen: this.props.edit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1064,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      toggle: this.props.cancel,\n      className: \"modal-box-header bg-primary text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1065,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"pages.stuppUserPage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1069,\n        columnNumber: 14\n      }\n    })), /*#__PURE__*/React.createElement(ModalBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1071,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"container\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1072,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1073,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1074,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Stepper, {\n      activeStep: activeStep,\n      alternativeLabel: true,\n      className: \"horizontal-stepper-linear\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1075,\n        columnNumber: 19\n      }\n    }, steps.map((label, index) => {\n      return /*#__PURE__*/React.createElement(Step, {\n        key: label,\n        className: `horizontal-stepper ${index === activeStep ? \"active\" : \"\"}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1082,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(StepLabel, {\n        className: \"stepperlabel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1088,\n          columnNumber: 27\n        }\n      }, label));\n    }))), this.state.activeStep === steps.length ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1097,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      className: \"my-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1098,\n        columnNumber: 21\n      }\n    }, \"All steps completed - you\\\"re finished\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: this.handleReset,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1101,\n        columnNumber: 21\n      }\n    }, \"Reset\")) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1104,\n        columnNumber: 19\n      }\n    }, this.getStepContent(activeStep, roleList), /*#__PURE__*/React.createElement(Button, {\n      disabled: activeStep === 0,\n      onClick: this.handleBack,\n      className: \"mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1106,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"stuppUser.button.back\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1111,\n        columnNumber: 24\n      }\n    })), activeStep === steps.length - 1 ? /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      type: \"submit\" //  disabled={this.Validation_Steps(steps) ? false : true}\n      ,\n      className: \"jr-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1115,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"stuppUser.button.finish\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1122,\n        columnNumber: 26\n      }\n    })) : /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: this.handleNext // disabled={this.Validation_Steps(steps) ? false : true}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1125,\n        columnNumber: 23\n      }\n    }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"stuppUser.button.Next\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1132,\n        columnNumber: 26\n      }\n    }))))))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    establishments: state.establishment.remoteEstablishments,\n    services: state.service.remoteServices,\n    userProfile: state.auth.userProfile,\n    users: state.stuppUsers.remoteStuppUsers,\n    classLevels: state.ClassLevels.remoteLevels,\n    classSections: state.classSections.remoteSections,\n    classes: state.classes\n  };\n}\n\nexport default connect(mapStateToProps, {\n  editUser,\n  getAllUsers,\n  getServices,\n  getEstablishment,\n  getUserProfile,\n  getLevels,\n  getSections,\n  getClassesByEstablishmentId,\n  getServicesByEstablishmentId,\n  errorHandling,\n  successHandling,\n  successHandlingSteper,\n  errorHandlingSteper\n})(EditUser);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/User/EditUser.js"],"names":["React","Component","Modal","ModalBody","ModalHeader","IntlMessages","Button","Stepper","Step","StepLabel","Typography","CommonInformation","RoleInformation","EditSpecificInformation","EditparentInformation","axios","baseUrl","connect","getEstablishment","getServices","getUserProfile","getAllUsers","getSections","getLevels","getClassesByEstablishmentId","getServicesByEstablishmentId","editUser","errorHandling","successHandling","successHandlingSteper","errorHandlingSteper","getSectionFromLevel","moment","parsePhoneNumberFromString","_","EditUser","constructor","props","handleChangePhone","value","setState","phone","handleChangeParentPhone","phoneParent","handleChangeDate","date","date_of_birth","handleChangeDateParent","date_of_birthParent","addNewParentFormulaire","newParent","state","addNewParent","parent","nameParent","surnameParent","genderParent","addressParent","statusParent","cinParent","zip_codeParent","realmParent","passwordParent","usernameParent","emailParent","parentStudentphoto","emailVerifiedParent","newParentsList","push","inputTextParent","Arabname","Arabsurname","addNewSubject","index","prevState","addedListSubject","id","level_id","section_id","subject_id","sectionDisabled","added","handleChangestudentLevel","name","event","class_id","target","Disable_studentsection","studentSectionbyLevel","classSections","studentsectionByLevels","levelID","studentfiltredClasses","classes","filter","classe","status","studentClassesByLevelSectionID","handleChangestudentSection","sectionID","handleChangeService","serviceId","handleChangeSelectParent","affectedParents","handleChange","handleChangeStartContract","date_start_contract","handleChangeEndContract","date_end_contract","handleChangeRole","steps","handleChangeClass","userProfile","role_id","establishment_id","handleChangeEstablishment","type_establish","establishmentList","find","element","estabType","estab_type_id","get","localStorage","token","then","res","allEstablishmentParents","data","map","user","allParentList","handleChangeLevel","subjectListFiltered","handleChangeSection","onDropUserParent","e","file","files","onDrop","userPhotos","inputText","handleNext","commonInformation","surname","gender","address","cin","realm","username","zip_code","email","name_ar","surname_ar","photo","emailVerified","specificInformation","idProfessor","professorId","listOfSubjects","activeStep","patch","response","user_id","object","creation_date","first_connexion","user_signature","setItem","JSON","stringify","communsuccessAlert","setTimeout","bind","catch","error","communFailedAlert","NewServiceList","OldServiceList","oldService","difference","length","students","profile_id","service","successStatus","editAlert","handleBack","handleReset","isValidphoneNumber","number","tel","isValid","handleSubmit","preventDefault","professors","newAffectedList","oldaffectedParents","cancel","year","serviceFilteredByEstablishment","SubjectsNewList","countrie_locale","classeList","classListFiltered","getStepContent","handleChangeListSubjects","handleCancel","getSteps","handleChangeListSubjectsAdd","newList","newListSubjects","objSubject","listobject","stepIndex","roleList","values","handleBlur","touched","errors","services","classLevels","validateZipCode","Validation_Steps","isemail","undefined","componentDidMount","toISOString","profSubjects","result","a","service_id","parents","parent_id","countries_id","locale","subjectList","previewVisible","password","close","test","render","edit","label","mapStateToProps","establishments","establishment","remoteEstablishments","remoteServices","auth","users","stuppUsers","remoteStuppUsers","ClassLevels","remoteLevels","remoteSections"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,KAAT,EAAgBC,SAAhB,EAA2BC,WAA3B,QAA8C,YAA9C;AACA,OAAOC,YAAP,MAAyB,kCAAzB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,OAAP,MAAoB,2BAApB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,iBAAP,MAA8B,qCAA9B;AACA,OAAOC,eAAP,MAA4B,mCAA5B;AACA,OAAOC,uBAAP,MAAoC,2CAApC;AACA,OAAOC,qBAAP,MAAkC,yCAAlC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,8BAApB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,gBAAT,QAAiC,4CAAjC;AACA,SAASC,WAAT,QAA4B,sCAA5B;AACA,SAASC,cAAT,QAA+B,6BAA/B;AACA,SAASC,WAAT,QAA4B,wCAA5B;AACA,SAASC,WAAT,QAA4B,sCAA5B;AACA,SAASC,SAAT,QAA0B,yCAA1B;AACA,SAASC,2BAAT,QAA4C,qCAA5C;AACA,SAASC,4BAAT,QAA6C,sCAA7C;AACA,SACEC,QADF,EAEEC,aAFF,EAGEC,eAHF,EAIEC,qBAJF,EAKEC,mBALF,QAMO,wCANP;AAOA,SAASC,mBAAT,QAAoC,sCAApC;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,0BAAT,QAA2C,mBAA3C;AACA,OAAOC,CAAP,MAAc,QAAd;;AAEA,MAAMC,QAAN,SAAuBlC,SAAvB,CAAiC;AAC/BmC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAoHnBC,iBApHmB,GAoHEC,KAAD,IAAW;AAC7B,WAAKC,QAAL,CAAc;AAAEC,QAAAA,KAAK,EAAEF;AAAT,OAAd;AACD,KAtHkB;;AAAA,SAuHnBG,uBAvHmB,GAuHQH,KAAD,IAAW;AACnC,WAAKC,QAAL,CAAc;AAAEG,QAAAA,WAAW,EAAEJ;AAAf,OAAd;AACD,KAzHkB;;AAAA,SA0HnBK,gBA1HmB,GA0HCC,IAAD,IAAU;AAC3B,WAAKL,QAAL,CAAc;AAAEM,QAAAA,aAAa,EAAED;AAAjB,OAAd;AACD,KA5HkB;;AAAA,SA8HnBE,sBA9HmB,GA8HOF,IAAD,IAAU;AACjC,WAAKL,QAAL,CAAc;AAAEQ,QAAAA,mBAAmB,EAAEH;AAAvB,OAAd;AACD,KAhIkB;;AAAA,SAkInBI,sBAlImB,GAkIM,MAAM;AAC7B,WAAKT,QAAL,CAAc;AAAEU,QAAAA,SAAS,EAAE,CAAC,KAAKC,KAAL,CAAWD;AAAzB,OAAd;AACD,KApIkB;;AAAA,SAqInBE,YArImB,GAqIJ,MAAM;AACnB,UAAIC,MAAM,GAAG;AACXC,QAAAA,UAAU,EAAE,KAAKH,KAAL,CAAWG,UADZ;AAEXC,QAAAA,aAAa,EAAE,KAAKJ,KAAL,CAAWI,aAFf;AAGXC,QAAAA,YAAY,EAAE,KAAKL,KAAL,CAAWK,YAHd;AAIXR,QAAAA,mBAAmB,EAAE,KAAKG,KAAL,CAAWH,mBAJrB;AAKXS,QAAAA,aAAa,EAAE,KAAKN,KAAL,CAAWM,aALf;AAMXd,QAAAA,WAAW,EAAE,KAAKQ,KAAL,CAAWR,WANb;AAOXe,QAAAA,YAAY,EAAE,IAPH;AAQXC,QAAAA,SAAS,EAAE,KAAKR,KAAL,CAAWQ,SARX;AASXC,QAAAA,cAAc,EAAE,KAAKT,KAAL,CAAWS,cAThB;AAUXC,QAAAA,WAAW,EAAE,KAAKV,KAAL,CAAWG,UAVb;AAWXQ,QAAAA,cAAc,EAAE,QAXL;AAYXC,QAAAA,cAAc,EAAE,KAAKZ,KAAL,CAAWG,UAAX,GAAwB,GAAxB,GAA8B,KAAKH,KAAL,CAAWI,aAZ9C;AAaXS,QAAAA,WAAW,EAAE,KAAKb,KAAL,CAAWa,WAbb;AAcXC,QAAAA,kBAAkB,EAAE,KAAKd,KAAL,CAAWc,kBAdpB;AAeXC,QAAAA,mBAAmB,EAAE,KAfV;AAgBXD,QAAAA,kBAAkB,EAAE,KAAKd,KAAL,CAAWc;AAhBpB,OAAb;AAmBA,WAAKd,KAAL,CAAWgB,cAAX,CAA0BC,IAA1B,CAA+Bf,MAA/B;AACA,WAAKb,QAAL,CAAc;AACZc,QAAAA,UAAU,EAAE,EADA;AAEZC,QAAAA,aAAa,EAAE,EAFH;AAGZC,QAAAA,YAAY,EAAE,EAHF;AAIZR,QAAAA,mBAAmB,EAAE,EAJT;AAKZS,QAAAA,aAAa,EAAE,EALH;AAMZd,QAAAA,WAAW,EAAE,EAND;AAOZe,QAAAA,YAAY,EAAE,IAPF;AAQZC,QAAAA,SAAS,EAAE,EARC;AASZC,QAAAA,cAAc,EAAE,EATJ;AAUZC,QAAAA,WAAW,EAAE,EAVD;AAWZC,QAAAA,cAAc,EAAE,QAXJ;AAYZC,QAAAA,cAAc,EAAE,EAZJ;AAaZC,QAAAA,WAAW,EAAE,EAbD;AAcZE,QAAAA,mBAAmB,EAAE,KAdT;AAeZD,QAAAA,kBAAkB,EAAE,IAfR;AAgBZI,QAAAA,eAAe,EAAE,EAhBL;AAiBZnB,QAAAA,SAAS,EAAE,KAjBC;AAkBZoB,QAAAA,QAAQ,EAAE,EAlBE;AAmBZC,QAAAA,WAAW,EAAE;AAnBD,OAAd;AAqBD,KA/KkB;;AAAA,SAiLnBC,aAjLmB,GAiLFC,KAAD,IAAW;AACzB,WAAKjC,QAAL,CAAekC,SAAD,KAAgB;AAC5BC,QAAAA,gBAAgB,EAAE,CAChB,GAAGD,SAAS,CAACC,gBADG,EAEhB;AACEC,UAAAA,EAAE,EAAEH,KADN;AAEEI,UAAAA,QAAQ,EAAE,CAFZ;AAGEC,UAAAA,UAAU,EAAE,CAHd;AAIEC,UAAAA,UAAU,EAAE,CAJd;AAKEC,UAAAA,eAAe,EAAE;AALnB,SAFgB,CADU;AAW5BC,QAAAA,KAAK,EAAE;AAXqB,OAAhB,CAAd;AAaD,KA/LkB;;AAAA,SAuRnBC,wBAvRmB,GAuRSC,IAAD,IAAWC,KAAD,IAAW;AAC9C,WAAK5C,QAAL,CAAc;AAAEsC,QAAAA,UAAU,EAAE,CAAd;AAAiBO,QAAAA,QAAQ,EAAE;AAA3B,OAAd;;AACA,UAAID,KAAK,CAACE,MAAN,CAAa/C,KAAb,GAAqB,EAAzB,EAA6B;AAC3B,aAAKC,QAAL,CAAc;AAAE,WAAC2C,IAAD,GAAQC,KAAK,CAACE,MAAN,CAAa/C;AAAvB,SAAd;AACA,aAAKC,QAAL,CAAc;AAAE+C,UAAAA,sBAAsB,EAAE;AAA1B,SAAd;AACA,YAAIC,qBAAqB,GAAGzD,mBAAmB,CAC7C,KAAKM,KAAL,CAAWoD,aADkC,EAE7CL,KAAK,CAACE,MAAN,CAAa/C,KAFgC,CAA/C;AAIA,aAAKC,QAAL,CAAc;AAAEkD,UAAAA,sBAAsB,EAAEF;AAA1B,SAAd;AACD,OARD,MAQO;AACL,aAAKhD,QAAL,CAAc;AACZqC,UAAAA,QAAQ,EAAEO,KAAK,CAACE,MAAN,CAAa/C,KADX;AAEZgD,UAAAA,sBAAsB,EAAE,IAFZ;AAGZT,UAAAA,UAAU,EAAE;AAHA,SAAd;AAKA,cAAMa,OAAO,GAAGP,KAAK,CAACE,MAAN,CAAa/C,KAA7B;AACA,YAAIqD,qBAAqB,GAAG,KAAKvD,KAAL,CAAWwD,OAAX,CAAmBC,MAAnB,CACzBC,MAAD,IAAYA,MAAM,CAAClB,QAAP,KAAoBc,OAApB,IAA+BI,MAAM,CAACC,MADxB,CAA5B;AAGA,aAAKxD,QAAL,CAAc;AAAEyD,UAAAA,8BAA8B,EAAEL;AAAlC,SAAd;AACD;AACF,KA7SkB;;AAAA,SA+SnBM,0BA/SmB,GA+SWf,IAAD,IAAWC,KAAD,IAAW;AAChD,WAAK5C,QAAL,CAAc;AAAE,SAAC2C,IAAD,GAAQC,KAAK,CAACE,MAAN,CAAa/C;AAAvB,OAAd;AACA,YAAMoD,OAAO,GAAG,KAAKxC,KAAL,CAAW0B,QAA3B;AACA,YAAMsB,SAAS,GAAGf,KAAK,CAACE,MAAN,CAAa/C,KAA/B;AACA,UAAIqD,qBAAqB,GAAG,KAAKvD,KAAL,CAAWwD,OAAX,CAAmBC,MAAnB,CACzBC,MAAD,IACEA,MAAM,CAAClB,QAAP,KAAoBc,OAApB,IACAI,MAAM,CAACjB,UAAP,KAAsBqB,SADtB,IAEAJ,MAAM,CAACC,MAJiB,CAA5B;AAMA,WAAKxD,QAAL,CAAc;AAAEyD,QAAAA,8BAA8B,EAAEL;AAAlC,OAAd;AACD,KA1TkB;;AAAA,SA4TnBQ,mBA5TmB,GA4TIjB,IAAD,IAAWC,KAAD,IAAW;AACzC,WAAK5C,QAAL,CAAc;AAAE6D,QAAAA,SAAS,EAAEjB,KAAK,CAACE,MAAN,CAAa/C;AAA1B,OAAd;AACD,KA9TkB;;AAAA,SAgUnB+D,wBAhUmB,GAgUSnB,IAAD,IAAWC,KAAD,IAAW;AAC9C,WAAK5C,QAAL,CAAc;AAAE+D,QAAAA,eAAe,EAAEnB,KAAK,CAACE,MAAN,CAAa/C;AAAhC,OAAd;AACD,KAlUkB;;AAAA,SAoUnBiE,YApUmB,GAoUHrB,IAAD,IAAWC,KAAD,IAAW;AAClC,WAAK5C,QAAL,CAAc;AAAE,SAAC2C,IAAD,GAAQC,KAAK,CAACE,MAAN,CAAa/C;AAAvB,OAAd;AACD,KAtUkB;;AAAA,SAuUnBkE,yBAvUmB,GAuUU5D,IAAD,IAAU;AACpC,WAAKL,QAAL,CAAc;AAAEkE,QAAAA,mBAAmB,EAAE7D;AAAvB,OAAd;AACD,KAzUkB;;AAAA,SA0UnB8D,uBA1UmB,GA0UQ9D,IAAD,IAAU;AAClC,WAAKL,QAAL,CAAc;AAAEoE,QAAAA,iBAAiB,EAAE/D;AAArB,OAAd;AACD,KA5UkB;;AAAA,SA6UnBgE,gBA7UmB,GA6UC1B,IAAD,IAAWC,KAAD,IAAW;AACtC,WAAK5C,QAAL,CAAc;AAAE,SAAC2C,IAAD,GAAQC,KAAK,CAACE,MAAN,CAAa/C,KAAvB;AAA8BuE,QAAAA,KAAK,EAAE1B,KAAK,CAACE,MAAN,CAAa/C;AAAlD,OAAd;AACD,KA/UkB;;AAAA,SAiVnBwE,iBAjVmB,GAiVE5B,IAAD,IAAWC,KAAD,IAAW;AACvC,UACE,KAAK/C,KAAL,CAAW2E,WAAX,CAAuBC,OAAvB,KAAmC,CAAnC,IACA,KAAK5E,KAAL,CAAW2E,WAAX,CAAuBC,OAAvB,KAAmC,CAFrC,EAGE;AACA,aAAKzE,QAAL,CAAc;AACZ0E,UAAAA,gBAAgB,EAAE,KAAK7E,KAAL,CAAW2E,WAAX,CAAuBE;AAD7B,SAAd;AAGD;;AACD,WAAK1E,QAAL,CAAc;AAAE,SAAC2C,IAAD,GAAQC,KAAK,CAACE,MAAN,CAAa/C;AAAvB,OAAd;AACD,KA3VkB;;AAAA,SA6VnB4E,yBA7VmB,GA6VUhC,IAAD,IAAWC,KAAD,IAAW;AAC/C,UAAIgC,cAAc,GAAG,KAAKjE,KAAL,CAAWkE,iBAAX,CAA6BC,IAA7B,CAClBC,OAAD,IAAaA,OAAO,CAAC3C,EAAR,KAAeQ,KAAK,CAACE,MAAN,CAAa/C,KADtB,CAArB;AAGA,WAAKC,QAAL,CAAc;AAAE,SAAC2C,IAAD,GAAQC,KAAK,CAACE,MAAN,CAAa/C;AAAvB,OAAd;AACA,WAAKC,QAAL,CAAc;AACZgF,QAAAA,SAAS,EAAEJ,cAAc,CAACK,aADd;AAEZP,QAAAA,gBAAgB,EAAE9B,KAAK,CAACE,MAAN,CAAa/C;AAFnB,OAAd;AAIA,WAAKF,KAAL,CAAWb,2BAAX,CAAuC4D,KAAK,CAACE,MAAN,CAAa/C,KAApD;AACA,WAAKF,KAAL,CAAWZ,4BAAX,CAAwC2D,KAAK,CAACE,MAAN,CAAa/C,KAArD;AAEAxB,MAAAA,KAAK,CACF2G,GADH,CAEK,GAAE1G,OAAO,CAACA,OAAQ,0BAAyB2G,YAAY,CAACC,KAAM,gEAA/D,GACExC,KAAK,CAACE,MAAN,CAAa/C,KADf,GAEG,kCAFH,GAGE,CALN,EAOGsF,IAPH,CAOSC,GAAD,IAAS;AACb,cAAMC,uBAAuB,GAAGD,GAAG,CAACE,IAAJ,CAASC,GAAT,CAAcV,OAAD,IAAaA,OAAO,CAACW,IAAlC,CAAhC;AACA,aAAK1F,QAAL,CAAc;AACZ2F,UAAAA,aAAa,EAAEJ;AADH,SAAd;AAGD,OAZH;AAaD,KAtXkB;;AAAA,SAwXnBK,iBAxXmB,GAwXEhD,KAAD,IAAW;AAC7BA,MAAAA,KAAK,CAACE,MAAN,CAAa/C,KAAb,GAAqB,EAArB,GACI,KAAKC,QAAL,CAAc;AAAEqC,QAAAA,QAAQ,EAAEO,KAAK,CAACE,MAAN,CAAa/C,KAAzB;AAAgCyC,QAAAA,eAAe,EAAE;AAAjD,OAAd,CADJ,GAEI,KAAKxC,QAAL,CAAc;AAAEqC,QAAAA,QAAQ,EAAEO,KAAK,CAACE,MAAN,CAAa/C,KAAzB;AAAgCyC,QAAAA,eAAe,EAAE;AAAjD,OAAd,CAFJ;AAGA,UAAIqD,mBAAmB,GAAG,EAA1B;AACA,WAAK7F,QAAL,CAAc;AAAE6F,QAAAA;AAAF,OAAd;AACD,KA9XkB;;AAAA,SAgYnBC,mBAhYmB,GAgYInD,IAAD,IAAWC,KAAD,IAAW;AACzC,UAAIiD,mBAAmB,GAAG,EAA1B;AACA,WAAK7F,QAAL,CAAc;AAAE,SAAC2C,IAAD,GAAQC,KAAK,CAACE,MAAN,CAAa/C,KAAvB;AAA8B8F,QAAAA;AAA9B,OAAd;AACD,KAnYkB;;AAAA,SAqYnBE,gBArYmB,GAqYCC,CAAD,IAAO;AACxB,UAAIC,IAAI,GAAGD,CAAC,CAAClD,MAAF,CAASoD,KAAT,CAAe,CAAf,CAAX;AACA,WAAKlG,QAAL,CAAc;AAAEyB,QAAAA,kBAAkB,EAAEwE,IAAtB;AAA4BpE,QAAAA,eAAe,EAAEoE,IAAI,CAACtD;AAAlD,OAAd;AACD,KAxYkB;;AAAA,SA0YnBwD,MA1YmB,GA0YTH,CAAD,IAAO;AACd,UAAIC,IAAI,GAAGD,CAAC,CAAClD,MAAF,CAASoD,KAAT,CAAe,CAAf,CAAX;AACA,WAAKlG,QAAL,CAAc;AAAEoG,QAAAA,UAAU,EAAEH,IAAd;AAAoBI,QAAAA,SAAS,EAAEJ,IAAI,CAACtD;AAApC,OAAd;AACD,KA7YkB;;AAAA,SA+YnB2D,UA/YmB,GA+YN,MAAM;AACjB,UAAIC,iBAAiB,GAAG;AACtBnE,QAAAA,EAAE,EAAE,KAAKzB,KAAL,CAAWyB,EADO;AAEtBO,QAAAA,IAAI,EAAE,KAAKhC,KAAL,CAAWgC,IAFK;AAGtB6D,QAAAA,OAAO,EAAE,KAAK7F,KAAL,CAAW6F,OAHE;AAItBC,QAAAA,MAAM,EAAE,KAAK9F,KAAL,CAAW8F,MAJG;AAKtBnG,QAAAA,aAAa,EAAE,KAAKK,KAAL,CAAWL,aALJ;AAMtBoG,QAAAA,OAAO,EAAE,KAAK/F,KAAL,CAAW+F,OANE;AAOtBzG,QAAAA,KAAK,EAAE,KAAKU,KAAL,CAAWV,KAPI;AAQtBuD,QAAAA,MAAM,EAAE,IARc;AAStBmD,QAAAA,GAAG,EAAE,KAAKhG,KAAL,CAAWgG,GATM;AAUtBC,QAAAA,KAAK,EAAE,KAAKjG,KAAL,CAAWgC,IAVI;AAWtBkE,QAAAA,QAAQ,EAAE,KAAKlG,KAAL,CAAWgC,IAAX,GAAkB,GAAlB,GAAwB,KAAKhC,KAAL,CAAW6F,OAXvB;AAYtBM,QAAAA,QAAQ,EAAE,KAAKnG,KAAL,CAAWmG,QAZC;AAatBC,QAAAA,KAAK,EAAE,KAAKpG,KAAL,CAAWoG,KAbI;AActBC,QAAAA,OAAO,EAAE,KAAKrG,KAAL,CAAWmB,QAdE;AAetBmF,QAAAA,UAAU,EAAE,KAAKtG,KAAL,CAAWoB,WAfD;AAgBtBmF,QAAAA,KAAK,EAAE,KAAKvG,KAAL,CAAWyF,UAhBI;AAiBtBe,QAAAA,aAAa,EAAE;AAjBO,OAAxB;AAoBA,UAAIC,mBAAmB,GAAG,EAA1B;;AACA,UAAI,KAAKvH,KAAL,CAAW6F,IAAX,CAAgBjB,OAAhB,KAA4B,CAAhC,EAAmC;AACjC2C,QAAAA,mBAAmB,GAAG;AACpBC,UAAAA,WAAW,EAAE,KAAK1G,KAAL,CAAW2G,WADJ;AAEpBpD,UAAAA,mBAAmB,EAAE,KAAKvD,KAAL,CAAWuD,mBAFZ;AAGpBE,UAAAA,iBAAiB,EAAE,KAAKzD,KAAL,CAAWyD,iBAHV;AAIpBmD,UAAAA,cAAc,EAAE,KAAK5G,KAAL,CAAW4G;AAJP,SAAtB;AAMD;;AAED,YAAM;AAAEC,QAAAA;AAAF,UAAiB,KAAK7G,KAA5B;;AACA,UAAI6G,UAAU,KAAK,CAAnB,EAAsB;AACpBjJ,QAAAA,KAAK,CACFkJ,KADH,CAEK,GAAEjJ,OAAO,CAACA,OAAQ,SAAnB,GACE,KAAKqB,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqBtD,EADvB,GAEG,iBAAgB+C,YAAY,CAACC,KAAM,EAJ1C,EAKImB,iBALJ,EAOGlB,IAPH,CAOSqC,QAAD,IAAc;AAClB,eAAK7H,KAAL,CAAWX,QAAX,CAAoBwI,QAAQ,CAAClC,IAA7B;;AAEA,cAAI,KAAK3F,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqBtD,EAArB,KAA4B,KAAKvC,KAAL,CAAW2E,WAAX,CAAuBmD,OAAvD,EAAgE;AAC9D,gBAAIC,MAAM,GAAGrB,iBAAb;AACAqB,YAAAA,MAAM,CAACC,aAAP,GAAuB,KAAKhI,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqBmC,aAA5C;AACAD,YAAAA,MAAM,CAACE,eAAP,GAAyB,KAAKjI,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqBoC,eAA9C;AACAF,YAAAA,MAAM,CAACG,cAAP,GAAwB,KAAKlI,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqBqC,cAA7C;AACA5C,YAAAA,YAAY,CAAC6C,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeN,MAAf,CAA7B;AACA,iBAAK5H,QAAL,CAAc;AACZmI,cAAAA,kBAAkB,EAAE;AADR,aAAd;AAGD;;AAEDC,UAAAA,UAAU,CACR,YAAW;AACT,iBAAKpI,QAAL,CAAc;AAAEwH,cAAAA,UAAU,EAAEA,UAAU,GAAG;AAA3B,aAAd;AACD,WAFD,CAEEa,IAFF,CAEO,IAFP,CADQ,EAIR,IAJQ,CAAV;AAMD,SA3BH,EA4BGC,KA5BH,CA4BUC,KAAD,IAAW;AACf;AACD,eAAKvI,QAAL,CAAc;AACZwI,YAAAA,iBAAiB,EAAE;AADP,WAAd;AAGD,SAjCH;AAkCD,OAnCD,MAmCO,IAAIhB,UAAU,KAAK,CAAnB,EAAsB;AAC3BY,QAAAA,UAAU,CACR,YAAW;AACT,eAAKpI,QAAL,CAAc;AAAEwH,YAAAA,UAAU,EAAEA,UAAU,GAAG;AAA3B,WAAd;AACD,SAFD,CAEEa,IAFF,CAEO,IAFP,CADQ,EAIR,GAJQ,CAAV;AAMD,OAPM,MAOA,IAAIb,UAAU,KAAK,CAAf,IAAoB,KAAK3H,KAAL,CAAW6F,IAAX,CAAgBjB,OAAhB,KAA4B,CAApD,EAAuD;AAC5DlG,QAAAA,KAAK,CACFkJ,KADH,CAEK,GAAEjJ,OAAO,CAACA,OAAQ,cAAnB,GACE,KAAKqB,KAAL,CAAW6F,IAAX,CAAgBtD,EADlB,GAEG,iBAAgB+C,YAAY,CAACC,KAAM,EAJ1C,EAKIgC,mBALJ,EAOG/B,IAPH,CAOSqC,QAAD,IAAc,CAAE,CAPxB,EAQGY,KARH,CAQS,UAASC,KAAT,EAAgB,CACrB,CATJ;AAUD,OAXM,MAWA,IAAIf,UAAU,KAAK,CAAf,IAAoB,KAAK3H,KAAL,CAAW6F,IAAX,CAAgBjB,OAAhB,KAA4B,CAApD,EAAuD;AAC5D,YAAIgE,cAAc,GAAG,KAAK9H,KAAL,CAAWkD,SAAhC;AACA,YAAI6E,cAAc,GAAG,KAAK/H,KAAL,CAAWgI,UAAhC;AACA,YAAIC,UAAU,GAAG,EAAjB;;AACA,YAAIF,cAAc,CAACG,MAAf,KAA0B,CAA9B,EAAiC;AAC/BD,UAAAA,UAAU,GAAGH,cAAb;AACD,SAFD,MAEO;AACLG,UAAAA,UAAU,GAAGlJ,CAAC,CAACkJ,UAAF,CAAaH,cAAb,EAA6BC,cAA7B,CAAb;AACD;;AACDtB,QAAAA,mBAAmB,GAAG;AACpBhF,UAAAA,EAAE,EAAE,KAAKvC,KAAL,CAAW6F,IAAX,CAAgBoD,QAAhB,CAAyB,CAAzB,EAA4B1G,EADZ;AAEpBC,UAAAA,QAAQ,EAAE,KAAK1B,KAAL,CAAW0B,QAFD;AAGpBQ,UAAAA,QAAQ,EAAE,KAAKlC,KAAL,CAAWkC,QAHD;AAIpBkG,UAAAA,UAAU,EAAE,KAAKlJ,KAAL,CAAW6F,IAAX,CAAgBoD,QAAhB,CAAyB,CAAzB,EAA4BC,UAJpB;AAKpBC,UAAAA,OAAO,EAAEJ;AALW,SAAtB;AAQArK,QAAAA,KAAK,CACFkJ,KADH,CAEK,GAAEjJ,OAAO,CAACA,OAAQ,6CAA4C2G,YAAY,CAACC,KAAM,EAFtF,EAGIgC,mBAHJ,EAKG/B,IALH,CAKSqC,QAAD,IAAc;AAClB,eAAK1H,QAAL,CAAc;AAAEiJ,YAAAA,aAAa,EAAE;AAAjB,WAAd;AACD,SAPH,EAQGX,KARH,CAQS,UAASC,KAAT,EAAgB,CACrB,CATJ;AAUAH,QAAAA,UAAU,CACR,YAAW;AACT,eAAKpI,QAAL,CAAc;AAAEwH,YAAAA,UAAU,EAAEA,UAAU,GAAG;AAA3B,WAAd;AACD,SAFD,CAEEa,IAFF,CAEO,IAFP,CADQ,EAIR,IAJQ,CAAV;AAMD,OAjCM,MAiCA,IAAIb,UAAU,KAAK,CAAf,IAAoB,KAAK3H,KAAL,CAAW6F,IAAX,CAAgBjB,OAAhB,KAA4B,CAApD,EAAuD;AAC5D2C,QAAAA,mBAAmB,GAAG;AACpBhF,UAAAA,EAAE,EAAE,KAAKvC,KAAL,CAAW6F,IAAX,CAAgBoD,QAAhB,CAAyB,CAAzB,EAA4B1G,EADZ;AAEpBT,UAAAA,cAAc,EAAE,KAAKhB,KAAL,CAAWgB,cAFP;AAGpBoC,UAAAA,eAAe,EAAE,KAAKpD,KAAL,CAAWoD,eAHR;AAIpBW,UAAAA,gBAAgB,EAAE,KAAK7E,KAAL,CAAW6F,IAAX,CAAgBhB;AAJd,SAAtB;AAMAnG,QAAAA,KAAK,CACFkJ,KADH,CAEK,GAAEjJ,OAAO,CAACA,OAAQ,8CAA6C2G,YAAY,CAACC,KAAM,EAFvF,EAGIgC,mBAHJ,EAKG/B,IALH,CAKSqC,QAAD,IAAc,CAAE,CALxB,EAMGY,KANH,CAMS,UAASC,KAAT,EAAgB,CACrB,CAPJ;AAQAH,QAAAA,UAAU,CACR,YAAW;AACT,eAAKvI,KAAL,CAAWqJ,SAAX;AACD,SAFD,CAEEb,IAFF,CAEO,IAFP,CADQ,EAIR,IAJQ,CAAV;AAMD,OArBM,MAqBA,CACL;AACH,KA5hBkB;;AAAA,SA8hBnBc,UA9hBmB,GA8hBN,MAAM;AACjB,YAAM;AAAE3B,QAAAA;AAAF,UAAiB,KAAK7G,KAA5B;AACA,WAAKX,QAAL,CAAc;AAAEwH,QAAAA,UAAU,EAAEA,UAAU,GAAG;AAA3B,OAAd;AACD,KAjiBkB;;AAAA,SAmiBnB4B,WAniBmB,GAmiBL,MAAM;AAClB,WAAKpJ,QAAL,CAAc;AAAEwH,QAAAA,UAAU,EAAE;AAAd,OAAd;AACD,KAriBkB;;AAAA,SA6oBnB6B,kBA7oBmB,GA6oBGC,MAAD,IAAY;AAC/B,YAAMC,GAAG,GAAG9J,0BAA0B,CAAC6J,MAAD,CAAtC;AACA,UAAIhE,GAAG,GAAG,KAAV;;AACA,UAAIiE,GAAJ,EAAS;AACPjE,QAAAA,GAAG,GAAGiE,GAAG,CAACC,OAAJ,EAAN;AACD;;AACD,aAAOlE,GAAP;AACD,KAppBkB;;AAAA,SA24BnBmE,YA34BmB,GA24BHzD,CAAD,IAAO;AACpBA,MAAAA,CAAC,CAAC0D,cAAF;AAEA,UAAItC,mBAAmB,GAAG,EAA1B;;AACA,UAAI,KAAKvH,KAAL,CAAW6F,IAAX,CAAgBjB,OAAhB,KAA4B,CAAhC,EAAmC;AACjC2C,QAAAA,mBAAmB,GAAG;AACpBC,UAAAA,WAAW,EAAE,KAAKxH,KAAL,CAAW6F,IAAX,CAAgBiE,UAAhB,CAA2B,CAA3B,EAA8BvH,EADvB;AAEpB8B,UAAAA,mBAAmB,EAAE,KAAKvD,KAAL,CAAWuD,mBAFZ;AAGpBE,UAAAA,iBAAiB,EAAE,KAAKzD,KAAL,CAAWyD,iBAHV;AAIpBmD,UAAAA,cAAc,EAAE,KAAK5G,KAAL,CAAW4G,cAJP;AAKpBpF,UAAAA,gBAAgB,EAAE,KAAKxB,KAAL,CAAWwB;AALT,SAAtB;AAOA5D,QAAAA,KAAK,CACFkJ,KADH,CAEK,GAAEjJ,OAAO,CAACA,OAAQ,2CAA0C2G,YAAY,CAACC,KAAM,EAFpF,EAGIgC,mBAHJ,EAKG/B,IALH,CAKSqC,QAAD,IAAc;AAClB,cAAIA,QAAQ,CAAClE,MAAT,KAAoB,GAAxB,EAA6B;AAC3B,iBAAK3D,KAAL,CAAWT,eAAX;AACD;AACF,SATH,EAUGkJ,KAVH,CAUUC,KAAD,IAAW;AAChB,eAAK1I,KAAL,CAAWV,aAAX;AACD,SAZH;AAaD;;AAED,UAAI,KAAKU,KAAL,CAAW6F,IAAX,CAAgBjB,OAAhB,KAA4B,CAAhC,EAAmC;AACjC,YAAImF,eAAe,GAAGlK,CAAC,CAACkJ,UAAF,CACpB,KAAKjI,KAAL,CAAWoD,eADS,EAEpB,KAAKpD,KAAL,CAAWkJ,kBAFS,CAAtB;;AAIAzC,QAAAA,mBAAmB,GAAG;AACpBhF,UAAAA,EAAE,EAAE,KAAKvC,KAAL,CAAW6F,IAAX,CAAgBoD,QAAhB,CAAyB,CAAzB,EAA4B1G,EADZ;AAEpBT,UAAAA,cAAc,EAAE,KAAKhB,KAAL,CAAWgB,cAFP;AAGpBoC,UAAAA,eAAe,EAAE6F,eAHG;AAIpBlF,UAAAA,gBAAgB,EAAE,KAAK7E,KAAL,CAAW6F,IAAX,CAAgBhB;AAJd,SAAtB;AAMAnG,QAAAA,KAAK,CACFkJ,KADH,CAEK,GAAEjJ,OAAO,CAACA,OAAQ,8CAA6C2G,YAAY,CAACC,KAAM,EAFvF,EAGIgC,mBAHJ,EAKG/B,IALH,CAKSqC,QAAD,IAAc;AAClB,eAAK1H,QAAL,CAAc;AAAE+D,YAAAA,eAAe,EAAE,EAAnB;AAAuBpC,YAAAA,cAAc,EAAE;AAAvC,WAAd;AACD,SAPH,EAQG2G,KARH,CAQS,UAASC,KAAT,EAAgB,CACrB,CATJ;AAWAH,QAAAA,UAAU,CACR,YAAW;AACT,eAAKvI,KAAL,CAAWqJ,SAAX;AACD,SAFD,CAEEb,IAFF,CAEO,IAFP,CADQ,EAIR,IAJQ,CAAV;AAMD;;AACD,WAAKxI,KAAL,CAAWiK,MAAX;AACD,KAp8BkB;;AAGjB,SAAKnJ,KAAL,GAAa;AACX;AACAyB,MAAAA,EAAE,EAAE,EAFO;AAGXO,MAAAA,IAAI,EAAE,EAHK;AAIX6D,MAAAA,OAAO,EAAE,EAJE;AAKX1E,MAAAA,QAAQ,EAAE,EALC;AAMXC,MAAAA,WAAW,EAAE,EANF;AAOX0E,MAAAA,MAAM,EAAE,EAPG;AAQXnG,MAAAA,aAAa,EAAEd,MAAM,GAAGuK,IAAT,KAAkB,CAAlB,GAAsB,QAR1B;AASXhD,MAAAA,KAAK,EAAE,EATI;AAUX9G,MAAAA,KAAK,EAAE,CAVI;AAWX0G,MAAAA,GAAG,EAAE,CAXM;AAYXD,MAAAA,OAAO,EAAE,EAZE;AAaXI,MAAAA,QAAQ,EAAE,CAbC;AAcXtD,MAAAA,MAAM,EAAE,IAdG;AAeXgE,MAAAA,UAAU,EAAE,CAfD;AAgBXnB,MAAAA,SAAS,EAAE,EAhBA;AAiBXD,MAAAA,UAAU,EAAE,IAjBD;AAkBXe,MAAAA,aAAa,EAAE,KAlBJ;AAoBX;AACAzC,MAAAA,gBAAgB,EAAE,CArBP;AAsBXD,MAAAA,OAAO,EAAE,EAtBE;AAuBXH,MAAAA,KAAK,EAAE,CAvBI;AAwBX;AACAJ,MAAAA,mBAAmB,EAAE,EAzBV;AA0BXnB,MAAAA,sBAAsB,EAAE,IA1Bb;AA2BXqB,MAAAA,iBAAiB,EAAE,EA3BR;AA4BXmD,MAAAA,cAAc,EAAE,EA5BL;AA6BXyC,MAAAA,8BAA8B,EAAE,EA7BrB;AA8BXvG,MAAAA,8BAA8B,EAAE,EA9BrB;AA+BXP,MAAAA,sBAAsB,EAAE,EA/Bb;AAgCXL,MAAAA,QAAQ,EAAE,CAhCC;AAiCXwE,MAAAA,WAAW,EAAE,EAjCF;AAkCX4C,MAAAA,eAAe,EAAE,EAlCN;AAmCX;AACAvJ,MAAAA,SAAS,EAAE,KApCA;AAqCXiB,MAAAA,cAAc,EAAE,EArCL;AAsCXgE,MAAAA,aAAa,EAAE,EAtCJ;AAuCX5B,MAAAA,eAAe,EAAE,EAvCN;AAwCX8F,MAAAA,kBAAkB,EAAE,EAxCT;AA0CXlB,MAAAA,UAAU,EAAE,EA1CD;AA4CX7H,MAAAA,UAAU,EAAE,EA5CD;AA6CXC,MAAAA,aAAa,EAAE,EA7CJ;AA8CXC,MAAAA,YAAY,EAAE,EA9CH;AAgDXR,MAAAA,mBAAmB,EAAEhB,MAAM,GAAGuK,IAAT,KAAkB,EAAlB,GAAuB,QAhDjC;AAkDX9I,MAAAA,aAAa,EAAE,EAlDJ;AAmDXd,MAAAA,WAAW,EAAE,CAnDF;AAoDXe,MAAAA,YAAY,EAAE,IApDH;AAqDXC,MAAAA,SAAS,EAAE,CArDA;AAsDXC,MAAAA,cAAc,EAAE,CAtDL;AAuDXG,MAAAA,cAAc,EAAE,EAvDL;AAwDXC,MAAAA,WAAW,EAAE,EAxDF;AAyDXK,MAAAA,eAAe,EAAE,EAzDN;AA0DXJ,MAAAA,kBAAkB,EAAE,IA1DT;AA2DXC,MAAAA,mBAAmB,EAAE,KA3DV;AA4DXwI,MAAAA,eAAe,EAAE,EA5DN;AA6DX/H,MAAAA,gBAAgB,EAAE,EA7DP;AA8DXM,MAAAA,KAAK,EAAE,KA9DI;AA+DX8E,MAAAA,cAAc,EAAE,CACd;AACEnF,QAAAA,EAAE,EAAE,IADN;AAEEC,QAAAA,QAAQ,EAAE,CAFZ;AAGEC,QAAAA,UAAU,EAAE,CAHd;AAIEC,QAAAA,UAAU,EAAE,CAJd;AAKEC,QAAAA,eAAe,EAAE;AALnB,OADc,CA/DL;AAwEXqC,MAAAA,iBAAiB,EAAE,EAxER;AAyEXsF,MAAAA,UAAU,EAAE,EAzED;AA0EXC,MAAAA,iBAAiB,EAAE,EA1ER;AA2EXpF,MAAAA,SAAS,EAAE,CA3EA;AA4EXnB,MAAAA,SAAS,EAAE,EA5EA;AA6EXoF,MAAAA,aAAa,EAAE,KA7EJ;AA8EXd,MAAAA,kBAAkB,EAAE,KA9ET;AA+EXK,MAAAA,iBAAiB,EAAE;AA/ER,KAAb;AAiFA,SAAK6B,cAAL,GAAsB,KAAKA,cAAL,CAAoBhC,IAApB,CAAyB,IAAzB,CAAtB;AACA,SAAKrE,YAAL,GAAoB,KAAKA,YAAL,CAAkBqE,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKvI,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBuI,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKnI,uBAAL,GAA+B,KAAKA,uBAAL,CAA6BmI,IAA7B,CAAkC,IAAlC,CAA/B;AACA,SAAKhE,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBgE,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAK9D,iBAAL,GAAyB,KAAKA,iBAAL,CAAuB8D,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKzC,iBAAL,GAAyB,KAAKA,iBAAL,CAAuByC,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKvC,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBuC,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKiC,wBAAL,GAAgC,KAAKA,wBAAL,CAA8BjC,IAA9B,CAAmC,IAAnC,CAAhC;AACA,SAAKzE,mBAAL,GAA2B,KAAKA,mBAAL,CAAyByE,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAK1D,yBAAL,GAAiC,KAAKA,yBAAL,CAA+B0D,IAA/B,CAAoC,IAApC,CAAjC;AACA,SAAKlC,MAAL,GAAc,KAAKA,MAAL,CAAYkC,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKtC,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBsC,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKrG,aAAL,GAAqB,KAAKA,aAAL,CAAmBqG,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKoB,YAAL,GAAoB,KAAKA,YAAL,CAAkBpB,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAK5H,sBAAL,GAA8B,KAAKA,sBAAL,CAA4B4H,IAA5B,CAAiC,IAAjC,CAA9B;AACA,SAAKkC,YAAL,GAAoB,KAAKA,YAAL,CAAkBlC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKe,WAAL,GAAmB,KAAKA,WAAL,CAAiBf,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKmC,QAAL,GAAgB,KAAKA,QAAL,CAAcnC,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAK3F,wBAAL,GAAgC,KAAKA,wBAAL,CAA8B2F,IAA9B,CAAmC,IAAnC,CAAhC;AACA,SAAK3E,0BAAL,GAAkC,KAAKA,0BAAL,CAAgC2E,IAAhC,CAChC,IADgC,CAAlC;AAGA,SAAKoC,2BAAL,GAAmC,KAAKA,2BAAL,CAAiCpC,IAAjC,CACjC,IADiC,CAAnC;AAGA,SAAKlE,uBAAL,GAA+B,KAAKA,uBAAL,CAA6BkE,IAA7B,CAAkC,IAAlC,CAA/B;AACA,SAAKpE,yBAAL,GAAiC,KAAKA,yBAAL,CAA+BoE,IAA/B,CAAoC,IAApC,CAAjC;AACA,SAAKjI,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBiI,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAK9H,sBAAL,GAA8B,KAAKA,sBAAL,CAA4B8H,IAA5B,CAAiC,IAAjC,CAA9B;AACD;;AA8EDoC,EAAAA,2BAA2B,CAAC7H,KAAD,EAAQD,IAAR,EAAcV,KAAd,EAAqB;AAC9C,QAAIU,IAAI,KAAK,UAAb,EAAyB;AACvB,UAAI+H,OAAO,GAAG,KAAK/J,KAAL,CAAWwB,gBAAzB;AACAuI,MAAAA,OAAO,CAACzI,KAAD,CAAP,CAAeI,QAAf,GAA0BO,KAAK,CAACE,MAAN,CAAa/C,KAAvC;AACA2K,MAAAA,OAAO,CAACzI,KAAD,CAAP,CAAeK,UAAf,GAA4B,KAAK3B,KAAL,CAAWwB,gBAAX,CAA4BF,KAA5B,EAAmCK,UAA/D;AACAoI,MAAAA,OAAO,CAACzI,KAAD,CAAP,CAAeM,UAAf,GAA4B,KAAK5B,KAAL,CAAWwB,gBAAX,CAA4BF,KAA5B,EAAmCM,UAA/D;AAEA,WAAKvC,QAAL,CAAc;AACZmC,QAAAA,gBAAgB,EAAEuI;AADN,OAAd;AAGD;;AACD,QAAI/H,IAAI,KAAK,YAAb,EAA2B;AACzB,UAAI+H,OAAO,GAAG,KAAK/J,KAAL,CAAWwB,gBAAzB;AACAuI,MAAAA,OAAO,CAACzI,KAAD,CAAP,CAAeI,QAAf,GAA0B,KAAK1B,KAAL,CAAWwB,gBAAX,CAA4BF,KAA5B,EAAmCI,QAA7D;AACAqI,MAAAA,OAAO,CAACzI,KAAD,CAAP,CAAeK,UAAf,GAA4B,KAAK3B,KAAL,CAAWwB,gBAAX,CAA4BF,KAA5B,EAAmCK,UAA/D;AACAoI,MAAAA,OAAO,CAACzI,KAAD,CAAP,CAAeM,UAAf,GAA4BK,KAAK,CAACE,MAAN,CAAa/C,KAAzC;AAEA,WAAKC,QAAL,CAAc;AACZmC,QAAAA,gBAAgB,EAAEuI;AADN,OAAd;AAGD;;AAED,QAAIC,eAAe,GAAG,KAAKhK,KAAL,CAAWwB,gBAAX,CAA4BsD,GAA5B,CAAiCmF,UAAD,IACpDjI,IAAI,KAAK,UAAT,IAAuBC,KAAK,CAACE,MAAN,CAAa/C,KAAb,GAAqB,EAA5C,IAAkD6K,UAAU,CAACxI,EAAX,KAAkBH,KAApE,GACI,EACE,GAAG2I,UADL;AAEE,OAACjI,IAAD,GAAQC,KAAK,CAACE,MAAN,CAAa/C,KAFvB;AAGEyC,MAAAA,eAAe,EAAE,KAHnB;AAIEF,MAAAA,UAAU,EAAE;AAJd,KADJ,GAOIsI,UAAU,CAACxI,EAAX,KAAkBH,KAAlB,GACA,EAAE,GAAG2I,UAAL;AAAiB,OAACjI,IAAD,GAAQC,KAAK,CAACE,MAAN,CAAa/C,KAAtC;AAA6CyC,MAAAA,eAAe,EAAE;AAA9D,KADA,GAEAoI,UAVgB,CAAtB;AAYA,SAAK5K,QAAL,CAAc;AAAEmC,MAAAA,gBAAgB,EAAEwI;AAApB,KAAd;AACD;;AAEDL,EAAAA,wBAAwB,CAAC1H,KAAD,EAAQD,IAAR,EAAcP,EAAd,EAAkBH,KAAlB,EAAyB;AAC/C,QAAIU,IAAI,KAAK,UAAb,EAAyB;AACvB,UAAI+H,OAAO,GAAG,KAAK/J,KAAL,CAAW4G,cAAzB;AACAmD,MAAAA,OAAO,CAACzI,KAAD,CAAP,CAAeI,QAAf,GAA0BO,KAAK,CAACE,MAAN,CAAa/C,KAAvC;AACA2K,MAAAA,OAAO,CAACzI,KAAD,CAAP,CAAeK,UAAf,GAA4B,KAAK3B,KAAL,CAAW4G,cAAX,CAA0BtF,KAA1B,EAAiCK,UAA7D;AACAoI,MAAAA,OAAO,CAACzI,KAAD,CAAP,CAAeM,UAAf,GAA4B,KAAK5B,KAAL,CAAW4G,cAAX,CAA0BtF,KAA1B,EAAiCM,UAA7D;AACAmI,MAAAA,OAAO,CAACzI,KAAD,CAAP,CAAeG,EAAf,GAAoBA,EAApB;AACA,WAAKpC,QAAL,CAAc;AACZuH,QAAAA,cAAc,EAAEmD;AADJ,OAAd;AAGD;;AAED,QAAI/H,IAAI,KAAK,YAAb,EAA2B;AACzB,UAAI+H,OAAO,GAAG,KAAK/J,KAAL,CAAW4G,cAAzB;AACAmD,MAAAA,OAAO,CAACzI,KAAD,CAAP,CAAeI,QAAf,GAA0B,KAAK1B,KAAL,CAAW4G,cAAX,CAA0BtF,KAA1B,EAAiCI,QAA3D;AACAqI,MAAAA,OAAO,CAACzI,KAAD,CAAP,CAAeK,UAAf,GAA4B,KAAK3B,KAAL,CAAW4G,cAAX,CAA0BtF,KAA1B,EAAiCK,UAA7D;AACAoI,MAAAA,OAAO,CAACzI,KAAD,CAAP,CAAeM,UAAf,GAA4BK,KAAK,CAACE,MAAN,CAAa/C,KAAzC;AACA2K,MAAAA,OAAO,CAACzI,KAAD,CAAP,CAAeG,EAAf,GAAoBA,EAApB;AACA,WAAKpC,QAAL,CAAc;AACZuH,QAAAA,cAAc,EAAEmD;AADJ,OAAd;AAGD;;AAED,QAAI/H,IAAI,KAAK,UAAb,EAAyB;AACvB,YAAM+H,OAAO,GAAG,KAAK/J,KAAL,CAAW4G,cAAX,CAA0B9B,GAA1B,CAA+BoF,UAAD,IAAgB;AAC5D,YAAIA,UAAU,CAACzI,EAAX,KAAkBH,KAAtB,EAA6B;AAC3B4I,UAAAA,UAAU,CAACvI,UAAX,GAAwB,CAAxB;AACA,iBAAOuI,UAAP;AACD;;AACD,eAAOA,UAAP;AACD,OANe,CAAhB;AAOA,WAAK7K,QAAL,CAAc;AACZuH,QAAAA,cAAc,EAAEmD;AADJ,OAAd;AAGD;;AACD,QAAIC,eAAe,GAAG,KAAKhK,KAAL,CAAW4G,cAAX,CAA0B9B,GAA1B,CAA+BmF,UAAD,IAClDjI,IAAI,KAAK,UAAT,IAAuBC,KAAK,CAACE,MAAN,CAAa/C,KAAb,GAAqB,EAA5C,IAAkD6K,UAAU,CAACxI,EAAX,KAAkBH,KAApE,GACI,EACE,GAAG2I,UADL;AAEE,OAACjI,IAAD,GAAQC,KAAK,CAACE,MAAN,CAAa/C,KAFvB;AAGEyC,MAAAA,eAAe,EAAE,KAHnB;AAIEF,MAAAA,UAAU,EAAE;AAJd,KADJ,GAOIsI,UAAU,CAACxI,EAAX,KAAkBH,KAAlB,GACA,EAAE,GAAG2I,UAAL;AAAiB,OAACjI,IAAD,GAAQC,KAAK,CAACE,MAAN,CAAa/C,KAAtC;AAA6CyC,MAAAA,eAAe,EAAE;AAA9D,KADA,GAEAoI,UAVgB,CAAtB;AAYA,SAAK5K,QAAL,CAAc;AAAEuH,MAAAA,cAAc,EAAEoD;AAAlB,KAAd;AACD;;AAkRDN,EAAAA,cAAc,CACZS,SADY,EAEZC,QAFY,EAGZlG,iBAHY,EAIZmG,MAJY,EAKZhH,YALY,EAMZiH,UANY,EAOZC,OAPY,EAQZC,MARY,EASZ;AACA,YAAQ,KAAKxK,KAAL,CAAW6G,UAAnB;AACE,WAAK,CAAL;AACE,4BACE,oBAAC,iBAAD;AACE,UAAA,MAAM,EAAE,KAAK7G,KADf;AAEE,UAAA,YAAY,EAAE,KAAKqD,YAFrB;AAGE,UAAA,MAAM,EAAE,KAAKmC,MAHf;AAIE,UAAA,IAAI,EAAE,KAAKtG,KAAL,CAAW6F,IAJnB;AAKE,UAAA,gBAAgB,EAAE,KAAKtF,gBALzB;AAME,UAAA,iBAAiB,EAAE,KAAKN,iBAN1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;;AAUF,WAAK,CAAL;AACE,4BACE,oBAAC,eAAD;AACE,UAAA,MAAM,EAAE,KAAKa,KADf;AAEE,UAAA,gBAAgB,EAAE,KAAK0D,gBAFzB;AAGE,UAAA,yBAAyB,EAAE,KAAKM,yBAHlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;;AAQF,WAAK,CAAL;AACE,4BACE,oBAAC,uBAAD;AACE,UAAA,SAAS,EAAE,KAAK9E,KAAL,CAAWwD,OADxB;AAEE,UAAA,WAAW,EAAE,KAAKxD,KAAL,CAAWuL,QAF1B;AAGE,UAAA,aAAa,EAAE,KAAKvL,KAAL,CAAWoD,aAH5B;AAIE,UAAA,WAAW,EAAE,KAAKpD,KAAL,CAAWwL,WAJ1B;AAKE,UAAA,MAAM,EAAE,KAAK1K,KALf;AAME,UAAA,YAAY,EAAE,KAAKqD,YANrB;AAOE,UAAA,iBAAiB,EAAE,KAAKO,iBAP1B;AAQE,UAAA,mBAAmB,EAAE,KAAKX,mBAR5B;AASE,UAAA,iBAAiB,EAAE,KAAKW,iBAT1B;AAUE,UAAA,wBAAwB,EAAE,KAAK+F,wBAVjC;AAWE,UAAA,aAAa,EAAE,KAAKtI,aAXtB;AAYE,UAAA,wBAAwB,EAAE,KAAKU,wBAZjC;AAaE,UAAA,0BAA0B,EAAE,KAAKgB,0BAbnC;AAcE,UAAA,2BAA2B,EAAE,KAAK+G,2BAdpC;AAeE,UAAA,yBAAyB,EAAE,KAAKxG,yBAflC;AAgBE,UAAA,uBAAuB,EAAE,KAAKE,uBAhBhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;;AAoBF,WAAK,CAAL;AACE,4BACE,oBAAC,qBAAD;AACE,UAAA,MAAM,EAAE,KAAKxD,KADf;AAEE,UAAA,YAAY,EAAE,KAAKqD,YAFrB;AAGE,UAAA,gBAAgB,EAAE,KAAK+B,gBAHzB;AAIE,UAAA,YAAY,EAAE,KAAKnF,YAJrB;AAKE,UAAA,sBAAsB,EAAE,KAAKH,sBAL/B;AAME,UAAA,wBAAwB,EAAE,KAAKqD,wBANjC;AAOE,UAAA,eAAe,EAAE,KAAKwH,eAPxB;AAQE,UAAA,sBAAsB,EAAE,KAAK/K,sBAR/B;AASE,UAAA,uBAAuB,EAAE,KAAKL,uBAThC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;;AAaF;AACE,eAAO,kBAAP;AAzDJ;AA2DD;;AACDsK,EAAAA,QAAQ,GAAG;AACT,YAAQ,KAAK3K,KAAL,CAAW6F,IAAX,CAAgBjB,OAAxB;AACE,WAAK,CAAL;AACA,WAAK,CAAL;AACA,WAAK,CAAL;AACA,WAAK,CAAL;AACA,WAAK,CAAL;AACA,WAAK,CAAL;AACE,eAAO,cACL,oBAAC,YAAD;AAAc,UAAA,EAAE,EAAC,6BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADK,eAEL,oBAAC,YAAD;AAAc,UAAA,EAAE,EAAC,sBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFK,CAAP;;AAKF,WAAK,CAAL;AACE,eAAO,cACL,oBAAC,YAAD;AAAc,UAAA,EAAE,EAAC,6BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADK,eAEL,oBAAC,YAAD;AAAc,UAAA,EAAE,EAAC,sBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFK,eAGL,oBAAC,YAAD;AAAc,UAAA,EAAE,EAAC,0BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHK,CAAP;;AAMF,WAAK,CAAL;AACE,eAAO,cACL,oBAAC,YAAD;AAAc,UAAA,EAAE,EAAC,6BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADK,eAEL,oBAAC,YAAD;AAAc,UAAA,EAAE,EAAC,sBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFK,eAGL,oBAAC,YAAD;AAAc,UAAA,EAAE,EAAC,0BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHK,eAIL,oBAAC,YAAD;AAAc,UAAA,EAAE,EAAC,qCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAJK,CAAP;;AAOF;AACE,eAAO,kBAAP;AA5BJ;AA8BD;;AAUD8G,EAAAA,gBAAgB,CAACjH,KAAD,EAAQ;AACtB;AACA,QAAI,KAAK3D,KAAL,CAAW6G,UAAX,KAA0B,CAA9B,EAAiC;AAC/B,UAAI,KAAK7G,KAAL,CAAWuJ,eAAX,KAA+B,IAAnC,EAAyC;AACvC,YACE,KAAKvJ,KAAL,CAAWgC,IAAX,CAAgBkG,MAAhB,KAA2B,CAA3B,IACA,KAAKlI,KAAL,CAAW6F,OAAX,CAAmBqC,MAAnB,KAA8B,CAD9B,IAEA,KAAK2C,OAAL,CAAa,KAAK7K,KAAL,CAAWoG,KAAxB,MAAmC,IAFnC,IAGA,KAAKpG,KAAL,CAAWoG,KAAX,CAAiB8B,MAAjB,KAA4B,CAH5B,IAIA,KAAKlI,KAAL,CAAWmB,QAAX,CAAoB+G,MAApB,KAA+B,CAJ/B,IAKA,KAAKlI,KAAL,CAAWoB,WAAX,CAAuB8G,MAAvB,KAAkC,CALlC,IAMA,KAAKQ,kBAAL,CAAwB,KAAK1I,KAAL,CAAWV,KAAnC,MAA8C,IAPhD,EASE,OAAO,IAAP,CATF,KAUK,OAAO,KAAP;AACN,OAZD,MAYO;AACL,YACE,KAAKU,KAAL,CAAWgC,IAAX,CAAgBkG,MAAhB,KAA2B,CAA3B,IACA,KAAKlI,KAAL,CAAW6F,OAAX,CAAmBqC,MAAnB,KAA8B,CAD9B,IAEA,KAAK2C,OAAL,CAAa,KAAK7K,KAAL,CAAWoG,KAAxB,MAAmC,IAFnC,IAGA,KAAKpG,KAAL,CAAWoG,KAAX,CAAiB8B,MAAjB,KAA4B,CAH5B,IAID,KAAKQ,kBAAL,CAAwB,KAAK1I,KAAL,CAAWV,KAAnC,MAA8C,IAL/C,EAOE,OAAO,IAAP,CAPF,KAQK,OAAO,KAAP;AACN;AACF;;AACD,QAAI,KAAKU,KAAL,CAAW6G,UAAX,KAA0B,CAA1B,IAA+B,KAAK3H,KAAL,CAAW2E,WAAX,CAAuBC,OAAvB,KAAmC,CAAtE,EAAyE;AACvE,UAAI,KAAK9D,KAAL,CAAW8D,OAAX,KAAuB,CAAvB,IAA4B,KAAK9D,KAAL,CAAW+D,gBAAX,KAAgC,CAAhE,EACE,OAAO,IAAP,CADF,KAEK,OAAO,KAAP;AACN;;AAED,QAAI,KAAK/D,KAAL,CAAW6G,UAAX,KAA0B,CAA1B,IAA+B,KAAK7G,KAAL,CAAW8D,OAAX,KAAuB,CAA1D,EAA6D;AAC3D,UAAI,KAAK9D,KAAL,CAAW0B,QAAX,KAAwBoJ,SAAxB,IAAqC,KAAK9K,KAAL,CAAWkC,QAAX,KAAwB,CAAjE,EACE,OAAO,KAAP,CADF,KAEK,OAAO,IAAP;AACN;;AACD,QAAI,KAAKlC,KAAL,CAAW6G,UAAX,KAA0B,CAA1B,IAA+B,KAAK7G,KAAL,CAAW8D,OAAX,KAAuB,CAA1D,EAA6D;AAC3D,UACE,KAAK9D,KAAL,CAAW4G,cAAX,CAA0BsB,MAA1B,KAAqC,CAArC,IACA,KAAKlI,KAAL,CAAW4G,cAAX,CAA0B,CAA1B,EAA6BhF,UAA7B,KAA4C,CAF9C,EAGE;AACA,eAAO,KAAP;AACD,OALD,MAKO,OAAO,IAAP;AACR,KAPD,MAOO,IAAI,KAAK5B,KAAL,CAAW6G,UAAX,KAA0B,CAA1B,IAA+B,KAAK7G,KAAL,CAAW8D,OAAX,KAAuB,CAA1D,EAA6D;AAClE,UACE,KAAK9D,KAAL,CAAWgB,cAAX,CAA0BkH,MAA1B,KAAqC,CAArC,IACA,KAAKlI,KAAL,CAAWoD,eAAX,CAA2B8E,MAA3B,KAAsC,CAFxC,EAIE,OAAO,KAAP,CAJF,KAKK,OAAO,IAAP;AACN;;AAED,QACE,KAAKlI,KAAL,CAAW6G,UAAX,KAA0B,CAA1B,KACC,KAAK3H,KAAL,CAAW2E,WAAX,CAAuBC,OAAvB,KAAmC,CAAnC,IACC,KAAK5E,KAAL,CAAW2E,WAAX,CAAuBC,OAAvB,KAAmC,CAFrC,CADF,EAIE;AACA,UAAI,KAAK9D,KAAL,CAAW8D,OAAX,KAAuB,CAA3B,EAA8B,OAAO,KAAP,CAA9B,KACK,OAAO,IAAP;AACN;AACF;;AAEDiH,EAAAA,iBAAiB,GAAG;AAClB,QAAI,KAAK7L,KAAL,CAAW6F,IAAf,EAAqB;AACnB,WAAK1F,QAAL,CAAc;AACZsE,QAAAA,KAAK,EAAE,KAAKzE,KAAL,CAAW2E,WAAX,CAAuBC,OADlB;AAEZrC,QAAAA,EAAE,EAAE,KAAKvC,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqBtD,EAFb;AAGZO,QAAAA,IAAI,EAAE,KAAK9C,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqB/C,IAHf;AAIZ6D,QAAAA,OAAO,EAAE,KAAK3G,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqBc,OAJlB;AAKZ1E,QAAAA,QAAQ,EAAE,KAAKjC,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqBsB,OALnB;AAMZjF,QAAAA,WAAW,EAAE,KAAKlC,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqBuB,UANtB;AAOZR,QAAAA,MAAM,EAAE,KAAK5G,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqBe,MAPjB;AAQZnG,QAAAA,aAAa,EAAEd,MAAM,CAAC,KAAKK,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqBpF,aAAtB,CAAN,CAA2CqL,WAA3C,EARH;AASZ5E,QAAAA,KAAK,EAAE,KAAKlH,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqBqB,KAThB;AAUZ9G,QAAAA,KAAK,EAAE,MAAK,KAAKJ,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqBzF,KAVrB;AAWZ0G,QAAAA,GAAG,EAAE,KAAK9G,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqBiB,GAXd;AAYZD,QAAAA,OAAO,EAAE,KAAK7G,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqBgB,OAZlB;AAaZI,QAAAA,QAAQ,EAAE,KAAKjH,KAAL,CAAW6F,IAAX,CAAgBA,IAAhB,CAAqBoB,QAbnB;AAcZrC,QAAAA,OAAO,EAAE,KAAK5E,KAAL,CAAW6F,IAAX,CAAgBjB,OAdb;AAeZC,QAAAA,gBAAgB,EAAE,KAAK7E,KAAL,CAAW6F,IAAX,CAAgBhB;AAftB,OAAd;;AAiBA,UAAI,KAAK7E,KAAL,CAAW6F,IAAX,CAAgBjB,OAAhB,KAA4B,CAAhC,EAAmC;AACjClG,QAAAA,KAAK,CACF2G,GADH,CAEK,GAAE1G,OAAO,CAACA,OAAQ,4BAA2B2G,YAAY,CAACC,KAAM,kDAAjE,GACE,KAAKvF,KAAL,CAAW6F,IAAX,CAAgBiE,UAAhB,CAA2B,CAA3B,EAA8BvH,EAHpC,EAKGiD,IALH,CAKSC,GAAD,IAAS;AACb,eAAKtF,QAAL,CAAc;AACZiK,YAAAA,eAAe,EAAE3E,GAAG,CAACE,IAAJ,CAAS,CAAT,EAAYoG,YADjB;AAEZrE,YAAAA,cAAc,EAAEjC,GAAG,CAACE,IAAJ,CAAS,CAAT,EAAYoG,YAFhB;AAGZvE,YAAAA,WAAW,EAAE,KAAKxH,KAAL,CAAW6F,IAAX,CAAgBiE,UAAhB,CAA2B,CAA3B,EAA8BvH,EAH/B;AAIZ8B,YAAAA,mBAAmB,EAAE,KAAKrE,KAAL,CAAW6F,IAAX,CAAgBiE,UAAhB,CAA2B,CAA3B,EAClBzF,mBALS;AAMZE,YAAAA,iBAAiB,EAAE,KAAKvE,KAAL,CAAW6F,IAAX,CAAgBiE,UAAhB,CAA2B,CAA3B,EAChBvF;AAPS,WAAd;AASD,SAfH;AAgBD;;AAED,UAAI,KAAKvE,KAAL,CAAW6F,IAAX,CAAgBjB,OAAhB,KAA4B,CAAhC,EAAmC;AACjC,aAAKzE,QAAL,CAAc;AACZqC,UAAAA,QAAQ,EAAE,KAAKxC,KAAL,CAAW6F,IAAX,CAAgBoD,QAAhB,CAAyB,CAAzB,EAA4BzG,QAD1B;AAEZQ,UAAAA,QAAQ,EAAE,KAAKhD,KAAL,CAAW6F,IAAX,CAAgBoD,QAAhB,CAAyB,CAAzB,EAA4BjG;AAF1B,SAAd;;AAKA,YAAI,KAAKhD,KAAL,CAAW6F,IAAX,CAAgBoD,QAAhB,CAAyB,CAAzB,EAA4BzG,QAA5B,GAAuC,EAA3C,EAA+C;AAC7C,eAAKrC,QAAL,CAAc;AAAE+C,YAAAA,sBAAsB,EAAE;AAA1B,WAAd;AACA,cAAIC,qBAAqB,GAAGzD,mBAAmB,CAC7C,KAAKM,KAAL,CAAWoD,aADkC,EAE7C,KAAKpD,KAAL,CAAW6F,IAAX,CAAgBoD,QAAhB,CAAyB,CAAzB,EAA4BzG,QAFiB,CAA/C;AAKA,eAAKrC,QAAL,CAAc;AAAEkD,YAAAA,sBAAsB,EAAEF;AAA1B,WAAd;AACA,gBAAMG,OAAO,GAAG,KAAKtD,KAAL,CAAW6F,IAAX,CAAgBoD,QAAhB,CAAyB,CAAzB,EAA4BzG,QAA5C;AACA,cAAIe,qBAAqB,GAAG,KAAKvD,KAAL,CAAWwD,OAAX,CAAmBC,MAAnB,CACzBC,MAAD,IAAYA,MAAM,CAAClB,QAAP,KAAoBc,OAApB,IAA+BI,MAAM,CAACC,MADxB,CAA5B;AAGA,eAAKxD,QAAL,CAAc;AACZyD,YAAAA,8BAA8B,EAAEL;AADpB,WAAd;AAGD,SAfD,MAeO;AACL,eAAKpD,QAAL,CAAc;AACZqC,YAAAA,QAAQ,EAAE,KAAKxC,KAAL,CAAW6F,IAAX,CAAgBoD,QAAhB,CAAyB,CAAzB,EAA4BzG,QAD1B;AAEZU,YAAAA,sBAAsB,EAAE,IAFZ;AAGZT,YAAAA,UAAU,EAAE;AAHA,WAAd;AAKA,gBAAMa,OAAO,GAAG,KAAKtD,KAAL,CAAW6F,IAAX,CAAgBoD,QAAhB,CAAyB,CAAzB,EAA4BzG,QAA5C;AACA,cAAIe,qBAAqB,GAAG,KAAKvD,KAAL,CAAWwD,OAAX,CAAmBC,MAAnB,CACzBC,MAAD,IAAYA,MAAM,CAAClB,QAAP,KAAoBc,OAApB,IAA+BI,MAAM,CAACC,MADxB,CAA5B;AAGA,eAAKxD,QAAL,CAAc;AACZyD,YAAAA,8BAA8B,EAAEL;AADpB,WAAd;AAGD;;AAED7E,QAAAA,KAAK,CACF2G,GADH,CAEK,GAAE1G,OAAO,CAACA,OAAQ,mCAAkC2G,YAAY,CAACC,KAAM,6BAAxE,GACE,KAAKvF,KAAL,CAAW6F,IAAX,CAAgBoD,QAAhB,CAAyB,CAAzB,EAA4B1G,EAHlC,EAKGiD,IALH,CAKSqC,QAAD,IAAc;AAClB,cAAImE,MAAM,GAAGnE,QAAQ,CAAClC,IAAT,CAAcC,GAAd,CAAmBqG,CAAD,IAAOA,CAAC,CAACC,UAA3B,CAAb;AACA,eAAK/L,QAAL,CAAc;AAAE6D,YAAAA,SAAS,EAAEgI,MAAb;AAAqBlD,YAAAA,UAAU,EAAEkD;AAAjC,WAAd;AAEAtN,UAAAA,KAAK,CACF2G,GADH,CAEK,GAAE1G,OAAO,CAACA,OAAQ,kCAAiC2G,YAAY,CAACC,KAAM,6BAAvE,GACE,KAAKvF,KAAL,CAAW6F,IAAX,CAAgBoD,QAAhB,CAAyB,CAAzB,EAA4B1G,EAHlC,EAKGiD,IALH,CAKSqC,QAAD,IAAc;AAClB,gBAAIsE,OAAO,GAAGtE,QAAQ,CAAClC,IAAT,CAAcC,GAAd,CAAmBqG,CAAD,IAAOA,CAAC,CAACG,SAA3B,CAAd;AACA,iBAAKjM,QAAL,CAAc;AACZ+D,cAAAA,eAAe,EAAEiI,OADL;AAEZnC,cAAAA,kBAAkB,EAAEmC;AAFR,aAAd;AAID,WAXH;AAYD,SArBH;AAsBD;AACF;;AAED,SAAKnM,KAAL,CAAWf,WAAX;AACA,SAAKe,KAAL,CAAWd,SAAX;;AACA,QACE,KAAKc,KAAL,CAAW2E,WAAX,CAAuBC,OAAvB,KAAmC,CAAnC,IACA,KAAK5E,KAAL,CAAW2E,WAAX,CAAuBC,OAAvB,KAAmC,CAFrC,EAGE;AACAlG,MAAAA,KAAK,CACF2G,GADH,CAEK,GAAE1G,OAAO,CAACA,OAAQ,0BAAyB2G,YAAY,CAACC,KAAM,gEAA/D,GACE,KAAKvF,KAAL,CAAW2E,WAAX,CAAuBE,gBADzB,GAEG,kCAFH,GAGE,CALN,EAOGW,IAPH,CAOSC,GAAD,IAAS;AACb,cAAMC,uBAAuB,GAAGD,GAAG,CAACE,IAAJ,CAASC,GAAT,CAC7BV,OAAD,IAAaA,OAAO,CAACW,IADS,CAAhC;AAGA,aAAK1F,QAAL,CAAc;AACZ2F,UAAAA,aAAa,EAAEJ;AADH,SAAd;AAGD,OAdH;AAgBA,WAAK1F,KAAL,CAAWb,2BAAX,CACE,KAAKa,KAAL,CAAW2E,WAAX,CAAuBE,gBADzB;AAGA,WAAK7E,KAAL,CAAWZ,4BAAX,CACE,KAAKY,KAAL,CAAW2E,WAAX,CAAuBE,gBADzB;AAIAnG,MAAAA,KAAK,CACF2G,GADH,CAEK,GAAE1G,OAAO,CAACA,OAAQ,kBAAnB,GACE,KAAKqB,KAAL,CAAW2E,WAAX,CAAuBE,gBADzB,GAEG,iBAAgBS,YAAY,CAACC,KAAM,EAJ1C,EAMGC,IANH,CAMSC,GAAD,IAAS;AACb,aAAKtF,QAAL,CAAc;AACZgF,UAAAA,SAAS,EAAEM,GAAG,CAACE,IAAJ,CAASP;AADR,SAAd;AAGA1G,QAAAA,KAAK,CACF2G,GADH,CAEK,GAAE1G,OAAO,CAACA,OAAQ,aAAnB,GACE8G,GAAG,CAACE,IAAJ,CAAS0G,YADX,GAEG,iBAAgB/G,YAAY,CAACC,KAAM,EAJ1C,EAMGC,IANH,CAMSC,GAAD,IAAS;AACb,eAAKtF,QAAL,CAAc;AAAEkK,YAAAA,eAAe,EAAE5E,GAAG,CAACE,IAAJ,CAAS2G;AAA5B,WAAd;AACD,SARH;AASD,OAnBH;AAqBA5N,MAAAA,KAAK,CACF2G,GADH,CACQ,GAAE1G,OAAO,CAACA,OAAQ,uBAAsB2G,YAAY,CAACC,KAAM,EADnE,EAEGC,IAFH,CAESC,GAAD,IAAS;AACb,YAAIE,IAAI,GAAGF,GAAG,CAACE,IAAf;AACA,cAAMuF,QAAQ,GAAGvF,IAAI,CAAClC,MAAL,CAAayB,OAAD,IAAaA,OAAO,CAAC3C,EAAR,KAAe,CAAxC,CAAjB;AACA,aAAKpC,QAAL,CAAc;AAAE+K,UAAAA;AAAF,SAAd;AACD,OANH;AAOD,KAvDD,MAuDO;AACLxM,MAAAA,KAAK,CACF2G,GADH,CACQ,GAAE1G,OAAO,CAACA,OAAQ,uBAAsB2G,YAAY,CAACC,KAAM,EADnE,EAEGC,IAFH,CAESC,GAAD,IAAS;AACb,cAAMyF,QAAQ,GAAGzF,GAAG,CAACE,IAArB;AACA,aAAKxF,QAAL,CAAc;AAAE+K,UAAAA;AAAF,SAAd;AACD,OALH;AAMD;;AAEDxM,IAAAA,KAAK,CACF2G,GADH,CAEK,GAAE1G,OAAO,CAACA,OAAQ,gCAA+B2G,YAAY,CAACC,KAAM,EAFzE,EAIGC,IAJH,CAISC,GAAD,IAAS;AACb,YAAMT,iBAAiB,GAAGS,GAAG,CAACE,IAAJ,CAASlC,MAAT,CAAiByB,OAAD,IAAaA,OAAO,CAACvB,MAArC,CAA1B;AACA,WAAKxD,QAAL,CAAc;AAAE6E,QAAAA;AAAF,OAAd;AACD,KAPH;AAQAtG,IAAAA,KAAK,CACF2G,GADH,CACQ,GAAE1G,OAAO,CAACA,OAAQ,0BAAyB2G,YAAY,CAACC,KAAM,EADtE,EAEGC,IAFH,CAESC,GAAD,IAAS;AACb,YAAM8G,WAAW,GAAG9G,GAAG,CAACE,IAAxB;AACA,WAAKxF,QAAL,CAAc;AAAEoM,QAAAA;AAAF,OAAd;AACD,KALH;AAMD;;AA6DD7B,EAAAA,YAAY,GAAG;AACb,SAAKvK,QAAL,CAAc;AACZqM,MAAAA,cAAc,EAAE,KADJ;AAEZ1J,MAAAA,IAAI,EAAE,EAFM;AAGZ6D,MAAAA,OAAO,EAAE,EAHG;AAIZC,MAAAA,MAAM,EAAE,EAJI;AAKZnG,MAAAA,aAAa,EAAE,EALH;AAMZoG,MAAAA,OAAO,EAAE,EANG;AAOZzG,MAAAA,KAAK,EAAE,EAPK;AAQZ6G,MAAAA,QAAQ,EAAE,EARE;AASZtD,MAAAA,MAAM,EAAE,IATI;AAUZmD,MAAAA,GAAG,EAAE,EAVO;AAWZC,MAAAA,KAAK,EAAE,EAXK;AAYZ0F,MAAAA,QAAQ,EAAE,EAZE;AAaZzF,MAAAA,QAAQ,EAAE,EAbE;AAcZE,MAAAA,KAAK,EAAE,EAdK;AAeZI,MAAAA,aAAa,EAAE,KAfH;AAgBZrG,MAAAA,UAAU,EAAE,EAhBA;AAiBZC,MAAAA,aAAa,EAAE,EAjBH;AAkBZC,MAAAA,YAAY,EAAE,EAlBF;AAmBZR,MAAAA,mBAAmB,EAAE,EAnBT;AAoBZS,MAAAA,aAAa,EAAE,EApBH;AAqBZd,MAAAA,WAAW,EAAE,EArBD;AAsBZe,MAAAA,YAAY,EAAE,IAtBF;AAuBZC,MAAAA,SAAS,EAAE,EAvBC;AAwBZC,MAAAA,cAAc,EAAE,EAxBJ;AAyBZC,MAAAA,WAAW,EAAE,EAzBD;AA0BZC,MAAAA,cAAc,EAAE,QA1BJ;AA2BZC,MAAAA,cAAc,EAAE,EA3BJ;AA4BZC,MAAAA,WAAW,EAAE,EA5BD;AA6BZE,MAAAA,mBAAmB,EAAE,KA7BT;AA8BZwC,MAAAA,mBAAmB,EAAE,EA9BT;AA+BZE,MAAAA,iBAAiB,EAAE,EA/BP;AAgCZM,MAAAA,gBAAgB,EAAE,CAhCN;AAiCZD,MAAAA,OAAO,EAAE,CAjCG;AAkCZlC,MAAAA,UAAU,EAAE,EAlCA;AAmCZM,MAAAA,QAAQ,EAAE,CAnCE;AAoCZgB,MAAAA,SAAS,EAAE,EApCC;AAqCZuC,MAAAA,UAAU,EAAE,IArCA;AAsCZ3E,MAAAA,kBAAkB,EAAE,IAtCR;AAuCZK,MAAAA,QAAQ,EAAE,EAvCE;AAwCZC,MAAAA,WAAW,EAAE,EAxCD;AAyCZgC,MAAAA,eAAe,EAAE,EAzCL;AA0CZpC,MAAAA,cAAc,EAAE;AA1CJ,KAAd;AA4CA,SAAK9B,KAAL,CAAW0M,KAAX;AACD;;AAEDf,EAAAA,OAAO,CAACzL,KAAD,EAAQ;AACb,QAAIA,KAAK,CAAC8I,MAAN,GAAe,CAAnB,EACE,OAAO,sJAAsJ2D,IAAtJ,CACLzM,KADK,CAAP,CADF,KAIK,OAAO,IAAP;AACN;;AAED0M,EAAAA,MAAM,GAAG;AACP,UAAMnI,KAAK,GAAG,KAAKkG,QAAL,EAAd;AACA,UAAM;AAAEhD,MAAAA,UAAF;AAAcuD,MAAAA;AAAd,QAA2B,KAAKpK,KAAtC;AACA,wBACE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD;AAAO,MAAA,MAAM,EAAE,KAAKd,KAAL,CAAW6M,IAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,WAAD;AACE,MAAA,MAAM,EAAE,KAAK7M,KAAL,CAAWiK,MADrB;AAEE,MAAA,SAAS,EAAC,wCAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAIG,oBAAC,YAAD;AAAc,MAAA,EAAE,EAAC,qBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJH,CADF,eAOE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,SAAS,EAAC,WAAhB;AAA4B,MAAA,QAAQ,EAAE,KAAKL,YAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,OAAD;AACE,MAAA,UAAU,EAAEjC,UADd;AAEE,MAAA,gBAAgB,MAFlB;AAGE,MAAA,SAAS,EAAC,2BAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKGlD,KAAK,CAACmB,GAAN,CAAU,CAACkH,KAAD,EAAQ1K,KAAR,KAAkB;AAC3B,0BACE,oBAAC,IAAD;AACE,QAAA,GAAG,EAAE0K,KADP;AAEE,QAAA,SAAS,EAAG,sBACV1K,KAAK,KAAKuF,UAAV,GAAuB,QAAvB,GAAkC,EACnC,EAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAME,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAC,cAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGmF,KADH,CANF,CADF;AAYD,KAbA,CALH,CADF,CADF,EAuBG,KAAKhM,KAAL,CAAW6G,UAAX,KAA0BlD,KAAK,CAACuE,MAAhC,gBACC;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,UAAD;AAAY,MAAA,SAAS,EAAC,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDADF,eAIE,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKO,WAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAJF,CADD,gBAQC;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKiB,cAAL,CAAoB7C,UAApB,EAAgCuD,QAAhC,CADH,eAEE,oBAAC,MAAD;AACE,MAAA,QAAQ,EAAEvD,UAAU,KAAK,CAD3B;AAEE,MAAA,OAAO,EAAE,KAAK2B,UAFhB;AAGE,MAAA,SAAS,EAAC,MAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKG,oBAAC,YAAD;AAAc,MAAA,EAAE,EAAC,uBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALH,CAFF,EAUG3B,UAAU,KAAKlD,KAAK,CAACuE,MAAN,GAAe,CAA9B,gBACC,oBAAC,MAAD;AACE,MAAA,OAAO,EAAC,WADV;AAEE,MAAA,KAAK,EAAC,SAFR;AAGE,MAAA,IAAI,EAAC,QAHP,CAIC;AAJD;AAKE,MAAA,SAAS,EAAC,QALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAOG,oBAAC,YAAD;AAAc,MAAA,EAAE,EAAC,yBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPH,CADD,gBAWC,oBAAC,MAAD;AACE,MAAA,OAAO,EAAC,WADV;AAEE,MAAA,KAAK,EAAC,SAFR;AAGE,MAAA,OAAO,EAAE,KAAKvC,UAHhB,CAIE;AAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMG,GANH,eAOG,oBAAC,YAAD;AAAc,MAAA,EAAE,EAAC,uBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPH,CArBJ,CA/BJ,CADF,CADF,CAPF,CADF,CADF;AAiFD;;AAnlC8B;;AAslCjC,SAASsG,eAAT,CAAyBjM,KAAzB,EAAgC;AAC9B,SAAO;AACLkM,IAAAA,cAAc,EAAElM,KAAK,CAACmM,aAAN,CAAoBC,oBAD/B;AAEL3B,IAAAA,QAAQ,EAAEzK,KAAK,CAACqI,OAAN,CAAcgE,cAFnB;AAGLxI,IAAAA,WAAW,EAAE7D,KAAK,CAACsM,IAAN,CAAWzI,WAHnB;AAIL0I,IAAAA,KAAK,EAAEvM,KAAK,CAACwM,UAAN,CAAiBC,gBAJnB;AAKL/B,IAAAA,WAAW,EAAE1K,KAAK,CAAC0M,WAAN,CAAkBC,YAL1B;AAMLrK,IAAAA,aAAa,EAAEtC,KAAK,CAACsC,aAAN,CAAoBsK,cAN9B;AAOLlK,IAAAA,OAAO,EAAE1C,KAAK,CAAC0C;AAPV,GAAP;AASD;;AAED,eAAe5E,OAAO,CACpBmO,eADoB,EAEpB;AACE1N,EAAAA,QADF;AAEEL,EAAAA,WAFF;AAGEF,EAAAA,WAHF;AAIED,EAAAA,gBAJF;AAKEE,EAAAA,cALF;AAMEG,EAAAA,SANF;AAOED,EAAAA,WAPF;AAQEE,EAAAA,2BARF;AASEC,EAAAA,4BATF;AAUEE,EAAAA,aAVF;AAWEC,EAAAA,eAXF;AAYEC,EAAAA,qBAZF;AAaEC,EAAAA;AAbF,CAFoB,CAAP,CAiBbK,QAjBa,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { Modal, ModalBody, ModalHeader } from \"reactstrap\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport Button from \"@material-ui/core/Button\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CommonInformation from \"./UserInformation/CommonInformation\";\nimport RoleInformation from \"./UserInformation/RoleInformation\";\nimport EditSpecificInformation from \"./UserInformation/EditSpecificInformation\";\nimport EditparentInformation from \"./UserInformation/EditparentInformation\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../../../config/config\";\nimport { connect } from \"react-redux\";\nimport { getEstablishment } from \"../../../../../actions/establishmentAction\";\nimport { getServices } from \"../../../../../actions/ServiceAction\";\nimport { getUserProfile } from \"../../../../../actions/Auth\";\nimport { getAllUsers } from \"../../../../../actions/stuppUserAction\";\nimport { getSections } from \"../../../../../actions/sectionAction\";\nimport { getLevels } from \"../../../../../actions/classLevelAction\";\nimport { getClassesByEstablishmentId } from \"../../../../../actions/classeAction\";\nimport { getServicesByEstablishmentId } from \"../../../../../actions/ServiceAction\";\nimport {\n  editUser,\n  errorHandling,\n  successHandling,\n  successHandlingSteper,\n  errorHandlingSteper,\n} from \"../../../../../actions/stuppUserAction\";\nimport { getSectionFromLevel } from \"../../../../../actions/sectionAction\";\nimport moment from \"moment\";\nimport { parsePhoneNumberFromString } from \"libphonenumber-js\";\nimport _ from \"lodash\";\n\nclass EditUser extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      //components Common information\n      id: \"\",\n      name: \"\",\n      surname: \"\",\n      Arabname: \"\",\n      Arabsurname: \"\",\n      gender: \"\",\n      date_of_birth: moment().year() - 6 + \"-01-01\",\n      email: \"\",\n      phone: 0,\n      cin: 0,\n      address: \"\",\n      zip_code: 0,\n      status: true,\n      activeStep: 0,\n      inputText: \"\",\n      userPhotos: null,\n      emailVerified: false,\n\n      //components role information\n      establishment_id: 0,\n      role_id: \"\",\n      steps: 1,\n      //components specific information\n      date_start_contract: \"\",\n      Disable_studentsection: true,\n      date_end_contract: \"\",\n      listOfSubjects: [],\n      serviceFilteredByEstablishment: [],\n      studentClassesByLevelSectionID: [],\n      studentsectionByLevels: [],\n      class_id: 0,\n      idProfessor: \"\",\n      SubjectsNewList: [],\n      //components Parent information\n      newParent: false,\n      newParentsList: [],\n      allParentList: [],\n      affectedParents: [],\n      oldaffectedParents: [],\n\n      oldService: [],\n\n      nameParent: \"\",\n      surnameParent: \"\",\n      genderParent: \"\",\n\n      date_of_birthParent: moment().year() - 18 + \"-01-01\",\n\n      addressParent: \"\",\n      phoneParent: 0,\n      statusParent: true,\n      cinParent: 0,\n      zip_codeParent: 0,\n      usernameParent: \"\",\n      emailParent: \"\",\n      inputTextParent: \"\",\n      parentStudentphoto: null,\n      emailVerifiedParent: false,\n      countrie_locale: \"\",\n      addedListSubject: [],\n      added: false,\n      listOfSubjects: [\n        {\n          id: null,\n          level_id: 0,\n          section_id: 0,\n          subject_id: 0,\n          sectionDisabled: true,\n        },\n      ],\n      establishmentList: [],\n      classeList: [],\n      classListFiltered: [],\n      estabType: 0,\n      serviceId: [],\n      successStatus: false,\n      communsuccessAlert: false,\n      communFailedAlert: false,\n    };\n    this.getStepContent = this.getStepContent.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangePhone = this.handleChangePhone.bind(this);\n    this.handleChangeParentPhone = this.handleChangeParentPhone.bind(this);\n    this.handleChangeRole = this.handleChangeRole.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleChangeLevel = this.handleChangeLevel.bind(this);\n    this.handleChangeSection = this.handleChangeSection.bind(this);\n    this.handleChangeListSubjects = this.handleChangeListSubjects.bind(this);\n    this.handleChangeService = this.handleChangeService.bind(this);\n    this.handleChangeEstablishment = this.handleChangeEstablishment.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n    this.onDropUserParent = this.onDropUserParent.bind(this);\n    this.addNewSubject = this.addNewSubject.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.addNewParentFormulaire = this.addNewParentFormulaire.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleReset = this.handleReset.bind(this);\n    this.getSteps = this.getSteps.bind(this);\n    this.handleChangestudentLevel = this.handleChangestudentLevel.bind(this);\n    this.handleChangestudentSection = this.handleChangestudentSection.bind(\n      this\n    );\n    this.handleChangeListSubjectsAdd = this.handleChangeListSubjectsAdd.bind(\n      this\n    );\n    this.handleChangeEndContract = this.handleChangeEndContract.bind(this);\n    this.handleChangeStartContract = this.handleChangeStartContract.bind(this);\n    this.handleChangeDate = this.handleChangeDate.bind(this);\n    this.handleChangeDateParent = this.handleChangeDateParent.bind(this);\n  }\n\n  handleChangePhone = (value) => {\n    this.setState({ phone: value });\n  };\n  handleChangeParentPhone = (value) => {\n    this.setState({ phoneParent: value });\n  };\n  handleChangeDate = (date) => {\n    this.setState({ date_of_birth: date });\n  };\n\n  handleChangeDateParent = (date) => {\n    this.setState({ date_of_birthParent: date });\n  };\n\n  addNewParentFormulaire = () => {\n    this.setState({ newParent: !this.state.newParent });\n  };\n  addNewParent = () => {\n    var parent = {\n      nameParent: this.state.nameParent,\n      surnameParent: this.state.surnameParent,\n      genderParent: this.state.genderParent,\n      date_of_birthParent: this.state.date_of_birthParent,\n      addressParent: this.state.addressParent,\n      phoneParent: this.state.phoneParent,\n      statusParent: true,\n      cinParent: this.state.cinParent,\n      zip_codeParent: this.state.zip_codeParent,\n      realmParent: this.state.nameParent,\n      passwordParent: \"123456\",\n      usernameParent: this.state.nameParent + \".\" + this.state.surnameParent,\n      emailParent: this.state.emailParent,\n      parentStudentphoto: this.state.parentStudentphoto,\n      emailVerifiedParent: false,\n      parentStudentphoto: this.state.parentStudentphoto,\n    };\n\n    this.state.newParentsList.push(parent);\n    this.setState({\n      nameParent: \"\",\n      surnameParent: \"\",\n      genderParent: \"\",\n      date_of_birthParent: \"\",\n      addressParent: \"\",\n      phoneParent: \"\",\n      statusParent: true,\n      cinParent: \"\",\n      zip_codeParent: \"\",\n      realmParent: \"\",\n      passwordParent: \"123456\",\n      usernameParent: \"\",\n      emailParent: \"\",\n      emailVerifiedParent: false,\n      parentStudentphoto: null,\n      inputTextParent: \"\",\n      newParent: false,\n      Arabname: \"\",\n      Arabsurname: \"\",\n    });\n  };\n\n  addNewSubject = (index) => {\n    this.setState((prevState) => ({\n      addedListSubject: [\n        ...prevState.addedListSubject,\n        {\n          id: index,\n          level_id: 0,\n          section_id: 0,\n          subject_id: 0,\n          sectionDisabled: true,\n        },\n      ],\n      added: true,\n    }));\n  };\n  handleChangeListSubjectsAdd(event, name, index) {\n    if (name === \"level_id\") {\n      var newList = this.state.addedListSubject;\n      newList[index].level_id = event.target.value;\n      newList[index].section_id = this.state.addedListSubject[index].section_id;\n      newList[index].subject_id = this.state.addedListSubject[index].subject_id;\n\n      this.setState({\n        addedListSubject: newList,\n      });\n    }\n    if (name === \"subject_id\") {\n      var newList = this.state.addedListSubject;\n      newList[index].level_id = this.state.addedListSubject[index].level_id;\n      newList[index].section_id = this.state.addedListSubject[index].section_id;\n      newList[index].subject_id = event.target.value;\n\n      this.setState({\n        addedListSubject: newList,\n      });\n    }\n\n    let newListSubjects = this.state.addedListSubject.map((objSubject) =>\n      name === \"level_id\" && event.target.value > 10 && objSubject.id === index\n        ? {\n            ...objSubject,\n            [name]: event.target.value,\n            sectionDisabled: false,\n            section_id: 0,\n          }\n        : objSubject.id === index\n        ? { ...objSubject, [name]: event.target.value, sectionDisabled: true }\n        : objSubject\n    );\n    this.setState({ addedListSubject: newListSubjects });\n  }\n\n  handleChangeListSubjects(event, name, id, index) {\n    if (name === \"level_id\") {\n      var newList = this.state.listOfSubjects;\n      newList[index].level_id = event.target.value;\n      newList[index].section_id = this.state.listOfSubjects[index].section_id;\n      newList[index].subject_id = this.state.listOfSubjects[index].subject_id;\n      newList[index].id = id;\n      this.setState({\n        listOfSubjects: newList,\n      });\n    }\n\n    if (name === \"subject_id\") {\n      var newList = this.state.listOfSubjects;\n      newList[index].level_id = this.state.listOfSubjects[index].level_id;\n      newList[index].section_id = this.state.listOfSubjects[index].section_id;\n      newList[index].subject_id = event.target.value;\n      newList[index].id = id;\n      this.setState({\n        listOfSubjects: newList,\n      });\n    }\n\n    if (name === \"level_id\") {\n      const newList = this.state.listOfSubjects.map((listobject) => {\n        if (listobject.id === index) {\n          listobject.section_id = 0;\n          return listobject;\n        }\n        return listobject;\n      });\n      this.setState({\n        listOfSubjects: newList,\n      });\n    }\n    let newListSubjects = this.state.listOfSubjects.map((objSubject) =>\n      name === \"level_id\" && event.target.value > 10 && objSubject.id === index\n        ? {\n            ...objSubject,\n            [name]: event.target.value,\n            sectionDisabled: false,\n            section_id: 0,\n          }\n        : objSubject.id === index\n        ? { ...objSubject, [name]: event.target.value, sectionDisabled: true }\n        : objSubject\n    );\n    this.setState({ listOfSubjects: newListSubjects });\n  }\n\n  handleChangestudentLevel = (name) => (event) => {\n    this.setState({ section_id: 0, class_id: 0 });\n    if (event.target.value > 10) {\n      this.setState({ [name]: event.target.value });\n      this.setState({ Disable_studentsection: false });\n      var studentSectionbyLevel = getSectionFromLevel(\n        this.props.classSections,\n        event.target.value\n      );\n      this.setState({ studentsectionByLevels: studentSectionbyLevel });\n    } else {\n      this.setState({\n        level_id: event.target.value,\n        Disable_studentsection: true,\n        section_id: 0,\n      });\n      const levelID = event.target.value;\n      var studentfiltredClasses = this.props.classes.filter(\n        (classe) => classe.level_id === levelID && classe.status\n      );\n      this.setState({ studentClassesByLevelSectionID: studentfiltredClasses });\n    }\n  };\n\n  handleChangestudentSection = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n    const levelID = this.state.level_id;\n    const sectionID = event.target.value;\n    var studentfiltredClasses = this.props.classes.filter(\n      (classe) =>\n        classe.level_id === levelID &&\n        classe.section_id === sectionID &&\n        classe.status\n    );\n    this.setState({ studentClassesByLevelSectionID: studentfiltredClasses });\n  };\n\n  handleChangeService = (name) => (event) => {\n    this.setState({ serviceId: event.target.value });\n  };\n\n  handleChangeSelectParent = (name) => (event) => {\n    this.setState({ affectedParents: event.target.value });\n  };\n\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n  handleChangeStartContract = (date) => {\n    this.setState({ date_start_contract: date });\n  };\n  handleChangeEndContract = (date) => {\n    this.setState({ date_end_contract: date });\n  };\n  handleChangeRole = (name) => (event) => {\n    this.setState({ [name]: event.target.value, steps: event.target.value });\n  };\n\n  handleChangeClass = (name) => (event) => {\n    if (\n      this.props.userProfile.role_id === 2 ||\n      this.props.userProfile.role_id === 7\n    ) {\n      this.setState({\n        establishment_id: this.props.userProfile.establishment_id,\n      });\n    }\n    this.setState({ [name]: event.target.value });\n  };\n\n  handleChangeEstablishment = (name) => (event) => {\n    var type_establish = this.state.establishmentList.find(\n      (element) => element.id === event.target.value\n    );\n    this.setState({ [name]: event.target.value });\n    this.setState({\n      estabType: type_establish.estab_type_id,\n      establishment_id: event.target.value,\n    });\n    this.props.getClassesByEstablishmentId(event.target.value);\n    this.props.getServicesByEstablishmentId(event.target.value);\n\n    axios\n      .get(\n        `${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[where][and][0][establishment_id]=` +\n          event.target.value +\n          `&filter[where][and][1][role_id]=` +\n          4\n      )\n      .then((res) => {\n        const allEstablishmentParents = res.data.map((element) => element.user);\n        this.setState({\n          allParentList: allEstablishmentParents,\n        });\n      });\n  };\n\n  handleChangeLevel = (event) => {\n    event.target.value > 10\n      ? this.setState({ level_id: event.target.value, sectionDisabled: false })\n      : this.setState({ level_id: event.target.value, sectionDisabled: true });\n    let subjectListFiltered = [];\n    this.setState({ subjectListFiltered });\n  };\n\n  handleChangeSection = (name) => (event) => {\n    let subjectListFiltered = [];\n    this.setState({ [name]: event.target.value, subjectListFiltered });\n  };\n\n  onDropUserParent = (e) => {\n    let file = e.target.files[0];\n    this.setState({ parentStudentphoto: file, inputTextParent: file.name });\n  };\n\n  onDrop = (e) => {\n    let file = e.target.files[0];\n    this.setState({ userPhotos: file, inputText: file.name });\n  };\n\n  handleNext = () => {\n    let commonInformation = {\n      id: this.state.id,\n      name: this.state.name,\n      surname: this.state.surname,\n      gender: this.state.gender,\n      date_of_birth: this.state.date_of_birth,\n      address: this.state.address,\n      phone: this.state.phone,\n      status: true,\n      cin: this.state.cin,\n      realm: this.state.name,\n      username: this.state.name + \".\" + this.state.surname,\n      zip_code: this.state.zip_code,\n      email: this.state.email,\n      name_ar: this.state.Arabname,\n      surname_ar: this.state.Arabsurname,\n      photo: this.state.userPhotos,\n      emailVerified: false,\n    };\n\n    let specificInformation = {};\n    if (this.props.user.role_id === 3) {\n      specificInformation = {\n        idProfessor: this.state.professorId,\n        date_start_contract: this.state.date_start_contract,\n        date_end_contract: this.state.date_end_contract,\n        listOfSubjects: this.state.listOfSubjects,\n      };\n    }\n\n    const { activeStep } = this.state;\n    if (activeStep === 0) {\n      axios\n        .patch(\n          `${baseUrl.baseUrl}/users/` +\n            this.props.user.user.id +\n            `?access_token=${localStorage.token}`,\n          commonInformation\n        )\n        .then((response) => {\n          this.props.editUser(response.data);\n\n          if (this.props.user.user.id === this.props.userProfile.user_id) {\n            var object = commonInformation;\n            object.creation_date = this.props.user.user.creation_date;\n            object.first_connexion = this.props.user.user.first_connexion;\n            object.user_signature = this.props.user.user.user_signature;\n            localStorage.setItem(\"user\", JSON.stringify(object));\n            this.setState({\n              communsuccessAlert: true,\n            });\n          }\n\n          setTimeout(\n            function() {\n              this.setState({ activeStep: activeStep + 1 });\n            }.bind(this),\n            1000\n          );\n        })\n        .catch((error) => {\n           //  this.props.errorHandlingSteper();\n          this.setState({\n            communFailedAlert: true,\n          });\n        });\n    } else if (activeStep === 1) {\n      setTimeout(\n        function() {\n          this.setState({ activeStep: activeStep + 1 });\n        }.bind(this),\n        500\n      );\n    } else if (activeStep === 2 && this.props.user.role_id === 3) {\n      axios\n        .patch(\n          `${baseUrl.baseUrl}/professors/` +\n            this.props.user.id +\n            `?access_token=${localStorage.token}`,\n          specificInformation\n        )\n        .then((response) => {})\n        .catch(function(error) {\n         });\n    } else if (activeStep === 2 && this.props.user.role_id === 5) {\n      var NewServiceList = this.state.serviceId;\n      var OldServiceList = this.state.oldService;\n      var difference = [];\n      if (OldServiceList.length === 0) {\n        difference = NewServiceList;\n      } else {\n        difference = _.difference(NewServiceList, OldServiceList);\n      }\n      specificInformation = {\n        id: this.props.user.students[0].id,\n        level_id: this.state.level_id,\n        class_id: this.state.class_id,\n        profile_id: this.props.user.students[0].profile_id,\n        service: difference,\n      };\n\n      axios\n        .patch(\n          `${baseUrl.baseUrl}/students/edit-class-student?access_token=${localStorage.token}`,\n          specificInformation\n        )\n        .then((response) => {\n          this.setState({ successStatus: true });\n        })\n        .catch(function(error) {\n         });\n      setTimeout(\n        function() {\n          this.setState({ activeStep: activeStep + 1 });\n        }.bind(this),\n        1000\n      );\n    } else if (activeStep === 3 && this.props.user.role_id === 5) {\n      specificInformation = {\n        id: this.props.user.students[0].id,\n        newParentsList: this.state.newParentsList,\n        affectedParents: this.state.affectedParents,\n        establishment_id: this.props.user.establishment_id,\n      };\n      axios\n        .patch(\n          `${baseUrl.baseUrl}/students/edit-parent-student?access_token=${localStorage.token}`,\n          specificInformation\n        )\n        .then((response) => {})\n        .catch(function(error) {\n         });\n      setTimeout(\n        function() {\n          this.props.editAlert();\n        }.bind(this),\n        1000\n      );\n    } else {\n     }\n  };\n\n  handleBack = () => {\n    const { activeStep } = this.state;\n    this.setState({ activeStep: activeStep - 1 });\n  };\n\n  handleReset = () => {\n    this.setState({ activeStep: 0 });\n  };\n\n  getStepContent(\n    stepIndex,\n    roleList,\n    establishmentList,\n    values,\n    handleChange,\n    handleBlur,\n    touched,\n    errors\n  ) {\n    switch (this.state.activeStep) {\n      case 0:\n        return (\n          <CommonInformation\n            values={this.state}\n            handleChange={this.handleChange}\n            onDrop={this.onDrop}\n            user={this.props.user}\n            handleChangeDate={this.handleChangeDate}\n            handleChangePhone={this.handleChangePhone}\n          />\n        );\n      case 1:\n        return (\n          <RoleInformation\n            values={this.state}\n            handleChangeRole={this.handleChangeRole}\n            handleChangeEstablishment={this.handleChangeEstablishment}\n          />\n        );\n\n      case 2:\n        return (\n          <EditSpecificInformation\n            classList={this.props.classes}\n            serviceList={this.props.services}\n            classSections={this.props.classSections}\n            classLevels={this.props.classLevels}\n            values={this.state}\n            handleChange={this.handleChange}\n            handleChangeClass={this.handleChangeClass}\n            handleChangeService={this.handleChangeService}\n            handleChangeClass={this.handleChangeClass}\n            handleChangeListSubjects={this.handleChangeListSubjects}\n            addNewSubject={this.addNewSubject}\n            handleChangestudentLevel={this.handleChangestudentLevel}\n            handleChangestudentSection={this.handleChangestudentSection}\n            handleChangeListSubjectsAdd={this.handleChangeListSubjectsAdd}\n            handleChangeStartContract={this.handleChangeStartContract}\n            handleChangeEndContract={this.handleChangeEndContract}\n          />\n        );\n      case 3:\n        return (\n          <EditparentInformation\n            values={this.state}\n            handleChange={this.handleChange}\n            onDropUserParent={this.onDropUserParent}\n            addNewParent={this.addNewParent}\n            addNewParentFormulaire={this.addNewParentFormulaire}\n            handleChangeSelectParent={this.handleChangeSelectParent}\n            validateZipCode={this.validateZipCode}\n            handleChangeDateParent={this.handleChangeDateParent}\n            handleChangeParentPhone={this.handleChangeParentPhone}\n          />\n        );\n      default:\n        return \"Uknown stepIndex\";\n    }\n  }\n  getSteps() {\n    switch (this.props.user.role_id) {\n      case 0:\n      case 1:\n      case 2:\n      case 4:\n      case 6:\n      case 7:\n        return [\n          <IntlMessages id=\"stuppUser.steps.accountInfo\" />,\n          <IntlMessages id=\"stuppUser.steps.role\" />,\n        ];\n\n      case 3:\n        return [\n          <IntlMessages id=\"stuppUser.steps.accountInfo\" />,\n          <IntlMessages id=\"stuppUser.steps.role\" />,\n          <IntlMessages id=\"stuppUser.steps.specInfo\" />,\n        ];\n\n      case 5:\n        return [\n          <IntlMessages id=\"stuppUser.steps.accountInfo\" />,\n          <IntlMessages id=\"stuppUser.steps.role\" />,\n          <IntlMessages id=\"stuppUser.steps.specInfo\" />,\n          <IntlMessages id=\"stuppUser.steps.parentInfoOfStudent\" />,\n        ];\n\n      default:\n        return \"Uknown stepIndex\";\n    }\n  }\n  isValidphoneNumber = (number) => {\n    const tel = parsePhoneNumberFromString(number);\n    let res = false;\n    if (tel) {\n      res = tel.isValid();\n    }    \n    return res;\n  };\n\n  Validation_Steps(steps) {\n    // this methode is to able and disable next and finish button when we insert any user (created by bechir)\n    if (this.state.activeStep === 0) {\n      if (this.state.countrie_locale === \"ar\") {\n        if (\n          this.state.name.length !== 0 &&\n          this.state.surname.length !== 0 &&\n          this.isemail(this.state.email) === true &&\n          this.state.email.length !== 0 &&\n          this.state.Arabname.length !== 0 &&\n          this.state.Arabsurname.length !== 0 &&\n          this.isValidphoneNumber(this.state.phone) === true\n        )\n          return true;\n        else return false;\n      } else {\n        if (\n          this.state.name.length !== 0 &&\n          this.state.surname.length !== 0 &&\n          this.isemail(this.state.email) === true &&\n          this.state.email.length !== 0 &&\n         this.isValidphoneNumber(this.state.phone) === true\n        )\n          return true;\n        else return false;\n      }\n    }\n    if (this.state.activeStep === 1 && this.props.userProfile.role_id === 1) {\n      if (this.state.role_id !== 0 && this.state.establishment_id !== 0)\n        return true;\n      else return false;\n    }\n\n    if (this.state.activeStep === 2 && this.state.role_id === 5) {\n      if (this.state.level_id === undefined || this.state.class_id === 0)\n        return false;\n      else return true;\n    }\n    if (this.state.activeStep === 2 && this.state.role_id === 3) {\n      if (\n        this.state.listOfSubjects.length === 1 &&\n        this.state.listOfSubjects[0].subject_id === 0\n      ) {\n        return false;\n      } else return true;\n    } else if (this.state.activeStep === 3 && this.state.role_id === 5) {\n      if (\n        this.state.newParentsList.length === 0 &&\n        this.state.affectedParents.length === 0\n      )\n        return false;\n      else return true;\n    }\n\n    if (\n      this.state.activeStep === 1 &&\n      (this.props.userProfile.role_id === 2 ||\n        this.props.userProfile.role_id === 7)\n    ) {\n      if (this.state.role_id === 0) return false;\n      else return true;\n    }\n  }\n\n  componentDidMount() {  \n    if (this.props.user) {\n      this.setState({\n        steps: this.props.userProfile.role_id,\n        id: this.props.user.user.id,\n        name: this.props.user.user.name,\n        surname: this.props.user.user.surname,\n        Arabname: this.props.user.user.name_ar,\n        Arabsurname: this.props.user.user.surname_ar,\n        gender: this.props.user.user.gender,\n        date_of_birth: moment(this.props.user.user.date_of_birth).toISOString(),\n        email: this.props.user.user.email,\n        phone: '+'+(this.props.user.user.phone),\n        cin: this.props.user.user.cin,\n        address: this.props.user.user.address,\n        zip_code: this.props.user.user.zip_code,\n        role_id: this.props.user.role_id,\n        establishment_id: this.props.user.establishment_id,\n      });\n      if (this.props.user.role_id === 3) {\n        axios\n          .get(\n            `${baseUrl.baseUrl}/professors?access_token=${localStorage.token}&filter[include]=profSubjects&filter[where][id]=` +\n              this.props.user.professors[0].id\n          )\n          .then((res) => {\n            this.setState({\n              SubjectsNewList: res.data[0].profSubjects,\n              listOfSubjects: res.data[0].profSubjects,\n              idProfessor: this.props.user.professors[0].id,\n              date_start_contract: this.props.user.professors[0]\n                .date_start_contract,\n              date_end_contract: this.props.user.professors[0]\n                .date_end_contract,\n            });\n          });\n      }\n\n      if (this.props.user.role_id === 5) {\n        this.setState({\n          level_id: this.props.user.students[0].level_id,\n          class_id: this.props.user.students[0].class_id,\n        });\n\n        if (this.props.user.students[0].level_id > 10) {\n          this.setState({ Disable_studentsection: false });\n          var studentSectionbyLevel = getSectionFromLevel(\n            this.props.classSections,\n            this.props.user.students[0].level_id\n          );\n\n          this.setState({ studentsectionByLevels: studentSectionbyLevel });\n          const levelID = this.props.user.students[0].level_id;\n          var studentfiltredClasses = this.props.classes.filter(\n            (classe) => classe.level_id === levelID && classe.status\n          );\n          this.setState({\n            studentClassesByLevelSectionID: studentfiltredClasses,\n          });\n        } else {\n          this.setState({\n            level_id: this.props.user.students[0].level_id,\n            Disable_studentsection: true,\n            section_id: 0,\n          });\n          const levelID = this.props.user.students[0].level_id;\n          var studentfiltredClasses = this.props.classes.filter(\n            (classe) => classe.level_id === levelID && classe.status\n          );\n          this.setState({\n            studentClassesByLevelSectionID: studentfiltredClasses,\n          });\n        }\n\n        axios\n          .get(\n            `${baseUrl.baseUrl}/students_services?access_token=${localStorage.token}&filter[where][student_id]=` +\n              this.props.user.students[0].id\n          )\n          .then((response) => {\n            let result = response.data.map((a) => a.service_id);\n            this.setState({ serviceId: result, oldService: result });\n\n            axios\n              .get(\n                `${baseUrl.baseUrl}/students_parents?access_token=${localStorage.token}&filter[where][student_id]=` +\n                  this.props.user.students[0].id\n              )\n              .then((response) => {\n                let parents = response.data.map((a) => a.parent_id);\n                this.setState({\n                  affectedParents: parents,\n                  oldaffectedParents: parents,\n                });\n              });\n          });\n      }\n    }\n\n    this.props.getSections();\n    this.props.getLevels();\n    if (\n      this.props.userProfile.role_id === 2 ||\n      this.props.userProfile.role_id === 7\n    ) {\n      axios\n        .get(\n          `${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[where][and][0][establishment_id]=` +\n            this.props.userProfile.establishment_id +\n            `&filter[where][and][1][role_id]=` +\n            4\n        )\n        .then((res) => {\n          const allEstablishmentParents = res.data.map(\n            (element) => element.user\n          );\n          this.setState({\n            allParentList: allEstablishmentParents,\n          });\n        });\n\n      this.props.getClassesByEstablishmentId(\n        this.props.userProfile.establishment_id\n      );\n      this.props.getServicesByEstablishmentId(\n        this.props.userProfile.establishment_id\n      );\n\n      axios\n        .get(\n          `${baseUrl.baseUrl}/establishments/` +\n            this.props.userProfile.establishment_id +\n            `?access_token=${localStorage.token}`\n        )\n        .then((res) => {\n          this.setState({\n            estabType: res.data.estab_type_id,\n          });\n          axios\n            .get(\n              `${baseUrl.baseUrl}/countries/` +\n                res.data.countries_id +\n                `?access_token=${localStorage.token}`\n            )\n            .then((res) => {\n              this.setState({ countrie_locale: res.data.locale });\n            });\n        });\n\n      axios\n        .get(`${baseUrl.baseUrl}/roles?access_token=${localStorage.token}`)\n        .then((res) => {\n          let data = res.data;\n          const roleList = data.filter((element) => element.id !== 1);\n          this.setState({ roleList });\n        });\n    } else {\n      axios\n        .get(`${baseUrl.baseUrl}/roles?access_token=${localStorage.token}`)\n        .then((res) => {\n          const roleList = res.data;\n          this.setState({ roleList });\n        });\n    }\n\n    axios\n      .get(\n        `${baseUrl.baseUrl}/establishments?access_token=${localStorage.token}`\n      )\n      .then((res) => {\n        const establishmentList = res.data.filter((element) => element.status);\n        this.setState({ establishmentList });\n      });\n    axios\n      .get(`${baseUrl.baseUrl}/subjects?access_token=${localStorage.token}`)\n      .then((res) => {\n        const subjectList = res.data;\n        this.setState({ subjectList });\n      });\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n\n    let specificInformation = {};\n    if (this.props.user.role_id === 3) {\n      specificInformation = {\n        idProfessor: this.props.user.professors[0].id,\n        date_start_contract: this.state.date_start_contract,\n        date_end_contract: this.state.date_end_contract,\n        listOfSubjects: this.state.listOfSubjects,\n        addedListSubject: this.state.addedListSubject,\n      };\n      axios\n        .patch(\n          `${baseUrl.baseUrl}/professors/edit-professor?access_token=${localStorage.token}`,\n          specificInformation\n        )\n        .then((response) => {\n          if (response.status === 200) {\n            this.props.successHandling();\n          }\n        })\n        .catch((error) => {\n          this.props.errorHandling();\n        });\n    }\n\n    if (this.props.user.role_id === 5) {\n      var newAffectedList = _.difference(\n        this.state.affectedParents,\n        this.state.oldaffectedParents\n      );\n      specificInformation = {\n        id: this.props.user.students[0].id,\n        newParentsList: this.state.newParentsList,\n        affectedParents: newAffectedList,\n        establishment_id: this.props.user.establishment_id,\n      };\n      axios\n        .patch(\n          `${baseUrl.baseUrl}/students/edit-parent-student?access_token=${localStorage.token}`,\n          specificInformation\n        )\n        .then((response) => {\n          this.setState({ affectedParents: [], newParentsList: [] });\n        })\n        .catch(function(error) {\n         });\n\n      setTimeout(\n        function() {\n          this.props.editAlert();\n        }.bind(this),\n        1000\n      );\n    }\n    this.props.cancel();\n  };\n\n  handleCancel() {\n    this.setState({\n      previewVisible: false,\n      name: \"\",\n      surname: \"\",\n      gender: \"\",\n      date_of_birth: \"\",\n      address: \"\",\n      phone: \"\",\n      zip_code: \"\",\n      status: true,\n      cin: \"\",\n      realm: \"\",\n      password: \"\",\n      username: \"\",\n      email: \"\",\n      emailVerified: false,\n      nameParent: \"\",\n      surnameParent: \"\",\n      genderParent: \"\",\n      date_of_birthParent: \"\",\n      addressParent: \"\",\n      phoneParent: \"\",\n      statusParent: true,\n      cinParent: \"\",\n      zip_codeParent: \"\",\n      realmParent: \"\",\n      passwordParent: \"123456\",\n      usernameParent: \"\",\n      emailParent: \"\",\n      emailVerifiedParent: false,\n      date_start_contract: \"\",\n      date_end_contract: \"\",\n      establishment_id: 0,\n      role_id: 0,\n      subject_id: \"\",\n      class_id: 0,\n      serviceId: [],\n      userPhotos: null,\n      parentStudentphoto: null,\n      Arabname: \"\",\n      Arabsurname: \"\",\n      affectedParents: [],\n      newParentsList: [],\n    });\n    this.props.close();\n  }\n\n  isemail(value) {\n    if (value.length > 0)\n      return /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@(([[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(\n        value\n      );\n    else return true;\n  }\n\n  render() {\n    const steps = this.getSteps();\n    const { activeStep, roleList } = this.state;\n    return (\n      <div className=\"app-wrapper\">\n        <Modal isOpen={this.props.edit}>\n          <ModalHeader\n            toggle={this.props.cancel}\n            className=\"modal-box-header bg-primary text-white\"\n          >\n            {<IntlMessages id=\"pages.stuppUserPage\" />}\n          </ModalHeader>\n          <ModalBody>\n            <form className=\"container\" onSubmit={this.handleSubmit}>\n              <div className=\"row\">\n                <div className=\"w-100\">\n                  <Stepper\n                    activeStep={activeStep}\n                    alternativeLabel\n                    className=\"horizontal-stepper-linear\"\n                  >\n                    {steps.map((label, index) => {\n                      return (\n                        <Step\n                          key={label}\n                          className={`horizontal-stepper ${\n                            index === activeStep ? \"active\" : \"\"\n                          }`}\n                        >\n                          <StepLabel className=\"stepperlabel\">\n                            {label}\n                          </StepLabel>\n                        </Step>\n                      );\n                    })}\n                  </Stepper>\n                </div>\n                {this.state.activeStep === steps.length ? (\n                  <div className=\"w-100\">\n                    <Typography className=\"my-2\">\n                      All steps completed - you&quot;re finished\n                    </Typography>\n                    <Button onClick={this.handleReset}>Reset</Button>\n                  </div>\n                ) : (\n                  <div className=\"w-100\">\n                    {this.getStepContent(activeStep, roleList)}\n                    <Button\n                      disabled={activeStep === 0}\n                      onClick={this.handleBack}\n                      className=\"mr-2\"\n                    >\n                      {<IntlMessages id=\"stuppUser.button.back\" />}\n                    </Button>\n\n                    {activeStep === steps.length - 1 ? (\n                      <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        type=\"submit\"\n                       //  disabled={this.Validation_Steps(steps) ? false : true}\n                        className=\"jr-btn\"\n                      >\n                        {<IntlMessages id=\"stuppUser.button.finish\" />}\n                      </Button>\n                    ) : (\n                      <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={this.handleNext}\n                        // disabled={this.Validation_Steps(steps) ? false : true}\n                      >\n                        {\" \"}\n                        {<IntlMessages id=\"stuppUser.button.Next\" />}\n                      </Button>\n                    )}\n                  </div>\n                )}\n              </div>\n            </form>\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    establishments: state.establishment.remoteEstablishments,\n    services: state.service.remoteServices,\n    userProfile: state.auth.userProfile,\n    users: state.stuppUsers.remoteStuppUsers,\n    classLevels: state.ClassLevels.remoteLevels,\n    classSections: state.classSections.remoteSections,\n    classes: state.classes,\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  {\n    editUser,\n    getAllUsers,\n    getServices,\n    getEstablishment,\n    getUserProfile,\n    getLevels,\n    getSections,\n    getClassesByEstablishmentId,\n    getServicesByEstablishmentId,\n    errorHandling,\n    successHandling,\n    successHandlingSteper,\n    errorHandlingSteper,\n  }\n)(EditUser);\n"]},"metadata":{},"sourceType":"module"}