{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/containers/Navigation/NavCollapse.js\";\nimport React, { useEffect } from 'react';\nimport { Collapse, List, ListItem } from '@material-ui/core';\nimport IconExpandLess from '@material-ui/icons/ExpandLess';\nimport IconExpandMore from '@material-ui/icons/ExpandMore';\nimport { useHistory } from 'react-router-dom';\nimport IntlMessages from \"../../util/IntlMessages\";\nimport NavSection from \"./NavSection\";\nimport NavMenuItem from \"./NavMenuItem\";\n\nconst NavCollapse = props => {\n  const history = useHistory();\n  const {\n    name,\n    icon,\n    children = []\n  } = props;\n  const isExpandable = children && children.length > 0;\n  const [open, setOpen] = React.useState(false);\n  useEffect(() => {\n    if (isUrlInChildren(props, history.location.pathname)) {\n      setOpen(true);\n    } else {\n      setOpen(false);\n    }\n  }, []);\n\n  function handleClick() {\n    setOpen(!open);\n  }\n\n  history.listen((location, action) => {\n    if (isUrlInChildren(props, location.pathname)) {\n      setOpen(true);\n    } else {\n      setOpen(false);\n    }\n  });\n  /**\r\n   * Check if the given url can be found\r\n   * in one of the given parent's children\r\n   *\r\n   * @param parent\r\n   * @param url\r\n   * @returns {boolean}\r\n   */\n\n  function isUrlInChildren(parent, url) {\n    if (!parent.children) {\n      return false;\n    }\n\n    for (let i = 0; i < parent.children.length; i++) {\n      if (parent.children[i].children) {\n        if (isUrlInChildren(parent.children[i], url)) {\n          return true;\n        }\n      }\n\n      if (parent.children[i].link === url || url.includes(parent.children[i].link)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  const MenuCollapse = /*#__PURE__*/React.createElement(ListItem, {\n    className: \"nav-collapse-btn\",\n    button: true,\n    onClick: handleClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, !!icon && /*#__PURE__*/React.createElement(\"i\", {\n    className: 'zmdi zmdi-hc-fw  zmdi-' + icon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"nav-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(IntlMessages, {\n    id: `sidebar.components.${props.name}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 34\n    }\n  })), isExpandable && !open && /*#__PURE__*/React.createElement(IconExpandMore, {\n    className: \"nav-arrow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 33\n    }\n  }), isExpandable && open && /*#__PURE__*/React.createElement(IconExpandLess, {\n    className: \"nav-arrow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 32\n    }\n  }));\n  const MenuItemChildren = isExpandable ? /*#__PURE__*/React.createElement(Collapse, {\n    className: \"nav-collapse-item\",\n    in: open,\n    timeout: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    component: \"div\",\n    disablePadding: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, children.map((item, index) => {\n    switch (item.type) {\n      case 'section':\n        return /*#__PURE__*/React.createElement(NavSection, Object.assign({}, item, {\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 24\n          }\n        }));\n\n      case 'collapse':\n        return /*#__PURE__*/React.createElement(NavCollapse, Object.assign({}, item, {\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 24\n          }\n        }));\n\n      case 'item':\n        return /*#__PURE__*/React.createElement(NavMenuItem, Object.assign({}, item, {\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 24\n          }\n        }));\n    }\n  }))) : null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `nav-collapse ${open ? 'open' : 'open'}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, MenuCollapse, MenuItemChildren);\n};\n\nexport default NavCollapse;","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/containers/Navigation/NavCollapse.js"],"names":["React","useEffect","Collapse","List","ListItem","IconExpandLess","IconExpandMore","useHistory","IntlMessages","NavSection","NavMenuItem","NavCollapse","props","history","name","icon","children","isExpandable","length","open","setOpen","useState","isUrlInChildren","location","pathname","handleClick","listen","action","parent","url","i","link","includes","MenuCollapse","MenuItemChildren","map","item","index","type"],"mappings":"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","sourcesContent":["import React, {useEffect} from 'react';\r\nimport {Collapse, List, ListItem} from '@material-ui/core';\r\nimport IconExpandLess from '@material-ui/icons/ExpandLess';\r\nimport IconExpandMore from '@material-ui/icons/ExpandMore';\r\nimport {useHistory} from 'react-router-dom';\r\n\r\nimport IntlMessages from \"../../util/IntlMessages\";\r\nimport NavSection from \"./NavSection\";\r\nimport NavMenuItem from \"./NavMenuItem\";\r\n\r\nconst NavCollapse = props => {\r\n  const history = useHistory();\r\n\r\n  const {name, icon, children = []} = props;\r\n  const isExpandable = children && children.length > 0;\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isUrlInChildren(props, history.location.pathname)) {\r\n      setOpen(true);\r\n    } else {\r\n      setOpen(false);\r\n    }\r\n  }, []);\r\n\r\n  function handleClick() {\r\n    setOpen(!open)\r\n  }\r\n\r\n  history.listen((location, action) => {\r\n    if (isUrlInChildren(props, location.pathname)) {\r\n      setOpen(true);\r\n    } else {\r\n      setOpen(false);\r\n    }\r\n  });\r\n\r\n  /**\r\n   * Check if the given url can be found\r\n   * in one of the given parent's children\r\n   *\r\n   * @param parent\r\n   * @param url\r\n   * @returns {boolean}\r\n   */\r\n  function isUrlInChildren(parent, url) {\r\n    if (!parent.children) {\r\n      return false;\r\n    }\r\n\r\n    for (let i = 0; i < parent.children.length; i++) {\r\n      if (parent.children[i].children) {\r\n        if (isUrlInChildren(parent.children[i], url)) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      if (parent.children[i].link === url || url.includes(parent.children[i].link)) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  const MenuCollapse = (\r\n    \r\n    <ListItem className='nav-collapse-btn' button onClick={handleClick}>\r\n      {/* Display an icon if any */}\r\n    \r\n      {!!icon && (\r\n        <i className={'zmdi zmdi-hc-fw  zmdi-' + icon}/>\r\n      )}\r\n      <span className='nav-text'><IntlMessages id={`sidebar.components.${props.name}`}/></span>\r\n      \r\n      {/* Display the expand menu if the item has children */}\r\n      {isExpandable && !open && <IconExpandMore className='nav-arrow'/>}\r\n      {isExpandable && open && <IconExpandLess className='nav-arrow'/>}\r\n     \r\n    </ListItem>\r\n  );\r\n\r\n  const MenuItemChildren = isExpandable ? (\r\n    <Collapse className='nav-collapse-item' in={open} timeout=\"auto\">\r\n      <List component=\"div\" disablePadding>\r\n        {\r\n          children.map((item, index) => {\r\n            switch (item.type) {\r\n              case 'section' :\r\n                return <NavSection {...item} key={index}/>;\r\n              case 'collapse' :\r\n                return <NavCollapse {...item}  key={index}/>;\r\n              case 'item' :\r\n                return <NavMenuItem {...item} key={index}/>;\r\n            }\r\n          })\r\n        }\r\n      </List>\r\n    </Collapse>\r\n  ) : null;\r\n\r\n  return (\r\n    <div className={`nav-collapse ${open ? 'open' : 'open'}`}>\r\n      {MenuCollapse}\r\n      {MenuItemChildren}\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default NavCollapse;"]},"metadata":{},"sourceType":"module"}