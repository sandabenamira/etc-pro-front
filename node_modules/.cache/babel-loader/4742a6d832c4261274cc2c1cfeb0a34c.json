{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Superadmin/SchoolLicence/SchoolLicenceList.js\";\nimport React from \"react\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport IntlMessages from \"../../../../util/IntlMessages\";\nimport EditSchoolLicence from \"./EditSchoolLicence\";\nimport _ from \"lodash\";\nimport SchoolLicenceListItem from \"./SchoolLicenceListItem\";\nimport { connect } from \"react-redux\";\nimport { editSchoolLicence } from \"../../../../actions/SchoolLicenceAction\";\nimport { deleteSchoolLicence } from \"../../../../actions/SchoolLicenceAction\";\n\nclass SchoolLicenceList extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangeModule = event => {\n      this.setState({\n        modules: event.target.value\n      });\n    };\n\n    this.handleChangeStartDate = date => {\n      this.setState({\n        start_date: date\n      });\n    };\n\n    this.handleChangeEndDate = date => {\n      this.setState({\n        end_date: date\n      });\n    };\n\n    this.handleDeleteSchoolLicence = event => {\n      event.preventDefault();\n      this.props.deleteSchoolLicence(this.state.deleteItem);\n      this.setState({\n        deleteIsopen: false\n      });\n    };\n\n    this.handleEdit = (item, event) => {\n      event.preventDefault();\n      var establishmentModules = item.licenceModule.map(element => {\n        return element.fk_id_module;\n      });\n      this.setState({\n        isOpen: true,\n        item: item,\n        licenceType: item.situation,\n        id: item.id,\n        start_date: item.start_date,\n        end_date: item.end_date,\n        fk_id_school_year: item.fk_id_school_year,\n        fk_id_establishment: item.fk_id_establishment,\n        establishment: item.establishment,\n        studentsNumber: item.number_students,\n        smsNumber: item.number_sms,\n        paymentMode: item.mode_payment,\n        modules: establishmentModules,\n        fk_licence_id: item.licenceModule[0].fk_id_licence\n      });\n    };\n\n    this.handleDelete = (item, event) => {\n      event.preventDefault();\n      this.setState({\n        deleteIsopen: true,\n        deleteItem: item\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      let checkDoubleLicence = this.props.schoolLicences.filter(element => element.fk_id_establishment == this.state.fk_id_establishment && element.fk_id_school_year == this.state.fk_id_school_year && element.id != this.state.id);\n\n      if (checkDoubleLicence.length > 0) {\n        this.props.handleChangeAlerte();\n      } else {\n        const data = {\n          situation: this.state.licenceType,\n          id: this.state.id,\n          fk_id_establishment: this.state.fk_id_establishment,\n          fk_id_school_year: this.state.fk_id_school_year,\n          number_students: this.state.studentsNumber,\n          mode_payment: this.state.paymentMode,\n          number_sms: this.state.smsNumber,\n          modules: this.state.modules\n        };\n        const establishment = this.state.establishment;\n        this.props.editSchoolLicence(data);\n      }\n\n      this.handleCancel();\n    };\n\n    this.state = {\n      isOpen: false,\n      item: {},\n      deleteIsopen: false,\n      deleteItem: {},\n      situationLicence: \"\",\n      start_date: \"\",\n      end_date: \"\",\n      id: null,\n      fk_id_school_year: \"\",\n      fk_id_establishment: \"\",\n      licenceGroup: [{\n        value: \"Actif\",\n        label: \"Active\"\n      }, {\n        value: \"Expired\",\n        label: \"Expiré\"\n      }, {\n        value: \"Pending\",\n        label: \"En cours\"\n      }, {\n        value: \"Blocked\",\n        label: \"Bloqué\"\n      }],\n      paymentModeList: [{\n        value: \"Semestre\",\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"mode_payment.establishment.semester\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 18\n          }\n        })\n      }, {\n        value: \"Trimestre\",\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"mode_payment.establishment.trimester\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 18\n          }\n        })\n      }, {\n        value: \"Mensuel\",\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"mode_payment.establishment.monthly\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 18\n          }\n        })\n      }, {\n        value: \"Annuel\",\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"mode_payment.establishment.annual\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 18\n          }\n        })\n      }],\n      paymentMode: \"\",\n      licenceType: \"\",\n      establishment: {},\n      studentsNumber: 0,\n      smsNumber: 0,\n      modules: [],\n      fk_licence_id: 0\n    };\n    this.handleAnnule = this.handleAnnule.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleToggle = this.handleToggle.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.handleDeleteSchoolLicence = this.handleDeleteSchoolLicence.bind(this);\n    this.handleChangeStartDate = this.handleChangeStartDate.bind(this);\n    this.handleChangeEndDate = this.handleChangeEndDate.bind(this);\n    this.handleChangeModule = this.handleChangeModule.bind(this);\n  }\n\n  handleCancel() {\n    this.setState({\n      isOpen: false,\n      deleteIsopen: false\n    });\n  }\n\n  handleAnnule() {\n    this.handleCancel();\n  }\n\n  handleToggle() {\n    this.handleCancel();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive-material\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"list.school.licence\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(Table, {\n      className: \"default-table table-unbordered table table-sm table-hover\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(TableHead, {\n      className: \"th-border-b\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TableRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 15\n      }\n    }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"list.schools\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.class.formadd.module\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"sidebar.components.schoolYears\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.class.formadd.situation\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.establishments.formadd.mode_payment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.establishments.formadd.number_sms\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.establishments.formadd.number_students\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"action.type.of.education\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(TableBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 11\n      }\n    }, this.props.schoolLicences.map(schoolLicence => {\n      return /*#__PURE__*/React.createElement(SchoolLicenceListItem, {\n        listEstablishments: this.props.listEstablishments,\n        schoolLicence: schoolLicence,\n        handleEdit: this.handleEdit,\n        handleDelete: this.handleDelete,\n        schoolYearList: this.props.schoolYearList,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 17\n        }\n      });\n    }))), this.state.isOpen ? /*#__PURE__*/React.createElement(EditSchoolLicence, {\n      schoolLicence: this.state.item,\n      closeModal: this.handleCancel,\n      isOpen: this.state.isOpen,\n      values: this.state,\n      handleAnnule: this.handleAnnule,\n      handleChange: this.handleChange,\n      handleSubmit: this.handleSubmit,\n      handleToggle: this.handleToggle,\n      handleChangeStartDate: this.handleChangeStartDate,\n      handleChangeEndDate: this.handleChangeEndDate,\n      handleChangeModule: this.handleChangeModule,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }\n    }) : \"\");\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nexport default connect(mapStateToProps, {\n  editSchoolLicence,\n  deleteSchoolLicence\n})(SchoolLicenceList);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Superadmin/SchoolLicence/SchoolLicenceList.js"],"names":["React","Table","TableBody","TableCell","TableHead","TableRow","IntlMessages","EditSchoolLicence","_","SchoolLicenceListItem","connect","editSchoolLicence","deleteSchoolLicence","SchoolLicenceList","Component","constructor","props","handleChangeModule","event","setState","modules","target","value","handleChangeStartDate","date","start_date","handleChangeEndDate","end_date","handleDeleteSchoolLicence","preventDefault","state","deleteItem","deleteIsopen","handleEdit","item","establishmentModules","licenceModule","map","element","fk_id_module","isOpen","licenceType","situation","id","fk_id_school_year","fk_id_establishment","establishment","studentsNumber","number_students","smsNumber","number_sms","paymentMode","mode_payment","fk_licence_id","fk_id_licence","handleDelete","handleChange","name","handleSubmit","e","checkDoubleLicence","schoolLicences","filter","length","handleChangeAlerte","data","handleCancel","situationLicence","licenceGroup","label","paymentModeList","handleAnnule","bind","handleToggle","render","schoolLicence","listEstablishments","schoolYearList","mapStateToProps"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport IntlMessages from \"../../../../util/IntlMessages\";\nimport EditSchoolLicence from \"./EditSchoolLicence\";\nimport _ from \"lodash\";\nimport SchoolLicenceListItem from \"./SchoolLicenceListItem\";\nimport { connect } from \"react-redux\";\nimport { editSchoolLicence } from \"../../../../actions/SchoolLicenceAction\";\nimport { deleteSchoolLicence } from \"../../../../actions/SchoolLicenceAction\";\n\nclass SchoolLicenceList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      item: {},\n      deleteIsopen: false,\n      deleteItem: {},\n      situationLicence: \"\",\n      start_date: \"\",\n      end_date: \"\",\n      id: null,\n      fk_id_school_year: \"\",\n      fk_id_establishment: \"\",\n      licenceGroup: [\n        {\n          value: \"Actif\",\n          label: \"Active\",\n        },\n        {\n          value: \"Expired\",\n          label: \"Expiré\",\n        },\n        {\n          value: \"Pending\",\n          label: \"En cours\",\n        },\n        {\n          value: \"Blocked\",\n          label: \"Bloqué\",\n        },\n      ],\n      paymentModeList: [\n        {\n          value: \"Semestre\",\n          label: <IntlMessages id=\"mode_payment.establishment.semester\" />,\n        },\n        {\n          value: \"Trimestre\",\n          label: <IntlMessages id=\"mode_payment.establishment.trimester\" />,\n        },\n        {\n          value: \"Mensuel\",\n          label: <IntlMessages id=\"mode_payment.establishment.monthly\" />,\n        },\n        {\n          value: \"Annuel\",\n          label: <IntlMessages id=\"mode_payment.establishment.annual\" />,\n        },\n      ],\n      paymentMode: \"\",\n      licenceType: \"\",\n      establishment: {},\n      studentsNumber: 0,\n      smsNumber: 0,\n      modules: [],\n      fk_licence_id: 0,\n    };\n    this.handleAnnule = this.handleAnnule.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleToggle = this.handleToggle.bind(this);\n    this.handleEdit = this.handleEdit.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.handleDeleteSchoolLicence = this.handleDeleteSchoolLicence.bind(this);\n    this.handleChangeStartDate = this.handleChangeStartDate.bind(this);\n    this.handleChangeEndDate = this.handleChangeEndDate.bind(this);\n    this.handleChangeModule = this.handleChangeModule.bind(this);\n  }\n\n  handleChangeModule = (event) => {\n    this.setState({ modules: event.target.value });\n  };\n\n  handleChangeStartDate = (date) => {\n    this.setState({ start_date: date });\n  };\n  handleChangeEndDate = (date) => {\n    this.setState({ end_date: date });\n  };\n\n  handleDeleteSchoolLicence = (event) => {\n    event.preventDefault();\n    this.props.deleteSchoolLicence(this.state.deleteItem);\n    this.setState({\n      deleteIsopen: false,\n    });\n  };\n\n  handleCancel() {\n    this.setState({ isOpen: false, deleteIsopen: false });\n  }\n  handleEdit = (item, event) => {\n    event.preventDefault();\n    var establishmentModules = item.licenceModule.map((element) => {\n      return element.fk_id_module;\n    });\n    this.setState({\n      isOpen: true,\n      item: item,\n      licenceType: item.situation,\n      id: item.id,\n      start_date: item.start_date,\n      end_date: item.end_date,\n      fk_id_school_year: item.fk_id_school_year,\n      fk_id_establishment: item.fk_id_establishment,\n      establishment: item.establishment,\n      studentsNumber: item.number_students,\n      smsNumber: item.number_sms,\n      paymentMode: item.mode_payment,\n      modules: establishmentModules,\n      fk_licence_id: item.licenceModule[0].fk_id_licence,\n    });\n  };\n  handleDelete = (item, event) => {\n    event.preventDefault();\n    this.setState({ deleteIsopen: true, deleteItem: item });\n  };\n\n  handleAnnule() {\n    this.handleCancel();\n  }\n\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n  handleToggle() {\n    this.handleCancel();\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    let checkDoubleLicence = this.props.schoolLicences.filter(\n      (element) =>\n        element.fk_id_establishment == this.state.fk_id_establishment &&\n        element.fk_id_school_year == this.state.fk_id_school_year &&\n        element.id != this.state.id\n    );\n\n    if (checkDoubleLicence.length > 0) {\n      this.props.handleChangeAlerte();\n    } else {\n      const data = {\n        situation: this.state.licenceType,\n        id: this.state.id,\n        fk_id_establishment: this.state.fk_id_establishment,\n        fk_id_school_year: this.state.fk_id_school_year,\n        number_students: this.state.studentsNumber,\n        mode_payment: this.state.paymentMode,\n        number_sms: this.state.smsNumber,\n        modules: this.state.modules,\n      };\n      const establishment = this.state.establishment;\n      this.props.editSchoolLicence(data);\n    }\n\n    this.handleCancel();\n  };\n\n  render() {\n    return (\n      <div className=\"table-responsive-material\">\n        <div>\n          <h1>\n            <b>\n              <IntlMessages id=\"list.school.licence\" />\n            </b>\n          </h1>\n        </div>\n        <Table className=\"default-table table-unbordered table table-sm table-hover\">\n          <TableHead className=\"th-border-b\">\n            <TableRow>\n              <TableCell>\n                {\" \"}\n                <IntlMessages id=\"list.schools\" />\n              </TableCell>\n              <TableCell>\n                <IntlMessages id=\"components.class.formadd.module\" />\n              </TableCell>\n              <TableCell>\n                <IntlMessages id=\"sidebar.components.schoolYears\" />\n              </TableCell>\n              <TableCell>\n                <IntlMessages id=\"components.class.formadd.situation\" />\n              </TableCell>\n              <TableCell>\n                <IntlMessages id=\"components.establishments.formadd.mode_payment\" />\n              </TableCell>\n              <TableCell>\n                <IntlMessages id=\"components.establishments.formadd.number_sms\" />\n              </TableCell>\n              <TableCell>\n                <IntlMessages id=\"components.establishments.formadd.number_students\" />\n              </TableCell>\n              <TableCell>\n                <IntlMessages id=\"action.type.of.education\" />\n              </TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {this.props.schoolLicences.map((schoolLicence) => {\n              return (\n                <SchoolLicenceListItem\n                  listEstablishments={this.props.listEstablishments}\n                  schoolLicence={schoolLicence}\n                  handleEdit={this.handleEdit}\n                  handleDelete={this.handleDelete}\n                  schoolYearList={this.props.schoolYearList}\n                />\n              );\n            })}\n          </TableBody>\n        </Table>\n        {this.state.isOpen ? (\n          <EditSchoolLicence\n            schoolLicence={this.state.item}\n            closeModal={this.handleCancel}\n            isOpen={this.state.isOpen}\n            values={this.state}\n            handleAnnule={this.handleAnnule}\n            handleChange={this.handleChange}\n            handleSubmit={this.handleSubmit}\n            handleToggle={this.handleToggle}\n            handleChangeStartDate={this.handleChangeStartDate}\n            handleChangeEndDate={this.handleChangeEndDate}\n            handleChangeModule={this.handleChangeModule}\n          />\n        ) : (\n          \"\"\n        )}\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {};\n}\n\nexport default connect(mapStateToProps, {\n  editSchoolLicence,\n  deleteSchoolLicence,\n})(SchoolLicenceList);\n"]},"metadata":{},"sourceType":"module"}