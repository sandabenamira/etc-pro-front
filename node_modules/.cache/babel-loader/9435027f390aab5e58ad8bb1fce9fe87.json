{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/UsersManagement/UserInformation/UserListItems.js\";\nimport React, { Component } from \"react\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../../../../config/config\";\nimport _ from \"lodash\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport IntlMessages from \"../../../../../../util/IntlMessages\";\nimport ResetPasswordModal from \"../UserInformation/ResetPasswordModal\";\nimport DeleteUserModal from \"../UserInformation/DeleteUserModal\";\nimport { connect } from \"react-redux\";\nimport { roleIdSuperAdmin, roleIdAdmin, roleIdProfessor, roleIdParent, roleIdStudent, roleIdSupervisor, roleIdDirector } from \"../../../../../../config/config\";\nimport { deleteStuppUser as deleteUser } from \"../../../../../../actions/stuppUserAction\";\nimport defaultAvatar from \"../../../../../../assets/images/default-Avatar.png\";\nimport ModalSchoolYears from \"../ModalSchoolYears\";\nimport { classService } from \"../../../../../../_services/class.service\";\n\nclass componentName extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleDeleteUser = () => {\n      this.props.deleteUser(this.props.user.user.id);\n      this.setState({\n        isOpenDeleteUserModal: false\n      });\n    };\n\n    this.handleRequestDeleteUser = () => {\n      this.setState({\n        menuState: false,\n        isOpenDeleteUserModal: true\n      });\n    };\n\n    this.showModalSchoolYears = e => {\n      e.preventDefault();\n\n      if (this.props.user.role_id === roleIdStudent) {\n        const profileId = this.props.user.id;\n        let apiEndpoint = `/profiles/getInscriptionStudent/${profileId}/?access_token=${localStorage.token}`;\n        classService.get(apiEndpoint).then(response => {\n          if (response) {\n            let inscriptionData = response.data.inscriptionStudent[0].inscription;\n            this.setState({\n              isOpenResetModalSchoolYears: true,\n              historicStudent: response.data.inscriptionStudent[0].inscription\n            });\n          }\n        });\n      }\n    };\n\n    this.closeModalSchoolYears = () => {\n      this.setState({\n        isOpenResetModalSchoolYears: false\n      });\n    };\n\n    this.handleRequestCloseModal = () => {\n      this.setState({\n        isOpenResetModal: false,\n        isOpenDeleteUserModal: false\n      });\n    };\n\n    this.handleRequestResetPass = () => {\n      const params = {\n        email: this.props.user.user.email\n      };\n      axios.post(`${baseUrl.baseUrl}/users/reset-user-password`, params, {\n        headers: {\n          \"content-type\": \"application/json\"\n        }\n      }).then(response => {});\n      this.setState({\n        isOpenResetModal: false\n      });\n    };\n\n    this.onOptionMenuSelect = event => {\n      this.setState({\n        menuState: true,\n        anchorEl: event.currentTarget,\n        itemId: event.currentTarget.value\n      });\n    };\n\n    this.handleRequestClose = () => {\n      this.setState({\n        menuState: false\n      });\n    };\n\n    this.handleRequestResetPassword = () => {\n      this.setState({\n        menuState: false,\n        isOpenResetModal: true\n      });\n    };\n\n    this.state = {\n      uri: \"\",\n      menuState: false,\n      itemId: 0,\n      anchorEl: undefined,\n      isOpenResetModal: false,\n      isOpenDeleteUserModal: false,\n      historicStudent: []\n    };\n    this.handleRequestClose = this.handleRequestClose.bind(this);\n    this.handleRequestCloseModal = this.handleRequestCloseModal.bind(this);\n    this.handleRequestResetPass = this.handleRequestResetPass.bind(this);\n    this.handleRequestDeleteUser = this.handleRequestDeleteUser.bind(this);\n    this.handleDeleteUser = this.handleDeleteUser.bind(this);\n    this.showModalSchoolYears = this.showModalSchoolYears.bind(this);\n  }\n\n  UNSAFE_componentWillMount() {\n    if (this.props.user.user.photo != null) {\n      axios.get(`${baseUrl.baseUrl}/containers/checkFileExist/classebook.data.storage?access_token=${localStorage.token}`).then(response => {\n        let fileList = _.isEmpty(response.data.checkFile) ? null : response.data.checkFile.filter(item => item.name === this.props.user.user.photo);\n        _.isEmpty(fileList) ? this.setState({\n          uri: null\n        }) : this.setState({\n          uri: `${baseUrl.baseUrl}/containers/` + \"classebook.data.storage\" + \"/download/\" + fileList[0].name + `?access_token=${localStorage.token}`\n        });\n      });\n    }\n  }\n\n  getNameRole(id) {\n    if (this.props.settings.languageId === \"tunisia\") {\n      return id === roleIdSuperAdmin ? \"superadmin\" : id === roleIdAdmin ? \"مشرف\" : id === roleIdProfessor ? \"أستاذ\" : id === roleIdParent ? \"الولي\" : id === roleIdStudent ? \"تلميذ\" : id === roleIdDirector ? \"مشرف اول\" : id === roleIdDirector ? \"مدير\" : \"\";\n    } else if (this.props.settings.languageId === \"english\") {\n      return id === roleIdSuperAdmin ? \"Superadmin\" : id === roleIdAdmin ? \"Admin\" : id === roleIdProfessor ? \"Professor\" : id === roleIdParent ? \"Parent\" : id === roleIdStudent ? \"Student\" : id === roleIdSupervisor ? \"Superviseur\" : id === roleIdDirector ? \"Director\" : \"\";\n    } else {\n      return id === roleIdSuperAdmin ? \"superadmin\" : id === roleIdAdmin ? \"Administrateur\" : id === roleIdProfessor ? \"Professeur\" : id === roleIdParent ? \"Parent\" : id === roleIdStudent ? \"Élève\" : id === roleIdSupervisor ? \"Superviseur\" : id === roleIdDirector ? \"Directeur\" : \"\";\n    }\n  }\n\n  render() {\n    const {\n      handleRequestResetPassword\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TableRow, {\n      key: this.props.user.user.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      onClick: e => this.showModalSchoolYears(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }, this.props.user.user.photo ? /*#__PURE__*/React.createElement(Avatar, {\n      align: \"left\",\n      className: \"size-90\",\n      alt: \"...\",\n      src: this.props.user.user.photo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 15\n      }\n    }) : /*#__PURE__*/React.createElement(Avatar, {\n      align: \"left\",\n      className: \"size-90\",\n      alt: \"...\",\n      src: defaultAvatar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 11\n      }\n    }, this.props.user.user.id), this.props.settings.languageId == \"tunisia\" ? /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 13\n      }\n    }, this.props.user.user.name_ar) : /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    }, this.props.user.user.name), this.props.settings.languageId == \"tunisia\" ? /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 13\n      }\n    }, this.props.user.user.surname_ar) : /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 15\n      }\n    }, this.props.user.user.surname), (() => {\n      if (this.props.roleActivate) {\n        return /*#__PURE__*/React.createElement(TableCell, {\n          align: \"left\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 17\n          }\n        }, this.getNameRole(this.props.user.role_id));\n      }\n    })(), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 11\n      }\n    }, this.props.user.user.email), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }\n    }, \"+\", this.props.user.user.phone), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      onClick: this.onOptionMenuSelect.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-more-vert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Menu, {\n      id: \"long-menu\",\n      anchorEl: this.state.anchorEl,\n      open: this.state.menuState,\n      onClose: this.handleRequestClose.bind(this),\n      MenuListProps: {\n        style: {\n          width: 230,\n          paddingTop: 0,\n          paddingBottom: 0\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: e => {\n        this.setState({\n          menuState: false\n        });\n        this.props.editUser(this.props.user.user.id);\n      },\n      value: this.props.user.user.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"button.modify\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 18\n      }\n    })), /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: this.handleRequestResetPassword,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"button.reset.password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 18\n      }\n    })), /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: this.handleRequestDeleteUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"button.delete\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 18\n      }\n    })))), /*#__PURE__*/React.createElement(ResetPasswordModal, {\n      isopen: this.state.isOpenResetModal,\n      handleRequestCloseModal: this.handleRequestCloseModal,\n      handleRequestResetPass: this.handleRequestResetPass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(DeleteUserModal, {\n      isopen: this.state.isOpenDeleteUserModal,\n      handleRequestCloseModal: this.handleRequestCloseModal,\n      handleDeleteUser: this.handleDeleteUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }\n    })), this.state.isOpenResetModalSchoolYears && /*#__PURE__*/React.createElement(ModalSchoolYears, {\n      isOpenResetModalSchoolYears: this.state.isOpenResetModalSchoolYears,\n      closeModalSchoolYears: this.closeModalSchoolYears,\n      historicStudent: this.state.historicStudent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 11\n      }\n    }));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    settings: state.settings.locale\n  };\n}\n\nexport default connect(mapStateToProps, {\n  deleteUser\n})(componentName);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/UsersManagement/UserInformation/UserListItems.js"],"names":["React","Component","TableCell","TableRow","Avatar","IconButton","axios","baseUrl","_","Menu","MenuItem","IntlMessages","ResetPasswordModal","DeleteUserModal","connect","roleIdSuperAdmin","roleIdAdmin","roleIdProfessor","roleIdParent","roleIdStudent","roleIdSupervisor","roleIdDirector","deleteStuppUser","deleteUser","defaultAvatar","ModalSchoolYears","classService","componentName","constructor","props","handleDeleteUser","user","id","setState","isOpenDeleteUserModal","handleRequestDeleteUser","menuState","showModalSchoolYears","e","preventDefault","role_id","profileId","apiEndpoint","localStorage","token","get","then","response","inscriptionData","data","inscriptionStudent","inscription","isOpenResetModalSchoolYears","historicStudent","closeModalSchoolYears","handleRequestCloseModal","isOpenResetModal","handleRequestResetPass","params","email","post","headers","onOptionMenuSelect","event","anchorEl","currentTarget","itemId","value","handleRequestClose","handleRequestResetPassword","state","uri","undefined","bind","UNSAFE_componentWillMount","photo","fileList","isEmpty","checkFile","filter","item","name","getNameRole","settings","languageId","render","name_ar","surname_ar","surname","roleActivate","phone","style","width","paddingTop","paddingBottom","editUser","mapStateToProps","locale"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../../../../config/config\";\nimport _ from \"lodash\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport IntlMessages from \"../../../../../../util/IntlMessages\";\nimport ResetPasswordModal from \"../UserInformation/ResetPasswordModal\";\nimport DeleteUserModal from \"../UserInformation/DeleteUserModal\";\nimport { connect } from \"react-redux\";\nimport { roleIdSuperAdmin, roleIdAdmin, roleIdProfessor, roleIdParent, roleIdStudent, roleIdSupervisor,roleIdDirector } from \"../../../../../../config/config\";\nimport { deleteStuppUser as deleteUser } from \"../../../../../../actions/stuppUserAction\";\nimport defaultAvatar from \"../../../../../../assets/images/default-Avatar.png\";\nimport  ModalSchoolYears  from \"../ModalSchoolYears\";\nimport { classService } from \"../../../../../../_services/class.service\";\n\nclass componentName extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      uri: \"\",\n      menuState: false,\n      itemId: 0,\n      anchorEl: undefined,\n      isOpenResetModal: false,\n      isOpenDeleteUserModal: false,\n      historicStudent:[]\n    };\n    this.handleRequestClose = this.handleRequestClose.bind(this);\n    this.handleRequestCloseModal = this.handleRequestCloseModal.bind(this);\n    this.handleRequestResetPass = this.handleRequestResetPass.bind(this);\n    this.handleRequestDeleteUser = this.handleRequestDeleteUser.bind(this);\n    this.handleDeleteUser = this.handleDeleteUser.bind(this);\n    this.showModalSchoolYears = this.showModalSchoolYears.bind(this);\n  }\n  handleDeleteUser = () => {\n    this.props.deleteUser(this.props.user.user.id);\n    this.setState({ isOpenDeleteUserModal: false });\n  };\n  handleRequestDeleteUser = () => {\n    this.setState({ menuState: false, isOpenDeleteUserModal: true });\n  };\n\n  showModalSchoolYears = (e) => {\n    e.preventDefault(); \n\n    if(this.props.user.role_id === roleIdStudent){\nconst profileId = this.props.user.id\n      let apiEndpoint = `/profiles/getInscriptionStudent/${profileId}/?access_token=${localStorage.token}`;\n      classService.get(apiEndpoint).then(response => {\n        if (response) {  \n           let inscriptionData = response.data.inscriptionStudent[0].inscription\n          this.setState({ isOpenResetModalSchoolYears: true, historicStudent: response.data.inscriptionStudent[0].inscription });\n  \n    }\n    })\n\n    }\n  };\n\n  closeModalSchoolYears = () => {\n    this.setState({ isOpenResetModalSchoolYears: false });\n  };\n\n  handleRequestCloseModal = () => {\n    this.setState({ isOpenResetModal: false, isOpenDeleteUserModal: false });\n  };\n\n  handleRequestResetPass = () => {\n    const params = {\n      email: this.props.user.user.email,\n    };\n\n    axios\n      .post(`${baseUrl.baseUrl}/users/reset-user-password`, params, {\n        headers: { \"content-type\": \"application/json\" },\n      })\n      .then((response) => { });\n    this.setState({ isOpenResetModal: false });\n  };\n\n  onOptionMenuSelect = (event) => {\n\n    this.setState({\n      menuState: true,\n      anchorEl: event.currentTarget,\n      itemId: event.currentTarget.value,\n    });\n  };\n  handleRequestClose = () => {\n    this.setState({ menuState: false });\n  };\n  UNSAFE_componentWillMount() {\n    if (this.props.user.user.photo != null) {\n      axios\n        .get(\n          `${baseUrl.baseUrl}/containers/checkFileExist/classebook.data.storage?access_token=${localStorage.token}`\n        )\n        .then((response) => {\n          let fileList = _.isEmpty(response.data.checkFile)\n            ? null\n            : response.data.checkFile.filter(\n              (item) => item.name === this.props.user.user.photo\n            );\n          _.isEmpty(fileList)\n            ? this.setState({ uri: null })\n            : this.setState({\n                uri:\n                  `${baseUrl.baseUrl}/containers/` +\n                  \"classebook.data.storage\" +\n                  \"/download/\" +\n                  fileList[0].name +\n                  `?access_token=${localStorage.token}`,\n              });\n        });\n    }\n  }\n\n \n\n  getNameRole(id) {\n    if (this.props.settings.languageId === \"tunisia\") {\n      return id === roleIdSuperAdmin\n        ? \"superadmin\"\n        : id === roleIdAdmin\n          ? \"مشرف\"\n          : id === roleIdProfessor\n            ? \"أستاذ\"\n            : id === roleIdParent\n              ? \"الولي\"\n              : id === roleIdStudent\n                ? \"تلميذ\"\n                : id === roleIdDirector\n                  ? \"مشرف اول\"\n                  : id === roleIdDirector\n                    ? \"مدير\"\n                    : \"\";\n    } else if (this.props.settings.languageId === \"english\") {\n      return id === roleIdSuperAdmin\n        ? \"Superadmin\"\n        : id === roleIdAdmin\n          ? \"Admin\"\n          : id === roleIdProfessor\n            ? \"Professor\"\n            : id === roleIdParent\n              ? \"Parent\"\n              : id === roleIdStudent\n                ? \"Student\"\n                : id === roleIdSupervisor\n                  ? \"Superviseur\"\n                  : id === roleIdDirector\n                    ? \"Director\"\n                    : \"\";\n    } else {\n      return id === roleIdSuperAdmin\n        ? \"superadmin\"\n        : id === roleIdAdmin\n          ? \"Administrateur\"\n          : id === roleIdProfessor\n            ? \"Professeur\"\n            : id === roleIdParent\n              ? \"Parent\"\n              : id === roleIdStudent\n                ? \"Élève\"\n                : id === roleIdSupervisor\n                  ? \"Superviseur\"\n                  : id === roleIdDirector\n                    ? \"Directeur\"\n                    : \"\";\n    }\n  }\n\n  handleRequestResetPassword = () => {\n    this.setState({ menuState: false, isOpenResetModal: true });\n  };\n\n  render() {\n    const { handleRequestResetPassword } = this.props;\n    return (\n      <>\n        <TableRow key={this.props.user.user.id} >\n          <TableCell align=\"left\" onClick={(e)=>this.showModalSchoolYears(e)}>\n            {this.props.user.user.photo ? (\n              <Avatar\n                align=\"left\"\n                className=\"size-90\"\n                alt=\"...\"\n                src={this.props.user.user.photo}\n              />\n            ) : (\n                <Avatar\n                  align=\"left\"\n                  className=\"size-90\"\n                  alt=\"...\"\n                  src={defaultAvatar}\n                />\n              )}\n          </TableCell>\n          <TableCell align=\"left\">{this.props.user.user.id}</TableCell>\n          {this.props.settings.languageId == \"tunisia\" ? (\n            <TableCell align=\"left\">{this.props.user.user.name_ar}</TableCell>\n          ) : (\n              <TableCell align=\"left\">{this.props.user.user.name}</TableCell>\n            )}\n\n          {this.props.settings.languageId == \"tunisia\" ? (\n            <TableCell align=\"left\">{this.props.user.user.surname_ar}</TableCell>\n          ) : (\n              <TableCell align=\"left\">{this.props.user.user.surname}</TableCell>\n            )}\n\n          {(() => {\n            if (this.props.roleActivate) {\n              return (\n                <TableCell align=\"left\">\n                  {this.getNameRole(this.props.user.role_id)}\n                </TableCell>\n              );\n            }\n          })()}\n\n          <TableCell align=\"left\">{this.props.user.user.email}</TableCell>\n          <TableCell align=\"left\">+{this.props.user.user.phone}</TableCell>\n          <TableCell align=\"right\">\n            <IconButton onClick={this.onOptionMenuSelect.bind(this)}>\n              <i className=\"zmdi zmdi-more-vert\" />\n            </IconButton>\n            <Menu\n              id=\"long-menu\"\n              anchorEl={this.state.anchorEl}\n              open={this.state.menuState}\n              onClose={this.handleRequestClose.bind(this)}\n              MenuListProps={{\n                style: {\n                  width: 230,\n                  paddingTop: 0,\n                  paddingBottom: 0,\n                },\n              }}\n            >\n              <MenuItem\n                onClick={(e) => {\n                  this.setState({ menuState: false });\n\n                  this.props.editUser(this.props.user.user.id);\n                }}\n                value={this.props.user.user.id}\n              >\n                {<IntlMessages id=\"button.modify\" />}\n              </MenuItem>\n              <MenuItem onClick={this.handleRequestResetPassword}>\n                {<IntlMessages id=\"button.reset.password\" />}\n              </MenuItem>\n              <MenuItem onClick={this.handleRequestDeleteUser}>\n                {<IntlMessages id=\"button.delete\" />}\n              </MenuItem>\n            </Menu>\n          </TableCell>\n          <ResetPasswordModal\n            isopen={this.state.isOpenResetModal}\n            handleRequestCloseModal={this.handleRequestCloseModal}\n            handleRequestResetPass={this.handleRequestResetPass}\n          />\n          <DeleteUserModal\n            isopen={this.state.isOpenDeleteUserModal}\n            handleRequestCloseModal={this.handleRequestCloseModal}\n            handleDeleteUser={this.handleDeleteUser}\n          />\n        </TableRow>\n        {this.state.isOpenResetModalSchoolYears &&\n          <ModalSchoolYears\n            isOpenResetModalSchoolYears={this.state.isOpenResetModalSchoolYears}\n            closeModalSchoolYears={this.closeModalSchoolYears}\n            historicStudent={this.state.historicStudent}\n          />\n        }\n      </>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    settings: state.settings.locale,\n    };\n}\n\nexport default connect(\n  mapStateToProps,\n  {\n    deleteUser,\n  }\n)(componentName);\n"]},"metadata":{},"sourceType":"module"}