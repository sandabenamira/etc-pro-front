{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/UsersManagement/AddUser.js\";\nimport React, { Component } from \"react\";\nimport { Modal, ModalBody, ModalHeader } from \"reactstrap\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport Button from \"@material-ui/core/Button\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CommonInformation from \"./UserInformation/CommonInformation\";\nimport RoleInformation from \"./UserInformation/RoleInformation\";\nimport SpecificInformation from \"./UserInformation/SpecificInformation\";\nimport ParentInformation from \"./UserInformation/ParentInformation\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../../../config/config\";\nimport { connect } from \"react-redux\";\nimport { getEstablishment } from \"../../../../../actions/establishmentAction\";\nimport { getServices } from \"../../../../../actions/ServiceAction\";\nimport { getUserProfile } from \"../../../../../actions/Auth\";\nimport { getAllUsers, addNewUser } from \"../../../../../actions/stuppUserAction\";\nimport { getSections } from \"../../../../../actions/sectionAction\";\nimport { getClassesByEstablishmentId } from \"../../../../../actions/classeAction\";\nimport { getServicesByEstablishmentId } from \"../../../../../actions/ServiceAction\";\nimport { successHandling, uploadExcel, uploadUserPhoto, successAddUserHandling, uploadAdminPhoto, uploadProfAndStudentPhoto } from \"../../../../../actions/stuppUserAction\";\nimport { classService } from \"../../../../../_services/class.service\";\nimport { roleIdSuperAdmin, roleIdAdmin, roleIdProfessor, roleIdStudent, roleIdDirector } from \"../../../../../config/config\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Can from \"../../../../../can\";\nimport { RoleContext } from \"../../../../../Context\";\nimport moment from \"moment\";\nimport { parsePhoneNumberFromString } from \"libphonenumber-js\";\nimport _ from \"lodash\";\nimport { getLevel } from \"../../../../../actions/LevelAction\";\nlet timeout;\n\nclass AddUser extends Component {\n  constructor(props) {\n    super(props);\n\n    this.addNewTrustedParentForm = () => {\n      this.setState({\n        trustedPerson: !this.state.trustedPerson,\n        newParent: false\n      });\n    };\n\n    this.handleChangePhone = value => {\n      this.setState({\n        phone: value\n      });\n    };\n\n    this.handleChangeParentPhone = value => {\n      this.setState({\n        phoneParent: value\n      });\n    };\n\n    this.addNewParentFormulaire = () => {\n      this.setState({\n        newParent: !this.state.newParent,\n        trustedPerson: false\n      });\n    };\n\n    this.addNewParent = () => {\n      var parent = {\n        nameParent: this.state.nameParent,\n        surnameParent: this.state.surnameParent,\n        genderParent: this.state.genderParent,\n        date_of_birthParent: this.state.date_of_birthParent,\n        addressParent: this.state.addressParent,\n        phoneParent: this.state.phoneParent,\n        statusParent: true,\n        cinParent: this.state.cinParent,\n        zip_codeParent: this.state.zip_codeParent,\n        realmParent: this.state.nameParent,\n        passwordParent: \" \",\n        usernameParent: this.state.nameParent + \".\" + this.state.surnameParent,\n        emailParent: this.state.emailParent,\n        parentStudentphoto: this.state.parentStudentphoto,\n        emailVerifiedParent: false,\n        parentStudentphoto: this.state.parentStudentphoto,\n        arabicSurnameParent: this.state.arabicSurnameParent,\n        arabicNameparent: this.state.arabicNameparent\n      };\n\n      if (this.state.trustedPerson) {\n        this.state.trustedPersonList.push(parent);\n      } else {\n        this.state.newParentsList.push(parent);\n      }\n\n      this.setState({\n        nameParent: \"\",\n        surnameParent: \"\",\n        genderParent: \"\",\n        date_of_birthParent: \"\",\n        addressParent: \"\",\n        phoneParent: \"\",\n        statusParent: true,\n        cinParent: \"\",\n        zip_codeParent: \"\",\n        realmParent: \"\",\n        passwordParent: \" \",\n        usernameParent: \"\",\n        emailParent: \"\",\n        emailVerifiedParent: false,\n        parentStudentphoto: null,\n        inputTextParent: \"\",\n        newParent: false,\n        trustedPerson: false,\n        arabicSurnameParent: \"\",\n        arabicNameparent: \"\"\n      });\n    };\n\n    this.deleteChoice = index => {\n      let listOfSubjectsClasses = this.state.listOfSubjects.filter((element, i) => i !== index);\n      this.setState({\n        listOfSubjects: listOfSubjectsClasses\n      });\n      console.log(\"is ------\", index);\n      console.log(\"listOfSubjectsClasses\", listOfSubjectsClasses);\n    };\n\n    this.addNewSubject = index => {\n      let listOfSubjects = [];\n      this.state.listOfSubjects.map(element => {\n        listOfSubjects.push({\n          id: element.id,\n          classId: element.classId,\n          subject_id: element.subject_id,\n          subjects: element.subjects,\n          isAdded: true\n        });\n      });\n      listOfSubjects.push({\n        id: index,\n        classId: 0,\n        subject_id: 0,\n        subjects: [],\n        isAdded: false\n      });\n      console.log(\"listOfSubjects\", listOfSubjects);\n      this.setState({\n        listOfSubjects\n      });\n    };\n\n    this.handleChangestudentLevel = name => event => {\n      this.setState({\n        level_id: event.target.value\n      });\n    };\n\n    this.handleChangestudentSection = name => event => {\n      const levelId = this.state.level_id;\n      const sectionId = event.target.value;\n      this.setState({\n        section_id: sectionId\n      });\n      var studentfiltredClasses = this.props.classeSettings.filter(classe => classe.fk_id_level_v4 === levelId && classe.fk_id_section_v4 === sectionId && classe.status);\n      this.setState({\n        studentClassesByLevelSectionID: studentfiltredClasses\n      });\n    };\n\n    this.handleChangeService = name => event => {\n      this.setState({\n        serviceId: event.target.value\n      });\n    };\n\n    this.handleChangeSelectParent = name => event => {\n      this.setState({\n        affectedParents: event.target.value\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleChangeDate = date => {\n      this.setState({\n        date_of_birth: date\n      });\n    };\n\n    this.handleChangeDateParent = date => {\n      this.setState({\n        date_of_birthParent: date\n      });\n    };\n\n    this.handleChangeRole = name => event => {\n      this.setState({\n        [name]: event.target.value,\n        steps: event.target.value\n      });\n    };\n\n    this.handleChangeClass = name => event => {\n      if (this.props.userProfile.role_id === roleIdAdmin) {\n        this.setState({\n          establishment_id: this.props.userProfile.establishment_id\n        });\n      }\n\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleChangeEstablishment = name => event => {\n      var type_establish = this.state.establishmentList.find(element => element.id === event.target.value);\n      this.setState({\n        [name]: event.target.value\n      });\n      this.setState({\n        estabType: type_establish.estab_type_id,\n        establishment_id: event.target.value\n      });\n      this.props.getClassesByEstablishmentId(event.target.value);\n      this.props.getServicesByEstablishmentId(event.target.value);\n      axios.get(`${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[where][and][0][establishment_id]=` + event.target.value + `&filter[where][and][1][role_id]=` + 4).then(res => {\n        const allEstablishmentParents = res.data.map(element => element.user);\n        this.setState({\n          allParentList: allEstablishmentParents\n        });\n      });\n    };\n\n    this.handleChangeLevel = event => {\n      this.setState({\n        level_id: event.target.value\n      });\n      event.target.value > 10 ? this.setState({\n        level_id: event.target.value,\n        sectionDisabled: false\n      }) : this.setState({\n        level_id: event.target.value,\n        sectionDisabled: true\n      });\n      let subjectListFiltered = [];\n      this.setState({\n        subjectListFiltered\n      });\n    };\n\n    this.handleChangeSection = name => event => {\n      let subjectListFiltered = [];\n      this.setState({\n        [name]: event.target.value,\n        subjectListFiltered\n      });\n    };\n\n    this.onDropUserParent = e => {\n      let file = e.target.files[0];\n      this.setState({\n        parentStudentphoto: file,\n        inputTextParent: file.name\n      });\n    };\n\n    this.onDrop = e => {\n      let file = e.target.files[0];\n      this.setState({\n        userPhotos: file,\n        inputText: file.name\n      });\n    };\n\n    this.handleNext = () => {\n      const {\n        activeStep\n      } = this.state;\n      var establishment_Name = \"\";\n      var establishment_Name_From_Id = \"\";\n\n      if (activeStep === 0) {\n        this.setState({\n          activeStep: activeStep + 1\n        });\n      }\n\n      if (activeStep === 1) {\n        if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n          establishment_Name_From_Id = this.state.establishmentList.filter(establishment => establishment.id === this.state.establishment_id);\n          establishment_Name = establishment_Name_From_Id[0].name;\n        } else {\n          establishment_Name_From_Id = this.state.establishmentList.filter(establishment => establishment.id == this.props.userProfile.establishment_id);\n          establishment_Name = establishment_Name_From_Id[0].name;\n        }\n\n        let data = {\n          name: this.state.name,\n          password: Math.random().toString(36).slice(2),\n          surname: this.state.surname,\n          gender: this.state.gender,\n          date_of_birth: this.state.date_of_birth,\n          address: this.state.address,\n          phone: this.state.phone,\n          status: true,\n          cin: this.state.cin,\n          realm: this.state.name,\n          zip_code: this.state.zip_code,\n          username: this.state.name + \".\" + this.state.surname,\n          email: this.state.email.toLowerCase(),\n          role_id: this.state.role_id,\n          Arabname: this.state.Arabname,\n          Arabsurname: this.state.Arabsurname,\n          photo: this.state.userPhotos,\n          establishment_id: this.props.userProfile.establishment_id,\n          role_id: this.state.role_id,\n          establishment_Name: establishment_Name\n        };\n        let apiEndpoint = `/users/create-user?access_token=${localStorage.token}`;\n        classService.post(apiEndpoint, data).then(response => {\n          if (response.status === 200) {\n            let newUser = {};\n            newUser = { ..._.last(response.data.user),\n              user: _.head(response.data.user)\n            };\n            this.setState({\n              activeStep: activeStep + 1,\n              profileId: response.data.user[1].id,\n              newUser\n            });\n          }\n        }).catch(err => {\n          this.setState({\n            communFailedAlert: true\n          });\n          timeout = setTimeout(() => this.setState({\n            communFailedAlert: false\n          }), 1000);\n        });\n      } else if (activeStep === 2 && this.state.role_id === roleIdStudent) {\n        var classID = this.state.class_id === 0 ? null : this.state.class_id;\n        let studentInformation = {\n          level_id: this.state.level_id,\n          section_id: this.state.section_id,\n          class_id: classID,\n          profile_id: this.state.profileId,\n          establishment_id: parseInt(this.props.userProfile.establishment_id, 10)\n        };\n        axios.post(`${baseUrl.baseUrl}/students/save-student-specific?access_token=${localStorage.token}`, studentInformation).then(response => {\n          if (response.status === 200) {\n            let studentData = { ...response.data.student\n            };\n            this.setState({\n              studentId: response.data.student.id,\n              communsuccessAlert: true,\n              studentData\n            });\n            timeout = setTimeout(() => this.setState({\n              activeStep: activeStep + 1,\n              communsuccessAlert: false\n            }), 3000);\n          }\n        }).catch(error => {\n          this.setState({\n            communFailedAlert: true\n          });\n          timeout = setTimeout(() => this.setState({\n            communFailedAlert: false\n          }), 1000);\n        });\n      }\n    };\n\n    this.handleBack = () => {\n      const {\n        activeStep\n      } = this.state;\n      this.setState({\n        activeStep: activeStep - 1\n      });\n    };\n\n    this.handleReset = () => {\n      this.setState({\n        activeStep: 0\n      });\n    };\n\n    this.isValidphoneNumber = number => {\n      const tel = parsePhoneNumberFromString(number);\n      let res = false;\n\n      if (tel) {\n        res = tel.isValid();\n      }\n\n      return res;\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      var etablishmentID = null;\n      var establishment_Name_From_Id = \"\";\n      var establishment_Name = \"\";\n\n      if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n        establishment_Name_From_Id = this.state.establishmentList.filter(establishment => establishment.id === this.state.establishment_id);\n        establishment_Name = establishment_Name_From_Id[0].name;\n      } else {\n        establishment_Name_From_Id = this.state.establishmentList.filter(establishment => establishment.id == this.props.userProfile.establishment_id);\n        establishment_Name = establishment_Name_From_Id[0].name;\n      }\n\n      if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n        etablishmentID = this.state.establishment_id;\n      } else {\n        etablishmentID = this.props.userProfile.establishment_id;\n      }\n\n      if (this.state.role_id === roleIdProfessor) {\n        let data = {\n          profile_id: this.state.profileId,\n          date_start_contract: this.state.date_start_contract,\n          date_end_contract: this.state.date_end_contract,\n          listOfSubjects: this.state.listOfSubjects\n        };\n        let apiEndpoint = `/professors/create-professor?access_token=${localStorage.token}`;\n        classService.post(apiEndpoint, data).then(response => {\n          if (response.status === 200) {\n            let profData = { ...this.state.newUser,\n              professors: [{ ...response.data.professor\n              }],\n              students: [],\n              parents: []\n            };\n            this.props.addNewUser(profData);\n            this.props.successAddUserHandling();\n            this.handleCancel();\n            this.props.cancel();\n          }\n        }).catch(err => {\n          this.setState({\n            communFailedAlert: true\n          });\n          timeout = setTimeout(() => this.setState({\n            communFailedAlert: false\n          }), 1000);\n        });\n      } else if (this.state.role_id === roleIdStudent) {\n        let studentParents = {\n          newParentsList: this.state.newParentsList,\n          affectedParents: this.state.affectedParents,\n          trustedPersonList: this.state.trustedPersonList,\n          studentId: this.state.studentId,\n          etablishmentID: etablishmentID\n        };\n        console.log(\"studentParents\", studentParents);\n        let apiEndpoint = `/students/add-parents?access_token=${localStorage.token}`;\n        classService.post(apiEndpoint, studentParents).then(response => {\n          console.log(\"/students/add-parents/response\", response);\n\n          if (response.status === 200) {\n            let student = { ...this.state.newUser,\n              students: [{ ...this.state.studentData\n              }],\n              professors: [],\n              parents: []\n            };\n            this.props.addNewUser(student);\n            this.props.successAddUserHandling();\n            this.handleCancel();\n            this.props.cancel();\n          }\n        }).catch(err => {\n          this.setState({\n            communFailedAlert: true\n          });\n          timeout = setTimeout(() => this.setState({\n            communFailedAlert: false\n          }), 1000);\n        });\n      } else {\n        let data = {\n          name: this.state.name,\n          password: Math.random().toString(36).slice(2),\n          surname: this.state.surname,\n          gender: this.state.gender,\n          date_of_birth: this.state.date_of_birth,\n          address: this.state.address,\n          phone: this.state.phone,\n          status: true,\n          cin: this.state.cin,\n          realm: this.state.name,\n          zip_code: this.state.zip_code,\n          username: this.state.name + \".\" + this.state.surname,\n          email: this.state.email.toLowerCase(),\n          role_id: this.state.role_id,\n          Arabname: this.state.Arabname,\n          Arabsurname: this.state.Arabsurname,\n          photo: this.state.userPhotos,\n          photoName: this.state.userPhotos,\n          establishment_id: establishment_Name_From_Id[0].id,\n          role_id: this.state.role_id,\n          establishment_Name: establishment_Name\n        };\n        let apiEndpoint = `/users/create-user?access_token=${localStorage.token}`;\n        classService.post(apiEndpoint, data).then(response => {\n          if (this.state.userPhotos !== null) {\n            let userId = response.data.user[0].id;\n            const fileExtension = this.state.userPhotos.name.replace(/^.*\\./, \"\");\n            const fileName = \"user\" + userId + \".\" + fileExtension;\n            var object = {};\n            object.file = this.state.userPhotos;\n            object.fileName = fileName;\n            const myNewFile = new File([object.file], fileName, {\n              type: object.file.type\n            });\n            let formadata = new FormData();\n            formadata.append(\"image\", myNewFile);\n            const URLuserPhoto = `${baseUrl.baseUrl}/containers/classebook.data.storage/upload?access_token=${localStorage.token}`;\n            axios({\n              url: URLuserPhoto,\n              method: \"POST\",\n              data: formadata\n            }).then(response => {\n              if (response) {\n                axios.patch(`${baseUrl.baseUrl}/users/` + userId + `?access_token=${localStorage.token}`, {\n                  photo: response.data.result.files.image[0].providerResponse.location\n                }).then(response => {\n                  console.log(\"updateddddddddddd \", response.data);\n                }).catch(function (error) {\n                  console.log(\"error\", error);\n                });\n              }\n            }).catch(err => {});\n          } else {}\n\n          if (response.status === 200) {\n            if (this.state.userPhotos) {\n              let newUser = { ..._.last(response.data.user),\n                professors: [],\n                students: [],\n                parents: []\n              };\n              this.props.uploadAdminPhoto(response.data.user[0].id, data, newUser);\n            } else {\n              let newUser = { ..._.last(response.data.user),\n                user: _.head(response.data.user),\n                professors: [],\n                students: [],\n                parents: []\n              };\n              this.props.addNewUser(newUser);\n            }\n\n            this.props.successAddUserHandling();\n            this.handleCancel();\n            this.props.cancel();\n          }\n        }).catch(err => {});\n      }\n    };\n\n    this.onChangeHandler = event => {\n      this.setState({\n        selectedFile: event.target.files[0]\n      });\n    };\n\n    this.onClickHandler = () => {\n      if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n        this.props.uploadExcel(this.state.selectedFile, this.state.establishment_id);\n      } else {\n        this.props.uploadExcel(this.state.selectedFile, this.props.userProfile.establishment_id);\n      }\n\n      this.props.cancelModalImport();\n    };\n\n    this.state = {\n      selectedFile: null,\n      //components Common information\n      name: \"\",\n      surname: \"\",\n      Arabname: \"\",\n      Arabsurname: \"\",\n      gender: \"\",\n      //date_of_birth: \"\",\n      email: \"\",\n      phone: \"\",\n      cin: \"\",\n      address: \"\",\n      zip_code: \"\",\n      status: true,\n      activeStep: 0,\n      inputText: \"\",\n      userPhotos: null,\n      emailVerified: false,\n      steps: 1,\n      date_of_birth: moment().year() - 6 + \"-01-01\",\n      //components role information\n      userId: \"\",\n      establishment_id: 0,\n      role_id: \"\",\n      //components specific information\n      date_start_contract: \"\",\n      Disable_studentsection: true,\n      date_end_contract: \"\",\n      listOfSubjects: [],\n      serviceFilteredByEstablishment: [],\n      studentClassesByLevelSectionID: [],\n      studentsectionByLevels: [],\n      class_id: \"\",\n      //components Parent information\n      newParent: false,\n      trustedPerson: false,\n      newParentsList: [],\n      allParentList: [],\n      affectedParents: [],\n      trustedPersonList: [],\n      nameParent: \"\",\n      surnameParent: \"\",\n      genderParent: \"\",\n      date_of_birthParent: moment().year() - 18 + \"-01-01\",\n      addressParent: \"\",\n      phoneParent: \"\",\n      statusParent: true,\n      cinParent: \"\",\n      zip_codeParent: \"\",\n      usernameParent: \"\",\n      emailParent: \"\",\n      inputTextParent: \"\",\n      arabicSurnameParent: \"\",\n      arabicNameparent: \"\",\n      parentStudentphoto: null,\n      emailVerifiedParent: false,\n      countrie_locale: \"\",\n      listOfSubjects: [{\n        id: 0,\n        classId: 0,\n        subject_id: 0,\n        subjects: []\n      }],\n      establishmentList: [],\n      classeList: [],\n      classListFiltered: [],\n      estabType: 0,\n      serviceId: [],\n      profileId: \"\",\n      studentId: \"\",\n      communsuccessAlert: false,\n      communFailedAlert: false,\n      establishment_Name: \"\",\n      newUser: {},\n      studentData: {},\n      section_id: \"\",\n      level_id: \"\"\n    };\n    this.getStepContent = this.getStepContent.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangePhone = this.handleChangePhone.bind(this);\n    this.handleChangeParentPhone = this.handleChangeParentPhone.bind(this);\n    this.handleChangeRole = this.handleChangeRole.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleChangeLevel = this.handleChangeLevel.bind(this);\n    this.handleChangeSection = this.handleChangeSection.bind(this);\n    this.handleChangeListSubjects = this.handleChangeListSubjects.bind(this);\n    this.handleChangeService = this.handleChangeService.bind(this);\n    this.handleChangeEstablishment = this.handleChangeEstablishment.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n    this.onDropUserParent = this.onDropUserParent.bind(this);\n    this.addNewSubject = this.addNewSubject.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.addNewParentFormulaire = this.addNewParentFormulaire.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleReset = this.handleReset.bind(this);\n    this.getSteps = this.getSteps.bind(this);\n    this.handleChangestudentLevel = this.handleChangestudentLevel.bind(this);\n    this.handleChangestudentSection = this.handleChangestudentSection.bind(this);\n    this.handleChangeDate = this.handleChangeDate.bind(this);\n    this.handleChangeDateParent = this.handleChangeDateParent.bind(this);\n    this.addNewTrustedParentForm = this.addNewTrustedParentForm.bind(this);\n    this.handleCancelImport = this.handleCancelImport.bind(this);\n    this.deleteChoice = this.deleteChoice.bind(this);\n  }\n\n  handleChangeListSubjects(event, name, index) {\n    if (name === \"classId\") {\n      let subjectsList = this.props.classesSubjects.filter(element => element.id === event.target.value);\n      let newListSubjects = this.state.listOfSubjects.map((objSubject, i) => i === index ? { ...objSubject,\n        [name]: event.target.value,\n        subjects: subjectsList[0].assignementClassSubject\n      } : objSubject);\n      this.setState({\n        listOfSubjects: newListSubjects\n      });\n    } else if (name === \"subject_id\") {\n      let newListSubjects = this.state.listOfSubjects.map((objSubject, i) => i === index ? { ...objSubject,\n        [name]: event.target.value\n      } : objSubject);\n      this.setState({\n        listOfSubjects: newListSubjects\n      });\n    }\n  }\n\n  getStepContent(stepIndex, roleList, establishmentList, values, handleChange, handleBlur, touched, errors) {\n    switch (this.state.activeStep) {\n      case 0:\n        return /*#__PURE__*/React.createElement(CommonInformation, {\n          values: this.state,\n          handleChange: this.handleChange,\n          onDrop: this.onDrop,\n          handleChangeDate: this.handleChangeDate,\n          handleChangePhone: this.handleChangePhone,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 11\n          }\n        });\n\n      case 1:\n        return /*#__PURE__*/React.createElement(RoleInformation, {\n          values: this.state,\n          handleChangeRole: this.handleChangeRole,\n          handleChangeEstablishment: this.handleChangeEstablishment,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 536,\n            columnNumber: 11\n          }\n        });\n\n      case 2:\n        return /*#__PURE__*/React.createElement(SpecificInformation, {\n          classSections: this.props.classSections,\n          classLevels: this.props.classLevels,\n          levels: this.props.levels,\n          sections: this.props.sections,\n          values: this.state,\n          handleChange: this.handleChange,\n          handleChangeClass: this.handleChangeClass,\n          handleChangeService: this.handleChangeService,\n          handleChangeClass: this.handleChangeClass,\n          handleChangeListSubjects: this.handleChangeListSubjects,\n          addNewSubject: this.addNewSubject,\n          handleChangestudentLevel: this.handleChangestudentLevel,\n          handleChangestudentSection: this.handleChangestudentSection // classeSettings={this.props.classeSettings}\n          // subjects={this.props.subjects}\n          ,\n          classesSubjects: this.props.classesSubjects,\n          deleteChoice: this.deleteChoice,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 11\n          }\n        });\n\n      case 3:\n        return /*#__PURE__*/React.createElement(ParentInformation, {\n          values: this.state,\n          handleChange: this.handleChange,\n          onDropUserParent: this.onDropUserParent,\n          addNewParent: this.addNewParent,\n          addNewParentFormulaire: this.addNewParentFormulaire,\n          handleChangeSelectParent: this.handleChangeSelectParent,\n          validateZipCode: this.validateZipCode,\n          handleChangeDateParent: this.handleChangeDateParent,\n          handleChangeParentPhone: this.handleChangeParentPhone,\n          trustedPerson: this.state.trustedPerson,\n          addNewTrustedParentForm: this.addNewTrustedParentForm,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 567,\n            columnNumber: 11\n          }\n        });\n\n      default:\n        return \"Uknown stepIndex\";\n    }\n  }\n\n  getSteps() {\n    switch (this.state.steps) {\n      case 0:\n      case 1:\n      case 2:\n      case 4:\n      case 6:\n      case 7:\n        return [/*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.accountInfo\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.role\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 11\n          }\n        })];\n\n      case 3:\n        return [/*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.accountInfo\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 600,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.role\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.specInfo\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 602,\n            columnNumber: 11\n          }\n        })];\n\n      case 5:\n        return [/*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.accountInfo\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 607,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.role\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.specInfo\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 609,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.parentInfoOfStudent\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 610,\n            columnNumber: 11\n          }\n        })];\n\n      default:\n        return \"Uknown stepIndex\";\n    }\n  }\n\n  Validation_Steps(steps) {\n    // this methode is to able and disable next and finish button when we insert any user (created by bechir)\n    if (this.state.activeStep === 0) {\n      if (this.state.countrie_locale === \"ar\") {\n        if (this.state.name.length !== 0 && this.state.surname.length !== 0 && this.isemail(this.state.email) === true && this.state.email.length !== 0 && this.state.Arabname.length !== 0 && this.state.Arabsurname.length !== 0 && this.isValidphoneNumber(this.state.phone) === true) return true;else return false;\n      } else {\n        if (this.state.name.length !== 0 && this.state.surname.length !== 0 && this.isemail(this.state.email) === true && this.state.email.length !== 0 && this.isValidphoneNumber(this.state.phone) === true) return true;else return false;\n      }\n    }\n\n    if (this.state.activeStep === 1 && this.props.userProfile.role_id === roleIdSuperAdmin) {\n      if (this.state.role_id !== 0 && this.state.establishment_id !== 0) return true;else return false;\n    }\n\n    if (this.state.activeStep === 2 && this.state.role_id === 5) {\n      if (this.state.level_id === undefined) return false;else return true;\n    }\n\n    if (this.state.activeStep === 2 && this.state.role_id === roleIdProfessor) {\n      if (this.state.listOfSubjects.length === 1 && this.state.listOfSubjects[0].subject_id === 0) {\n        return false;\n      } else return true;\n    } else if (this.state.activeStep === 3 && this.state.role_id === roleIdStudent) {\n      if (this.state.newParentsList.length === 0 && this.state.affectedParents.length === 0) return false;else return true;\n    }\n\n    if (this.state.activeStep === 1 && (this.props.userProfile.role_id === roleIdAdmin || this.props.userProfile.role_id === roleIdDirector)) {\n      if (this.state.role_id == 0) return false;else return true;\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      steps: this.props.userProfile.role_id\n    });\n    this.props.getLevel(this.props.userProfile.establishment_id, this.props.userProfile.school_year_id);\n    this.props.getSections();\n\n    if (this.props.userProfile.role_id === roleIdAdmin || this.props.userProfile.role_id === roleIdDirector) {\n      axios.get(`${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[where][and][0][establishment_id]=` + this.props.userProfile.establishment_id + `&filter[where][and][1][role_id]=` + 4).then(res => {\n        const allEstablishmentParents = res.data.map(element => element.user);\n        this.setState({\n          allParentList: allEstablishmentParents\n        });\n      });\n      this.props.getClassesByEstablishmentId(this.props.userProfile.establishment_id, this.props.userProfile.school_year_id);\n      this.props.getServicesByEstablishmentId(this.props.userProfile.establishment_id);\n      axios.get(`${baseUrl.baseUrl}/establishments/` + this.props.userProfile.establishment_id + `?access_token=${localStorage.token}`).then(res => {\n        this.setState({\n          estabType: res.data.estab_type_id\n        });\n        axios.get(`${baseUrl.baseUrl}/countries/` + res.data.countries_id + `?access_token=${localStorage.token}`).then(res => {\n          this.setState({\n            countrie_locale: res.data.locale\n          });\n        });\n      });\n      axios.get(`${baseUrl.baseUrl}/roles?access_token=${localStorage.token}`).then(res => {\n        let data = res.data;\n        const roleList = data.filter(element => element.id !== 1);\n        this.setState({\n          roleList\n        });\n      });\n    } else {\n      axios.get(`${baseUrl.baseUrl}/roles?access_token=${localStorage.token}`).then(res => {\n        const roleList = res.data;\n        this.setState({\n          roleList\n        });\n      });\n    }\n\n    axios.get(`${baseUrl.baseUrl}/establishments?access_token=${localStorage.token}`).then(res => {\n      const establishmentList = res.data.filter(element => element.status);\n      this.setState({\n        establishmentList\n      });\n    });\n    axios.get(`${baseUrl.baseUrl}/subjects?access_token=${localStorage.token}`).then(res => {\n      const subjectList = res.data;\n      this.setState({\n        subjectList\n      });\n    });\n  }\n\n  handleCancelImport() {\n    this.props.cancelModalImport();\n  }\n\n  handleCancel() {\n    this.setState({\n      activeStep: 0,\n      previewVisible: false,\n      name: \"\",\n      surname: \"\",\n      gender: \"\",\n      date_of_birth: moment().year() - 6 + \"-01-01\",\n      address: \"\",\n      phone: \"\",\n      zip_code: \"\",\n      status: true,\n      cin: \"\",\n      realm: \"\",\n      password: \"\",\n      username: \"\",\n      email: \"\",\n      emailVerified: false,\n      nameParent: \"\",\n      surnameParent: \"\",\n      genderParent: \"\",\n      date_of_birthParent: moment().year() - 18 + \"-01-01\",\n      addressParent: \"\",\n      phoneParent: \"\",\n      statusParent: true,\n      cinParent: \"\",\n      zip_codeParent: \"\",\n      realmParent: \"\",\n      passwordParent: \"\",\n      usernameParent: \"\",\n      emailParent: \"\",\n      emailVerifiedParent: false,\n      date_start_contract: \"\",\n      date_end_contract: \"\",\n      establishment_id: 0,\n      role_id: 0,\n      subject_id: \"\",\n      class_id: \"\",\n      serviceId: [],\n      userPhotos: null,\n      parentStudentphoto: null,\n      Arabname: \"\",\n      Arabsurname: \"\",\n      affectedParents: [],\n      newParentsList: [],\n      section_id: \"\",\n      level_id: \"\",\n      listOfSubjects: []\n    }); // this.props.close();\n  }\n\n  isemail(value) {\n    if (value.length > 0) return /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@(([[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(value);else return true;\n  }\n\n  render() {\n    const steps = this.getSteps() ? this.getSteps() : 0;\n    const {\n      activeStep,\n      roleList,\n      establishmentList\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1074,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Modal, {\n      isOpen: this.props.open,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1075,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      toggle: this.props.cancel,\n      className: \"modal-box-header bg-primary text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1076,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"pages.stuppUserPage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1080,\n        columnNumber: 14\n      }\n    })), /*#__PURE__*/React.createElement(ModalBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1082,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"container\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1083,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1084,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1085,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Stepper, {\n      activeStep: activeStep,\n      alternativeLabel: true,\n      className: \"horizontal-stepper-linear\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1086,\n        columnNumber: 19\n      }\n    }, steps.map((label, index) => {\n      return /*#__PURE__*/React.createElement(Step, {\n        key: label,\n        className: `horizontal-stepper ${index === activeStep ? \"active\" : \"\"}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1093,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(StepLabel, {\n        className: \"stepperlabel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1099,\n          columnNumber: 27\n        }\n      }, label));\n    }))), this.state.activeStep === steps.length ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1108,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      className: \"my-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1109,\n        columnNumber: 21\n      }\n    }, \"All steps completed - you\\\"re finished\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: this.handleReset,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1112,\n        columnNumber: 21\n      }\n    }, \"Reset\")) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1115,\n        columnNumber: 19\n      }\n    }, this.getStepContent(activeStep, roleList), /*#__PURE__*/React.createElement(Button, {\n      disabled: activeStep === 0,\n      onClick: this.handleBack,\n      className: \"mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1117,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"stuppUser.button.back\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1122,\n        columnNumber: 24\n      }\n    })), activeStep === steps.length - 1 ? /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      type: \"submit\",\n      disabled: this.Validation_Steps(steps) ? false : true,\n      className: \"jr-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1126,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"stuppUser.button.finish\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1133,\n        columnNumber: 26\n      }\n    })) : /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: this.handleNext,\n      disabled: this.Validation_Steps(steps) ? false : true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1136,\n        columnNumber: 23\n      }\n    }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"stuppUser.button.Next\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1143,\n        columnNumber: 26\n      }\n    }))))))), /*#__PURE__*/React.createElement(Modal, {\n      isOpen: this.props.openModalImport,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1153,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      toggle: this.handleCancelImport,\n      className: \"modal-box-header bg-primary text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1154,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"pages.stuppUserPage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1158,\n        columnNumber: 14\n      }\n    })), /*#__PURE__*/React.createElement(ModalBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1160,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"container\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1161,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(RoleContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1162,\n        columnNumber: 15\n      }\n    }, ({\n      role\n    }) => /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"user-import-excel:visit\",\n      yes: () => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1168,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Can, {\n        role: role,\n        perform: \"user-import-excel-filter-establishment:visit\",\n        yes: () => /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-sm-6\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1173,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(TextField, {\n          required: true,\n          id: \"establishment\",\n          select: true,\n          label: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"components.student.formadd.establishment\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1179,\n              columnNumber: 35\n            }\n          }),\n          value: this.state.establishment_id,\n          onChange: this.handleChange(\"establishment_id\"),\n          SelectProps: {},\n          margin: \"normal\",\n          fullWidth: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1174,\n            columnNumber: 31\n          }\n        }, establishmentList.map(establishment => /*#__PURE__*/React.createElement(MenuItem, {\n          key: establishment.id,\n          value: establishment.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1188,\n            columnNumber: 35\n          }\n        }, establishment.name)))),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1169,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-12 text-center \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1199,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1200,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1201,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        name: \"file\",\n        onChange: this.onChangeHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1202,\n          columnNumber: 27\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-12 text-left \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1208,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1209,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1210,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        className: \"jr-btn bg-indigo text-white \",\n        onClick: this.onClickHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1211,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.establishments.formadd.buttonAdd\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1217,\n          columnNumber: 31\n        }\n      })), /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        className: \"jr-btn bg-grey text-white \",\n        onClick: this.handleCancelImport,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1220,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.establishments.formadd.buttonCancel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1226,\n          columnNumber: 31\n        }\n      })))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1164,\n        columnNumber: 19\n      }\n    }))))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    establishments: state.establishment.remoteEstablishments,\n    services: state.service.remoteServices,\n    userProfile: state.auth.userProfile,\n    users: state.stuppUsers.remoteStuppUsers,\n    classLevels: state.ClassLevels.remoteLevels,\n    classSections: state.classSections.remoteSections,\n    classes: state.classes,\n    sections: state.SectionsReducer.Section,\n    classeSettings: state.ClassSettingsReducer.classSettings,\n    levels: state.levelsReducer.levels\n  };\n}\n\nexport default connect(mapStateToProps, {\n  successHandling,\n  getAllUsers,\n  getServices,\n  getEstablishment,\n  getUserProfile,\n  getSections,\n  getClassesByEstablishmentId,\n  getServicesByEstablishmentId,\n  uploadExcel,\n  uploadUserPhoto,\n  addNewUser,\n  successAddUserHandling,\n  uploadAdminPhoto,\n  uploadProfAndStudentPhoto,\n  getLevel\n})(AddUser);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/UsersManagement/AddUser.js"],"names":["React","Component","Modal","ModalBody","ModalHeader","IntlMessages","Button","Stepper","Step","StepLabel","Typography","CommonInformation","RoleInformation","SpecificInformation","ParentInformation","axios","baseUrl","connect","getEstablishment","getServices","getUserProfile","getAllUsers","addNewUser","getSections","getClassesByEstablishmentId","getServicesByEstablishmentId","successHandling","uploadExcel","uploadUserPhoto","successAddUserHandling","uploadAdminPhoto","uploadProfAndStudentPhoto","classService","roleIdSuperAdmin","roleIdAdmin","roleIdProfessor","roleIdStudent","roleIdDirector","TextField","MenuItem","Can","RoleContext","moment","parsePhoneNumberFromString","_","getLevel","timeout","AddUser","constructor","props","addNewTrustedParentForm","setState","trustedPerson","state","newParent","handleChangePhone","value","phone","handleChangeParentPhone","phoneParent","addNewParentFormulaire","addNewParent","parent","nameParent","surnameParent","genderParent","date_of_birthParent","addressParent","statusParent","cinParent","zip_codeParent","realmParent","passwordParent","usernameParent","emailParent","parentStudentphoto","emailVerifiedParent","arabicSurnameParent","arabicNameparent","trustedPersonList","push","newParentsList","inputTextParent","deleteChoice","index","listOfSubjectsClasses","listOfSubjects","filter","element","i","console","log","addNewSubject","map","id","classId","subject_id","subjects","isAdded","handleChangestudentLevel","name","event","level_id","target","handleChangestudentSection","levelId","sectionId","section_id","studentfiltredClasses","classeSettings","classe","fk_id_level_v4","fk_id_section_v4","status","studentClassesByLevelSectionID","handleChangeService","serviceId","handleChangeSelectParent","affectedParents","handleChange","handleChangeDate","date","date_of_birth","handleChangeDateParent","handleChangeRole","steps","handleChangeClass","userProfile","role_id","establishment_id","handleChangeEstablishment","type_establish","establishmentList","find","estabType","estab_type_id","get","localStorage","token","then","res","allEstablishmentParents","data","user","allParentList","handleChangeLevel","sectionDisabled","subjectListFiltered","handleChangeSection","onDropUserParent","e","file","files","onDrop","userPhotos","inputText","handleNext","activeStep","establishment_Name","establishment_Name_From_Id","establishment","password","Math","random","toString","slice","surname","gender","address","cin","realm","zip_code","username","email","toLowerCase","Arabname","Arabsurname","photo","apiEndpoint","post","response","newUser","last","head","profileId","catch","err","communFailedAlert","setTimeout","classID","class_id","studentInformation","profile_id","parseInt","studentData","student","studentId","communsuccessAlert","error","handleBack","handleReset","isValidphoneNumber","number","tel","isValid","handleSubmit","preventDefault","etablishmentID","date_start_contract","date_end_contract","profData","professors","professor","students","parents","handleCancel","cancel","studentParents","photoName","userId","fileExtension","replace","fileName","object","myNewFile","File","type","formadata","FormData","append","URLuserPhoto","url","method","patch","result","image","providerResponse","location","onChangeHandler","selectedFile","onClickHandler","cancelModalImport","emailVerified","year","Disable_studentsection","serviceFilteredByEstablishment","studentsectionByLevels","countrie_locale","classeList","classListFiltered","getStepContent","bind","handleChangeListSubjects","getSteps","handleCancelImport","subjectsList","classesSubjects","newListSubjects","objSubject","assignementClassSubject","stepIndex","roleList","values","handleBlur","touched","errors","classSections","classLevels","levels","sections","validateZipCode","Validation_Steps","length","isemail","undefined","componentDidMount","school_year_id","countries_id","locale","subjectList","previewVisible","test","render","open","label","openModalImport","role","mapStateToProps","establishments","remoteEstablishments","services","service","remoteServices","auth","users","stuppUsers","remoteStuppUsers","ClassLevels","remoteLevels","remoteSections","classes","SectionsReducer","Section","ClassSettingsReducer","classSettings","levelsReducer"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Modal, ModalBody, ModalHeader } from \"reactstrap\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport Button from \"@material-ui/core/Button\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CommonInformation from \"./UserInformation/CommonInformation\";\nimport RoleInformation from \"./UserInformation/RoleInformation\";\nimport SpecificInformation from \"./UserInformation/SpecificInformation\";\nimport ParentInformation from \"./UserInformation/ParentInformation\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../../../config/config\";\nimport { connect } from \"react-redux\";\nimport { getEstablishment } from \"../../../../../actions/establishmentAction\";\nimport { getServices } from \"../../../../../actions/ServiceAction\";\nimport { getUserProfile } from \"../../../../../actions/Auth\";\nimport {\n  getAllUsers,\n  addNewUser,\n} from \"../../../../../actions/stuppUserAction\";\nimport { getSections } from \"../../../../../actions/sectionAction\";\nimport { getClassesByEstablishmentId } from \"../../../../../actions/classeAction\";\nimport { getServicesByEstablishmentId } from \"../../../../../actions/ServiceAction\";\nimport {\n  successHandling,\n  uploadExcel,\n  uploadUserPhoto,\n  successAddUserHandling,\n  uploadAdminPhoto,\n  uploadProfAndStudentPhoto,\n} from \"../../../../../actions/stuppUserAction\";\nimport { classService } from \"../../../../../_services/class.service\";\nimport {\n  roleIdSuperAdmin,\n  roleIdAdmin,\n  roleIdProfessor,\n  roleIdStudent,\n  roleIdDirector,\n} from \"../../../../../config/config\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Can from \"../../../../../can\";\nimport { RoleContext } from \"../../../../../Context\";\nimport moment from \"moment\";\nimport { parsePhoneNumberFromString } from \"libphonenumber-js\";\nimport _ from \"lodash\";\nimport { getLevel } from \"../../../../../actions/LevelAction\";\n\nlet timeout;\nclass AddUser extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedFile: null,\n      //components Common information\n      name: \"\",\n      surname: \"\",\n      Arabname: \"\",\n      Arabsurname: \"\",\n      gender: \"\",\n      //date_of_birth: \"\",\n      email: \"\",\n      phone: \"\",\n      cin: \"\",\n      address: \"\",\n      zip_code: \"\",\n      status: true,\n      activeStep: 0,\n      inputText: \"\",\n      userPhotos: null,\n      emailVerified: false,\n      steps: 1,\n      date_of_birth: moment().year() - 6 + \"-01-01\",\n\n      //components role information\n      userId: \"\",\n      establishment_id: 0,\n      role_id: \"\",\n      //components specific information\n      date_start_contract: \"\",\n      Disable_studentsection: true,\n      date_end_contract: \"\",\n      listOfSubjects: [],\n      serviceFilteredByEstablishment: [],\n      studentClassesByLevelSectionID: [],\n      studentsectionByLevels: [],\n      class_id: \"\",\n      //components Parent information\n      newParent: false,\n      trustedPerson: false,\n      newParentsList: [],\n      allParentList: [],\n      affectedParents: [],\n      trustedPersonList: [],\n      nameParent: \"\",\n      surnameParent: \"\",\n      genderParent: \"\",\n      date_of_birthParent: moment().year() - 18 + \"-01-01\",\n      addressParent: \"\",\n      phoneParent: \"\",\n      statusParent: true,\n      cinParent: \"\",\n      zip_codeParent: \"\",\n      usernameParent: \"\",\n      emailParent: \"\",\n      inputTextParent: \"\",\n      arabicSurnameParent: \"\",\n      arabicNameparent: \"\",\n      parentStudentphoto: null,\n      emailVerifiedParent: false,\n      countrie_locale: \"\",\n      listOfSubjects: [\n        {\n          id: 0,\n          classId: 0,\n          subject_id: 0,\n          subjects: [],\n        },\n      ],\n      establishmentList: [],\n      classeList: [],\n      classListFiltered: [],\n      estabType: 0,\n      serviceId: [],\n      profileId: \"\",\n      studentId: \"\",\n      communsuccessAlert: false,\n      communFailedAlert: false,\n      establishment_Name: \"\",\n      newUser: {},\n      studentData: {},\n      section_id: \"\",\n      level_id: \"\",\n    };\n    this.getStepContent = this.getStepContent.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangePhone = this.handleChangePhone.bind(this);\n    this.handleChangeParentPhone = this.handleChangeParentPhone.bind(this);\n    this.handleChangeRole = this.handleChangeRole.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleChangeLevel = this.handleChangeLevel.bind(this);\n    this.handleChangeSection = this.handleChangeSection.bind(this);\n    this.handleChangeListSubjects = this.handleChangeListSubjects.bind(this);\n    this.handleChangeService = this.handleChangeService.bind(this);\n    this.handleChangeEstablishment = this.handleChangeEstablishment.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n    this.onDropUserParent = this.onDropUserParent.bind(this);\n    this.addNewSubject = this.addNewSubject.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.addNewParentFormulaire = this.addNewParentFormulaire.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleReset = this.handleReset.bind(this);\n    this.getSteps = this.getSteps.bind(this);\n    this.handleChangestudentLevel = this.handleChangestudentLevel.bind(this);\n    this.handleChangestudentSection = this.handleChangestudentSection.bind(\n      this\n    );\n    this.handleChangeDate = this.handleChangeDate.bind(this);\n    this.handleChangeDateParent = this.handleChangeDateParent.bind(this);\n    this.addNewTrustedParentForm = this.addNewTrustedParentForm.bind(this);\n    this.handleCancelImport = this.handleCancelImport.bind(this);\n    this.deleteChoice = this.deleteChoice.bind(this);\n  }\n  addNewTrustedParentForm = () => {\n    this.setState({\n      trustedPerson: !this.state.trustedPerson,\n      newParent: false,\n    });\n  };\n  handleChangePhone = (value) => {\n    this.setState({ phone: value });\n  };\n  handleChangeParentPhone = (value) => {\n    this.setState({ phoneParent: value });\n  };\n  addNewParentFormulaire = () => {\n    this.setState({ newParent: !this.state.newParent, trustedPerson: false });\n  };\n  addNewParent = () => {\n    var parent = {\n      nameParent: this.state.nameParent,\n      surnameParent: this.state.surnameParent,\n      genderParent: this.state.genderParent,\n      date_of_birthParent: this.state.date_of_birthParent,\n      addressParent: this.state.addressParent,\n      phoneParent: this.state.phoneParent,\n      statusParent: true,\n      cinParent: this.state.cinParent,\n      zip_codeParent: this.state.zip_codeParent,\n      realmParent: this.state.nameParent,\n      passwordParent: \" \",\n      usernameParent: this.state.nameParent + \".\" + this.state.surnameParent,\n      emailParent: this.state.emailParent,\n      parentStudentphoto: this.state.parentStudentphoto,\n      emailVerifiedParent: false,\n      parentStudentphoto: this.state.parentStudentphoto,\n      arabicSurnameParent: this.state.arabicSurnameParent,\n      arabicNameparent: this.state.arabicNameparent,\n    };\n    if (this.state.trustedPerson) {\n      this.state.trustedPersonList.push(parent);\n    } else {\n      this.state.newParentsList.push(parent);\n    }\n\n    this.setState({\n      nameParent: \"\",\n      surnameParent: \"\",\n      genderParent: \"\",\n      date_of_birthParent: \"\",\n      addressParent: \"\",\n      phoneParent: \"\",\n      statusParent: true,\n      cinParent: \"\",\n      zip_codeParent: \"\",\n      realmParent: \"\",\n      passwordParent: \" \",\n      usernameParent: \"\",\n      emailParent: \"\",\n      emailVerifiedParent: false,\n      parentStudentphoto: null,\n      inputTextParent: \"\",\n      newParent: false,\n      trustedPerson: false,\n      arabicSurnameParent: \"\",\n      arabicNameparent: \"\",\n    });\n  };\n\n  deleteChoice = (index) => {\n    let listOfSubjectsClasses = this.state.listOfSubjects.filter(\n      (element, i) => i !== index\n    );\n    this.setState({ listOfSubjects: listOfSubjectsClasses });\n    console.log(\"is ------\", index);\n    console.log(\"listOfSubjectsClasses\", listOfSubjectsClasses);\n  };\n\n  addNewSubject = (index) => {\n    let listOfSubjects = [];\n    this.state.listOfSubjects.map((element) => {\n      listOfSubjects.push({\n        id: element.id,\n        classId: element.classId,\n        subject_id: element.subject_id,\n        subjects: element.subjects,\n        isAdded: true,\n      });\n    });\n    listOfSubjects.push({\n      id: index,\n      classId: 0,\n      subject_id: 0,\n      subjects: [],\n      isAdded: false,\n    });\n    console.log(\"listOfSubjects\", listOfSubjects);\n\n    this.setState({ listOfSubjects });\n  };\n  handleChangeListSubjects(event, name, index) {\n    if (name === \"classId\") {\n      let subjectsList = this.props.classesSubjects.filter(\n        (element) => element.id === event.target.value\n      );\n      let newListSubjects = this.state.listOfSubjects.map((objSubject, i) =>\n        i === index\n          ? {\n              ...objSubject,\n              [name]: event.target.value,\n              subjects: subjectsList[0].assignementClassSubject,\n            }\n          : objSubject\n      );\n      this.setState({ listOfSubjects: newListSubjects });\n    } else if (name === \"subject_id\") {\n      let newListSubjects = this.state.listOfSubjects.map((objSubject, i) =>\n        i === index ? { ...objSubject, [name]: event.target.value } : objSubject\n      );\n      this.setState({ listOfSubjects: newListSubjects });\n    }\n  }\n\n  handleChangestudentLevel = (name) => (event) => {\n    this.setState({ level_id: event.target.value });\n  };\n\n  handleChangestudentSection = (name) => (event) => {\n    const levelId = this.state.level_id;\n    const sectionId = event.target.value;\n    this.setState({ section_id: sectionId });\n    var studentfiltredClasses = this.props.classeSettings.filter(\n      (classe) =>\n        classe.fk_id_level_v4 === levelId &&\n        classe.fk_id_section_v4 === sectionId &&\n        classe.status\n    );\n    this.setState({ studentClassesByLevelSectionID: studentfiltredClasses });\n  };\n\n  handleChangeService = (name) => (event) => {\n    this.setState({ serviceId: event.target.value });\n  };\n\n  handleChangeSelectParent = (name) => (event) => {\n    this.setState({ affectedParents: event.target.value });\n  };\n\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n\n  handleChangeDate = (date) => {\n    this.setState({ date_of_birth: date });\n  };\n\n  handleChangeDateParent = (date) => {\n    this.setState({ date_of_birthParent: date });\n  };\n\n  handleChangeRole = (name) => (event) => {\n    this.setState({ [name]: event.target.value, steps: event.target.value });\n  };\n\n  handleChangeClass = (name) => (event) => {\n    if (this.props.userProfile.role_id === roleIdAdmin) {\n      this.setState({\n        establishment_id: this.props.userProfile.establishment_id,\n      });\n    }\n    this.setState({ [name]: event.target.value });\n  };\n\n  handleChangeEstablishment = (name) => (event) => {\n    var type_establish = this.state.establishmentList.find(\n      (element) => element.id === event.target.value\n    );\n    this.setState({ [name]: event.target.value });\n    this.setState({\n      estabType: type_establish.estab_type_id,\n      establishment_id: event.target.value,\n    });\n    this.props.getClassesByEstablishmentId(event.target.value);\n    this.props.getServicesByEstablishmentId(event.target.value);\n\n    axios\n      .get(\n        `${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[where][and][0][establishment_id]=` +\n          event.target.value +\n          `&filter[where][and][1][role_id]=` +\n          4\n      )\n      .then((res) => {\n        const allEstablishmentParents = res.data.map((element) => element.user);\n        this.setState({\n          allParentList: allEstablishmentParents,\n        });\n      });\n  };\n\n  handleChangeLevel = (event) => {\n    this.setState({ level_id: event.target.value });\n    event.target.value > 10\n      ? this.setState({ level_id: event.target.value, sectionDisabled: false })\n      : this.setState({ level_id: event.target.value, sectionDisabled: true });\n    let subjectListFiltered = [];\n    this.setState({ subjectListFiltered });\n  };\n\n  handleChangeSection = (name) => (event) => {\n    let subjectListFiltered = [];\n    this.setState({ [name]: event.target.value, subjectListFiltered });\n  };\n\n  onDropUserParent = (e) => {\n    let file = e.target.files[0];\n    this.setState({ parentStudentphoto: file, inputTextParent: file.name });\n  };\n\n  onDrop = (e) => {\n    let file = e.target.files[0];\n    this.setState({ userPhotos: file, inputText: file.name });\n  };\n\n  handleNext = () => {\n    const { activeStep } = this.state;\n    var establishment_Name = \"\";\n    var establishment_Name_From_Id = \"\";\n    if (activeStep === 0) {\n      this.setState({ activeStep: activeStep + 1 });\n    }\n    if (activeStep === 1) {\n      if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n        establishment_Name_From_Id = this.state.establishmentList.filter(\n          (establishment) => establishment.id === this.state.establishment_id\n        );\n        establishment_Name = establishment_Name_From_Id[0].name;\n      } else {\n        establishment_Name_From_Id = this.state.establishmentList.filter(\n          (establishment) =>\n            establishment.id == this.props.userProfile.establishment_id\n        );\n        establishment_Name = establishment_Name_From_Id[0].name;\n      }\n      let data = {\n        name: this.state.name,\n        password: Math.random()\n          .toString(36)\n          .slice(2),\n        surname: this.state.surname,\n        gender: this.state.gender,\n        date_of_birth: this.state.date_of_birth,\n        address: this.state.address,\n        phone: this.state.phone,\n        status: true,\n        cin: this.state.cin,\n        realm: this.state.name,\n        zip_code: this.state.zip_code,\n        username: this.state.name + \".\" + this.state.surname,\n        email: this.state.email.toLowerCase(),\n        role_id: this.state.role_id,\n        Arabname: this.state.Arabname,\n        Arabsurname: this.state.Arabsurname,\n        photo: this.state.userPhotos,\n        establishment_id: this.props.userProfile.establishment_id,\n        role_id: this.state.role_id,\n        establishment_Name: establishment_Name,\n      };\n\n      let apiEndpoint = `/users/create-user?access_token=${localStorage.token}`;\n      classService\n        .post(apiEndpoint, data)\n        .then((response) => {\n          if (response.status === 200) {\n            let newUser = {};\n\n            newUser = {\n              ..._.last(response.data.user),\n              user: _.head(response.data.user),\n            };\n\n            this.setState({\n              activeStep: activeStep + 1,\n              profileId: response.data.user[1].id,\n              newUser,\n            });\n          }\n        })\n        .catch((err) => {\n          this.setState({ communFailedAlert: true });\n          timeout = setTimeout(\n            () => this.setState({ communFailedAlert: false }),\n            1000\n          );\n        });\n    } else if (activeStep === 2 && this.state.role_id === roleIdStudent) {\n      var classID = this.state.class_id === 0 ? null : this.state.class_id;\n      let studentInformation = {\n        level_id: this.state.level_id,\n        section_id: this.state.section_id,\n        class_id: classID,\n        profile_id: this.state.profileId,\n        establishment_id: parseInt(this.props.userProfile.establishment_id, 10),\n      };\n      axios\n        .post(\n          `${baseUrl.baseUrl}/students/save-student-specific?access_token=${localStorage.token}`,\n          studentInformation\n        )\n        .then((response) => {\n          if (response.status === 200) {\n            let studentData = {\n              ...response.data.student,\n            };\n\n            this.setState({\n              studentId: response.data.student.id,\n              communsuccessAlert: true,\n              studentData,\n            });\n            timeout = setTimeout(\n              () =>\n                this.setState({\n                  activeStep: activeStep + 1,\n                  communsuccessAlert: false,\n                }),\n              3000\n            );\n          }\n        })\n        .catch((error) => {\n          this.setState({ communFailedAlert: true });\n          timeout = setTimeout(\n            () => this.setState({ communFailedAlert: false }),\n            1000\n          );\n        });\n    }\n  };\n\n  handleBack = () => {\n    const { activeStep } = this.state;\n    this.setState({ activeStep: activeStep - 1 });\n  };\n\n  handleReset = () => {\n    this.setState({ activeStep: 0 });\n  };\n\n  getStepContent(\n    stepIndex,\n    roleList,\n    establishmentList,\n    values,\n    handleChange,\n    handleBlur,\n    touched,\n    errors\n  ) {\n    switch (this.state.activeStep) {\n      case 0:\n        return (\n          <CommonInformation\n            values={this.state}\n            handleChange={this.handleChange}\n            onDrop={this.onDrop}\n            handleChangeDate={this.handleChangeDate}\n            handleChangePhone={this.handleChangePhone}\n          />\n        );\n      case 1:\n        return (\n          <RoleInformation\n            values={this.state}\n            handleChangeRole={this.handleChangeRole}\n            handleChangeEstablishment={this.handleChangeEstablishment}\n          />\n        );\n\n      case 2:\n        return (\n          <SpecificInformation\n            classSections={this.props.classSections}\n            classLevels={this.props.classLevels}\n            levels={this.props.levels}\n            sections={this.props.sections}\n            values={this.state}\n            handleChange={this.handleChange}\n            handleChangeClass={this.handleChangeClass}\n            handleChangeService={this.handleChangeService}\n            handleChangeClass={this.handleChangeClass}\n            handleChangeListSubjects={this.handleChangeListSubjects}\n            addNewSubject={this.addNewSubject}\n            handleChangestudentLevel={this.handleChangestudentLevel}\n            handleChangestudentSection={this.handleChangestudentSection}\n            // classeSettings={this.props.classeSettings}\n            // subjects={this.props.subjects}\n            classesSubjects={this.props.classesSubjects}\n            deleteChoice={this.deleteChoice}\n          />\n        );\n      case 3:\n        return (\n          <ParentInformation\n            values={this.state}\n            handleChange={this.handleChange}\n            onDropUserParent={this.onDropUserParent}\n            addNewParent={this.addNewParent}\n            addNewParentFormulaire={this.addNewParentFormulaire}\n            handleChangeSelectParent={this.handleChangeSelectParent}\n            validateZipCode={this.validateZipCode}\n            handleChangeDateParent={this.handleChangeDateParent}\n            handleChangeParentPhone={this.handleChangeParentPhone}\n            trustedPerson={this.state.trustedPerson}\n            addNewTrustedParentForm={this.addNewTrustedParentForm}\n          />\n        );\n      default:\n        return \"Uknown stepIndex\";\n    }\n  }\n  getSteps() {\n    switch (this.state.steps) {\n      case 0:\n      case 1:\n      case 2:\n      case 4:\n      case 6:\n      case 7:\n        return [\n          <IntlMessages id=\"stuppUser.steps.accountInfo\" />,\n          <IntlMessages id=\"stuppUser.steps.role\" />,\n        ];\n\n      case 3:\n        return [\n          <IntlMessages id=\"stuppUser.steps.accountInfo\" />,\n          <IntlMessages id=\"stuppUser.steps.role\" />,\n          <IntlMessages id=\"stuppUser.steps.specInfo\" />,\n        ];\n\n      case 5:\n        return [\n          <IntlMessages id=\"stuppUser.steps.accountInfo\" />,\n          <IntlMessages id=\"stuppUser.steps.role\" />,\n          <IntlMessages id=\"stuppUser.steps.specInfo\" />,\n          <IntlMessages id=\"stuppUser.steps.parentInfoOfStudent\" />,\n        ];\n\n      default:\n        return \"Uknown stepIndex\";\n    }\n  }\n  isValidphoneNumber = (number) => {\n    const tel = parsePhoneNumberFromString(number);\n    let res = false;\n    if (tel) {\n      res = tel.isValid();\n    }\n    return res;\n  };\n\n  Validation_Steps(steps) {\n    // this methode is to able and disable next and finish button when we insert any user (created by bechir)\n    if (this.state.activeStep === 0) {\n      if (this.state.countrie_locale === \"ar\") {\n        if (\n          this.state.name.length !== 0 &&\n          this.state.surname.length !== 0 &&\n          this.isemail(this.state.email) === true &&\n          this.state.email.length !== 0 &&\n          this.state.Arabname.length !== 0 &&\n          this.state.Arabsurname.length !== 0 &&\n          this.isValidphoneNumber(this.state.phone) === true\n        )\n          return true;\n        else return false;\n      } else {\n        if (\n          this.state.name.length !== 0 &&\n          this.state.surname.length !== 0 &&\n          this.isemail(this.state.email) === true &&\n          this.state.email.length !== 0 &&\n          this.isValidphoneNumber(this.state.phone) === true\n        )\n          return true;\n        else return false;\n      }\n    }\n    if (\n      this.state.activeStep === 1 &&\n      this.props.userProfile.role_id === roleIdSuperAdmin\n    ) {\n      if (this.state.role_id !== 0 && this.state.establishment_id !== 0)\n        return true;\n      else return false;\n    }\n\n    if (this.state.activeStep === 2 && this.state.role_id === 5) {\n      if (this.state.level_id === undefined) return false;\n      else return true;\n    }\n    if (this.state.activeStep === 2 && this.state.role_id === roleIdProfessor) {\n      if (\n        this.state.listOfSubjects.length === 1 &&\n        this.state.listOfSubjects[0].subject_id === 0\n      ) {\n        return false;\n      } else return true;\n    } else if (\n      this.state.activeStep === 3 &&\n      this.state.role_id === roleIdStudent\n    ) {\n      if (\n        this.state.newParentsList.length === 0 &&\n        this.state.affectedParents.length === 0\n      )\n        return false;\n      else return true;\n    }\n\n    if (\n      this.state.activeStep === 1 &&\n      (this.props.userProfile.role_id === roleIdAdmin ||\n        this.props.userProfile.role_id === roleIdDirector)\n    ) {\n      if (this.state.role_id == 0) return false;\n      else return true;\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      steps: this.props.userProfile.role_id,\n    });\n    this.props.getLevel(\n      this.props.userProfile.establishment_id,\n      this.props.userProfile.school_year_id\n    );\n    this.props.getSections();\n    if (\n      this.props.userProfile.role_id === roleIdAdmin ||\n      this.props.userProfile.role_id === roleIdDirector\n    ) {\n      axios\n        .get(\n          `${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[where][and][0][establishment_id]=` +\n            this.props.userProfile.establishment_id +\n            `&filter[where][and][1][role_id]=` +\n            4\n        )\n        .then((res) => {\n          const allEstablishmentParents = res.data.map(\n            (element) => element.user\n          );\n          this.setState({\n            allParentList: allEstablishmentParents,\n          });\n        });\n\n      this.props.getClassesByEstablishmentId(\n        this.props.userProfile.establishment_id,\n        this.props.userProfile.school_year_id\n      );\n      this.props.getServicesByEstablishmentId(\n        this.props.userProfile.establishment_id\n      );\n\n      axios\n        .get(\n          `${baseUrl.baseUrl}/establishments/` +\n            this.props.userProfile.establishment_id +\n            `?access_token=${localStorage.token}`\n        )\n        .then((res) => {\n          this.setState({\n            estabType: res.data.estab_type_id,\n          });\n          axios\n            .get(\n              `${baseUrl.baseUrl}/countries/` +\n                res.data.countries_id +\n                `?access_token=${localStorage.token}`\n            )\n            .then((res) => {\n              this.setState({ countrie_locale: res.data.locale });\n            });\n        });\n\n      axios\n        .get(`${baseUrl.baseUrl}/roles?access_token=${localStorage.token}`)\n        .then((res) => {\n          let data = res.data;\n          const roleList = data.filter((element) => element.id !== 1);\n          this.setState({ roleList });\n        });\n    } else {\n      axios\n        .get(`${baseUrl.baseUrl}/roles?access_token=${localStorage.token}`)\n        .then((res) => {\n          const roleList = res.data;\n          this.setState({ roleList });\n        });\n    }\n\n    axios\n      .get(\n        `${baseUrl.baseUrl}/establishments?access_token=${localStorage.token}`\n      )\n      .then((res) => {\n        const establishmentList = res.data.filter((element) => element.status);\n        this.setState({ establishmentList });\n      });\n    axios\n      .get(`${baseUrl.baseUrl}/subjects?access_token=${localStorage.token}`)\n      .then((res) => {\n        const subjectList = res.data;\n        this.setState({ subjectList });\n      });\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    var etablishmentID = null;\n\n    var establishment_Name_From_Id = \"\";\n    var establishment_Name = \"\";\n    if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n      establishment_Name_From_Id = this.state.establishmentList.filter(\n        (establishment) => establishment.id === this.state.establishment_id\n      );\n      establishment_Name = establishment_Name_From_Id[0].name;\n    } else {\n      establishment_Name_From_Id = this.state.establishmentList.filter(\n        (establishment) =>\n          establishment.id == this.props.userProfile.establishment_id\n      );\n      establishment_Name = establishment_Name_From_Id[0].name;\n    }\n\n    if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n      etablishmentID = this.state.establishment_id;\n    } else {\n      etablishmentID = this.props.userProfile.establishment_id;\n    }\n    if (this.state.role_id === roleIdProfessor) {\n      let data = {\n        profile_id: this.state.profileId,\n        date_start_contract: this.state.date_start_contract,\n        date_end_contract: this.state.date_end_contract,\n        listOfSubjects: this.state.listOfSubjects,\n      };\n\n      let apiEndpoint = `/professors/create-professor?access_token=${localStorage.token}`;\n      classService\n        .post(apiEndpoint, data)\n        .then((response) => {\n          if (response.status === 200) {\n            let profData = {\n              ...this.state.newUser,\n              professors: [{ ...response.data.professor }],\n              students: [],\n              parents: [],\n            };\n            this.props.addNewUser(profData);\n            this.props.successAddUserHandling();\n            this.handleCancel();\n            this.props.cancel();\n          }\n        })\n        .catch((err) => {\n          this.setState({ communFailedAlert: true });\n          timeout = setTimeout(\n            () => this.setState({ communFailedAlert: false }),\n            1000\n          );\n        });\n    } else if (this.state.role_id === roleIdStudent) {\n      let studentParents = {\n        newParentsList: this.state.newParentsList,\n        affectedParents: this.state.affectedParents,\n        trustedPersonList: this.state.trustedPersonList,\n        studentId: this.state.studentId,\n        etablishmentID: etablishmentID,\n      };\n      console.log(\"studentParents\", studentParents);\n      let apiEndpoint = `/students/add-parents?access_token=${localStorage.token}`;\n      classService\n        .post(apiEndpoint, studentParents)\n        .then((response) => {\n          console.log(\"/students/add-parents/response\", response);\n          if (response.status === 200) {\n            let student = {\n              ...this.state.newUser,\n              students: [{ ...this.state.studentData }],\n              professors: [],\n              parents: [],\n            };\n            this.props.addNewUser(student);\n            this.props.successAddUserHandling();\n            this.handleCancel();\n            this.props.cancel();\n          }\n        })\n        .catch((err) => {\n          this.setState({ communFailedAlert: true });\n          timeout = setTimeout(\n            () => this.setState({ communFailedAlert: false }),\n            1000\n          );\n        });\n    } else {\n      let data = {\n        name: this.state.name,\n        password: Math.random()\n          .toString(36)\n          .slice(2),\n        surname: this.state.surname,\n        gender: this.state.gender,\n        date_of_birth: this.state.date_of_birth,\n        address: this.state.address,\n        phone: this.state.phone,\n        status: true,\n        cin: this.state.cin,\n        realm: this.state.name,\n        zip_code: this.state.zip_code,\n\n        username: this.state.name + \".\" + this.state.surname,\n        email: this.state.email.toLowerCase(),\n\n        role_id: this.state.role_id,\n\n        Arabname: this.state.Arabname,\n        Arabsurname: this.state.Arabsurname,\n        photo: this.state.userPhotos,\n        photoName: this.state.userPhotos,\n        establishment_id: establishment_Name_From_Id[0].id,\n        role_id: this.state.role_id,\n        establishment_Name: establishment_Name,\n      };\n\n      let apiEndpoint = `/users/create-user?access_token=${localStorage.token}`;\n      classService\n        .post(apiEndpoint, data)\n        .then((response) => {\n          if (this.state.userPhotos !== null) {\n            let userId = response.data.user[0].id;\n            const fileExtension = this.state.userPhotos.name.replace(\n              /^.*\\./,\n              \"\"\n            );\n            const fileName = \"user\" + userId + \".\" + fileExtension;\n            var object = {};\n            object.file = this.state.userPhotos;\n            object.fileName = fileName;\n            const myNewFile = new File([object.file], fileName, {\n              type: object.file.type,\n            });\n            let formadata = new FormData();\n            formadata.append(\"image\", myNewFile);\n\n            const URLuserPhoto = `${baseUrl.baseUrl}/containers/classebook.data.storage/upload?access_token=${localStorage.token}`;\n            axios({\n              url: URLuserPhoto,\n              method: \"POST\",\n              data: formadata,\n            })\n              .then((response) => {\n                if (response) {\n                  axios\n                    .patch(\n                      `${baseUrl.baseUrl}/users/` +\n                        userId +\n                        `?access_token=${localStorage.token}`,\n                      {\n                        photo:\n                          response.data.result.files.image[0].providerResponse\n                            .location,\n                      }\n                    )\n                    .then((response) => {\n                      console.log(\"updateddddddddddd \", response.data);\n                    })\n                    .catch(function(error) {\n                      console.log(\"error\", error);\n                    });\n                }\n              })\n              .catch((err) => {});\n          } else {\n          }\n\n          if (response.status === 200) {\n            if (this.state.userPhotos) {\n              let newUser = {\n                ..._.last(response.data.user),\n                professors: [],\n                students: [],\n                parents: [],\n              };\n              this.props.uploadAdminPhoto(\n                response.data.user[0].id,\n                data,\n                newUser\n              );\n            } else {\n              let newUser = {\n                ..._.last(response.data.user),\n                user: _.head(response.data.user),\n                professors: [],\n                students: [],\n                parents: [],\n              };\n              this.props.addNewUser(newUser);\n            }\n            this.props.successAddUserHandling();\n            this.handleCancel();\n            this.props.cancel();\n          }\n        })\n        .catch((err) => {});\n    }\n  };\n  handleCancelImport() {\n    this.props.cancelModalImport();\n  }\n  handleCancel() {\n    this.setState({\n      activeStep: 0,\n      previewVisible: false,\n      name: \"\",\n      surname: \"\",\n      gender: \"\",\n      date_of_birth: moment().year() - 6 + \"-01-01\",\n      address: \"\",\n      phone: \"\",\n      zip_code: \"\",\n      status: true,\n      cin: \"\",\n      realm: \"\",\n      password: \"\",\n      username: \"\",\n      email: \"\",\n      emailVerified: false,\n      nameParent: \"\",\n      surnameParent: \"\",\n      genderParent: \"\",\n      date_of_birthParent: moment().year() - 18 + \"-01-01\",\n      addressParent: \"\",\n      phoneParent: \"\",\n      statusParent: true,\n      cinParent: \"\",\n      zip_codeParent: \"\",\n      realmParent: \"\",\n      passwordParent: \"\",\n      usernameParent: \"\",\n      emailParent: \"\",\n      emailVerifiedParent: false,\n      date_start_contract: \"\",\n      date_end_contract: \"\",\n      establishment_id: 0,\n      role_id: 0,\n      subject_id: \"\",\n      class_id: \"\",\n      serviceId: [],\n      userPhotos: null,\n      parentStudentphoto: null,\n      Arabname: \"\",\n      Arabsurname: \"\",\n      affectedParents: [],\n      newParentsList: [],\n      section_id: \"\",\n      level_id: \"\",\n      listOfSubjects: [],\n    });\n    // this.props.close();\n  }\n\n  isemail(value) {\n    if (value.length > 0)\n      return /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@(([[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(\n        value\n      );\n    else return true;\n  }\n\n  onChangeHandler = (event) => {\n    this.setState({ selectedFile: event.target.files[0] });\n  };\n  onClickHandler = () => {\n    if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n      this.props.uploadExcel(\n        this.state.selectedFile,\n        this.state.establishment_id\n      );\n    } else {\n      this.props.uploadExcel(\n        this.state.selectedFile,\n        this.props.userProfile.establishment_id\n      );\n    }\n\n    this.props.cancelModalImport();\n  };\n\n  render() {\n    const steps = this.getSteps() ? this.getSteps() : 0;\n    const { activeStep, roleList, establishmentList } = this.state;\n\n    return (\n      <div className=\"app-wrapper\">\n        <Modal isOpen={this.props.open}>\n          <ModalHeader\n            toggle={this.props.cancel}\n            className=\"modal-box-header bg-primary text-white\"\n          >\n            {<IntlMessages id=\"pages.stuppUserPage\" />}\n          </ModalHeader>\n          <ModalBody>\n            <form className=\"container\" onSubmit={this.handleSubmit}>\n              <div className=\"row\">\n                <div className=\"w-100\">\n                  <Stepper\n                    activeStep={activeStep}\n                    alternativeLabel\n                    className=\"horizontal-stepper-linear\"\n                  >\n                    {steps.map((label, index) => {\n                      return (\n                        <Step\n                          key={label}\n                          className={`horizontal-stepper ${\n                            index === activeStep ? \"active\" : \"\"\n                          }`}\n                        >\n                          <StepLabel className=\"stepperlabel\">\n                            {label}\n                          </StepLabel>\n                        </Step>\n                      );\n                    })}\n                  </Stepper>\n                </div>\n                {this.state.activeStep === steps.length ? (\n                  <div className=\"w-100\">\n                    <Typography className=\"my-2\">\n                      All steps completed - you&quot;re finished\n                    </Typography>\n                    <Button onClick={this.handleReset}>Reset</Button>\n                  </div>\n                ) : (\n                  <div className=\"w-100\">\n                    {this.getStepContent(activeStep, roleList)}\n                    <Button\n                      disabled={activeStep === 0}\n                      onClick={this.handleBack}\n                      className=\"mr-2\"\n                    >\n                      {<IntlMessages id=\"stuppUser.button.back\" />}\n                    </Button>\n\n                    {activeStep === steps.length - 1 ? (\n                      <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        type=\"submit\"\n                        disabled={this.Validation_Steps(steps) ? false : true}\n                        className=\"jr-btn\"\n                      >\n                        {<IntlMessages id=\"stuppUser.button.finish\" />}\n                      </Button>\n                    ) : (\n                      <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={this.handleNext}\n                        disabled={this.Validation_Steps(steps) ? false : true}\n                      >\n                        {\" \"}\n                        {<IntlMessages id=\"stuppUser.button.Next\" />}\n                      </Button>\n                    )}\n                  </div>\n                )}\n              </div>\n            </form>\n          </ModalBody>\n        </Modal>\n\n        <Modal isOpen={this.props.openModalImport}>\n          <ModalHeader\n            toggle={this.handleCancelImport}\n            className=\"modal-box-header bg-primary text-white\"\n          >\n            {<IntlMessages id=\"pages.stuppUserPage\" />}\n          </ModalHeader>\n          <ModalBody>\n            <form className=\"container\" onSubmit={this.handleSubmit}>\n              <RoleContext.Consumer>\n                {({ role }) => (\n                  <Can\n                    role={role}\n                    perform=\"user-import-excel:visit\"\n                    yes={() => (\n                      <div className=\"row\">\n                        <Can\n                          role={role}\n                          perform=\"user-import-excel-filter-establishment:visit\"\n                          yes={() => (\n                            <div className=\"col-sm-6\">\n                              <TextField\n                                required\n                                id=\"establishment\"\n                                select\n                                label={\n                                  <IntlMessages id=\"components.student.formadd.establishment\" />\n                                }\n                                value={this.state.establishment_id}\n                                onChange={this.handleChange(\"establishment_id\")}\n                                SelectProps={{}}\n                                margin=\"normal\"\n                                fullWidth\n                              >\n                                {establishmentList.map((establishment) => (\n                                  <MenuItem\n                                    key={establishment.id}\n                                    value={establishment.id}\n                                  >\n                                    {establishment.name}\n                                  </MenuItem>\n                                ))}\n                              </TextField>\n                            </div>\n                          )}\n                        />\n                        <div className=\"col-md-12 text-center \">\n                          <br />\n                          <br />\n                          <input\n                            type=\"file\"\n                            name=\"file\"\n                            onChange={this.onChangeHandler}\n                          />\n                        </div>\n                        <div className=\"col-md-12 text-left \">\n                          <br />\n                          <br />\n                          <Button\n                            variant=\"contained\"\n                            className=\"jr-btn bg-indigo text-white \"\n                            onClick={this.onClickHandler}\n                          >\n                            {\n                              <IntlMessages id=\"components.establishments.formadd.buttonAdd\" />\n                            }\n                          </Button>\n                          <Button\n                            variant=\"contained\"\n                            className=\"jr-btn bg-grey text-white \"\n                            onClick={this.handleCancelImport}\n                          >\n                            {\n                              <IntlMessages id=\"components.establishments.formadd.buttonCancel\" />\n                            }\n                          </Button>\n                        </div>\n                      </div>\n                    )}\n                  />\n                )}\n              </RoleContext.Consumer>\n            </form>\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    establishments: state.establishment.remoteEstablishments,\n    services: state.service.remoteServices,\n    userProfile: state.auth.userProfile,\n    users: state.stuppUsers.remoteStuppUsers,\n    classLevels: state.ClassLevels.remoteLevels,\n    classSections: state.classSections.remoteSections,\n    classes: state.classes,\n    sections: state.SectionsReducer.Section,\n    classeSettings: state.ClassSettingsReducer.classSettings,\n    levels: state.levelsReducer.levels,\n  };\n}\n\nexport default connect(mapStateToProps, {\n  successHandling,\n  getAllUsers,\n  getServices,\n  getEstablishment,\n  getUserProfile,\n  getSections,\n  getClassesByEstablishmentId,\n  getServicesByEstablishmentId,\n  uploadExcel,\n  uploadUserPhoto,\n  addNewUser,\n  successAddUserHandling,\n  uploadAdminPhoto,\n  uploadProfAndStudentPhoto,\n  getLevel,\n})(AddUser);\n"]},"metadata":{},"sourceType":"module"}