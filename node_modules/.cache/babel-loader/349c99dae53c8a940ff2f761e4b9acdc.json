{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Lesson/Lesson.js\";\nimport React from \"react\";\nimport ContainerHeader from \"../../../components/ContainerHeader/index\";\nimport IntlMessages from \"../../../util/IntlMessages\";\nimport { connect } from \"react-redux\";\nimport { getLevels } from \"../../../actions/classLevelAction\";\nimport { getUserProfile } from \"../../../actions/Auth\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../config/config\";\nimport { getSections } from \"../../../actions/sectionAction\";\nimport { getClassesByEstablishmentId, getClassesByUserId } from \"../../../actions/classeAction\";\nimport LessonList from \"./LessonList\";\nimport { getLessons } from \"../../../actions/LessonAction\";\nimport { roleIdProfessor, roleIdStudent } from \"../../../config/config\";\nimport AddLesson from \"./AddLesson\";\nimport Input from \"@material-ui/icons/Input\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { addLesson } from \"../../../actions/LessonAction\";\nimport { getSectionFromLevel } from \"../../../actions/sectionAction\";\nimport { getLevelListFromEstabType } from \"../../../actions/classLevelAction\";\nimport { UncontrolledAlert } from \"reactstrap\";\nimport Can from \"../../../can\";\nimport { RoleContext } from \"../../../Context\";\n\nclass Lesson extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangestudentLevel = name => event => {\n      this.setState({\n        section_id: 0,\n        class_id: 0\n      });\n\n      if (event.target.value > 10) {\n        this.setState({\n          [name]: event.target.value\n        });\n        this.setState({\n          Disable_studentsection: false\n        });\n        var studentSectionbyLevel = getSectionFromLevel(this.props.classSections, event.target.value);\n        this.setState({\n          studentsectionByLevels: studentSectionbyLevel\n        });\n      } else {\n        this.setState({\n          level_id: event.target.value,\n          Disable_studentsection: true,\n          section_id: 0\n        });\n        const levelID = event.target.value;\n        var studentfiltredClasses = this.props.classes.filter(classe => classe.level_id === levelID && classe.status);\n        this.setState({\n          studentClassesByLevelSectionID: studentfiltredClasses\n        });\n      }\n    };\n\n    this.handleChangestudentSection = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n      const levelID = this.state.level_id;\n      const sectionID = event.target.value;\n      var studentfiltredClasses = this.props.classes.filter(classe => classe.level_id === levelID && classe.section_id === sectionID && classe.status);\n      this.setState({\n        studentClassesByLevelSectionID: studentfiltredClasses\n      });\n    };\n\n    this.handleChangeClass = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n\n      if (this.props.userProfile.role_id === roleIdProfessor) {\n        var chosenClass = this.state.studentClassesByLevelSectionID.filter(classe => classe.id === event.target.value);\n        this.setState({\n          level_id: chosenClass[0].level_id,\n          section_id: chosenClass[0].section_id\n        });\n      }\n    };\n\n    this.handleChangeSubject = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n      let apiEndpoint = `${baseUrl.baseUrl}/classes_professors?access_token=${localStorage.token}&filter[where][and][0][subject_id]=` + event.target.value + `&filter[where][and][1][class_id]=` + this.state.class_id + `&filter[include][professor][profile][user]`;\n      axios.get(apiEndpoint).then(res => {\n        this.setState({\n          establishmentProfessor: res.data\n        });\n\n        if (this.props.userProfile.role_id === roleIdProfessor) {\n          var classProfessorID = this.state.establishmentProfessor[0].id;\n          this.setState({\n            class_professor_id: classProfessorID\n          });\n        }\n      });\n    };\n\n    this.handleChangeProfessor = name => event => {\n      var classProfessorID = this.state.establishmentProfessor[0].id;\n      this.setState({\n        professor_id: event.target.value,\n        class_professor_id: classProfessorID\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.addCourse = () => {\n      var data = {};\n      data.name = this.state.course_object;\n      data.details = this.state.description;\n      data.creation_date = new Date();\n      data.status = true;\n      data.file = [];\n      data.class_professor_id = this.state.class_professor_id;\n      const files = this.state.coursefile;\n      this.props.addLesson(data, files, this.props.userProfile.establishment_id);\n      this.setState({\n        section_id: \"\",\n        class_id: \"\",\n        subject_id: \"\",\n        professor_id: \"\",\n        course_object: \"\",\n        description: \"\",\n        level_id: \"\",\n        estab_type_id: \"\",\n        sectionDisabled: true,\n        classeDisabled: true,\n        open: false,\n        coursefile: {},\n        file: [],\n        inputText: \"\"\n      });\n    };\n\n    this.onDrop = e => {\n      let fileName = [];\n      let file = e.target.files;\n\n      for (const file of e.target.files) {\n        fileName.push(file.name + \"\");\n      }\n\n      this.setState({\n        coursefile: file,\n        inputText: fileName\n      });\n    };\n\n    this.state = {\n      estab_type_id: \"\",\n      open: false,\n      section_id: \"\",\n      class_id: \"\",\n      subject_id: \"\",\n      professor_id: \"\",\n      course_object: \"\",\n      class_professor_id: \"\",\n      description: \"\",\n      level_id: \"\",\n      sectionDisabled: true,\n      classeDisabled: true,\n      open: false,\n      coursefile: {},\n      studentsectionByLevels: [],\n      Disable_studentsection: true,\n      levelsbyestablishment: [],\n      studentClassesByLevelSectionID: [],\n      subjectList: [],\n      establishmentProfessor: [],\n      divClassName: \"col-md-6\",\n      divEyeClassname: \"d-flex col-md-2\",\n      divEyeClassnameSpace: \"d-flex col-md-6\"\n    };\n    this.cancelModal = this.cancelModal.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.openAddModal = this.openAddModal.bind(this);\n    this.cancelModal = this.cancelModal.bind(this);\n    this.addCourse = this.addCourse.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n    this.addCourse = this.addCourse.bind(this);\n    this.handleChangestudentLevel = this.handleChangestudentLevel.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.handleChangeProfessor = this.handleChangeProfessor.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      this.props.getClassesByUserId(this.props.userProfile.user_id);\n      this.props.getLessons(this.props.userProfile.establishment_id);\n      axios.get(`${baseUrl.baseUrl}/classes_professors/getClassesByUserId/${this.props.userProfile.user_id}?access_token=${localStorage.token}`).then(res => {\n        var filtredClasses = res.data.classes.filter(classe => classe.status);\n        var cache = {};\n        let studentClassesByLevelSectionID = filtredClasses.filter(function (elem, index, array) {\n          return cache[elem.id] ? 0 : cache[elem.id] = 1;\n        });\n        this.setState({\n          studentClassesByLevelSectionID: studentClassesByLevelSectionID\n        });\n      });\n      axios.get(`${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[where][and][0][id]=` + this.props.userProfile.user_id + `&filter[include][professors]`).then(res => {\n        this.setState({\n          professor_id: res.data[0].professors[0].id\n        });\n        axios.get(`${baseUrl.baseUrl}/prof_subjects?access_token=${localStorage.token}&filter[where][and][0][professor_id]=` + this.state.professor_id + `&filter[include][subject]`).then(res => {\n          let subjectListinit = [];\n          res.data.forEach(element => {\n            subjectListinit.push(element.subject);\n          });\n          this.setState({\n            subjectList: subjectListinit\n          });\n        });\n      });\n    } else {\n      this.props.getLevels();\n      this.props.getSections();\n      this.props.getClassesByEstablishmentId(this.props.userProfile.establishment_id);\n      this.props.getLessons(this.props.userProfile.establishment_id);\n      axios.get(`${baseUrl.baseUrl}/establishments/` + this.props.userProfile.establishment_id + `?access_token=${localStorage.token}`).then(res => {\n        var levelsbyestablishment = getLevelListFromEstabType(this.props.levels, res.data.estab_type_id);\n        this.setState({\n          estabType: res.data.estab_type_id,\n          levelsbyestablishment: levelsbyestablishment,\n          estab_type_id: res.data.estab_type_id,\n          divClassName: \"col-md-4\"\n        });\n      });\n      axios.get(`${baseUrl.baseUrl}/subjects?access_token=${localStorage.token}`).then(res => {\n        const subjectList = res.data;\n        this.setState({\n          subjectList\n        });\n      });\n    }\n\n    if (this.props.userProfile.role_id === roleIdStudent) {\n      this.setState({\n        divEyeClassname: \"d-flex col-md-2\",\n        divEyeClassnameSpace: \"d-flex col-md-5\"\n      });\n    }\n  }\n\n  cancelModal() {\n    this.setState({\n      open: false\n    });\n  }\n\n  openAddModal() {\n    this.setState({\n      open: true\n    });\n  }\n\n  render() {\n    const {\n      levels,\n      sections,\n      classes,\n      lessons,\n      userProfile\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ContainerHeader, {\n      match: this.props.match,\n      title: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"sidebar.components.lesson\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 18\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }\n    }), this.props.successStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 13\n      }\n    }, \" \", this.props.message, \" \")) : \"\", this.props.errorStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-danger bg-danger text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 13\n      }\n    }, \" \", this.props.message)) : \"\", /*#__PURE__*/React.createElement(RoleContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }\n    }, ({\n      role\n    }) => /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"lesson-class-add\",\n      yes: () => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-12 text-right \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Fab, {\n        size: \"small\",\n        color: \"primary\",\n        \"aria-label\": \"Add\",\n        onClick: this.openAddModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(AddIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 21\n        }\n      })), \"\\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(Fab, {\n        size: \"small\",\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 19\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 13\n      }\n    })), \"\\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(AddLesson, {\n      open: this.state.open,\n      cancel: this.cancelModal,\n      values: this.state,\n      addCourse: this.addCourse,\n      onDrop: this.onDrop,\n      handleChange: this.handleChange,\n      handleCancel: this.cancelModal,\n      handleChangeClass: this.handleChangeClass,\n      handleChangestudentLevel: this.handleChangestudentLevel,\n      handleChangestudentSection: this.handleChangestudentSection,\n      handleChangeClass: this.handleChangeClass,\n      handleChangeSubject: this.handleChangeSubject,\n      handleChangeProfessor: this.handleChangeProfessor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(LessonList, {\n      lessons: lessons,\n      estab_type_id: this.state.estab_type_id,\n      levels: levels,\n      sections: sections,\n      classes: classes,\n      roleId: userProfile.role_id,\n      divEyeClassname: this.state.divEyeClassname,\n      divEyeClassnameSpace: this.state.divEyeClassnameSpace,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    classes: state.classes,\n    userProfile: state.auth.userProfile,\n    levels: state.ClassLevels.remoteLevels,\n    sections: state.classSections.remoteSections,\n    lessons: state.lessons.remoteLessons,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message\n  };\n}\n\nexport default connect(mapStateToProps, {\n  getLevels,\n  getUserProfile,\n  getSections,\n  getClassesByEstablishmentId,\n  getLessons,\n  getClassesByUserId,\n  addLesson\n})(Lesson);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Lesson/Lesson.js"],"names":["React","ContainerHeader","IntlMessages","connect","getLevels","getUserProfile","axios","baseUrl","getSections","getClassesByEstablishmentId","getClassesByUserId","LessonList","getLessons","roleIdProfessor","roleIdStudent","AddLesson","Input","Fab","AddIcon","addLesson","getSectionFromLevel","getLevelListFromEstabType","UncontrolledAlert","Can","RoleContext","Lesson","Component","constructor","props","handleChangestudentLevel","name","event","setState","section_id","class_id","target","value","Disable_studentsection","studentSectionbyLevel","classSections","studentsectionByLevels","level_id","levelID","studentfiltredClasses","classes","filter","classe","status","studentClassesByLevelSectionID","handleChangestudentSection","state","sectionID","handleChangeClass","userProfile","role_id","chosenClass","id","handleChangeSubject","apiEndpoint","localStorage","token","get","then","res","establishmentProfessor","data","classProfessorID","class_professor_id","handleChangeProfessor","professor_id","handleChange","addCourse","course_object","details","description","creation_date","Date","file","files","coursefile","establishment_id","subject_id","estab_type_id","sectionDisabled","classeDisabled","open","inputText","onDrop","e","fileName","push","levelsbyestablishment","subjectList","divClassName","divEyeClassname","divEyeClassnameSpace","cancelModal","bind","openAddModal","componentDidMount","user_id","filtredClasses","cache","elem","index","array","professors","subjectListinit","forEach","element","subject","levels","estabType","render","sections","lessons","match","successStatus","message","errorStatus","role","mapStateToProps","auth","ClassLevels","remoteLevels","remoteSections","remoteLessons","alert","success","error"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport ContainerHeader from \"../../../components/ContainerHeader/index\";\nimport IntlMessages from \"../../../util/IntlMessages\";\nimport { connect } from \"react-redux\";\nimport { getLevels } from \"../../../actions/classLevelAction\";\nimport { getUserProfile } from \"../../../actions/Auth\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../config/config\";\nimport { getSections } from \"../../../actions/sectionAction\";\nimport {\n  getClassesByEstablishmentId,\n  getClassesByUserId,\n} from \"../../../actions/classeAction\";\nimport LessonList from \"./LessonList\";\nimport { getLessons } from \"../../../actions/LessonAction\";\nimport { roleIdProfessor, roleIdStudent } from \"../../../config/config\";\nimport AddLesson from \"./AddLesson\";\nimport Input from \"@material-ui/icons/Input\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport { addLesson } from \"../../../actions/LessonAction\";\nimport { getSectionFromLevel } from \"../../../actions/sectionAction\";\nimport { getLevelListFromEstabType } from \"../../../actions/classLevelAction\";\nimport { UncontrolledAlert } from \"reactstrap\";\nimport Can from \"../../../can\";\nimport { RoleContext } from \"../../../Context\";\n\nclass Lesson extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      estab_type_id: \"\",\n      open: false,\n      section_id: \"\",\n      class_id: \"\",\n      subject_id: \"\",\n      professor_id: \"\",\n      course_object: \"\",\n      class_professor_id: \"\",\n      description: \"\",\n      level_id: \"\",\n      sectionDisabled: true,\n      classeDisabled: true,\n      open: false,\n      coursefile: {},\n      studentsectionByLevels: [],\n      Disable_studentsection: true,\n      levelsbyestablishment: [],\n      studentClassesByLevelSectionID: [],\n      subjectList: [],\n      establishmentProfessor: [],\n      divClassName: \"col-md-6\",\n      divEyeClassname: \"d-flex col-md-2\",\n      divEyeClassnameSpace: \"d-flex col-md-6\",\n    };\n    this.cancelModal = this.cancelModal.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.openAddModal = this.openAddModal.bind(this);\n    this.cancelModal = this.cancelModal.bind(this);\n    this.addCourse = this.addCourse.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n    this.addCourse = this.addCourse.bind(this);\n    this.handleChangestudentLevel = this.handleChangestudentLevel.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.handleChangeProfessor = this.handleChangeProfessor.bind(this);\n  }\n\n  handleChangestudentLevel = (name) => (event) => {\n    this.setState({ section_id: 0, class_id: 0 });\n    if (event.target.value > 10) {\n      this.setState({ [name]: event.target.value });\n      this.setState({ Disable_studentsection: false });\n      var studentSectionbyLevel = getSectionFromLevel(\n        this.props.classSections,\n        event.target.value\n      );\n      this.setState({ studentsectionByLevels: studentSectionbyLevel });\n    } else {\n      this.setState({\n        level_id: event.target.value,\n        Disable_studentsection: true,\n        section_id: 0,\n      });\n      const levelID = event.target.value;\n      var studentfiltredClasses = this.props.classes.filter(\n        (classe) => classe.level_id === levelID && classe.status\n      );\n      this.setState({ studentClassesByLevelSectionID: studentfiltredClasses });\n    }\n  };\n\n  handleChangestudentSection = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n    const levelID = this.state.level_id;\n    const sectionID = event.target.value;\n    var studentfiltredClasses = this.props.classes.filter(\n      (classe) =>\n        classe.level_id === levelID &&\n        classe.section_id === sectionID &&\n        classe.status\n    );\n    this.setState({ studentClassesByLevelSectionID: studentfiltredClasses });\n  };\n\n  handleChangeClass = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      var chosenClass = this.state.studentClassesByLevelSectionID.filter(\n        (classe) => classe.id === event.target.value\n      );\n      this.setState({\n        level_id: chosenClass[0].level_id,\n        section_id: chosenClass[0].section_id,\n      });\n    }\n  };\n  handleChangeSubject = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n\n    let apiEndpoint =\n      `${baseUrl.baseUrl}/classes_professors?access_token=${localStorage.token}&filter[where][and][0][subject_id]=` +\n      event.target.value +\n      `&filter[where][and][1][class_id]=` +\n      this.state.class_id +\n      `&filter[include][professor][profile][user]`;\n    axios.get(apiEndpoint).then((res) => {\n      this.setState({ establishmentProfessor: res.data });\n      if (this.props.userProfile.role_id === roleIdProfessor) {\n        var classProfessorID = this.state.establishmentProfessor[0].id;\n        this.setState({ class_professor_id: classProfessorID });\n      }\n    });\n  };\n  handleChangeProfessor = (name) => (event) => {\n    var classProfessorID = this.state.establishmentProfessor[0].id;\n    this.setState({\n      professor_id: event.target.value,\n      class_professor_id: classProfessorID,\n    });\n  };\n\n  componentDidMount() {\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      this.props.getClassesByUserId(this.props.userProfile.user_id);\n      this.props.getLessons(this.props.userProfile.establishment_id);\n\n      axios\n        .get(\n          `${baseUrl.baseUrl}/classes_professors/getClassesByUserId/${this.props.userProfile.user_id}?access_token=${localStorage.token}`\n        )\n        .then((res) => {\n          var filtredClasses = res.data.classes.filter(\n            (classe) => classe.status\n          );\n          var cache = {};\n          let studentClassesByLevelSectionID = filtredClasses.filter(function(\n            elem,\n            index,\n            array\n          ) {\n            return cache[elem.id] ? 0 : (cache[elem.id] = 1);\n          });\n          this.setState({\n            studentClassesByLevelSectionID: studentClassesByLevelSectionID,\n          });\n        });\n      axios\n        .get(\n          `${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[where][and][0][id]=` +\n            this.props.userProfile.user_id +\n            `&filter[include][professors]`\n        )\n        .then((res) => {\n          this.setState({ professor_id: res.data[0].professors[0].id });\n          axios\n            .get(\n              `${baseUrl.baseUrl}/prof_subjects?access_token=${localStorage.token}&filter[where][and][0][professor_id]=` +\n                this.state.professor_id +\n                `&filter[include][subject]`\n            )\n            .then((res) => {\n              let subjectListinit = [];\n              res.data.forEach((element) => {\n                subjectListinit.push(element.subject);\n              });\n              this.setState({ subjectList: subjectListinit });\n            });\n        });\n    } else {\n      this.props.getLevels();\n      this.props.getSections();\n      this.props.getClassesByEstablishmentId(\n        this.props.userProfile.establishment_id\n      );\n      this.props.getLessons(this.props.userProfile.establishment_id);\n      axios\n        .get(\n          `${baseUrl.baseUrl}/establishments/` +\n            this.props.userProfile.establishment_id +\n            `?access_token=${localStorage.token}`\n        )\n        .then((res) => {\n          var levelsbyestablishment = getLevelListFromEstabType(\n            this.props.levels,\n            res.data.estab_type_id\n          );\n          this.setState({\n            estabType: res.data.estab_type_id,\n            levelsbyestablishment: levelsbyestablishment,\n            estab_type_id: res.data.estab_type_id,\n            divClassName: \"col-md-4\",\n          });\n        });\n      axios\n        .get(`${baseUrl.baseUrl}/subjects?access_token=${localStorage.token}`)\n        .then((res) => {\n          const subjectList = res.data;\n          this.setState({ subjectList });\n        });\n    }\n\n    if (this.props.userProfile.role_id === roleIdStudent) {\n      this.setState({\n        divEyeClassname: \"d-flex col-md-2\",\n        divEyeClassnameSpace: \"d-flex col-md-5\",\n      });\n    }\n  }\n  cancelModal() {\n    this.setState({ open: false });\n  }\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n  addCourse = () => {\n    var data = {};\n    data.name = this.state.course_object;\n    data.details = this.state.description;\n    data.creation_date = new Date();\n    data.status = true;\n    data.file = [];\n    data.class_professor_id = this.state.class_professor_id;\n    const files = this.state.coursefile;\n    this.props.addLesson(data, files, this.props.userProfile.establishment_id);\n\n    this.setState({\n      section_id: \"\",\n      class_id: \"\",\n      subject_id: \"\",\n      professor_id: \"\",\n      course_object: \"\",\n      description: \"\",\n      level_id: \"\",\n      estab_type_id: \"\",\n      sectionDisabled: true,\n      classeDisabled: true,\n      open: false,\n      coursefile: {},\n      file: [],\n      inputText: \"\",\n    });\n  };\n  openAddModal() {\n    this.setState({ open: true });\n  }\n  onDrop = (e) => {\n    let fileName = [];\n    let file = e.target.files;\n    for (const file of e.target.files) {\n      fileName.push(file.name + \"\");\n    }\n    this.setState({ coursefile: file, inputText: fileName });\n  };\n\n  render() {\n    const { levels, sections, classes, lessons, userProfile } = this.props;\n    return (\n      <div className=\"app-wrapper\">\n        <ContainerHeader\n          match={this.props.match}\n          title={<IntlMessages id=\"sidebar.components.lesson\" />}\n        />\n        {this.props.successStatus ? (\n          <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n            <span className=\"icon-addon alert-addon\">\n              <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n            </span>\n            <span className=\"d-inline-block\"> {this.props.message} </span>\n          </UncontrolledAlert>\n        ) : (\n          \"\"\n        )}\n        {this.props.errorStatus ? (\n          <UncontrolledAlert className=\"alert-addon-card bg-danger bg-danger text-white shadow-lg\">\n            <span className=\"icon-addon alert-addon\">\n              <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n            </span>\n            <span className=\"d-inline-block\"> {this.props.message}</span>\n          </UncontrolledAlert>\n        ) : (\n          \"\"\n        )}\n        <RoleContext.Consumer>\n          {({ role }) => (\n            <Can\n              role={role}\n              perform=\"lesson-class-add\"\n              yes={() => (\n                <div className=\"col-md-12 text-right \">\n                  <Fab\n                    size=\"small\"\n                    color=\"primary\"\n                    aria-label=\"Add\"\n                    onClick={this.openAddModal}\n                  >\n                    <AddIcon />\n                  </Fab>\n                  &nbsp;&nbsp;&nbsp;\n                  <Fab size=\"small\" color=\"primary\">\n                    <Input />\n                  </Fab>\n                  <br></br>\n                </div>\n              )}\n            />\n          )}\n        </RoleContext.Consumer>\n        &nbsp;&nbsp;&nbsp;\n        <AddLesson\n          open={this.state.open}\n          cancel={this.cancelModal}\n          values={this.state}\n          addCourse={this.addCourse}\n          onDrop={this.onDrop}\n          handleChange={this.handleChange}\n          handleCancel={this.cancelModal}\n          handleChangeClass={this.handleChangeClass}\n          handleChangestudentLevel={this.handleChangestudentLevel}\n          handleChangestudentSection={this.handleChangestudentSection}\n          handleChangeClass={this.handleChangeClass}\n          handleChangeSubject={this.handleChangeSubject}\n          handleChangeProfessor={this.handleChangeProfessor}\n        />\n        <LessonList\n          lessons={lessons}\n          estab_type_id={this.state.estab_type_id}\n          levels={levels}\n          sections={sections}\n          classes={classes}\n          roleId={userProfile.role_id}\n          divEyeClassname={this.state.divEyeClassname}\n          divEyeClassnameSpace={this.state.divEyeClassnameSpace}\n        />\n      </div>\n    );\n  }\n}\nfunction mapStateToProps(state) {\n  return {\n    classes: state.classes,\n    userProfile: state.auth.userProfile,\n    levels: state.ClassLevels.remoteLevels,\n    sections: state.classSections.remoteSections,\n    lessons: state.lessons.remoteLessons,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n  };\n}\nexport default connect(\n  mapStateToProps,\n  {\n    getLevels,\n    getUserProfile,\n    getSections,\n    getClassesByEstablishmentId,\n    getLessons,\n    getClassesByUserId,\n    addLesson,\n  }\n)(Lesson);\n"]},"metadata":{},"sourceType":"module"}