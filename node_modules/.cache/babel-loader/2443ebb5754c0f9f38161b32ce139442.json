{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap-pro/educap-pro-front/src/app/routes/Administration/routes/SchoolSettings/CourseAssignment/CourseAssignment.js\";\nimport React from 'react';\nimport CardBox from '../../../../../../components/CardBox/index';\nimport { connect } from 'react-redux';\nimport AddAssignClassSubject from './AddAssignClassSubject';\nimport CoursesAssignmentList from './CoursesAssignmentList';\nimport ArchiveCourseAssignment from './ArchiveCourseAssignment';\nimport { UncontrolledAlert } from 'reactstrap';\nimport { addAssignementCourse } from '../../../../../../actions/AssignementAction';\n\nclass CourseAssignment extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangeAlerte = name => {\n      this.setState({\n        assignementCourseExist: true,\n        messageAlerte: 'cette classe a déja cette matière'\n      });\n      setTimeout(() => {\n        this.setState({\n          assignementCourseExist: false,\n          messageAlerte: ''\n        });\n      }, 4000);\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        CoficientGlobal: event.target.value\n      });\n    };\n\n    this.handleChangeCoficient = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleChangeClass = name => event => {\n      let obj = JSON.parse(event.target.value);\n      this.setState({\n        [name]: obj.id,\n        class: obj\n      });\n    };\n\n    this.handleChangeSubject = name => event => {\n      let subjects = this.props.subjects;\n      this.setState({\n        [name]: event.target.value,\n        subjects\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.state = {\n      open: false,\n      nameLevel: '',\n      class_id: '',\n      subject_id: '',\n      isOpenArchive: false,\n      class: '',\n      assignementCourseExist: false\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeCoficient = this.handleChangeCoficient.bind(this);\n    this.openArchiveModal = this.openArchiveModal.bind(this);\n    this.handleChangeAlerte = this.handleChangeAlerte.bind(this);\n  }\n\n  openArchiveModal() {\n    this.setState(previousState => ({\n      isOpenArchive: !previousState.isOpenArchive\n    }));\n  }\n\n  openAddModal() {\n    this.setState(previousState => ({\n      open: !previousState.open\n    }));\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    let data = {\n      assignment_date: new Date(),\n      status: true,\n      global_coefficient: this.state.CoficientGlobal,\n      fk_id_class_v4: this.state.class_id,\n      fk_id_subject_v4: this.state.subject_id,\n      class: this.state.class\n    };\n    let checkDoubleAssignementCourse = this.props.courseAssignment.filter(element => element.fk_id_class_v4 == this.state.class_id && element.fk_id_subject_v4 == this.state.subject_id);\n\n    if (checkDoubleAssignementCourse.length > 0) {\n      this.setState({\n        assignementCourseExist: true,\n        messageAlerte: 'cette classe a déja cette matière'\n      });\n      setTimeout(() => {\n        this.setState({\n          assignementCourseExist: false,\n          messageAlerte: ''\n        });\n      }, 4000);\n    } else {\n      this.props.dispatch(addAssignementCourse(data));\n    }\n\n    this.setState({\n      open: false,\n      nameLevel: '',\n      class_id: '',\n      subject_id: '',\n      class: ''\n    });\n  }\n\n  handleCancel() {\n    this.setState({\n      open: false\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper\",\n      style: {\n        marginLeft: '5%',\n        marginRight: '10%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"  d-flex flex-column mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }\n    }, this.state.assignementCourseExist ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-danger text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    }, \" \", this.state.messageAlerte, \" \")) : '', this.props.successStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 15\n      }\n    }, \" \", this.props.message, \" \")) : '', this.state.alerteFiltre ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 15\n      }\n    }, \" \", this.state.messageAlerte, \" \")) : '', /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bd-highlight\",\n      style: {\n        width: '90%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(AddAssignClassSubject, {\n      values: this.state,\n      handleChangeCoficient: this.handleChangeCoficient,\n      openAddModal: this.openAddModal,\n      handleChange: this.handleChange,\n      handleSubmit: this.handleSubmit,\n      handleCancel: this.handleCancel,\n      values: this.state,\n      ClassSettings: this.props.ClassSettings,\n      subjects: this.props.subjects,\n      examTypes: this.props.examTypes,\n      handleChangeClass: this.handleChangeClass,\n      handleChangeSubject: this.handleChangeSubject,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bd-highlight\",\n      style: {\n        width: '90%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CoursesAssignmentList, {\n      courseAssignment: this.props.courseAssignment,\n      ClassSettings: this.props.ClassSettings,\n      subjects: this.props.subjects,\n      handleChangeAlerte: this.handleChangeAlerte,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bd-highlight\",\n      style: {\n        width: '90%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ArchiveCourseAssignment, {\n      ClassSettings: this.props.ClassSettings,\n      subjects: this.props.subjects,\n      isOpenArchive: this.state.isOpenArchive,\n      openArchiveModal: this.openArchiveModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userProfile: state.auth.userProfile,\n    ClassSettings: state.ClassSettingsReducer.classSettings,\n    subjects: state.subject.subjects,\n    examTypes: state.ExamTypesReducer.examTypes,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    courseAssignment: state.AssignementReducer.courseAssignment\n  };\n};\n\nexport default connect(mapStateToProps)(CourseAssignment);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap-pro/educap-pro-front/src/app/routes/Administration/routes/SchoolSettings/CourseAssignment/CourseAssignment.js"],"names":["React","CardBox","connect","AddAssignClassSubject","CoursesAssignmentList","ArchiveCourseAssignment","UncontrolledAlert","addAssignementCourse","CourseAssignment","Component","constructor","props","handleChangeAlerte","name","setState","assignementCourseExist","messageAlerte","setTimeout","handleChange","event","CoficientGlobal","target","value","handleChangeCoficient","handleChangeClass","obj","JSON","parse","id","class","handleChangeSubject","subjects","state","open","nameLevel","class_id","subject_id","isOpenArchive","openAddModal","bind","handleSubmit","handleCancel","openArchiveModal","previousState","preventDefault","data","assignment_date","Date","status","global_coefficient","fk_id_class_v4","fk_id_subject_v4","checkDoubleAssignementCourse","courseAssignment","filter","element","length","dispatch","render","marginLeft","marginRight","successStatus","message","alerteFiltre","width","ClassSettings","examTypes","mapStateToProps","userProfile","auth","ClassSettingsReducer","classSettings","subject","ExamTypesReducer","alert","success","errorStatus","error","AssignementReducer"],"mappings":"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","sourcesContent":["import React from 'react';\nimport CardBox from '../../../../../../components/CardBox/index';\nimport { connect } from 'react-redux';\nimport AddAssignClassSubject from './AddAssignClassSubject';\nimport CoursesAssignmentList from './CoursesAssignmentList';\nimport ArchiveCourseAssignment from './ArchiveCourseAssignment';\n\nimport { UncontrolledAlert } from 'reactstrap';\nimport { addAssignementCourse } from '../../../../../../actions/AssignementAction';\nclass CourseAssignment extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      open: false,\n      nameLevel: '',\n      class_id: '',\n      subject_id: '',\n      isOpenArchive: false,\n      class: '',\n      assignementCourseExist: false,\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeCoficient = this.handleChangeCoficient.bind(this);\n    this.openArchiveModal = this.openArchiveModal.bind(this);\n    this.handleChangeAlerte = this.handleChangeAlerte.bind(this);\n  }\n  handleChangeAlerte = (name) => {\n    this.setState({\n      assignementCourseExist: true,\n      messageAlerte: 'cette classe a déja cette matière',\n    });\n    setTimeout(() => {\n      this.setState({ assignementCourseExist: false, messageAlerte: '' });\n    }, 4000);\n  };\n  openArchiveModal() {\n    this.setState((previousState) => ({\n      isOpenArchive: !previousState.isOpenArchive,\n    }));\n  }\n  handleChange = (event) => {\n    this.setState({ CoficientGlobal: event.target.value });\n  };\n\n  openAddModal() {\n    this.setState((previousState) => ({\n      open: !previousState.open,\n    }));\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n     let data = {\n      assignment_date: new Date(),\n      status: true,\n      global_coefficient: this.state.CoficientGlobal,\n      fk_id_class_v4: this.state.class_id,\n      fk_id_subject_v4: this.state.subject_id,\n      class: this.state.class,\n    };\n    let checkDoubleAssignementCourse = this.props.courseAssignment.filter(\n      (element) =>\n        element.fk_id_class_v4 == this.state.class_id &&\n        element.fk_id_subject_v4 == this.state.subject_id\n    );\n    if (checkDoubleAssignementCourse.length > 0) {\n      this.setState({\n        assignementCourseExist: true,\n        messageAlerte: 'cette classe a déja cette matière',\n      });\n      setTimeout(() => {\n        this.setState({ assignementCourseExist: false, messageAlerte: '' });\n      }, 4000);\n    } else {\n      this.props.dispatch(addAssignementCourse(data));\n    }\n\n    this.setState({\n      open: false,\n      nameLevel: '',\n      class_id: '',\n      subject_id: '',\n      class: '',\n    });\n  }\n\n  handleChangeCoficient = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n  handleChangeClass = (name) => (event) => {\n    let obj = JSON.parse(event.target.value);\n \n    this.setState({\n      [name]: obj.id,\n      class: obj,\n    });\n  };\n  handleChangeSubject = (name) => (event) => {\n    let subjects = this.props.subjects;\n    this.setState({ [name]: event.target.value, subjects });\n  };\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n  handleCancel() {\n    this.setState({ open: false });\n  }\n\n  render() {\n    return (\n      <div\n        className=\"app-wrapper\"\n        style={{\n          marginLeft: '5%',\n          marginRight: '10%',\n        }}\n      >\n        <div className=\"  d-flex flex-column mb-3\">\n          {this.state.assignementCourseExist ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-success bg-danger text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\"> {this.state.messageAlerte} </span>\n            </UncontrolledAlert>\n          ) : (\n            ''\n          )}\n          {this.props.successStatus ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\"> {this.props.message} </span>\n            </UncontrolledAlert>\n          ) : (\n            ''\n          )}\n          {this.state.alerteFiltre ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\"> {this.state.messageAlerte} </span>\n            </UncontrolledAlert>\n          ) : (\n            ''\n          )}\n          <div className=\" bd-highlight\" style={{ width: '90%' }}>\n            <CardBox styleName=\"col-lg-12\">\n              <AddAssignClassSubject\n                values={this.state}\n                handleChangeCoficient={this.handleChangeCoficient}\n                openAddModal={this.openAddModal}\n                handleChange={this.handleChange}\n                handleSubmit={this.handleSubmit}\n                handleCancel={this.handleCancel}\n                values={this.state}\n                ClassSettings={this.props.ClassSettings}\n                subjects={this.props.subjects}\n                examTypes={this.props.examTypes}\n                handleChangeClass={this.handleChangeClass}\n                handleChangeSubject={this.handleChangeSubject}\n              />\n            </CardBox>\n          </div>\n          <div className=\" bd-highlight\" style={{ width: '90%' }}>\n            <CardBox styleName=\"col-lg-12\">\n              <CoursesAssignmentList\n                courseAssignment={this.props.courseAssignment}\n                ClassSettings={this.props.ClassSettings}\n                subjects={this.props.subjects}\n                handleChangeAlerte={this.handleChangeAlerte}\n              />\n            </CardBox>\n          </div>\n          <div className=\" bd-highlight\" style={{ width: '90%' }}>\n            <CardBox styleName=\"col-lg-12\">\n              <ArchiveCourseAssignment\n                ClassSettings={this.props.ClassSettings}\n                subjects={this.props.subjects}\n                isOpenArchive={this.state.isOpenArchive}\n                openArchiveModal={this.openArchiveModal}\n              />\n            </CardBox>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    userProfile: state.auth.userProfile,\n    ClassSettings: state.ClassSettingsReducer.classSettings,\n    subjects: state.subject.subjects,\n    examTypes: state.ExamTypesReducer.examTypes,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    courseAssignment: state.AssignementReducer.courseAssignment,\n  };\n};\n\nexport default connect(mapStateToProps)(CourseAssignment);\n"]},"metadata":{},"sourceType":"module"}