{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Assiduity/routes/CallRegister/DetailsCallRegister.js\";\nimport React from \"react\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { connect } from \"react-redux\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport moment from \"moment\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Switch from \"@material-ui/core/Switch\";\nimport AccessAlarmsIcon from \"@material-ui/icons/AccessAlarms\";\nimport ReportIcon from \"@material-ui/icons/Report\";\nimport AddCircleIcon from \"@material-ui/icons/AddCircle\";\nimport PrintIcon from \"@material-ui/icons/Print\";\nimport PictureAsPdfIcon from \"@material-ui/icons/PictureAsPdf\";\nimport BigCalendar from \"react-big-calendar\";\nimport withDragAndDrop from \"react-big-calendar/lib/addons/dragAndDrop\";\nimport \"react-big-calendar/lib/addons/dragAndDrop/styles.css\";\nimport { ButtonGroup } from \"reactstrap\";\nimport Button from \"@material-ui/core/Button\";\nimport _ from \"lodash\";\nimport { getEventCallRegisterForAdmin, getEventCallRegisterForProf } from \"../../../../../actions/planningActions\";\nimport { Redirect } from \"react-router-dom\";\nimport { getStudentsCallRegister } from \"../../../../../actions/studentAction\";\nimport ContainerHeader from \"../../../../../components/ContainerHeader\";\nimport { roleIdProfessor } from \"../../../../../config/config\";\nimport { saveCallRegister, getObservationList, getEncouragementList, getSanctionList } from \"../../../../../actions/RegistreAction\";\nimport { classService } from \"../../../../../_services/class.service\";\nimport OtherPopover from \"./OtherPopover\";\nimport SanctionPopover from \"./SanctionPopover\";\nimport SweetAlert from \"react-bootstrap-sweetalert\";\nconst localizer = BigCalendar.momentLocalizer(moment);\nconst DragAndDropCalendar = withDragAndDrop(BigCalendar);\n\nconst styles = theme => ({\n  textColorPrimary: {\n    color: \"red\"\n  }\n});\n\nvar options = {\n  weekday: \"long\",\n  day: \"numeric\",\n  month: \"long\"\n};\nvar options1 = {\n  day: \"numeric\",\n  month: \"long\"\n};\n\nclass DetailsCallRegister extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.changeEvent = event => {\n      this.setState({\n        event: event\n      });\n      let dateFormat = moment(event.start).format(\"YYYY-MM-DD\");\n      let timeFormat = moment(event.start).format(\"HH:mm:ssZ\");\n      let TimeDate = dateFormat + \"T\" + timeFormat;\n      let eventId = event.id;\n      let apiEndpoint = `/call_registers?access_token=${localStorage.token}?filter[where][and][0][start_date]=${TimeDate}&filter[where][and][1][fk_id_planning_events]=${eventId}&filter[include][studentCall][student][profile][user]`;\n      classService.get(apiEndpoint).then(res => {\n        if (res) {\n          if (res.data.length > 0) {\n            let historiqRegistre = res.data[0].studentCall.map(element => {\n              return {\n                name: element.student.profile.user.name,\n                surname: element.student.profile.user.surname,\n                presence: element.presence,\n                delay: element.delay,\n                sanction: element.sanction,\n                description_sanction: element.description_sanction,\n                observation: element.observation,\n                description_observation: element.description_observation,\n                encouragement: element.encouragement,\n                description_encouragement: element.description_encouragement,\n                studentId: element.fk_id_student,\n                photo: element.student.profile.user.photo\n              };\n            });\n            this.setState({\n              callRegister: historiqRegistre\n            });\n          } else {\n            this.setState({\n              callRegister: this.props.students\n            });\n          }\n        }\n      });\n    };\n\n    this.handleChangeSanctions = selectedOption => {\n      this.setState({\n        sanctionSelected: selectedOption\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleChangeEncouragement = selectedOption => {\n      this.setState({\n        encouragementSelected: selectedOption\n      });\n    };\n\n    this.handleChangeObservations = selectedOption => {\n      this.setState({\n        observationSelected: selectedOption\n      });\n    };\n\n    this.CustomToolbar = toolbar => {\n      let dayCall = new Date(toolbar.date);\n\n      const goToBack = () => {\n        toolbar.onNavigate(\"PREV\");\n        dayCall.setDate(dayCall.getDate() + -1);\n        let title = this.state.event.classeName + \"/\" + this.state.event.subjectName + \"/\" + new Date(dayCall).toLocaleDateString(\"fr-FR\", options);\n        this.setState({\n          title: title,\n          dateEvent: new Date(dayCall).toLocaleDateString(\"fr-FR\", options1)\n        });\n      };\n\n      const goToNext = () => {\n        dayCall.setDate(dayCall.getDate() + 1);\n        let curentDay = new Date();\n        let checkDate = moment(dayCall).isAfter(curentDay);\n\n        if (!checkDate) {\n          toolbar.onNavigate(\"NEXT\");\n          let title = this.state.event.classeName + \"/\" + this.state.event.subjectName + \"/\" + new Date(dayCall).toLocaleDateString(\"fr-FR\", options);\n          this.setState({\n            title: title,\n            dateEvent: new Date(dayCall).toLocaleDateString(\"fr-FR\", options1),\n            colorSelected: \"#0000CD\"\n          });\n        } else {\n          this.setState({\n            colorSelected: \"#C0C0C0\"\n          });\n        }\n      };\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-row bd-highlight mb-3 d-flex \\njustify-content-around\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 645,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 649,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 650,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ButtonGroup, {\n        vertical: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 651,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: \" jr-btn active\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 652,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"label-filter-off\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 653,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.day\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 654,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(Button, {\n        className: \"jr-btn\",\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 657,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"label-filter-off\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 658,\n          columnNumber: 15\n        }\n      }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.week\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 660,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(Button, {\n        className: \"jr-btn\",\n        disabled: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"label-filter-off\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.month\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 665,\n          columnNumber: 17\n        }\n      })))), /*#__PURE__*/React.createElement(Typography, {\n        variant: \"h6\",\n        style: {\n          color: \"#3F51B5\",\n          fontWeight: \"normal\",\n          fontFamily: \"Roboto\",\n          marginLeft: \"60px\",\n          marginTop: \"20px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 669,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-chevron-left zmdi-hc-1x mr-3\",\n        style: {\n          color: \"#0000CD\"\n        },\n        onClick: goToBack,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 679,\n          columnNumber: 13\n        }\n      }), this.state.dateEvent, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-chevron-right zmdi-hc-1x ml-3\",\n        style: {\n          color: this.state.colorSelected\n        },\n        onClick: goToNext,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 685,\n          columnNumber: 13\n        }\n      }))));\n    };\n\n    this.state = {\n      isRedirect: false,\n      colorSelected: \"#C0C0C0\",\n      title: \"\",\n      dateEvent: \"\",\n      callRegister: [],\n      event: {},\n      callRegisterSetting: {},\n      isOpen: false,\n      sutdentId: null,\n      observations: [],\n      encouragements: [],\n      sanctions: [],\n      observationSelected: [],\n      descriptionObservation: \"\",\n      encouragementSelected: [],\n      descriptionEncouragement: \"\",\n      isOpenSanction: false,\n      sanctionSelected: [],\n      descriptionSanction: \"\",\n      isOpenAlert: false\n    };\n    this.CustomToolbar = this.CustomToolbar.bind(this);\n    this.event = this.event.bind(this);\n    this.handleChangePresence = this.handleChangePresence.bind(this);\n    this.handleChangeDelay = this.handleChangeDelay.bind(this);\n    this.handleChangeSanction = this.handleChangeSanction.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChangeOther = this.handleChangeOther.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeObservations = this.handleChangeObservations.bind(this);\n    this.handleChangeEncouragement = this.handleChangeEncouragement.bind(this);\n    this.handleSubmitOther = this.handleSubmitOther.bind(this);\n    this.handleSubmitSanction = this.handleSubmitSanction.bind(this);\n    this.handleChangeSanctions = this.handleChangeSanctions.bind(this);\n    this.onConfirm = this.onConfirm.bind(this);\n    this.changeEvent = this.changeEvent.bind(this);\n  }\n\n  onConfirm() {\n    this.setState({\n      isOpenAlert: false\n    });\n  }\n\n  handleCancel() {\n    this.setState({\n      isOpen: false,\n      isOpenSanction: false\n    });\n  }\n\n  handleChangeOther(event, name, id) {\n    event.preventDefault();\n    this.setState({\n      isOpen: true,\n      sutdentId: id\n    });\n  }\n\n  handleChangePresence(event, name, id) {\n    event.preventDefault();\n    let newCallRegister = this.state.callRegister.map(studentCall => studentCall.studentId === parseInt(id) ? { ...studentCall,\n      [name]: !studentCall.presence\n    } : studentCall);\n    this.setState({\n      callRegister: newCallRegister\n    });\n  }\n\n  handleChangeDelay(event, name, id) {\n    event.preventDefault();\n    let newCallRegister = this.state.callRegister.map(studentCall => studentCall.studentId === parseInt(id) ? { ...studentCall,\n      [name]: !studentCall.delay\n    } : studentCall);\n    this.setState({\n      callRegister: newCallRegister\n    });\n  }\n\n  handleChangeSanction(event, name, id) {\n    event.preventDefault();\n    this.setState({\n      isOpenSanction: true,\n      sutdentId: id\n    });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    let callRegister = {\n      plannningEventsId: this.state.event.id,\n      creatorProfileId: this.props.userProfile.id,\n      startDate: this.state.event.start,\n      endDate: this.state.event.end,\n      callDate: moment()._d,\n      studentsCalls: this.state.callRegister\n    };\n    let otherData = {\n      classId: this.state.event.classId,\n      establishementId: this.props.userProfile.establishment_id,\n      schoolYearId: this.props.userProfile.school_year_id,\n      roleId: this.props.userProfile.role_id,\n      profileId: this.props.userProfile.id\n    };\n    this.props.dispatch(saveCallRegister(callRegister, otherData));\n    this.setState({\n      isRedirect: true\n    });\n  }\n\n  handleSubmitOther(e, id) {\n    e.preventDefault();\n    this.setState({\n      isOpen: false\n    });\n    let newCallRegister = this.state.callRegister.map(studentCall => studentCall.studentId === parseInt(id) ? { ...studentCall,\n      observation: this.state.observationSelected.value,\n      description_observation: this.state.descriptionObservation,\n      encouragement: this.state.encouragementSelected.value,\n      description_encouragement: this.state.descriptionEncouragement\n    } : studentCall);\n    this.setState({\n      callRegister: newCallRegister,\n      observationSelected: \"\",\n      descriptionObservation: \"\",\n      encouragementSelected: \"\",\n      descriptionEncouragement: \"\"\n    });\n  }\n\n  handleSubmitSanction(e, id) {\n    e.preventDefault();\n    this.setState({\n      isOpenSanction: false\n    });\n    let newCallRegister = this.state.callRegister.map(studentCall => studentCall.studentId === parseInt(id) ? { ...studentCall,\n      sanction: this.state.sanctionSelected.value,\n      description_sanction: this.state.descriptionSanction\n    } : studentCall);\n    this.setState({\n      callRegister: newCallRegister,\n      sanctionSelected: \"\",\n      descriptionSanction: \"\"\n    });\n  }\n\n  UNSAFE_componentWillMount() {\n    this.props.dispatch(getEventCallRegisterForAdmin(this.props.userProfile.establishment_id, this.props.userProfile.school_year_id, this.props.match.params.classId));\n    let dateFormat = moment(this.props.match.params.startDate).format(\"YYYY-MM-DD\");\n    let timeFormat = moment(this.props.match.params.startDate).format(\"HH:mm:ssZ\");\n    let TimeDate = dateFormat + \"T\" + timeFormat;\n    let eventId = this.props.match.params.eventId;\n    let apiEndpoint = `/call_registers?access_token=${localStorage.token}?filter[where][and][0][start_date]=${TimeDate}&filter[where][and][1][fk_id_planning_events]=${eventId}&filter[include][studentCall][student][profile][user]`;\n    classService.get(apiEndpoint).then(res => {\n      if (res) {\n        if (res.data.length > 0) {\n          let historiqRegistre = res.data[0].studentCall.map(element => {\n            return {\n              name: element.student.profile.user.name,\n              surname: element.student.profile.user.surname,\n              presence: element.presence,\n              delay: element.delay,\n              sanction: element.sanction,\n              description_sanction: element.description_sanction,\n              observation: element.observation,\n              description_observation: element.description_observation,\n              encouragement: element.encouragement,\n              description_encouragement: element.description_encouragement,\n              studentId: element.fk_id_student,\n              photo: element.student.profile.user.photo\n            };\n          });\n          this.setState({\n            callRegister: historiqRegistre\n          });\n        } else {\n          this.setState({\n            callRegister: this.props.students\n          });\n        }\n      }\n    });\n    const startDateEvent = moment(this.props.match.params.startDate).format(\"DD/MM/YYYY HH:mm\");\n    let eventSelected = this.props.events.filter(element => element.id === parseInt(this.props.match.params.eventId, 10) && moment(element.start).format(\"DD/MM/YYYY HH:mm\") === startDateEvent);\n\n    if (!_.isEmpty(eventSelected)) {\n      const classId = eventSelected[0].classId;\n      let apiEndpoint = `/class_v4/${classId}?access_token=${localStorage.token}&filter[include][level][educationType][callRegisterSetting]`;\n      classService.get(apiEndpoint).then(res => {\n        if (res) {\n          let callRegisterSetting = res.data.level.educationType.callRegisterSetting;\n\n          if (!_.isEmpty(callRegisterSetting)) {\n            let callRegisterSetting = res.data.level.educationType.callRegisterSetting[0];\n            this.setState({\n              callRegisterSetting\n            });\n\n            if (callRegisterSetting.observation) {\n              this.props.dispatch(getObservationList());\n            }\n\n            if (callRegisterSetting.encouragement) {\n              this.props.dispatch(getEncouragementList());\n            }\n\n            if (callRegisterSetting.sanction) {\n              this.props.dispatch(getSanctionList());\n            }\n          } else {\n            this.setState({\n              isOpenAlert: true\n            });\n          }\n        }\n      });\n      let title = eventSelected[0].classeName + \"/\" + eventSelected[0].subjectName + \"/\" + new Date(eventSelected[0].start).toLocaleDateString(\"fr-FR\", options);\n      let curentDay = new Date();\n      let checkDate = moment(eventSelected[0].start).isAfter(curentDay);\n\n      if (!checkDate) {\n        this.setState({\n          colorSelected: \"#0000CD\"\n        });\n      }\n\n      this.setState({\n        title: title,\n        dateEvent: new Date(eventSelected[0].start).toLocaleDateString(\"fr-FR\", options1),\n        event: eventSelected[0]\n      });\n    }\n  }\n\n  event({\n    event\n  }) {\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: \"Popover-\" + event.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }\n      }, event.eventType === \"lesson\" ? /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontFamily: \"Roboto\",\n          fontSize: \"17px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 15\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 17\n        }\n      }, event.subjectName), \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 44\n        }\n      }), \" \", event.roomName, \" \", event.tagCallRegister ? /*#__PURE__*/React.createElement(\"i\", {\n        class: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: \"green\",\n          float: \"right\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 19\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        class: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: \"red\",\n          float: \"right\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 19\n        }\n      }), \" \") : event.eventType === \"exam\" ? /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontFamily: \"Roboto\",\n          fontSize: \"17px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 15\n        }\n      }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.note.exam\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 17\n        }\n      }), \" \", /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 17\n        }\n      }, event.subjectName), \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 44\n        }\n      }), \" \", event.roomName, \" \", event.tagCallRegister ? /*#__PURE__*/React.createElement(\"i\", {\n        class: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: \"green\",\n          float: \"right\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 19\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        class: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: \"red\",\n          float: \"right\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 19\n        }\n      }), \" \") : \"\"));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: \"Popover-\" + event.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 11\n        }\n      }, event.eventType === \"lesson\" ? /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          fontFamily: \"Roboto\",\n          fontSize: \"17px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 15\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 17\n        }\n      }, event.subjectName), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 17\n        }\n      }), \" \", event.profGender === \"Féminin\" ? /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 19\n        }\n      }, \"Mme. \", event.profName, \" \", event.profSurname, \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 63\n        }\n      }), \" \", event.roomName, \" \", /*#__PURE__*/React.createElement(\"i\", {\n        class: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: \"green\",\n          float: \"right\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 21\n        }\n      }), \" \") : /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 19\n        }\n      }, \"M. \", event.profName, \" \", event.profSurname, \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 61\n        }\n      }), \" \", event.roomName, \" \", event.tagCallRegister ? /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: \"green\",\n          float: \"right\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 23\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: \"red\",\n          float: \"right\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 23\n        }\n      }), \" \"), \" \") : event.eventType === \"exam\" ? /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          fontFamily: \"Roboto\",\n          fontSize: \"17px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 15\n        }\n      }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.note.exam\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 17\n        }\n      }), \":\", \" \", /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 17\n        }\n      }, event.subjectName), \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 44\n        }\n      }), event.profGender === \"Féminin\" ? /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 19\n        }\n      }, \"Mme. \", event.profName, \" \", event.profSurname, \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 63\n        }\n      }), \" \", event.roomName, \" \", /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: \"green\",\n          float: \"right\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 462,\n          columnNumber: 21\n        }\n      }), \" \") : /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 19\n        }\n      }, \"M. \", event.profName, \" \", event.profSurname, \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 61\n        }\n      }), \" \", event.roomName, \" \", event.tagCallRegister ? /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: \"green\",\n          float: \"right\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 23\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: \"red\",\n          float: \"right\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 23\n        }\n      }), \" \")) : \"\"));\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.userProfile !== this.props.userProfile) {\n      this.props.dispatch(getEventCallRegisterForAdmin(this.props.userProfile.establishment_id, this.props.userProfile.school_year_id, this.props.match.params.classId));\n      this.props.dispatch(getStudentsCallRegister(this.props.match.params.classId, this.props.userProfile.school_year_id));\n    }\n\n    if (prevProps.students !== this.props.students) {\n      this.setState({\n        callRegister: this.props.students\n      });\n    }\n\n    if (prevProps.events !== this.props.events) {\n      const startDateEvent = moment(this.props.match.params.startDate).format(\"DD/MM/YYYY HH:mm\");\n      let eventSelected = this.props.events.filter(element => element.id === parseInt(this.props.match.params.eventId, 10) && moment(element.start).format(\"DD/MM/YYYY HH:mm\") === startDateEvent);\n\n      if (!_.isEmpty(eventSelected)) {\n        const classId = eventSelected[0].classId;\n        let apiEndpoint = `/class_v4/${classId}?access_token=${localStorage.token}&filter[include][level][educationType][callRegisterSetting]`;\n        classService.get(apiEndpoint).then(res => {\n          if (res) {\n            let callRegisterSetting = res.data.level.educationType.callRegisterSetting;\n\n            if (!_.isEmpty(callRegisterSetting)) {\n              let callRegisterSetting = res.data.level.educationType.callRegisterSetting[0];\n              this.setState({\n                callRegisterSetting\n              });\n\n              if (callRegisterSetting.observation) {\n                this.props.dispatch(getObservationList());\n              }\n\n              if (callRegisterSetting.encouragement) {\n                this.props.dispatch(getEncouragementList());\n              }\n\n              if (callRegisterSetting.sanction) {\n                this.props.dispatch(getSanctionList());\n              }\n            } else {\n              this.setState({\n                isOpenAlert: true\n              });\n            }\n          }\n        });\n        let title = eventSelected[0].classeName + \"/\" + eventSelected[0].subjectName + \"/\" + new Date(eventSelected[0].start).toLocaleDateString(\"fr-FR\", options);\n        this.setState({\n          title: title,\n          dateEvent: new Date(eventSelected[0].start).toLocaleDateString(\"fr-FR\", options1),\n          event: eventSelected[0]\n        });\n      }\n    }\n\n    if (prevProps.observations !== this.props.observations) {\n      let options = [];\n      this.props.observations.forEach((element, index) => {\n        let option = {\n          label: element.name_fr,\n          value: element.value,\n          key: index\n        };\n        options.push(option);\n      });\n      this.setState({\n        observations: options\n      });\n    }\n\n    if (prevProps.encouragements !== this.props.encouragements) {\n      let options = [];\n      this.props.encouragements.forEach((element, index) => {\n        let option = {\n          label: element.name_fr,\n          value: element.value,\n          key: index\n        };\n        options.push(option);\n      });\n      this.setState({\n        encouragements: options\n      });\n    }\n\n    if (prevProps.sanctions !== this.props.sanctions) {\n      let options = [];\n      this.props.sanctions.forEach((element, index) => {\n        let option = {\n          label: element.name_fr,\n          value: element.value,\n          key: index\n        };\n        options.push(option);\n      });\n      this.setState({\n        sanctions: options\n      });\n    }\n  }\n\n  eventStyleGetter(event, start, end, isSelected) {\n    let diff = moment.utc(moment(event.end, \"DD/MM/YYYY HH:mm\").diff(moment(event.start, \"DD/MM/YYYY HH:mm\"))).format(\"HH:mm\");\n    const mn = moment.duration(diff).asMinutes();\n    let height = mn * 1.3 * 0.33 + \"px\";\n    var backgroundColor = event.subjectColor;\n    var style = {\n      backgroundColor: backgroundColor,\n      opacity: 0.8,\n      color: \"black\",\n      border: \"0px\",\n      display: \"block\",\n      borderRadius: \"0px\",\n      paddingTop: height\n    };\n    return {\n      style: style\n    };\n  }\n\n  render() {\n    let newMatch = {\n      path: \"/app/assiduity/DetailsCallRegister\",\n      url: this.props.match.url,\n      isExact: this.props.match.isExact,\n      params: this.props.match.params\n    };\n    const startDayTime = new Date(\"2020-11-30T07:00:00.000Z\");\n    const endDayTime = new Date(\"2020-11-30T17:00:00.000Z\");\n    let events = this.props.events ? this.props.events : [];\n\n    if (this.state.isRedirect == true) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: `/app/assiduity/call_register`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 734,\n          columnNumber: 14\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column    col-lg-12 col-md-12 col-sm-6 bd-highlight \",\n        style: {\n          paddingRight: \"auto\",\n          paddingLeft: \"2%\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 737,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ContainerHeader, {\n        title: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"call_register\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 745,\n            columnNumber: 20\n          }\n        }),\n        match: newMatch,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 744,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column    col-lg-12 col-md-12 col-sm-6 bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 748,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pointer\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 749,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        style: {\n          color: \"blue\",\n          fontWeight: \"normal\",\n          fontFamily: \"Roboto\",\n          fontSize: \"12px\",\n          marginRight: \"50%\"\n        },\n        onClick: () => this.setState({\n          isRedirect: true\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 750,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"sidebar.components.assiduity\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 760,\n          columnNumber: 18\n        }\n      }), \"/\", /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"call_register\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 761,\n          columnNumber: 18\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" d-flex flex-row bd-highlight  justify-content-between  \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 765,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 766,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(ListItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 767,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(ListItemText, {\n        primary: /*#__PURE__*/React.createElement(\"div\", {\n          className: \" d-flex row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 770,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(Typography, {\n          variant: \"h6\",\n          style: {\n            color: \"#3F51B5\",\n            fontWeight: \"normal\",\n            fontFamily: \"Roboto\",\n            marginLeft: \"-20px\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 771,\n            columnNumber: 25\n          }\n        }, this.state.title)),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 768,\n          columnNumber: 19\n        }\n      }), \" \")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bd-highlight \",\n        style: {\n          fontSize: \"13px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 787,\n          columnNumber: 14\n        }\n      }, moment(this.state.event.start).format(\"HH:mm\"), \"  \\xA0 \\xE0 \\xA0\", moment(this.state.event.end).format(\"HH:mm\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 791,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(PrintIcon, {\n        style: {\n          fontSize: \"35\"\n        },\n        color: \"inherit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 794,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(PictureAsPdfIcon, {\n        style: {\n          fontSize: \"35\"\n        },\n        color: \"inherit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 800,\n          columnNumber: 17\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row col-lg-12 col-md-12 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 810,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row col-lg-12 col-md-12 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 811,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-xl-3 col-lg-4 col-md-7 col-sm-12 col-12 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 812,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(DragAndDropCalendar, {\n        style: {\n          backgroundColor: \"white\"\n        },\n        localizer: localizer,\n        events: events,\n        defaultView: \"day\",\n        timeslots: 1,\n        min: startDayTime,\n        max: endDayTime,\n        eventPropGetter: this.eventStyleGetter,\n        defaultDate: new Date(this.props.match.params.startDate),\n        resizableAccessor: () => false,\n        messages: {\n          month: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"timetable.month\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 827,\n              columnNumber: 26\n            }\n          }),\n          day: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"timetable.day\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 828,\n              columnNumber: 24\n            }\n          }),\n          today: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"timetable.today\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 829,\n              columnNumber: 26\n            }\n          }),\n          previous: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"appModule.back\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 830,\n              columnNumber: 29\n            }\n          }),\n          next: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"appModule.next\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 831,\n              columnNumber: 25\n            }\n          }),\n          agenda: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"timetable.agenda\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 832,\n              columnNumber: 27\n            }\n          }),\n          week: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"timetable.week\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 833,\n              columnNumber: 25\n            }\n          })\n        },\n        onSelectEvent: event => this.changeEvent(event),\n        components: {\n          event: this.event,\n          toolbar: this.CustomToolbar\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 813,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 843,\n          columnNumber: 13\n        }\n      }, this.state.callRegister.slice(0, Math.ceil(this.state.callRegister.length / 2)).map((element, index) => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-wrap flex-row justify-content-around  bd-highlight card shadow\",\n        key: index,\n        id: \"Popover-\" + element.studentId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 848,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mr-2 mt-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 853,\n          columnNumber: 21\n        }\n      }, \" \", /*#__PURE__*/React.createElement(Avatar, {\n        alt: \"...\",\n        src: \"\",\n        className: \"size-40\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 855,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mr-2  bd-highlight description\",\n        style: {\n          marginTop: \"13px\",\n          marginRight: \"15px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 857,\n          columnNumber: 21\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 862,\n          columnNumber: 23\n        }\n      }, element.name, \" \", element.surname)), this.state.callRegisterSetting.presence ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 867,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 868,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 869,\n          columnNumber: 27\n        }\n      }, \" \", /*#__PURE__*/React.createElement(Switch, {\n        classes: {\n          checked: \"text-success\"\n        },\n        onChange: event => this.handleChangePresence(event, \"presence\", element.studentId),\n        checked: element.presence,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 871,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        style: {\n          fontSize: \"9px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 885,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.presence\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 889,\n          columnNumber: 29\n        }\n      })))) : \"\", this.state.callRegisterSetting.delay ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 897,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 898,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 899,\n          columnNumber: 27\n        }\n      }, \" \", /*#__PURE__*/React.createElement(AccessAlarmsIcon, {\n        style: {\n          color: element.delay ? \"black\" : \"Grey\"\n        },\n        onClick: event => this.handleChangeDelay(event, \"delay\", element.studentId),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 901,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        style: {\n          fontSize: \"9px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 914,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.retard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 918,\n          columnNumber: 29\n        }\n      })))) : \"\", this.state.callRegisterSetting.sanction ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 926,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 927,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 928,\n          columnNumber: 27\n        }\n      }, \" \", /*#__PURE__*/React.createElement(ReportIcon, {\n        style: {\n          color: element.sanction ? \"pink\" : \"Grey\"\n        },\n        onClick: event => this.handleChangeSanction(event, \"sanction\", element.studentId),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 930,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        style: {\n          fontSize: \"9px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 943,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.punition\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 947,\n          columnNumber: 29\n        }\n      })))) : \"\", this.state.callRegisterSetting.encouragement || this.state.callRegisterSetting.observation ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 956,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 957,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 958,\n          columnNumber: 27\n        }\n      }, \" \", /*#__PURE__*/React.createElement(AddCircleIcon, {\n        color: \"primary\",\n        onClick: event => this.handleChangeOther(event, \"other\", element.studentId),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 960,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        style: {\n          fontSize: \"9px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 971,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.autre\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 975,\n          columnNumber: 29\n        }\n      })))) : \"\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 986,\n          columnNumber: 13\n        }\n      }, this.state.callRegister.slice(Math.ceil(this.state.callRegister.length / 2), this.state.callRegister.length).map((element, index) => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-wrap flex-row justify-content-around  bd-highlight card shadow\",\n        key: index,\n        id: \"Popover-\" + element.studentId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 993,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mr-2 mt-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 998,\n          columnNumber: 21\n        }\n      }, \" \", /*#__PURE__*/React.createElement(Avatar, {\n        alt: \"...\",\n        src: \"\",\n        className: \"size-40\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1000,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mr-2  bd-highlight description\",\n        style: {\n          marginTop: \"13px\",\n          marginRight: \"15px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1002,\n          columnNumber: 21\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"h5\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1007,\n          columnNumber: 23\n        }\n      }, element.name, \" \", element.surname)), this.state.callRegisterSetting.presence ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1012,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1013,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1014,\n          columnNumber: 27\n        }\n      }, \" \", /*#__PURE__*/React.createElement(Switch, {\n        classes: {\n          checked: \"text-success\"\n        },\n        onChange: event => this.handleChangePresence(event, \"presence\", element.studentId),\n        checked: element.presence,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1016,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        style: {\n          fontSize: \"9px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1030,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.presence\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1034,\n          columnNumber: 29\n        }\n      })))) : \"\", this.state.callRegisterSetting.delay ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1042,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1043,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1044,\n          columnNumber: 27\n        }\n      }, \" \", /*#__PURE__*/React.createElement(AccessAlarmsIcon, {\n        style: {\n          color: element.delay ? \"black\" : \"Grey\"\n        },\n        onClick: event => this.handleChangeDelay(event, \"delay\", element.studentId),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1046,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        style: {\n          fontSize: \"9px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1059,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.retard\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1063,\n          columnNumber: 29\n        }\n      })))) : \"\", this.state.callRegisterSetting.sanction ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1071,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1072,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1073,\n          columnNumber: 27\n        }\n      }, \" \", /*#__PURE__*/React.createElement(ReportIcon, {\n        style: {\n          color: element.sanction ? \"pink\" : \"Grey\"\n        },\n        onClick: event => this.handleChangeSanction(event, \"sanction\", element.studentId),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1075,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        style: {\n          fontSize: \"9px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1088,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.punition\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1092,\n          columnNumber: 29\n        }\n      })))) : \"\", this.state.callRegisterSetting.encouragement || this.state.callRegisterSetting.observation ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1101,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-column bd-highlight \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1102,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1103,\n          columnNumber: 27\n        }\n      }, \" \", /*#__PURE__*/React.createElement(AddCircleIcon, {\n        color: \"primary\",\n        onClick: event => this.handleChangeOther(event, \"other\", element.studentId),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1105,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \" bd-highlight\",\n        style: {\n          fontSize: \"9px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1116,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.autre\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1120,\n          columnNumber: 29\n        }\n      })))) : \"\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-end mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1129,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        style: {\n          borderBottomLeftRadius: \"16px\",\n          borderBottomRightRadius: \"16px\",\n          borderTopLeftRadius: \"16px\",\n          borderTopRightRadius: \"16px\",\n          width: \"100px\",\n          height: \"40px\",\n          marginRight: \"10%\"\n        },\n        className: \" bg-indigo text-white \",\n        onClick: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1130,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"button.save.registreAppel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1144,\n          columnNumber: 19\n        }\n      }))))), this.state.isOpen ? /*#__PURE__*/React.createElement(OtherPopover, {\n        values: this.state,\n        handleCancel: this.handleCancel,\n        handleChange: this.handleChange,\n        handleChangeObservations: this.handleChangeObservations,\n        handleChangeEncouragement: this.handleChangeEncouragement,\n        handleSubmitOther: this.handleSubmitOther,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1151,\n          columnNumber: 13\n        }\n      }) : \"\", this.state.isOpenSanction ? /*#__PURE__*/React.createElement(SanctionPopover, {\n        values: this.state,\n        handleCancel: this.handleCancel,\n        handleSubmitSanction: this.handleSubmitSanction,\n        handleChangeSanctions: this.handleChangeSanctions,\n        handleChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1163,\n          columnNumber: 13\n        }\n      }) : \"\", /*#__PURE__*/React.createElement(SweetAlert, {\n        show: this.state.isOpenAlert,\n        title: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"alert.setting.call.register\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1175,\n            columnNumber: 20\n          }\n        }),\n        onConfirm: this.onConfirm,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1173,\n          columnNumber: 11\n        }\n      }));\n    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    settings: state.settings.locale.languageId,\n    events: state.planning.callRegisterEvents,\n    userProfile: state.auth.userProfile,\n    students: state.student.remoteStudents,\n    observations: state.callRegister.observations,\n    encouragements: state.callRegister.encouragements,\n    sanctions: state.callRegister.sanctions\n  };\n};\n\nexport default withStyles(styles)(connect(mapStateToProps)(DetailsCallRegister));","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Assiduity/routes/CallRegister/DetailsCallRegister.js"],"names":["React","IntlMessages","ListItem","ListItemText","connect","Avatar","Typography","moment","withStyles","Switch","AccessAlarmsIcon","ReportIcon","AddCircleIcon","PrintIcon","PictureAsPdfIcon","BigCalendar","withDragAndDrop","ButtonGroup","Button","_","getEventCallRegisterForAdmin","getEventCallRegisterForProf","Redirect","getStudentsCallRegister","ContainerHeader","roleIdProfessor","saveCallRegister","getObservationList","getEncouragementList","getSanctionList","classService","OtherPopover","SanctionPopover","SweetAlert","localizer","momentLocalizer","DragAndDropCalendar","styles","theme","textColorPrimary","color","options","weekday","day","month","options1","DetailsCallRegister","Component","constructor","props","changeEvent","event","setState","dateFormat","start","format","timeFormat","TimeDate","eventId","id","apiEndpoint","localStorage","token","get","then","res","data","length","historiqRegistre","studentCall","map","element","name","student","profile","user","surname","presence","delay","sanction","description_sanction","observation","description_observation","encouragement","description_encouragement","studentId","fk_id_student","photo","callRegister","students","handleChangeSanctions","selectedOption","sanctionSelected","handleChange","target","value","handleChangeEncouragement","encouragementSelected","handleChangeObservations","observationSelected","CustomToolbar","toolbar","dayCall","Date","date","goToBack","onNavigate","setDate","getDate","title","state","classeName","subjectName","toLocaleDateString","dateEvent","goToNext","curentDay","checkDate","isAfter","colorSelected","fontWeight","fontFamily","marginLeft","marginTop","isRedirect","callRegisterSetting","isOpen","sutdentId","observations","encouragements","sanctions","descriptionObservation","descriptionEncouragement","isOpenSanction","descriptionSanction","isOpenAlert","bind","handleChangePresence","handleChangeDelay","handleChangeSanction","handleSubmit","handleChangeOther","handleCancel","handleSubmitOther","handleSubmitSanction","onConfirm","preventDefault","newCallRegister","parseInt","e","plannningEventsId","creatorProfileId","userProfile","startDate","endDate","end","callDate","_d","studentsCalls","otherData","classId","establishementId","establishment_id","schoolYearId","school_year_id","roleId","role_id","profileId","dispatch","UNSAFE_componentWillMount","match","params","startDateEvent","eventSelected","events","filter","isEmpty","level","educationType","eventType","fontSize","roomName","tagCallRegister","float","profGender","profName","profSurname","componentDidUpdate","prevProps","forEach","index","option","label","name_fr","key","push","eventStyleGetter","isSelected","diff","utc","mn","duration","asMinutes","height","backgroundColor","subjectColor","style","opacity","border","display","borderRadius","paddingTop","render","newMatch","path","url","isExact","startDayTime","endDayTime","paddingRight","paddingLeft","marginRight","today","previous","next","agenda","week","slice","Math","ceil","checked","borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius","width","mapStateToProps","settings","locale","languageId","planning","callRegisterEvents","auth","remoteStudents"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { connect } from \"react-redux\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport moment from \"moment\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport Switch from \"@material-ui/core/Switch\";\nimport AccessAlarmsIcon from \"@material-ui/icons/AccessAlarms\";\nimport ReportIcon from \"@material-ui/icons/Report\";\nimport AddCircleIcon from \"@material-ui/icons/AddCircle\";\nimport PrintIcon from \"@material-ui/icons/Print\";\nimport PictureAsPdfIcon from \"@material-ui/icons/PictureAsPdf\";\nimport BigCalendar from \"react-big-calendar\";\nimport withDragAndDrop from \"react-big-calendar/lib/addons/dragAndDrop\";\nimport \"react-big-calendar/lib/addons/dragAndDrop/styles.css\";\nimport { ButtonGroup } from \"reactstrap\";\nimport Button from \"@material-ui/core/Button\";\nimport _ from \"lodash\";\nimport {\n  getEventCallRegisterForAdmin,\n  getEventCallRegisterForProf,\n} from \"../../../../../actions/planningActions\";\nimport { Redirect } from \"react-router-dom\";\nimport { getStudentsCallRegister } from \"../../../../../actions/studentAction\";\nimport ContainerHeader from \"../../../../../components/ContainerHeader\";\nimport { roleIdProfessor } from \"../../../../../config/config\";\nimport {\n  saveCallRegister,\n  getObservationList,\n  getEncouragementList,\n  getSanctionList,\n} from \"../../../../../actions/RegistreAction\";\nimport { classService } from \"../../../../../_services/class.service\";\nimport OtherPopover from \"./OtherPopover\";\nimport SanctionPopover from \"./SanctionPopover\";\nimport SweetAlert from \"react-bootstrap-sweetalert\";\n\nconst localizer = BigCalendar.momentLocalizer(moment);\nconst DragAndDropCalendar = withDragAndDrop(BigCalendar);\nconst styles = (theme) => ({\n  textColorPrimary: {\n    color: \"red\",\n  },\n});\n\nvar options = {\n  weekday: \"long\",\n  day: \"numeric\",\n  month: \"long\",\n};\nvar options1 = {\n  day: \"numeric\",\n  month: \"long\",\n};\n\nclass DetailsCallRegister extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isRedirect: false,\n      colorSelected: \"#C0C0C0\",\n      title: \"\",\n      dateEvent: \"\",\n      callRegister: [],\n      event: {},\n      callRegisterSetting: {},\n      isOpen: false,\n      sutdentId: null,\n      observations: [],\n      encouragements: [],\n      sanctions: [],\n      observationSelected: [],\n      descriptionObservation: \"\",\n      encouragementSelected: [],\n      descriptionEncouragement: \"\",\n      isOpenSanction: false,\n      sanctionSelected: [],\n      descriptionSanction: \"\",\n      isOpenAlert: false,\n    };\n    this.CustomToolbar = this.CustomToolbar.bind(this);\n    this.event = this.event.bind(this);\n    this.handleChangePresence = this.handleChangePresence.bind(this);\n    this.handleChangeDelay = this.handleChangeDelay.bind(this);\n    this.handleChangeSanction = this.handleChangeSanction.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChangeOther = this.handleChangeOther.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeObservations = this.handleChangeObservations.bind(this);\n    this.handleChangeEncouragement = this.handleChangeEncouragement.bind(this);\n    this.handleSubmitOther = this.handleSubmitOther.bind(this);\n    this.handleSubmitSanction = this.handleSubmitSanction.bind(this);\n    this.handleChangeSanctions = this.handleChangeSanctions.bind(this);\n    this.onConfirm = this.onConfirm.bind(this); \n    this.changeEvent = this.changeEvent.bind(this);\n  }\n\n  changeEvent = (event) => {\n\n    this.setState({event:event})\n    let dateFormat = moment(event.start).format(\n      \"YYYY-MM-DD\"\n    );\n    let timeFormat = moment(event.start).format(\n      \"HH:mm:ssZ\"\n    );\n    let TimeDate = dateFormat + \"T\" + timeFormat;\n    let eventId = event.id;\n    let apiEndpoint = `/call_registers?access_token=${localStorage.token}?filter[where][and][0][start_date]=${TimeDate}&filter[where][and][1][fk_id_planning_events]=${eventId}&filter[include][studentCall][student][profile][user]`;\n    classService.get(apiEndpoint).then((res) => {\n      \n      if (res) {\n        if (res.data.length > 0) {\n          let historiqRegistre = res.data[0].studentCall.map((element) => {\n            return {\n              name: element.student.profile.user.name,\n              surname: element.student.profile.user.surname,\n              presence: element.presence,\n              delay: element.delay,\n              sanction: element.sanction,\n              description_sanction: element.description_sanction,\n              observation: element.observation,\n              description_observation: element.description_observation,\n              encouragement: element.encouragement,\n              description_encouragement: element.description_encouragement,\n              studentId: element.fk_id_student,\n              photo: element.student.profile.user.photo,\n            };\n          });\n\n          this.setState({ callRegister: historiqRegistre });\n        } else {\n          this.setState({ callRegister: this.props.students });\n        }\n      }\n    });\n  }\n\n  onConfirm() {\n    this.setState({ isOpenAlert: false });\n  }\n\n  handleChangeSanctions = (selectedOption) => {\n    this.setState({ sanctionSelected: selectedOption });\n  };\n\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n\n  handleChangeEncouragement = (selectedOption) => {\n    this.setState({ encouragementSelected: selectedOption });\n  };\n\n  handleChangeObservations = (selectedOption) => {\n    this.setState({ observationSelected: selectedOption });\n  };\n\n  handleCancel() {\n    this.setState({ isOpen: false, isOpenSanction: false });\n  }\n\n  handleChangeOther(event, name, id) {\n    event.preventDefault();\n    this.setState({ isOpen: true, sutdentId: id });\n  }\n\n  handleChangePresence(event, name, id) {\n    event.preventDefault();\n\n    let newCallRegister = this.state.callRegister.map((studentCall) =>\n      studentCall.studentId === parseInt(id)\n        ? {\n            ...studentCall,\n            [name]: !studentCall.presence,\n          }\n        : studentCall\n    );\n    this.setState({ callRegister: newCallRegister });\n  }\n\n  handleChangeDelay(event, name, id) {\n    event.preventDefault();\n    let newCallRegister = this.state.callRegister.map((studentCall) =>\n      studentCall.studentId === parseInt(id)\n        ? {\n            ...studentCall,\n            [name]: !studentCall.delay,\n          }\n        : studentCall\n    );\n    this.setState({ callRegister: newCallRegister });\n  }\n\n  handleChangeSanction(event, name, id) {\n    event.preventDefault();\n    this.setState({ isOpenSanction: true, sutdentId: id });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    let callRegister = {\n      plannningEventsId: this.state.event.id,\n      creatorProfileId: this.props.userProfile.id,\n      startDate: this.state.event.start,\n      endDate: this.state.event.end,\n      callDate: moment()._d,\n      studentsCalls: this.state.callRegister,\n    };\n    let otherData = {\n      classId: this.state.event.classId,\n      establishementId: this.props.userProfile.establishment_id,\n      schoolYearId: this.props.userProfile.school_year_id,\n      roleId: this.props.userProfile.role_id,\n      profileId: this.props.userProfile.id,\n    };\n    this.props.dispatch(saveCallRegister(callRegister, otherData));\n    this.setState({ isRedirect: true });\n  }\n\n  handleSubmitOther(e, id) {\n    e.preventDefault();\n    this.setState({ isOpen: false });\n\n    let newCallRegister = this.state.callRegister.map((studentCall) =>\n      studentCall.studentId === parseInt(id)\n        ? {\n            ...studentCall,\n            observation: this.state.observationSelected.value,\n            description_observation: this.state.descriptionObservation,\n            encouragement: this.state.encouragementSelected.value,\n            description_encouragement: this.state.descriptionEncouragement,\n          }\n        : studentCall\n    );\n    this.setState({\n      callRegister: newCallRegister,\n      observationSelected: \"\",\n      descriptionObservation: \"\",\n      encouragementSelected: \"\",\n      descriptionEncouragement: \"\",\n    });\n  }\n\n  handleSubmitSanction(e, id) {\n    e.preventDefault();\n    this.setState({ isOpenSanction: false });\n    let newCallRegister = this.state.callRegister.map((studentCall) =>\n      studentCall.studentId === parseInt(id)\n        ? {\n            ...studentCall,\n            sanction: this.state.sanctionSelected.value,\n            description_sanction: this.state.descriptionSanction,\n          }\n        : studentCall\n    );\n    this.setState({\n      callRegister: newCallRegister,\n      sanctionSelected: \"\",\n      descriptionSanction: \"\",\n    });\n  }\n\n  UNSAFE_componentWillMount() {\n    this.props.dispatch(\n      getEventCallRegisterForAdmin(\n        this.props.userProfile.establishment_id,\n        this.props.userProfile.school_year_id,\n        this.props.match.params.classId\n      )\n    );\n    let dateFormat = moment(this.props.match.params.startDate).format(\n      \"YYYY-MM-DD\"\n    );\n    let timeFormat = moment(this.props.match.params.startDate).format(\n      \"HH:mm:ssZ\"\n    );\n    let TimeDate = dateFormat + \"T\" + timeFormat;\n    let eventId = this.props.match.params.eventId;\n    let apiEndpoint = `/call_registers?access_token=${localStorage.token}?filter[where][and][0][start_date]=${TimeDate}&filter[where][and][1][fk_id_planning_events]=${eventId}&filter[include][studentCall][student][profile][user]`;\n    classService.get(apiEndpoint).then((res) => {\n      if (res) {\n        if (res.data.length > 0) {\n          let historiqRegistre = res.data[0].studentCall.map((element) => {\n            return {\n              name: element.student.profile.user.name,\n              surname: element.student.profile.user.surname,\n              presence: element.presence,\n              delay: element.delay,\n              sanction: element.sanction,\n              description_sanction: element.description_sanction,\n              observation: element.observation,\n              description_observation: element.description_observation,\n              encouragement: element.encouragement,\n              description_encouragement: element.description_encouragement,\n              studentId: element.fk_id_student,\n              photo: element.student.profile.user.photo,\n            };\n          });\n\n          this.setState({ callRegister: historiqRegistre });\n        } else {\n          this.setState({ callRegister: this.props.students });\n        }\n      }\n    });\n    const startDateEvent = moment(this.props.match.params.startDate).format(\n      \"DD/MM/YYYY HH:mm\"\n    );\n    let eventSelected = this.props.events.filter(\n      (element) =>\n        element.id === parseInt(this.props.match.params.eventId, 10) &&\n        moment(element.start).format(\"DD/MM/YYYY HH:mm\") === startDateEvent\n    );\n\n    if (!_.isEmpty(eventSelected)) {\n      const classId = eventSelected[0].classId;\n      let apiEndpoint = `/class_v4/${classId}?access_token=${localStorage.token}&filter[include][level][educationType][callRegisterSetting]`;\n      classService.get(apiEndpoint).then((res) => {\n        if (res) {\n          let callRegisterSetting =\n            res.data.level.educationType.callRegisterSetting;\n          if (!_.isEmpty(callRegisterSetting)) {\n            let callRegisterSetting =\n              res.data.level.educationType.callRegisterSetting[0];\n            this.setState({ callRegisterSetting });\n            if (callRegisterSetting.observation) {\n              this.props.dispatch(getObservationList());\n            }\n            if (callRegisterSetting.encouragement) {\n              this.props.dispatch(getEncouragementList());\n            }\n            if (callRegisterSetting.sanction) {\n              this.props.dispatch(getSanctionList());\n            }\n          } else {\n            this.setState({ isOpenAlert: true });\n          }\n        }\n      });\n      let title =\n        eventSelected[0].classeName +\n        \"/\" +\n        eventSelected[0].subjectName +\n        \"/\" +\n        new Date(eventSelected[0].start).toLocaleDateString(\"fr-FR\", options);\n        \n\n\n\n\n      let curentDay = new Date();\n      let checkDate = moment(eventSelected[0].start).isAfter(curentDay);\n      if (!checkDate) {\n        this.setState({ colorSelected: \"#0000CD\" });\n      }\n      this.setState({\n        title: title,\n        dateEvent: new Date(eventSelected[0].start).toLocaleDateString(\n          \"fr-FR\",\n          options1\n        ),\n        event: eventSelected[0],\n      });\n    }\n  }\n\n  event({ event }) {\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      return (\n        <div id={\"Popover-\" + event.id}>\n          <span>\n            {event.eventType === \"lesson\" ? (\n              <p style={{ fontFamily: \"Roboto\", fontSize: \"17px\" }}>\n                {\" \"}\n                <b>{event.subjectName}</b> <br /> {event.roomName}{\" \"}\n                {event.tagCallRegister ? (\n                  <i\n                    class=\"zmdi zmdi-circle zmdi-hc-lg \"\n                    style={{ color: \"green\", float: \"right\" }}\n                  ></i>\n                ) : (\n                  <i\n                    class=\"zmdi zmdi-circle zmdi-hc-lg \"\n                    style={{ color: \"red\", float: \"right\" }}\n                  ></i>\n                )}{\" \"}\n              </p>\n            ) : event.eventType === \"exam\" ? (\n              <p style={{ fontFamily: \"Roboto\", fontSize: \"17px\" }}>\n                {\" \"}\n                <IntlMessages id=\"components.note.exam\" />{\" \"}\n                <b>{event.subjectName}</b> <br /> {event.roomName}{\" \"}\n                {event.tagCallRegister ? (\n                  <i\n                    class=\"zmdi zmdi-circle zmdi-hc-lg \"\n                    style={{ color: \"green\", float: \"right\" }}\n                  ></i>\n                ) : (\n                  <i\n                    class=\"zmdi zmdi-circle zmdi-hc-lg \"\n                    style={{ color: \"red\", float: \"right\" }}\n                  ></i>\n                )}{\" \"}\n              </p>\n            ) : (\n              \"\"\n            )}\n          </span>\n        </div>\n      );\n    } else {\n      return (\n        <div id={\"Popover-\" + event.id}>\n          <span>\n            {event.eventType === \"lesson\" ? (\n              <div style={{ fontFamily: \"Roboto\", fontSize: \"17px\" }}>\n                {\" \"}\n                <b>{event.subjectName}</b>\n                <br />{\" \"}\n                {event.profGender === \"Féminin\" ? (\n                  <p>\n                    Mme. {event.profName} {event.profSurname} <br />{\" \"}\n                    {event.roomName}{\" \"}\n                    <i\n                      class=\"zmdi zmdi-circle zmdi-hc-lg \"\n                      style={{ color: \"green\", float: \"right\" }}\n                    ></i>{\" \"}\n                  </p>\n                ) : (\n                  <p>\n                    M. {event.profName} {event.profSurname} <br />{\" \"}\n                    {event.roomName}{\" \"}\n                    {event.tagCallRegister ? (\n                      <i\n                        className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                        style={{ color: \"green\", float: \"right\" }}\n                      ></i>\n                    ) : (\n                      <i\n                        className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                        style={{ color: \"red\", float: \"right\" }}\n                      ></i>\n                    )}{\" \"}\n                  </p>\n                )}{\" \"}\n              </div>\n            ) : event.eventType === \"exam\" ? (\n              <div style={{ fontFamily: \"Roboto\", fontSize: \"17px\" }}>\n                {\" \"}\n                <IntlMessages id=\"components.note.exam\" />:{\" \"}\n                <b>{event.subjectName}</b> <br />\n                {event.profGender === \"Féminin\" ? (\n                  <p>\n                    Mme. {event.profName} {event.profSurname} <br />{\" \"}\n                    {event.roomName}{\" \"}\n                    <i\n                      className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                      style={{ color: \"green\", float: \"right\" }}\n                    ></i>{\" \"}\n                  </p>\n                ) : (\n                  <p>\n                    M. {event.profName} {event.profSurname} <br />{\" \"}\n                    {event.roomName}{\" \"}\n                    {event.tagCallRegister ? (\n                      <i\n                        className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                        style={{ color: \"green\", float: \"right\" }}\n                      ></i>\n                    ) : (\n                      <i\n                        className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                        style={{ color: \"red\", float: \"right\" }}\n                      ></i>\n                    )}{\" \"}\n                  </p>\n                )}\n              </div>\n            ) : (\n              \"\"\n            )}\n          </span>\n        </div>\n      );\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.userProfile !== this.props.userProfile) {\n      this.props.dispatch(\n        getEventCallRegisterForAdmin(\n          this.props.userProfile.establishment_id,\n          this.props.userProfile.school_year_id,\n          this.props.match.params.classId\n        )\n      );\n      this.props.dispatch(\n        getStudentsCallRegister(\n          this.props.match.params.classId,\n          this.props.userProfile.school_year_id\n        )\n      );\n    }\n    if (prevProps.students !== this.props.students) {\n      this.setState({ callRegister: this.props.students });\n    }\n\n    if (prevProps.events !== this.props.events) {\n      const startDateEvent = moment(this.props.match.params.startDate).format(\n        \"DD/MM/YYYY HH:mm\"\n      );\n      let eventSelected = this.props.events.filter(\n        (element) =>\n          element.id === parseInt(this.props.match.params.eventId, 10) &&\n          moment(element.start).format(\"DD/MM/YYYY HH:mm\") === startDateEvent\n      );\n\n      if (!_.isEmpty(eventSelected)) {\n        const classId = eventSelected[0].classId;\n\n        let apiEndpoint = `/class_v4/${classId}?access_token=${localStorage.token}&filter[include][level][educationType][callRegisterSetting]`;\n        classService.get(apiEndpoint).then((res) => {\n          if (res) {\n            let callRegisterSetting =\n              res.data.level.educationType.callRegisterSetting;\n            if (!_.isEmpty(callRegisterSetting)) {\n              let callRegisterSetting =\n                res.data.level.educationType.callRegisterSetting[0];\n              this.setState({ callRegisterSetting });\n              if (callRegisterSetting.observation) {\n                this.props.dispatch(getObservationList());\n              }\n              if (callRegisterSetting.encouragement) {\n                this.props.dispatch(getEncouragementList());\n              }\n              if (callRegisterSetting.sanction) {\n                this.props.dispatch(getSanctionList());\n              }\n            } else {\n              this.setState({ isOpenAlert: true });\n            }\n          }\n        });\n        let title =\n          eventSelected[0].classeName +\n          \"/\" +\n          eventSelected[0].subjectName +\n          \"/\" +\n          new Date(eventSelected[0].start).toLocaleDateString(\"fr-FR\", options);\n        this.setState({\n          title: title,\n          dateEvent: new Date(eventSelected[0].start).toLocaleDateString(\n            \"fr-FR\",\n            options1\n          ),\n          event: eventSelected[0],\n        });\n      }\n    }\n\n    if (prevProps.observations !== this.props.observations) {\n      let options = [];\n      this.props.observations.forEach((element, index) => {\n        let option = {\n          label: element.name_fr,\n          value: element.value,\n          key: index,\n        };\n        options.push(option);\n      });\n      this.setState({ observations: options });\n    }\n    if (prevProps.encouragements !== this.props.encouragements) {\n      let options = [];\n      this.props.encouragements.forEach((element, index) => {\n        let option = {\n          label: element.name_fr,\n          value: element.value,\n          key: index,\n        };\n        options.push(option);\n      });\n      this.setState({ encouragements: options });\n    }\n    if (prevProps.sanctions !== this.props.sanctions) {\n      let options = [];\n      this.props.sanctions.forEach((element, index) => {\n        let option = {\n          label: element.name_fr,\n          value: element.value,\n          key: index,\n        };\n        options.push(option);\n      });\n      this.setState({ sanctions: options });\n    }\n  }\n\n  CustomToolbar = (toolbar) => {\n    let dayCall = new Date(toolbar.date);\n    const goToBack = () => {\n      toolbar.onNavigate(\"PREV\");\n      dayCall.setDate(dayCall.getDate() + -1);\n      let title =\n        this.state.event.classeName +\n        \"/\" +\n        this.state.event.subjectName +\n        \"/\" +\n        new Date(dayCall).toLocaleDateString(\"fr-FR\", options);\n      this.setState({\n        title: title,\n        dateEvent: new Date(dayCall).toLocaleDateString(\"fr-FR\", options1),\n      });\n    };\n\n    const goToNext = () => {\n      dayCall.setDate(dayCall.getDate() + 1);\n      let curentDay = new Date();\n      let checkDate = moment(dayCall).isAfter(curentDay);\n      if (!checkDate) {\n        toolbar.onNavigate(\"NEXT\");\n        let title =\n          this.state.event.classeName +\n          \"/\" +\n          this.state.event.subjectName +\n          \"/\" +\n          new Date(dayCall).toLocaleDateString(\"fr-FR\", options);\n        this.setState({\n          title: title,\n          dateEvent: new Date(dayCall).toLocaleDateString(\"fr-FR\", options1),\n          colorSelected: \"#0000CD\",\n        });\n      } else {\n        this.setState({ colorSelected: \"#C0C0C0\" });\n      }\n    };\n\n    return (\n      <div\n        className=\"d-flex flex-row bd-highlight mb-3 d-flex \njustify-content-around\"\n      >\n        <div className=\"p-2 bd-highlight\"></div>\n        <div className=\"p-2 bd-highlight\">\n          <ButtonGroup vertical={false}>\n            <Button className=\" jr-btn active\">\n              <span className=\"label-filter-off\">\n                <IntlMessages id=\"timetable.day\" />\n              </span>\n            </Button>\n            <Button className=\"jr-btn\" disabled={true}>\n              <span className=\"label-filter-off\">\n                {\" \"}\n                <IntlMessages id=\"timetable.week\" />\n              </span>\n            </Button>\n            <Button className=\"jr-btn\" disabled={true}>\n              <span className=\"label-filter-off\">\n                <IntlMessages id=\"timetable.month\" />\n              </span>\n            </Button>\n          </ButtonGroup>\n          <Typography\n            variant=\"h6\"\n            style={{\n              color: \"#3F51B5\",\n              fontWeight: \"normal\",\n              fontFamily: \"Roboto\",\n              marginLeft: \"60px\",\n              marginTop: \"20px\",\n            }}\n          >\n            <i\n              className=\"zmdi zmdi-chevron-left zmdi-hc-1x mr-3\"\n              style={{ color: \"#0000CD\" }}\n              onClick={goToBack}\n            ></i>\n            {this.state.dateEvent}\n            <i\n              className=\"zmdi zmdi-chevron-right zmdi-hc-1x ml-3\"\n              style={{ color: this.state.colorSelected }}\n              onClick={goToNext}\n            ></i>\n          </Typography>\n        </div>\n      </div>\n    );\n  };\n\n  eventStyleGetter(event, start, end, isSelected) {\n    let diff = moment\n      .utc(\n        moment(event.end, \"DD/MM/YYYY HH:mm\").diff(\n          moment(event.start, \"DD/MM/YYYY HH:mm\")\n        )\n      )\n      .format(\"HH:mm\");\n    const mn = moment.duration(diff).asMinutes();\n    let height = mn * 1.3 * 0.33 + \"px\";\n    var backgroundColor = event.subjectColor;\n    var style = {\n      backgroundColor: backgroundColor,\n      opacity: 0.8,\n      color: \"black\",\n      border: \"0px\",\n      display: \"block\",\n      borderRadius: \"0px\",\n      paddingTop: height,\n    };\n    return {\n      style: style,\n    };\n  }\n\n  render() {\n\n    let newMatch = {\n      path: \"/app/assiduity/DetailsCallRegister\",\n      url: this.props.match.url,\n      isExact: this.props.match.isExact,\n      params: this.props.match.params,\n    };\n\n    const startDayTime = new Date(\"2020-11-30T07:00:00.000Z\");\n    const endDayTime = new Date(\"2020-11-30T17:00:00.000Z\");\n    let events = this.props.events ? this.props.events : [];\n    if (this.state.isRedirect == true) {\n      return <Redirect to={`/app/assiduity/call_register`} />;\n    } else {\n      return (\n        <div\n          className=\"d-flex flex-column    col-lg-12 col-md-12 col-sm-6 bd-highlight \"\n          style={{\n            paddingRight: \"auto\",\n            paddingLeft: \"2%\",\n          }}\n        >\n          <ContainerHeader\n            title={<IntlMessages id=\"call_register\" />}\n            match={newMatch}\n          />\n          <div className=\"d-flex flex-column    col-lg-12 col-md-12 col-sm-6 bd-highlight \">\n            <div className=\"pointer\">\n              <h5\n                style={{\n                  color: \"blue\",\n                  fontWeight: \"normal\",\n                  fontFamily: \"Roboto\",\n                  fontSize: \"12px\",\n                  marginRight: \"50%\",\n                }}\n                onClick={() => this.setState({ isRedirect: true })}\n              >\n                {<IntlMessages id=\"sidebar.components.assiduity\" />}/\n                {<IntlMessages id=\"call_register\" />}\n              </h5>\n            </div>\n\n            <div className=\" d-flex flex-row bd-highlight  justify-content-between  \">\n              <div className=\"bd-highlight\">\n                <ListItem>\n                  <ListItemText\n                    primary={\n                      <div className=\" d-flex row\">\n                        <Typography\n                          variant=\"h6\"\n                          style={{\n                            color: \"#3F51B5\",\n                            fontWeight: \"normal\",\n                            fontFamily: \"Roboto\",\n                            marginLeft: \"-20px\",\n                          }}\n                        >\n                          {this.state.title}\n                        </Typography>\n                      </div>\n                    }\n                  />{\" \"}\n                </ListItem>\n              </div>\n             <div className=\"bd-highlight \" style={{ fontSize: \"13px\" }}>\n              {moment(this.state.event.start).format(\"HH:mm\")}  &nbsp; à &nbsp;\n              {moment(this.state.event.end).format(\"HH:mm\")}\n               </div>\n              <div\n                className=\" bd-highlight \"\n              >\n                <PrintIcon\n                  style={{\n                    fontSize: \"35\",\n                  }}\n                  color=\"inherit\"\n                />\n                <PictureAsPdfIcon\n                  style={{\n                    fontSize: \"35\",\n                  }}\n                  color=\"inherit\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"row col-lg-12 col-md-12 \">\n            <div className=\"row col-lg-12 col-md-12 \"></div>\n            <div className=\"col-xl-3 col-lg-4 col-md-7 col-sm-12 col-12 \">\n              <DragAndDropCalendar\n                style={{\n                  backgroundColor: \"white\",\n                }}\n                localizer={localizer}\n                events={events}\n                defaultView=\"day\"\n                timeslots={1}\n                min={startDayTime}\n                max={endDayTime}\n                eventPropGetter={this.eventStyleGetter}\n                defaultDate={new Date(this.props.match.params.startDate)}\n                resizableAccessor={() => false}\n                messages={{\n                  month: <IntlMessages id=\"timetable.month\" />,\n                  day: <IntlMessages id=\"timetable.day\" />,\n                  today: <IntlMessages id=\"timetable.today\" />,\n                  previous: <IntlMessages id=\"appModule.back\" />,\n                  next: <IntlMessages id=\"appModule.next\" />,\n                  agenda: <IntlMessages id=\"timetable.agenda\" />,\n                  week: <IntlMessages id=\"timetable.week\" />,\n                }}\n                onSelectEvent={(event) => this.changeEvent(event)}\n                components={{\n                  event: this.event,\n                  toolbar: this.CustomToolbar,\n                }}\n              />\n            </div>\n       \n            <div className=\"col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12 \">\n            \n              {this.state.callRegister\n                .slice(0, Math.ceil(this.state.callRegister.length / 2) )\n                .map((element, index) => (\n                  <div\n                    className=\"d-flex flex-wrap flex-row justify-content-around  bd-highlight card shadow\"\n                    key={index}\n                    id={\"Popover-\" + element.studentId}\n                  >\n                    <div className=\"mr-2 mt-2 bd-highlight\">\n                      {\" \"}\n                      <Avatar alt=\"...\" src=\"\" className=\"size-40\" />\n                    </div>\n                    <div\n                      className=\"mr-2  bd-highlight description\"\n                      style={{ marginTop: \"13px\", marginRight: \"15px\" }}\n                    >\n                      {\" \"}\n                      <h5>\n                        {element.name} {element.surname}\n                      </h5>\n                    </div>\n                    {this.state.callRegisterSetting.presence ? (\n                      <div className=\" bd-highlight\">\n                        <div className=\"d-flex flex-column bd-highlight \">\n                          <div className=\" bd-highlight\">\n                            {\" \"}\n                            <Switch\n                              classes={{\n                                checked: \"text-success\",\n                              }}\n                              onChange={(event) =>\n                                this.handleChangePresence(\n                                  event,\n                                  \"presence\",\n                                  element.studentId\n                                )\n                              }\n                              checked={element.presence}\n                            />\n                          </div>\n                          <div\n                            className=\" bd-highlight\"\n                            style={{ fontSize: \"9px\" }}\n                          >\n                            <IntlMessages id=\"timetable.presence\" />\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      \"\"\n                    )}\n                    {this.state.callRegisterSetting.delay ? (\n                      <div className=\"p-2 bd-highlight\">\n                        <div className=\"d-flex flex-column bd-highlight \">\n                          <div className=\" bd-highlight\">\n                            {\" \"}\n                            <AccessAlarmsIcon\n                              style={{\n                                color: element.delay ? \"black\" : \"Grey\",\n                              }}\n                              onClick={(event) =>\n                                this.handleChangeDelay(\n                                  event,\n                                  \"delay\",\n                                  element.studentId\n                                )\n                              }\n                            />\n                          </div>\n                          <div\n                            className=\" bd-highlight\"\n                            style={{ fontSize: \"9px\" }}\n                          >\n                            <IntlMessages id=\"timetable.retard\" />\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      \"\"\n                    )}\n                    {this.state.callRegisterSetting.sanction ? (\n                      <div className=\"p-2 bd-highlight\">\n                        <div className=\"d-flex flex-column bd-highlight \">\n                          <div className=\" bd-highlight\">\n                            {\" \"}\n                            <ReportIcon\n                              style={{\n                                color: element.sanction ? \"pink\" : \"Grey\",\n                              }}\n                              onClick={(event) =>\n                                this.handleChangeSanction(\n                                  event,\n                                  \"sanction\",\n                                  element.studentId\n                                )\n                              }\n                            />\n                          </div>\n                          <div\n                            className=\" bd-highlight\"\n                            style={{ fontSize: \"9px\" }}\n                          >\n                            <IntlMessages id=\"timetable.punition\" />\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      \"\"\n                    )}\n                    {this.state.callRegisterSetting.encouragement ||\n                    this.state.callRegisterSetting.observation ? (\n                      <div className=\"p-2 bd-highlight\">\n                        <div className=\"d-flex flex-column bd-highlight \">\n                          <div className=\" bd-highlight\">\n                            {\" \"}\n                            <AddCircleIcon\n                              color=\"primary\"\n                              onClick={(event) =>\n                                this.handleChangeOther(\n                                  event,\n                                  \"other\",\n                                  element.studentId\n                                )\n                              }\n                            />\n                          </div>\n                          <div\n                            className=\" bd-highlight\"\n                            style={{ fontSize: \"9px\" }}\n                          >\n                            <IntlMessages id=\"timetable.autre\" />\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      \"\"\n                    )}\n                  </div>\n                ))}\n            </div>\n\n            <div className=\"col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12 \">\n              {this.state.callRegister\n                .slice(\n                  Math.ceil(this.state.callRegister.length / 2) ,\n                  this.state.callRegister.length \n                )\n                .map((element, index) => (\n                  <div\n                    className=\"d-flex flex-wrap flex-row justify-content-around  bd-highlight card shadow\"\n                    key={index}\n                    id={\"Popover-\" + element.studentId}\n                  >\n                    <div className=\"mr-2 mt-2 bd-highlight\">\n                      {\" \"}\n                      <Avatar alt=\"...\" src=\"\" className=\"size-40\" />\n                    </div>\n                    <div\n                      className=\"mr-2  bd-highlight description\"\n                      style={{ marginTop: \"13px\", marginRight: \"15px\" }}\n                    >\n                      {\" \"}\n                      <h5>\n                        {element.name} {element.surname}\n                      </h5>\n                    </div>\n                    {this.state.callRegisterSetting.presence ? (\n                      <div className=\" bd-highlight\">\n                        <div className=\"d-flex flex-column bd-highlight \">\n                          <div className=\" bd-highlight\">\n                            {\" \"}\n                            <Switch\n                              classes={{\n                                checked: \"text-success\",\n                              }}\n                              onChange={(event) =>\n                                this.handleChangePresence(\n                                  event,\n                                  \"presence\",\n                                  element.studentId\n                                )\n                              }\n                              checked={element.presence}\n                            />\n                          </div>\n                          <div\n                            className=\" bd-highlight\"\n                            style={{ fontSize: \"9px\" }}\n                          >\n                            <IntlMessages id=\"timetable.presence\" />\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      \"\"\n                    )}\n                    {this.state.callRegisterSetting.delay ? (\n                      <div className=\"p-2 bd-highlight\">\n                        <div className=\"d-flex flex-column bd-highlight \">\n                          <div className=\" bd-highlight\">\n                            {\" \"}\n                            <AccessAlarmsIcon\n                              style={{\n                                color: element.delay ? \"black\" : \"Grey\",\n                              }}\n                              onClick={(event) =>\n                                this.handleChangeDelay(\n                                  event,\n                                  \"delay\",\n                                  element.studentId\n                                )\n                              }\n                            />\n                          </div>\n                          <div\n                            className=\" bd-highlight\"\n                            style={{ fontSize: \"9px\" }}\n                          >\n                            <IntlMessages id=\"timetable.retard\" />\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      \"\"\n                    )}\n                    {this.state.callRegisterSetting.sanction ? (\n                      <div className=\"p-2 bd-highlight\">\n                        <div className=\"d-flex flex-column bd-highlight \">\n                          <div className=\" bd-highlight\">\n                            {\" \"}\n                            <ReportIcon\n                              style={{\n                                color: element.sanction ? \"pink\" : \"Grey\",\n                              }}\n                              onClick={(event) =>\n                                this.handleChangeSanction(\n                                  event,\n                                  \"sanction\",\n                                  element.studentId\n                                )\n                              }\n                            />\n                          </div>\n                          <div\n                            className=\" bd-highlight\"\n                            style={{ fontSize: \"9px\" }}\n                          >\n                            <IntlMessages id=\"timetable.punition\" />\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      \"\"\n                    )}\n                    {this.state.callRegisterSetting.encouragement ||\n                    this.state.callRegisterSetting.observation ? (\n                      <div className=\"p-2 bd-highlight\">\n                        <div className=\"d-flex flex-column bd-highlight \">\n                          <div className=\" bd-highlight\">\n                            {\" \"}\n                            <AddCircleIcon\n                              color=\"primary\"\n                              onClick={(event) =>\n                                this.handleChangeOther(\n                                  event,\n                                  \"other\",\n                                  element.studentId\n                                )\n                              }\n                            />\n                          </div>\n                          <div\n                            className=\" bd-highlight\"\n                            style={{ fontSize: \"9px\" }}\n                          >\n                            <IntlMessages id=\"timetable.autre\" />\n                          </div>\n                        </div>\n                      </div>\n                    ) : (\n                      \"\"\n                    )}\n                  </div>\n                ))}\n              <div className=\"d-flex justify-content-end mt-5\">\n                <Button\n                  variant=\"contained\"\n                  style={{\n                    borderBottomLeftRadius: \"16px\",\n                    borderBottomRightRadius: \"16px\",\n                    borderTopLeftRadius: \"16px\",\n                    borderTopRightRadius: \"16px\",\n                    width: \"100px\",\n                    height: \"40px\",\n                    marginRight: \"10%\",\n                  }}\n                  className=\" bg-indigo text-white \"\n                  onClick={this.handleSubmit}\n                >\n                  <IntlMessages id=\"button.save.registreAppel\" />\n                </Button>\n              </div>\n            </div>\n          </div>\n       \n          {this.state.isOpen ? (\n            <OtherPopover\n              values={this.state}\n              handleCancel={this.handleCancel}\n              handleChange={this.handleChange}\n              handleChangeObservations={this.handleChangeObservations}\n              handleChangeEncouragement={this.handleChangeEncouragement}\n              handleSubmitOther={this.handleSubmitOther}\n            />\n          ) : (\n            \"\"\n          )}\n          {this.state.isOpenSanction ? (\n            <SanctionPopover\n              values={this.state}\n              handleCancel={this.handleCancel}\n              handleSubmitSanction={this.handleSubmitSanction}\n              handleChangeSanctions={this.handleChangeSanctions}\n              handleChange={this.handleChange}\n            />\n          ) : (\n            \"\"\n          )}\n          <SweetAlert\n            show={this.state.isOpenAlert}\n            title={<IntlMessages id=\"alert.setting.call.register\" />}\n            onConfirm={this.onConfirm}\n          ></SweetAlert>\n        </div>\n      );\n\n    }\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    settings: state.settings.locale.languageId,\n    events: state.planning.callRegisterEvents,\n    userProfile: state.auth.userProfile,\n    students: state.student.remoteStudents,\n    observations: state.callRegister.observations,\n    encouragements: state.callRegister.encouragements,\n    sanctions: state.callRegister.sanctions,\n  };\n};\nexport default withStyles(styles)(\n  connect(mapStateToProps)(DetailsCallRegister)\n);\n"]},"metadata":{},"sourceType":"module"}