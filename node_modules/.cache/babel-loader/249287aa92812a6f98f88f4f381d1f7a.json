{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Lesson/Lesson.js\";\nimport React from \"react\";\nimport ContainerHeader from \"../../../components/ContainerHeader/index\";\nimport IntlMessages from \"../../../util/IntlMessages\";\nimport { connect } from \"react-redux\";\nimport { getLevels } from \"../../../actions/classLevelAction\";\nimport { getUserProfile } from \"../../../actions/Auth\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../config/config\";\nimport { getSections } from \"../../../actions/sectionAction\";\nimport { getClassesByEstablishmentId, getClassesByUserId } from \"../../../actions/classeAction\";\nimport LessonList from \"./LessonList\";\nimport { getLessons } from \"../../../actions/LessonAction\";\nimport { roleIdProfessor, roleIdStudent } from \"../../../config/config\";\nimport AddLesson from \"./AddLesson\";\nimport { addLesson } from \"../../../actions/LessonAction\";\nimport { getSectionFromLevel } from \"../../../actions/sectionAction\";\nimport { getLevelListFromEstabType } from \"../../../actions/classLevelAction\";\nimport { UncontrolledAlert } from \"reactstrap\";\nimport _ from \"lodash\";\n\nclass Lesson extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangestudentLevel = name => event => {\n      let sections = this.props.sections.filter(element => element.fk_id_level_v3 === event.target.value);\n      this.setState({\n        sections,\n        [name]: event.target.value,\n        section_id: 0,\n        class_id: 0\n      });\n\n      if (!_.isEmpty(sections)) {\n        this.setState({\n          Disable_studentsection: false\n        }); // var studentSectionbyLevel = getSectionFromLevel(\n        //   this.props.classSections,\n        //   event.target.value\n        // );\n        // this.setState({ studentsectionByLevels: studentSectionbyLevel });\n      } else {\n        var studentfiltredClasses = this.props.classes.filter(classe => classe.fk_id_level_v3 === event.target.value && classe.status);\n        this.setState({\n          Disable_studentsection: true,\n          section_id: 0,\n          studentClassesByLevelSectionID: studentfiltredClasses\n        });\n      }\n    };\n\n    this.handleChangestudentSection = name => event => {\n      var studentfiltredClasses = this.props.classes.filter(classe => classe.fk_id_level_v3 === this.state.level_id && classe.fk_id_section_v3 === event.target.value && classe.status);\n      this.setState({\n        [name]: event.target.value,\n        studentClassesByLevelSectionID: studentfiltredClasses\n      });\n    };\n\n    this.handleChangeClass = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n\n      if (this.props.userProfile.role_id === roleIdProfessor) {\n        var chosenClass = this.state.studentClassesByLevelSectionID.filter(classe => classe.id === event.target.value);\n        this.setState({\n          level_id: chosenClass[0].level_id,\n          section_id: chosenClass[0].section_id\n        });\n      }\n    };\n\n    this.handleChangeSubject = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n      let apiEndpoint = `${baseUrl.baseUrl}/classes_professors?access_token=${localStorage.token}&filter[where][and][0][subject_id]=` + event.target.value + `&filter[where][and][1][class_id]=` + this.state.class_id + `&filter[include][professor][profile][user]`;\n      axios.get(apiEndpoint).then(res => {\n        this.setState({\n          establishmentProfessor: res.data\n        });\n\n        if (this.props.userProfile.role_id === roleIdProfessor) {\n          var classProfessorID = this.state.establishmentProfessor[0].id;\n          this.setState({\n            class_professor_id: classProfessorID\n          });\n        }\n      });\n    };\n\n    this.handleChangeProfessor = name => event => {\n      var classProfessorID = this.state.establishmentProfessor[0].id;\n      this.setState({\n        professor_id: event.target.value,\n        class_professor_id: classProfessorID\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.addCourse = () => {\n      var data = {};\n      data.name = this.state.course_object;\n      data.details = this.state.description;\n      data.creation_date = new Date();\n      data.status = true;\n      data.file = [];\n      data.class_professor_id = this.state.class_professor_id;\n      const files = this.state.coursefile;\n      this.props.addLesson(data, files, this.props.userProfile.establishment_id);\n      this.setState({\n        section_id: \"\",\n        class_id: \"\",\n        subject_id: \"\",\n        professor_id: \"\",\n        course_object: \"\",\n        description: \"\",\n        level_id: \"\",\n        estab_type_id: \"\",\n        sectionDisabled: true,\n        classeDisabled: true,\n        open: false,\n        coursefile: {},\n        file: [],\n        inputText: \"\"\n      });\n    };\n\n    this.onDrop = e => {\n      let fileName = [];\n      let file = e.target.files;\n\n      for (const file of e.target.files) {\n        fileName.push(file.name + \"\");\n      }\n\n      this.setState({\n        coursefile: file,\n        inputText: fileName\n      });\n    };\n\n    this.state = {\n      estab_type_id: \"\",\n      open: false,\n      section_id: \"\",\n      class_id: \"\",\n      subject_id: \"\",\n      professor_id: \"\",\n      course_object: \"\",\n      class_professor_id: 1,\n      description: \"\",\n      level_id: \"\",\n      sectionDisabled: true,\n      classeDisabled: true,\n      open: false,\n      coursefile: {},\n      // studentsectionByLevels: [],\n      Disable_studentsection: true,\n      // levelsbyestablishment: [],\n      studentClassesByLevelSectionID: [],\n      subjectList: [],\n      establishmentProfessor: [],\n      divClassName: \"col-md-6\",\n      divEyeClassname: \"d-flex col-md-2\",\n      divEyeClassnameSpace: \"d-flex col-md-6\",\n      sections: []\n    };\n    this.cancelModal = this.cancelModal.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.openAddModal = this.openAddModal.bind(this);\n    this.addCourse = this.addCourse.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n    this.addCourse = this.addCourse.bind(this);\n    this.handleChangestudentLevel = this.handleChangestudentLevel.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.handleChangeProfessor = this.handleChangeProfessor.bind(this);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.userProfile !== this.props.userProfile) {\n      const establishmentId = this.props.userProfile.establishment_id;\n      this.props.getRoomsByEstablshment(establishmentId, this.props.userProfile.school_year_id);\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.userProfile.role_id === roleIdProfessor) {// this.props.getClassesByUserId(this.props.userProfile.user_id);\n      // this.props.getLessons(this.props.userProfile.establishment_id);\n      // axios\n      //   .get(\n      //     `${baseUrl.baseUrl}/classes_professors/getClassesByUserId/${this.props.userProfile.user_id}?access_token=${localStorage.token}`\n      //   )\n      //   .then((res) => {\n      //     var filtredClasses = res.data.classes.filter(\n      //       (classe) => classe.status\n      //     );\n      //     var cache = {};\n      //     let studentClassesByLevelSectionID = filtredClasses.filter(function(\n      //       elem,\n      //       index,\n      //       array\n      //     ) {\n      //       return cache[elem.id] ? 0 : (cache[elem.id] = 1);\n      //     });\n      //     this.setState({\n      //       studentClassesByLevelSectionID: studentClassesByLevelSectionID,\n      //     });\n      //   });\n      // axios\n      //   .get(\n      //     `${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[where][and][0][id]=` +\n      //       this.props.userProfile.user_id +\n      //       `&filter[include][professors]`\n      //   )\n      //   .then((res) => {\n      //     this.setState({ professor_id: res.data[0].professors[0].id });\n      //     axios\n      //       .get(\n      //         `${baseUrl.baseUrl}/prof_subjects?access_token=${localStorage.token}&filter[where][and][0][professor_id]=` +\n      //           this.state.professor_id +\n      //           `&filter[include][subject]`\n      //       )\n      //       .then((res) => {\n      //         let subjectListinit = [];\n      //         res.data.forEach((element) => {\n      //           subjectListinit.push(element.subject);\n      //         });\n      //         this.setState({ subjectList: subjectListinit });\n      //       });\n      //   });\n    } else {\n      this.props.getLevels();\n      this.props.getSections();\n      this.props.getClassesByEstablishmentId(this.props.userProfile.establishment_id);\n      console.log(this.props.userProfile.establishment_id);\n      this.props.getLessons(this.props.userProfile.establishment_id);\n      axios.get(`${baseUrl.baseUrl}/establishments/` + this.props.userProfile.establishment_id + `?access_token=${localStorage.token}`).then(res => {\n        console.log(res); // var levelsbyestablishment = getLevelListFromEstabType(\n        //   this.props.levels,\n        //   res.data.estab_type_id\n        // );\n\n        this.setState({\n          estabType: res.data.estab_type_id,\n          // levelsbyestablishment: levelsbyestablishment,\n          estab_type_id: res.data.estab_type_id,\n          divClassName: \"col-md-4\"\n        });\n      });\n      axios.get(`${baseUrl.baseUrl}/subjects?access_token=${localStorage.token}`).then(res => {\n        const subjectList = res.data;\n        this.setState({\n          subjectList\n        });\n      });\n    }\n\n    if (this.props.userProfile.role_id === roleIdStudent) {\n      this.setState({\n        divEyeClassname: \"d-flex col-md-2\",\n        divEyeClassnameSpace: \"d-flex col-md-5\"\n      });\n    }\n  }\n\n  cancelModal() {\n    this.setState({\n      open: false\n    });\n  }\n\n  openAddModal() {\n    this.setState({\n      open: true\n    });\n  }\n\n  render() {\n    const {\n      subjects,\n      levels,\n      sections,\n      classes,\n      lessons,\n      userProfile\n    } = this.props;\n    console.log(\"levels \", this.props.levels);\n    console.log(\"sections \", this.props.sections);\n    console.log(\"lessons \", this.props.lessons);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ContainerHeader, {\n      match: this.props.match,\n      title: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"sidebar.components.lesson\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 18\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }\n    }), this.props.successStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 13\n      }\n    }, \" \", this.props.message, \" \")) : \"\", this.props.errorStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-danger bg-danger text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 13\n      }\n    }, \" \", this.props.message)) : \"\", \"\\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(AddLesson, {\n      open: this.state.open,\n      cancel: this.cancelModal,\n      levels: levels,\n      subjects: subjects,\n      sections: sections,\n      values: this.state,\n      addCourse: this.addCourse,\n      onDrop: this.onDrop,\n      handleChange: this.handleChange,\n      handleCancel: this.cancelModal,\n      handleChangeClass: this.handleChangeClass,\n      handleChangestudentLevel: this.handleChangestudentLevel,\n      handleChangestudentSection: this.handleChangestudentSection,\n      handleChangeClass: this.handleChangeClass,\n      handleChangeSubject: this.handleChangeSubject,\n      handleChangeProfessor: this.handleChangeProfessor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(LessonList, {\n      lessons: lessons,\n      estab_type_id: this.state.estab_type_id,\n      classes: classes,\n      roleId: userProfile.role_id,\n      divEyeClassname: this.state.divEyeClassname,\n      divEyeClassnameSpace: this.state.divEyeClassnameSpace,\n      openAddModal: this.openAddModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    // classes: state.classes,\n    userProfile: state.auth.userProfile,\n    // levels: state.ClassLevels.remoteLevels,\n    // sections: state.classSections.remoteSections,\n    lessons: state.lessons.remoteLessons,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    levels: state.levelsReducer.levels,\n    sections: state.SectionsReducer.Section,\n    classes: state.ClassSettingsReducer.classSettings,\n    subjects: state.subject.subjects\n  };\n}\n\nexport default connect(mapStateToProps, {\n  getLevels,\n  getUserProfile,\n  getSections,\n  getClassesByEstablishmentId,\n  getLessons,\n  getClassesByUserId,\n  addLesson\n})(Lesson);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Lesson/Lesson.js"],"names":["React","ContainerHeader","IntlMessages","connect","getLevels","getUserProfile","axios","baseUrl","getSections","getClassesByEstablishmentId","getClassesByUserId","LessonList","getLessons","roleIdProfessor","roleIdStudent","AddLesson","addLesson","getSectionFromLevel","getLevelListFromEstabType","UncontrolledAlert","_","Lesson","Component","constructor","props","handleChangestudentLevel","name","event","sections","filter","element","fk_id_level_v3","target","value","setState","section_id","class_id","isEmpty","Disable_studentsection","studentfiltredClasses","classes","classe","status","studentClassesByLevelSectionID","handleChangestudentSection","state","level_id","fk_id_section_v3","handleChangeClass","userProfile","role_id","chosenClass","id","handleChangeSubject","apiEndpoint","localStorage","token","get","then","res","establishmentProfessor","data","classProfessorID","class_professor_id","handleChangeProfessor","professor_id","handleChange","addCourse","course_object","details","description","creation_date","Date","file","files","coursefile","establishment_id","subject_id","estab_type_id","sectionDisabled","classeDisabled","open","inputText","onDrop","e","fileName","push","subjectList","divClassName","divEyeClassname","divEyeClassnameSpace","cancelModal","bind","openAddModal","componentDidUpdate","prevProps","establishmentId","getRoomsByEstablshment","school_year_id","componentDidMount","console","log","estabType","render","subjects","levels","lessons","match","successStatus","message","errorStatus","mapStateToProps","auth","remoteLessons","alert","success","error","levelsReducer","SectionsReducer","Section","ClassSettingsReducer","classSettings","subject"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,eAAP,MAA4B,2CAA5B;AACA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,SAAT,QAA0B,mCAA1B;AACA,SAASC,cAAT,QAA+B,uBAA/B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,SAASC,WAAT,QAA4B,gCAA5B;AACA,SACEC,2BADF,EAEEC,kBAFF,QAGO,+BAHP;AAIA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,UAAT,QAA2B,+BAA3B;AACA,SAASC,eAAT,EAA0BC,aAA1B,QAA+C,wBAA/C;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,SAASC,SAAT,QAA0B,+BAA1B;AACA,SAASC,mBAAT,QAAoC,gCAApC;AACA,SAASC,yBAAT,QAA0C,mCAA1C;AACA,SAASC,iBAAT,QAAkC,YAAlC;AACA,OAAOC,CAAP,MAAc,QAAd;;AAEA,MAAMC,MAAN,SAAqBrB,KAAK,CAACsB,SAA3B,CAAqC;AACnCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAyCnBC,wBAzCmB,GAyCSC,IAAD,IAAWC,KAAD,IAAW;AAC9C,UAAIC,QAAQ,GAAG,KAAKJ,KAAL,CAAWI,QAAX,CAAoBC,MAApB,CACZC,OAAD,IAAaA,OAAO,CAACC,cAAR,KAA2BJ,KAAK,CAACK,MAAN,CAAaC,KADxC,CAAf;AAGA,WAAKC,QAAL,CAAc;AACZN,QAAAA,QADY;AAEZ,SAACF,IAAD,GAAQC,KAAK,CAACK,MAAN,CAAaC,KAFT;AAGZE,QAAAA,UAAU,EAAE,CAHA;AAIZC,QAAAA,QAAQ,EAAE;AAJE,OAAd;;AAMA,UAAI,CAAChB,CAAC,CAACiB,OAAF,CAAUT,QAAV,CAAL,EAA0B;AACxB,aAAKM,QAAL,CAAc;AAAEI,UAAAA,sBAAsB,EAAE;AAA1B,SAAd,EADwB,CAExB;AACA;AACA;AACA;AACA;AACD,OAPD,MAOO;AACL,YAAIC,qBAAqB,GAAG,KAAKf,KAAL,CAAWgB,OAAX,CAAmBX,MAAnB,CACzBY,MAAD,IACEA,MAAM,CAACV,cAAP,KAA0BJ,KAAK,CAACK,MAAN,CAAaC,KAAvC,IAAgDQ,MAAM,CAACC,MAF/B,CAA5B;AAIA,aAAKR,QAAL,CAAc;AACZI,UAAAA,sBAAsB,EAAE,IADZ;AAEZH,UAAAA,UAAU,EAAE,CAFA;AAGZQ,UAAAA,8BAA8B,EAAEJ;AAHpB,SAAd;AAKD;AACF,KArEkB;;AAAA,SAuEnBK,0BAvEmB,GAuEWlB,IAAD,IAAWC,KAAD,IAAW;AAChD,UAAIY,qBAAqB,GAAG,KAAKf,KAAL,CAAWgB,OAAX,CAAmBX,MAAnB,CACzBY,MAAD,IACEA,MAAM,CAACV,cAAP,KAA0B,KAAKc,KAAL,CAAWC,QAArC,IACAL,MAAM,CAACM,gBAAP,KAA4BpB,KAAK,CAACK,MAAN,CAAaC,KADzC,IAEAQ,MAAM,CAACC,MAJiB,CAA5B;AAMA,WAAKR,QAAL,CAAc;AACZ,SAACR,IAAD,GAAQC,KAAK,CAACK,MAAN,CAAaC,KADT;AAEZU,QAAAA,8BAA8B,EAAEJ;AAFpB,OAAd;AAID,KAlFkB;;AAAA,SAoFnBS,iBApFmB,GAoFEtB,IAAD,IAAWC,KAAD,IAAW;AACvC,WAAKO,QAAL,CAAc;AAAE,SAACR,IAAD,GAAQC,KAAK,CAACK,MAAN,CAAaC;AAAvB,OAAd;;AACA,UAAI,KAAKT,KAAL,CAAWyB,WAAX,CAAuBC,OAAvB,KAAmCrC,eAAvC,EAAwD;AACtD,YAAIsC,WAAW,GAAG,KAAKN,KAAL,CAAWF,8BAAX,CAA0Cd,MAA1C,CACfY,MAAD,IAAYA,MAAM,CAACW,EAAP,KAAczB,KAAK,CAACK,MAAN,CAAaC,KADvB,CAAlB;AAGA,aAAKC,QAAL,CAAc;AACZY,UAAAA,QAAQ,EAAEK,WAAW,CAAC,CAAD,CAAX,CAAeL,QADb;AAEZX,UAAAA,UAAU,EAAEgB,WAAW,CAAC,CAAD,CAAX,CAAehB;AAFf,SAAd;AAID;AACF,KA/FkB;;AAAA,SAgGnBkB,mBAhGmB,GAgGI3B,IAAD,IAAWC,KAAD,IAAW;AACzC,WAAKO,QAAL,CAAc;AAAE,SAACR,IAAD,GAAQC,KAAK,CAACK,MAAN,CAAaC;AAAvB,OAAd;AAEA,UAAIqB,WAAW,GACZ,GAAE/C,OAAO,CAACA,OAAQ,oCAAmCgD,YAAY,CAACC,KAAM,qCAAzE,GACA7B,KAAK,CAACK,MAAN,CAAaC,KADb,GAEC,mCAFD,GAGA,KAAKY,KAAL,CAAWT,QAHX,GAIC,4CALH;AAMA9B,MAAAA,KAAK,CAACmD,GAAN,CAAUH,WAAV,EAAuBI,IAAvB,CAA6BC,GAAD,IAAS;AACnC,aAAKzB,QAAL,CAAc;AAAE0B,UAAAA,sBAAsB,EAAED,GAAG,CAACE;AAA9B,SAAd;;AACA,YAAI,KAAKrC,KAAL,CAAWyB,WAAX,CAAuBC,OAAvB,KAAmCrC,eAAvC,EAAwD;AACtD,cAAIiD,gBAAgB,GAAG,KAAKjB,KAAL,CAAWe,sBAAX,CAAkC,CAAlC,EAAqCR,EAA5D;AACA,eAAKlB,QAAL,CAAc;AAAE6B,YAAAA,kBAAkB,EAAED;AAAtB,WAAd;AACD;AACF,OAND;AAOD,KAhHkB;;AAAA,SAiHnBE,qBAjHmB,GAiHMtC,IAAD,IAAWC,KAAD,IAAW;AAC3C,UAAImC,gBAAgB,GAAG,KAAKjB,KAAL,CAAWe,sBAAX,CAAkC,CAAlC,EAAqCR,EAA5D;AACA,WAAKlB,QAAL,CAAc;AACZ+B,QAAAA,YAAY,EAAEtC,KAAK,CAACK,MAAN,CAAaC,KADf;AAEZ8B,QAAAA,kBAAkB,EAAED;AAFR,OAAd;AAID,KAvHkB;;AAAA,SA4NnBI,YA5NmB,GA4NHxC,IAAD,IAAWC,KAAD,IAAW;AAClC,WAAKO,QAAL,CAAc;AAAE,SAACR,IAAD,GAAQC,KAAK,CAACK,MAAN,CAAaC;AAAvB,OAAd;AACD,KA9NkB;;AAAA,SA+NnBkC,SA/NmB,GA+NP,MAAM;AAChB,UAAIN,IAAI,GAAG,EAAX;AACAA,MAAAA,IAAI,CAACnC,IAAL,GAAY,KAAKmB,KAAL,CAAWuB,aAAvB;AACAP,MAAAA,IAAI,CAACQ,OAAL,GAAe,KAAKxB,KAAL,CAAWyB,WAA1B;AACAT,MAAAA,IAAI,CAACU,aAAL,GAAqB,IAAIC,IAAJ,EAArB;AACAX,MAAAA,IAAI,CAACnB,MAAL,GAAc,IAAd;AACAmB,MAAAA,IAAI,CAACY,IAAL,GAAY,EAAZ;AACAZ,MAAAA,IAAI,CAACE,kBAAL,GAA0B,KAAKlB,KAAL,CAAWkB,kBAArC;AACA,YAAMW,KAAK,GAAG,KAAK7B,KAAL,CAAW8B,UAAzB;AACA,WAAKnD,KAAL,CAAWR,SAAX,CAAqB6C,IAArB,EAA2Ba,KAA3B,EAAkC,KAAKlD,KAAL,CAAWyB,WAAX,CAAuB2B,gBAAzD;AAEA,WAAK1C,QAAL,CAAc;AACZC,QAAAA,UAAU,EAAE,EADA;AAEZC,QAAAA,QAAQ,EAAE,EAFE;AAGZyC,QAAAA,UAAU,EAAE,EAHA;AAIZZ,QAAAA,YAAY,EAAE,EAJF;AAKZG,QAAAA,aAAa,EAAE,EALH;AAMZE,QAAAA,WAAW,EAAE,EAND;AAOZxB,QAAAA,QAAQ,EAAE,EAPE;AAQZgC,QAAAA,aAAa,EAAE,EARH;AASZC,QAAAA,eAAe,EAAE,IATL;AAUZC,QAAAA,cAAc,EAAE,IAVJ;AAWZC,QAAAA,IAAI,EAAE,KAXM;AAYZN,QAAAA,UAAU,EAAE,EAZA;AAaZF,QAAAA,IAAI,EAAE,EAbM;AAcZS,QAAAA,SAAS,EAAE;AAdC,OAAd;AAgBD,KA1PkB;;AAAA,SA8PnBC,MA9PmB,GA8PTC,CAAD,IAAO;AACd,UAAIC,QAAQ,GAAG,EAAf;AACA,UAAIZ,IAAI,GAAGW,CAAC,CAACpD,MAAF,CAAS0C,KAApB;;AACA,WAAK,MAAMD,IAAX,IAAmBW,CAAC,CAACpD,MAAF,CAAS0C,KAA5B,EAAmC;AACjCW,QAAAA,QAAQ,CAACC,IAAT,CAAcb,IAAI,CAAC/C,IAAL,GAAY,EAA1B;AACD;;AACD,WAAKQ,QAAL,CAAc;AAAEyC,QAAAA,UAAU,EAAEF,IAAd;AAAoBS,QAAAA,SAAS,EAAEG;AAA/B,OAAd;AACD,KArQkB;;AAGjB,SAAKxC,KAAL,GAAa;AACXiC,MAAAA,aAAa,EAAE,EADJ;AAEXG,MAAAA,IAAI,EAAE,KAFK;AAGX9C,MAAAA,UAAU,EAAE,EAHD;AAIXC,MAAAA,QAAQ,EAAE,EAJC;AAKXyC,MAAAA,UAAU,EAAE,EALD;AAMXZ,MAAAA,YAAY,EAAE,EANH;AAOXG,MAAAA,aAAa,EAAE,EAPJ;AAQXL,MAAAA,kBAAkB,EAAE,CART;AASXO,MAAAA,WAAW,EAAE,EATF;AAUXxB,MAAAA,QAAQ,EAAE,EAVC;AAWXiC,MAAAA,eAAe,EAAE,IAXN;AAYXC,MAAAA,cAAc,EAAE,IAZL;AAaXC,MAAAA,IAAI,EAAE,KAbK;AAcXN,MAAAA,UAAU,EAAE,EAdD;AAeX;AACArC,MAAAA,sBAAsB,EAAE,IAhBb;AAiBX;AACAK,MAAAA,8BAA8B,EAAE,EAlBrB;AAmBX4C,MAAAA,WAAW,EAAE,EAnBF;AAoBX3B,MAAAA,sBAAsB,EAAE,EApBb;AAqBX4B,MAAAA,YAAY,EAAE,UArBH;AAsBXC,MAAAA,eAAe,EAAE,iBAtBN;AAuBXC,MAAAA,oBAAoB,EAAE,iBAvBX;AAwBX9D,MAAAA,QAAQ,EAAE;AAxBC,KAAb;AA0BA,SAAK+D,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAK1B,YAAL,GAAoB,KAAKA,YAAL,CAAkB0B,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKzB,SAAL,GAAiB,KAAKA,SAAL,CAAeyB,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKT,MAAL,GAAc,KAAKA,MAAL,CAAYS,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKzB,SAAL,GAAiB,KAAKA,SAAL,CAAeyB,IAAf,CAAoB,IAApB,CAAjB;AACA,SAAKnE,wBAAL,GAAgC,KAAKA,wBAAL,CAA8BmE,IAA9B,CAAmC,IAAnC,CAAhC;AACA,SAAK5C,iBAAL,GAAyB,KAAKA,iBAAL,CAAuB4C,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKvC,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBuC,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAK5B,qBAAL,GAA6B,KAAKA,qBAAL,CAA2B4B,IAA3B,CAAgC,IAAhC,CAA7B;AACD;;AAiFDE,EAAAA,kBAAkB,CAACC,SAAD,EAAY;AAC5B,QAAIA,SAAS,CAAC9C,WAAV,KAA0B,KAAKzB,KAAL,CAAWyB,WAAzC,EAAsD;AACpD,YAAM+C,eAAe,GAAG,KAAKxE,KAAL,CAAWyB,WAAX,CAAuB2B,gBAA/C;AACA,WAAKpD,KAAL,CAAWyE,sBAAX,CACED,eADF,EAEE,KAAKxE,KAAL,CAAWyB,WAAX,CAAuBiD,cAFzB;AAID;AACF;;AACDC,EAAAA,iBAAiB,GAAG;AAClB,QAAI,KAAK3E,KAAL,CAAWyB,WAAX,CAAuBC,OAAvB,KAAmCrC,eAAvC,EAAwD,CACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,KA7CD,MA6CO;AACL,WAAKW,KAAL,CAAWpB,SAAX;AACA,WAAKoB,KAAL,CAAWhB,WAAX;AACA,WAAKgB,KAAL,CAAWf,2BAAX,CACE,KAAKe,KAAL,CAAWyB,WAAX,CAAuB2B,gBADzB;AAGAwB,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK7E,KAAL,CAAWyB,WAAX,CAAuB2B,gBAAnC;AACA,WAAKpD,KAAL,CAAWZ,UAAX,CAAsB,KAAKY,KAAL,CAAWyB,WAAX,CAAuB2B,gBAA7C;AACAtE,MAAAA,KAAK,CACFmD,GADH,CAEK,GAAElD,OAAO,CAACA,OAAQ,kBAAnB,GACE,KAAKiB,KAAL,CAAWyB,WAAX,CAAuB2B,gBADzB,GAEG,iBAAgBrB,YAAY,CAACC,KAAM,EAJ1C,EAMGE,IANH,CAMSC,GAAD,IAAS;AACbyC,QAAAA,OAAO,CAACC,GAAR,CAAY1C,GAAZ,EADa,CAEb;AACA;AACA;AACA;;AACA,aAAKzB,QAAL,CAAc;AACZoE,UAAAA,SAAS,EAAE3C,GAAG,CAACE,IAAJ,CAASiB,aADR;AAEZ;AACAA,UAAAA,aAAa,EAAEnB,GAAG,CAACE,IAAJ,CAASiB,aAHZ;AAIZU,UAAAA,YAAY,EAAE;AAJF,SAAd;AAMD,OAlBH;AAmBAlF,MAAAA,KAAK,CACFmD,GADH,CACQ,GAAElD,OAAO,CAACA,OAAQ,0BAAyBgD,YAAY,CAACC,KAAM,EADtE,EAEGE,IAFH,CAESC,GAAD,IAAS;AACb,cAAM4B,WAAW,GAAG5B,GAAG,CAACE,IAAxB;AACA,aAAK3B,QAAL,CAAc;AAAEqD,UAAAA;AAAF,SAAd;AACD,OALH;AAMD;;AAED,QAAI,KAAK/D,KAAL,CAAWyB,WAAX,CAAuBC,OAAvB,KAAmCpC,aAAvC,EAAsD;AACpD,WAAKoB,QAAL,CAAc;AACZuD,QAAAA,eAAe,EAAE,iBADL;AAEZC,QAAAA,oBAAoB,EAAE;AAFV,OAAd;AAID;AACF;;AACDC,EAAAA,WAAW,GAAG;AACZ,SAAKzD,QAAL,CAAc;AAAE+C,MAAAA,IAAI,EAAE;AAAR,KAAd;AACD;;AAgCDY,EAAAA,YAAY,GAAG;AACb,SAAK3D,QAAL,CAAc;AAAE+C,MAAAA,IAAI,EAAE;AAAR,KAAd;AACD;;AAUDsB,EAAAA,MAAM,GAAG;AACP,UAAM;AACJC,MAAAA,QADI;AAEJC,MAAAA,MAFI;AAGJ7E,MAAAA,QAHI;AAIJY,MAAAA,OAJI;AAKJkE,MAAAA,OALI;AAMJzD,MAAAA;AANI,QAOF,KAAKzB,KAPT;AAQA4E,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuB,KAAK7E,KAAL,CAAWiF,MAAlC;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyB,KAAK7E,KAAL,CAAWI,QAApC;AACAwE,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwB,KAAK7E,KAAL,CAAWkF,OAAnC;AAEA,wBACE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,eAAD;AACE,MAAA,KAAK,EAAE,KAAKlF,KAAL,CAAWmF,KADpB;AAEE,MAAA,KAAK,eAAE,oBAAC,YAAD;AAAc,QAAA,EAAE,EAAC,2BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAKG,KAAKnF,KAAL,CAAWoF,aAAX,gBACC,oBAAC,iBAAD;AAAmB,MAAA,SAAS,EAAC,6DAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,4CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,eAIE;AAAM,MAAA,SAAS,EAAC,gBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAmC,KAAKpF,KAAL,CAAWqF,OAA9C,MAJF,CADD,GAQC,EAbJ,EAeG,KAAKrF,KAAL,CAAWsF,WAAX,gBACC,oBAAC,iBAAD;AAAmB,MAAA,SAAS,EAAC,2DAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAM,MAAA,SAAS,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,4CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,eAIE;AAAM,MAAA,SAAS,EAAC,gBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAmC,KAAKtF,KAAL,CAAWqF,OAA9C,CAJF,CADD,GAQC,EAvBJ,+BA0BE,oBAAC,SAAD;AACE,MAAA,IAAI,EAAE,KAAKhE,KAAL,CAAWoC,IADnB;AAEE,MAAA,MAAM,EAAE,KAAKU,WAFf;AAGE,MAAA,MAAM,EAAEc,MAHV;AAIE,MAAA,QAAQ,EAAED,QAJZ;AAKE,MAAA,QAAQ,EAAE5E,QALZ;AAME,MAAA,MAAM,EAAE,KAAKiB,KANf;AAOE,MAAA,SAAS,EAAE,KAAKsB,SAPlB;AAQE,MAAA,MAAM,EAAE,KAAKgB,MARf;AASE,MAAA,YAAY,EAAE,KAAKjB,YATrB;AAUE,MAAA,YAAY,EAAE,KAAKyB,WAVrB;AAWE,MAAA,iBAAiB,EAAE,KAAK3C,iBAX1B;AAYE,MAAA,wBAAwB,EAAE,KAAKvB,wBAZjC;AAaE,MAAA,0BAA0B,EAAE,KAAKmB,0BAbnC;AAcE,MAAA,iBAAiB,EAAE,KAAKI,iBAd1B;AAeE,MAAA,mBAAmB,EAAE,KAAKK,mBAf5B;AAgBE,MAAA,qBAAqB,EAAE,KAAKW,qBAhB9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA1BF,eA4CE,oBAAC,UAAD;AACE,MAAA,OAAO,EAAE0C,OADX;AAEE,MAAA,aAAa,EAAE,KAAK7D,KAAL,CAAWiC,aAF5B;AAGE,MAAA,OAAO,EAAEtC,OAHX;AAIE,MAAA,MAAM,EAAES,WAAW,CAACC,OAJtB;AAKE,MAAA,eAAe,EAAE,KAAKL,KAAL,CAAW4C,eAL9B;AAME,MAAA,oBAAoB,EAAE,KAAK5C,KAAL,CAAW6C,oBANnC;AAOE,MAAA,YAAY,EAAE,KAAKG,YAPrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA5CF,CADF;AAwDD;;AA7UkC;;AA+UrC,SAASkB,eAAT,CAAyBlE,KAAzB,EAAgC;AAC9B,SAAO;AACL;AACAI,IAAAA,WAAW,EAAEJ,KAAK,CAACmE,IAAN,CAAW/D,WAFnB;AAGL;AACA;AACAyD,IAAAA,OAAO,EAAE7D,KAAK,CAAC6D,OAAN,CAAcO,aALlB;AAMLL,IAAAA,aAAa,EAAE/D,KAAK,CAACqE,KAAN,CAAYC,OANtB;AAOLL,IAAAA,WAAW,EAAEjE,KAAK,CAACqE,KAAN,CAAYE,KAPpB;AAQLP,IAAAA,OAAO,EAAEhE,KAAK,CAACqE,KAAN,CAAYL,OARhB;AASLJ,IAAAA,MAAM,EAAE5D,KAAK,CAACwE,aAAN,CAAoBZ,MATvB;AAUL7E,IAAAA,QAAQ,EAAEiB,KAAK,CAACyE,eAAN,CAAsBC,OAV3B;AAWL/E,IAAAA,OAAO,EAAEK,KAAK,CAAC2E,oBAAN,CAA2BC,aAX/B;AAYLjB,IAAAA,QAAQ,EAAE3D,KAAK,CAAC6E,OAAN,CAAclB;AAZnB,GAAP;AAcD;;AACD,eAAerG,OAAO,CACpB4G,eADoB,EAEpB;AACE3G,EAAAA,SADF;AAEEC,EAAAA,cAFF;AAGEG,EAAAA,WAHF;AAIEC,EAAAA,2BAJF;AAKEG,EAAAA,UALF;AAMEF,EAAAA,kBANF;AAOEM,EAAAA;AAPF,CAFoB,CAAP,CAWbK,MAXa,CAAf","sourcesContent":["import React from \"react\";\nimport ContainerHeader from \"../../../components/ContainerHeader/index\";\nimport IntlMessages from \"../../../util/IntlMessages\";\nimport { connect } from \"react-redux\";\nimport { getLevels } from \"../../../actions/classLevelAction\";\nimport { getUserProfile } from \"../../../actions/Auth\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../config/config\";\nimport { getSections } from \"../../../actions/sectionAction\";\nimport {\n  getClassesByEstablishmentId,\n  getClassesByUserId,\n} from \"../../../actions/classeAction\";\nimport LessonList from \"./LessonList\";\nimport { getLessons } from \"../../../actions/LessonAction\";\nimport { roleIdProfessor, roleIdStudent } from \"../../../config/config\";\nimport AddLesson from \"./AddLesson\";\nimport { addLesson } from \"../../../actions/LessonAction\";\nimport { getSectionFromLevel } from \"../../../actions/sectionAction\";\nimport { getLevelListFromEstabType } from \"../../../actions/classLevelAction\";\nimport { UncontrolledAlert } from \"reactstrap\";\nimport _ from \"lodash\";\n\nclass Lesson extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      estab_type_id: \"\",\n      open: false,\n      section_id: \"\",\n      class_id: \"\",\n      subject_id: \"\",\n      professor_id: \"\",\n      course_object: \"\",\n      class_professor_id: 1,\n      description: \"\",\n      level_id: \"\",\n      sectionDisabled: true,\n      classeDisabled: true,\n      open: false,\n      coursefile: {},\n      // studentsectionByLevels: [],\n      Disable_studentsection: true,\n      // levelsbyestablishment: [],\n      studentClassesByLevelSectionID: [],\n      subjectList: [],\n      establishmentProfessor: [],\n      divClassName: \"col-md-6\",\n      divEyeClassname: \"d-flex col-md-2\",\n      divEyeClassnameSpace: \"d-flex col-md-6\",\n      sections: [],\n    };\n    this.cancelModal = this.cancelModal.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.openAddModal = this.openAddModal.bind(this);\n    this.addCourse = this.addCourse.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n    this.addCourse = this.addCourse.bind(this);\n    this.handleChangestudentLevel = this.handleChangestudentLevel.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.handleChangeProfessor = this.handleChangeProfessor.bind(this);\n  }\n\n  handleChangestudentLevel = (name) => (event) => {\n    let sections = this.props.sections.filter(\n      (element) => element.fk_id_level_v3 === event.target.value\n    );\n    this.setState({\n      sections,\n      [name]: event.target.value,\n      section_id: 0,\n      class_id: 0,\n    });\n    if (!_.isEmpty(sections)) {\n      this.setState({ Disable_studentsection: false });\n      // var studentSectionbyLevel = getSectionFromLevel(\n      //   this.props.classSections,\n      //   event.target.value\n      // );\n      // this.setState({ studentsectionByLevels: studentSectionbyLevel });\n    } else {\n      var studentfiltredClasses = this.props.classes.filter(\n        (classe) =>\n          classe.fk_id_level_v3 === event.target.value && classe.status\n      );\n      this.setState({\n        Disable_studentsection: true,\n        section_id: 0,\n        studentClassesByLevelSectionID: studentfiltredClasses,\n      });\n    }\n  };\n\n  handleChangestudentSection = (name) => (event) => {\n    var studentfiltredClasses = this.props.classes.filter(\n      (classe) =>\n        classe.fk_id_level_v3 === this.state.level_id &&\n        classe.fk_id_section_v3 === event.target.value &&\n        classe.status\n    );\n    this.setState({\n      [name]: event.target.value,\n      studentClassesByLevelSectionID: studentfiltredClasses,\n    });\n  };\n\n  handleChangeClass = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      var chosenClass = this.state.studentClassesByLevelSectionID.filter(\n        (classe) => classe.id === event.target.value\n      );\n      this.setState({\n        level_id: chosenClass[0].level_id,\n        section_id: chosenClass[0].section_id,\n      });\n    }\n  };\n  handleChangeSubject = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n\n    let apiEndpoint =\n      `${baseUrl.baseUrl}/classes_professors?access_token=${localStorage.token}&filter[where][and][0][subject_id]=` +\n      event.target.value +\n      `&filter[where][and][1][class_id]=` +\n      this.state.class_id +\n      `&filter[include][professor][profile][user]`;\n    axios.get(apiEndpoint).then((res) => {\n      this.setState({ establishmentProfessor: res.data });\n      if (this.props.userProfile.role_id === roleIdProfessor) {\n        var classProfessorID = this.state.establishmentProfessor[0].id;\n        this.setState({ class_professor_id: classProfessorID });\n      }\n    });\n  };\n  handleChangeProfessor = (name) => (event) => {\n    var classProfessorID = this.state.establishmentProfessor[0].id;\n    this.setState({\n      professor_id: event.target.value,\n      class_professor_id: classProfessorID,\n    });\n  };\n  componentDidUpdate(prevProps) {\n    if (prevProps.userProfile !== this.props.userProfile) {\n      const establishmentId = this.props.userProfile.establishment_id;\n      this.props.getRoomsByEstablshment(\n        establishmentId,\n        this.props.userProfile.school_year_id\n      );\n    }\n  }\n  componentDidMount() {\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      // this.props.getClassesByUserId(this.props.userProfile.user_id);\n      // this.props.getLessons(this.props.userProfile.establishment_id);\n      // axios\n      //   .get(\n      //     `${baseUrl.baseUrl}/classes_professors/getClassesByUserId/${this.props.userProfile.user_id}?access_token=${localStorage.token}`\n      //   )\n      //   .then((res) => {\n      //     var filtredClasses = res.data.classes.filter(\n      //       (classe) => classe.status\n      //     );\n      //     var cache = {};\n      //     let studentClassesByLevelSectionID = filtredClasses.filter(function(\n      //       elem,\n      //       index,\n      //       array\n      //     ) {\n      //       return cache[elem.id] ? 0 : (cache[elem.id] = 1);\n      //     });\n      //     this.setState({\n      //       studentClassesByLevelSectionID: studentClassesByLevelSectionID,\n      //     });\n      //   });\n      // axios\n      //   .get(\n      //     `${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[where][and][0][id]=` +\n      //       this.props.userProfile.user_id +\n      //       `&filter[include][professors]`\n      //   )\n      //   .then((res) => {\n      //     this.setState({ professor_id: res.data[0].professors[0].id });\n      //     axios\n      //       .get(\n      //         `${baseUrl.baseUrl}/prof_subjects?access_token=${localStorage.token}&filter[where][and][0][professor_id]=` +\n      //           this.state.professor_id +\n      //           `&filter[include][subject]`\n      //       )\n      //       .then((res) => {\n      //         let subjectListinit = [];\n      //         res.data.forEach((element) => {\n      //           subjectListinit.push(element.subject);\n      //         });\n      //         this.setState({ subjectList: subjectListinit });\n      //       });\n      //   });\n    } else {\n      this.props.getLevels();\n      this.props.getSections();\n      this.props.getClassesByEstablishmentId(\n        this.props.userProfile.establishment_id\n      );\n      console.log(this.props.userProfile.establishment_id);\n      this.props.getLessons(this.props.userProfile.establishment_id);\n      axios\n        .get(\n          `${baseUrl.baseUrl}/establishments/` +\n            this.props.userProfile.establishment_id +\n            `?access_token=${localStorage.token}`\n        )\n        .then((res) => {\n          console.log(res);\n          // var levelsbyestablishment = getLevelListFromEstabType(\n          //   this.props.levels,\n          //   res.data.estab_type_id\n          // );\n          this.setState({\n            estabType: res.data.estab_type_id,\n            // levelsbyestablishment: levelsbyestablishment,\n            estab_type_id: res.data.estab_type_id,\n            divClassName: \"col-md-4\",\n          });\n        });\n      axios\n        .get(`${baseUrl.baseUrl}/subjects?access_token=${localStorage.token}`)\n        .then((res) => {\n          const subjectList = res.data;\n          this.setState({ subjectList });\n        });\n    }\n\n    if (this.props.userProfile.role_id === roleIdStudent) {\n      this.setState({\n        divEyeClassname: \"d-flex col-md-2\",\n        divEyeClassnameSpace: \"d-flex col-md-5\",\n      });\n    }\n  }\n  cancelModal() {\n    this.setState({ open: false });\n  }\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n  addCourse = () => {\n    var data = {};\n    data.name = this.state.course_object;\n    data.details = this.state.description;\n    data.creation_date = new Date();\n    data.status = true;\n    data.file = [];\n    data.class_professor_id = this.state.class_professor_id;\n    const files = this.state.coursefile;\n    this.props.addLesson(data, files, this.props.userProfile.establishment_id);\n\n    this.setState({\n      section_id: \"\",\n      class_id: \"\",\n      subject_id: \"\",\n      professor_id: \"\",\n      course_object: \"\",\n      description: \"\",\n      level_id: \"\",\n      estab_type_id: \"\",\n      sectionDisabled: true,\n      classeDisabled: true,\n      open: false,\n      coursefile: {},\n      file: [],\n      inputText: \"\",\n    });\n  };\n  openAddModal() {\n    this.setState({ open: true });\n  }\n  onDrop = (e) => {\n    let fileName = [];\n    let file = e.target.files;\n    for (const file of e.target.files) {\n      fileName.push(file.name + \"\");\n    }\n    this.setState({ coursefile: file, inputText: fileName });\n  };\n\n  render() {\n    const {\n      subjects,\n      levels,\n      sections,\n      classes,\n      lessons,\n      userProfile,\n    } = this.props;\n    console.log(\"levels \", this.props.levels);\n    console.log(\"sections \", this.props.sections);\n    console.log(\"lessons \", this.props.lessons);\n\n    return (\n      <div className=\"app-wrapper\">\n        <ContainerHeader\n          match={this.props.match}\n          title={<IntlMessages id=\"sidebar.components.lesson\" />}\n        />\n        {this.props.successStatus ? (\n          <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n            <span className=\"icon-addon alert-addon\">\n              <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n            </span>\n            <span className=\"d-inline-block\"> {this.props.message} </span>\n          </UncontrolledAlert>\n        ) : (\n          \"\"\n        )}\n        {this.props.errorStatus ? (\n          <UncontrolledAlert className=\"alert-addon-card bg-danger bg-danger text-white shadow-lg\">\n            <span className=\"icon-addon alert-addon\">\n              <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n            </span>\n            <span className=\"d-inline-block\"> {this.props.message}</span>\n          </UncontrolledAlert>\n        ) : (\n          \"\"\n        )}\n        &nbsp;&nbsp;&nbsp;\n        <AddLesson\n          open={this.state.open}\n          cancel={this.cancelModal}\n          levels={levels}\n          subjects={subjects}\n          sections={sections}\n          values={this.state}\n          addCourse={this.addCourse}\n          onDrop={this.onDrop}\n          handleChange={this.handleChange}\n          handleCancel={this.cancelModal}\n          handleChangeClass={this.handleChangeClass}\n          handleChangestudentLevel={this.handleChangestudentLevel}\n          handleChangestudentSection={this.handleChangestudentSection}\n          handleChangeClass={this.handleChangeClass}\n          handleChangeSubject={this.handleChangeSubject}\n          handleChangeProfessor={this.handleChangeProfessor}\n        />\n        <LessonList\n          lessons={lessons}\n          estab_type_id={this.state.estab_type_id}\n          classes={classes}\n          roleId={userProfile.role_id}\n          divEyeClassname={this.state.divEyeClassname}\n          divEyeClassnameSpace={this.state.divEyeClassnameSpace}\n          openAddModal={this.openAddModal}\n        />\n      </div>\n    );\n  }\n}\nfunction mapStateToProps(state) {\n  return {\n    // classes: state.classes,\n    userProfile: state.auth.userProfile,\n    // levels: state.ClassLevels.remoteLevels,\n    // sections: state.classSections.remoteSections,\n    lessons: state.lessons.remoteLessons,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    levels: state.levelsReducer.levels,\n    sections: state.SectionsReducer.Section,\n    classes: state.ClassSettingsReducer.classSettings,\n    subjects: state.subject.subjects,\n  };\n}\nexport default connect(\n  mapStateToProps,\n  {\n    getLevels,\n    getUserProfile,\n    getSections,\n    getClassesByEstablishmentId,\n    getLessons,\n    getClassesByUserId,\n    addLesson,\n  }\n)(Lesson);\n"]},"metadata":{},"sourceType":"module"}