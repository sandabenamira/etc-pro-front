{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap-pro/educap-pro-front/src/app/routes/FinancialManagement/routes/ServiceAllocation/EditAllocationService.js\";\nimport React, { Component } from 'react';\nimport { Modal, ModalBody, ModalHeader } from 'reactstrap';\nimport Auxiliary from '../../../../../util/Auxiliary';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { Row } from 'reactstrap';\nimport Select from 'react-select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport EditAllocationItem from './ServiceAllocationComp/EditAllocationItem';\nimport { addAllocationService, editAllocationService, getAllocationServiceByEstablishment } from '../../../../../actions/AllocationServiceAction';\nimport { connect } from 'react-redux';\nimport ServiceItem from './ServiceAllocationComp/ServiceItem';\nimport _ from 'lodash';\nimport Button from '@material-ui/core/Button';\nimport { UncontrolledAlert } from 'reactstrap';\n\nclass EditAllocationService extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangeMonth = (monthId, element) => {\n      let tab = element.allocation_month;\n      var index = tab.findIndex(element => element == parseInt(monthId, 10));\n\n      if (index == -1) {\n        tab.push(parseInt(monthId, 10));\n      } else {\n        tab.splice(index, 1);\n      }\n    };\n\n    this.state = {\n      open: false,\n      alerteIcon: false,\n      services: [],\n      allocationItemEdit: {},\n      idServicesAffected: [],\n      servicesSelected: []\n    };\n    this.handleChangeMonth = this.handleChangeMonth.bind(this);\n    this.alertIcon = this.alertIcon.bind(this);\n  }\n\n  alertIcon(itemSelected) {\n    console.log(this.props.servicesSelected, 'alertIcon');\n    const found = this.props.servicesSelected.find(element => element.fk_id_service == itemSelected.id);\n\n    if (found !== undefined) {\n      if (found.id != '') {\n        this.setState({\n          alerteIcon: true\n        });\n        setTimeout(() => {\n          this.setState({\n            alerteIcon: false\n          });\n        }, 1500);\n      } else {\n        this.props.handleIcon(itemSelected);\n      }\n    }\n  }\n\n  render() {\n    let {\n      services,\n      allocationItemEdit,\n      idServicesAffected,\n      servicesSelected\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Auxiliary, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Modal, {\n      isOpen: this.props.openEdit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      className: \"modal-box-header bg-primary text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }\n    }, \"Modifier\", /*#__PURE__*/React.createElement(IconButton, {\n      className: \"text-white\",\n      onClick: this.props.cancel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CloseIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(ModalBody, {\n      style: {\n        paddingLeft: '5%',\n        paddingRight: '5%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      autoComplete: \"off\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      style: {\n        color: 'blue'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 19\n      }\n    }, \"Information \\xE9l\\xE8ve\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      htmlFor: \"idSelect\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 21\n      }\n    }, \"ID\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Select, {\n      name: \"student_id\",\n      id: \"student_id\",\n      styles: {\n        control: base => ({ ...base,\n          '&:hover': {\n            borderColor: 'gray'\n          },\n          // border style on hover\n          border: '1px solid lightgray',\n          // default border color\n          boxShadow: 'none',\n          // no box-shadow\n          borderRadius: 20\n        })\n      },\n      defaultValue: {\n        value: servicesSelected[0].fk_id_student,\n        label: servicesSelected[0].fk_id_student\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      htmlFor: \"nomSelect\",\n      style: {\n        paddingLeft: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }\n    }, \"Nom\"), /*#__PURE__*/React.createElement(Select, {\n      id: \"nomSelect\",\n      styles: {\n        control: base => ({ ...base,\n          '&:hover': {\n            borderColor: 'gray'\n          },\n          // border style on hover\n          border: '1px solid lightgray',\n          // default border color\n          boxShadow: 'none',\n          // no box-shadow\n          borderTopStyle: 'none',\n          borderRightStyle: 'none',\n          borderLeftStyle: 'none',\n          borderRadius: ' none'\n        })\n      },\n      defaultValue: {\n        value: servicesSelected[0].fk_id_student,\n        label: allocationItemEdit.name + ' ' + allocationItemEdit.surname\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"hr\", {\n      style: {\n        width: '100%',\n        margin: 'auto',\n        marginTop: '5%',\n        marginBottom: '5%',\n        border: '1px dashed #979A9A',\n        paddingLeft: '-100%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      style: {\n        color: 'blue'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 19\n      }\n    }, \"Prestations\")), this.state.alerteIcon ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-danger bg-danger text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 23\n      }\n    }, \" \", 'Prestation déja affectée'))) : '', /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }\n    }, services.map(element => {\n      let color;\n      color = idServicesAffected.indexOf(element.id);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \" col-md-3 d-flex flex-row bd-highlight align-items-start justify-content-start  mb-3 \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 d-flex align-items-center justify-content-start \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 25\n        }\n      }, ' ', /*#__PURE__*/React.createElement(\"i\", {\n        id: element.id,\n        className: `${element.path_img_service}`,\n        style: {\n          color: color !== -1 && color !== undefined ? 'blue' : 'black',\n          cursor: 'pointer'\n        },\n        onClick: e => {\n          if (color !== -1 && color !== undefined) {\n            this.alertIcon(element);\n          } else {\n            this.props.handleIcon(element);\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 27\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2   d-flex align-items-center \",\n        style: {\n          color: 'black'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }\n      }, element.name_fr_service));\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 19\n      }\n    }, servicesSelected.map((servicesSelectedItem, index) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: index,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(EditAllocationItem, {\n        key: index,\n        item: servicesSelectedItem // handleChangeMonth={this.handleChangeMonth}\n        ,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 27\n        }\n      }));\n    }))), /*#__PURE__*/React.createElement(Row, {\n      style: {\n        float: 'right'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      style: {\n        borderBottomLeftRadius: '16px',\n        borderBottomRightRadius: '16px',\n        borderTopLeftRadius: '16px',\n        borderTopRightRadius: '16px'\n      },\n      onClick: this.props.cancel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 19\n      }\n    }, \"Annuler\"), \"\\xA0\\xA0\", /*#__PURE__*/React.createElement(Button, {\n      disabled: this.state.student_id == '' || servicesSelected.length == 0,\n      variant: \"contained\",\n      style: {\n        borderBottomLeftRadius: '16px',\n        borderBottomRightRadius: '16px',\n        borderTopLeftRadius: '16px',\n        borderTopRightRadius: '16px'\n      },\n      className: \" bg-indigo text-white \",\n      onClick: this.props.HandleSubmitAllocationService,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 19\n      }\n    }, \"Modifier\", ' ')))))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    userProfile: state.auth.userProfile\n  };\n}\n\nexport default connect(mapStateToProps, {\n  addAllocationService,\n  editAllocationService,\n  getAllocationServiceByEstablishment\n})(EditAllocationService);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap-pro/educap-pro-front/src/app/routes/FinancialManagement/routes/ServiceAllocation/EditAllocationService.js"],"names":["React","Component","Modal","ModalBody","ModalHeader","Auxiliary","IconButton","CloseIcon","Row","Select","InputLabel","EditAllocationItem","addAllocationService","editAllocationService","getAllocationServiceByEstablishment","connect","ServiceItem","_","Button","UncontrolledAlert","EditAllocationService","constructor","props","handleChangeMonth","monthId","element","tab","allocation_month","index","findIndex","parseInt","push","splice","state","open","alerteIcon","services","allocationItemEdit","idServicesAffected","servicesSelected","bind","alertIcon","itemSelected","console","log","found","find","fk_id_service","id","undefined","setState","setTimeout","handleIcon","render","openEdit","cancel","paddingLeft","paddingRight","color","control","base","borderColor","border","boxShadow","borderRadius","value","fk_id_student","label","borderTopStyle","borderRightStyle","borderLeftStyle","name","surname","width","margin","marginTop","marginBottom","map","indexOf","path_img_service","cursor","e","name_fr_service","servicesSelectedItem","float","borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius","student_id","length","HandleSubmitAllocationService","mapStateToProps","userProfile","auth"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Modal, ModalBody, ModalHeader } from 'reactstrap';\nimport Auxiliary from '../../../../../util/Auxiliary';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { Row } from 'reactstrap';\nimport Select from 'react-select';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport EditAllocationItem from './ServiceAllocationComp/EditAllocationItem';\nimport {\n  addAllocationService,\n  editAllocationService,\n  getAllocationServiceByEstablishment,\n} from '../../../../../actions/AllocationServiceAction';\nimport { connect } from 'react-redux';\nimport ServiceItem from './ServiceAllocationComp/ServiceItem';\nimport _ from 'lodash';\nimport Button from '@material-ui/core/Button';\nimport { UncontrolledAlert } from 'reactstrap';\n\nclass EditAllocationService extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      open: false,\n      alerteIcon: false,\n      services: [],\n      allocationItemEdit: {},\n\n      idServicesAffected: [],\n      servicesSelected: [],\n    };\n    this.handleChangeMonth = this.handleChangeMonth.bind(this);\n    this.alertIcon = this.alertIcon.bind(this);\n  }\n  alertIcon(itemSelected) {\n    console.log(this.props.servicesSelected, 'alertIcon');\n\n     const found = this.props.servicesSelected.find(\n      (element) => element.fk_id_service == itemSelected.id\n    );\n    if (found !== undefined) {\n      if (found.id != '') {\n        this.setState({\n          alerteIcon: true,\n        });\n        setTimeout(() => {\n          this.setState({\n            alerteIcon: false,\n          });\n        }, 1500);\n      } else {\n        this.props.handleIcon(itemSelected);\n      }\n    }\n  }\n  handleChangeMonth = (monthId, element) => {\n    let tab = element.allocation_month;\n\n    var index = tab.findIndex((element) => element == parseInt(monthId, 10));\n    if (index == -1) {\n      tab.push(parseInt(monthId, 10));\n     } else {\n      tab.splice(index, 1);\n     }\n  };\n\n  render() {\n    let { services, allocationItemEdit, idServicesAffected, servicesSelected } = this.props;\n\n    return (\n      <Auxiliary>\n        <Modal isOpen={this.props.openEdit}>\n          <ModalHeader className=\"modal-box-header bg-primary text-white\">\n            Modifier\n            <IconButton className=\"text-white\" onClick={this.props.cancel}>\n              <CloseIcon />\n            </IconButton>\n          </ModalHeader>\n          <ModalBody style={{ paddingLeft: '5%', paddingRight: '5%' }}>\n            <form autoComplete=\"off\">\n              <div>\n                <Row>\n                  <h3 style={{ color: 'blue' }}>Information élève</h3>\n                </Row>\n                <br />\n                <Row>\n                  <div>\n                    <InputLabel htmlFor=\"idSelect\">ID</InputLabel>\n                  </div>\n                  <div className=\"col-md-2\">\n                    <Select\n                      name=\"student_id\"\n                      id=\"student_id\"\n                      styles={{\n                        control: (base) => ({\n                          ...base,\n                          '&:hover': { borderColor: 'gray' }, // border style on hover\n                          border: '1px solid lightgray', // default border color\n                          boxShadow: 'none', // no box-shadow\n                          borderRadius: 20,\n                        }),\n                      }}\n                      defaultValue={{\n                        value: servicesSelected[0].fk_id_student,\n                        label: servicesSelected[0].fk_id_student,\n                      }}\n                    />\n                  </div>\n                  <div className=\"col-md-4\">\n                    <InputLabel htmlFor=\"nomSelect\" style={{ paddingLeft: '10px' }}>\n                      Nom\n                    </InputLabel>\n                    <Select\n                      id=\"nomSelect\"\n                      styles={{\n                        control: (base) => ({\n                          ...base,\n                          '&:hover': { borderColor: 'gray' }, // border style on hover\n                          border: '1px solid lightgray', // default border color\n                          boxShadow: 'none', // no box-shadow\n                          borderTopStyle: 'none',\n                          borderRightStyle: 'none',\n                          borderLeftStyle: 'none',\n                          borderRadius: ' none',\n                        }),\n                      }}\n                      defaultValue={{\n                        value: servicesSelected[0].fk_id_student,\n                        label: allocationItemEdit.name + ' ' + allocationItemEdit.surname,\n                      }}\n                    />\n                  </div>\n                </Row>\n                <Row>\n                  <hr\n                    style={{\n                      width: '100%',\n                      margin: 'auto',\n                      marginTop: '5%',\n                      marginBottom: '5%',\n                      border: '1px dashed #979A9A',\n                      paddingLeft: '-100%',\n                    }}\n                  />\n                </Row>\n                <Row>\n                  <h3 style={{ color: 'blue' }}>Prestations</h3>\n                </Row>\n                {this.state.alerteIcon ? (\n                  <div className=\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\">\n                    <UncontrolledAlert className=\"alert-addon-card bg-danger bg-danger text-white shadow-lg\">\n                      <span className=\"icon-addon alert-addon\">\n                        <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n                      </span>\n                      <span className=\"d-inline-block\"> {'Prestation déja affectée'}</span>\n                    </UncontrolledAlert>\n                  </div>\n                ) : (\n                  ''\n                )}\n                <Row>\n                  {services.map((element) => {\n                    let color;\n                    color = idServicesAffected.indexOf(element.id);\n\n                    return (\n                      <div className=\" col-md-3 d-flex flex-row bd-highlight align-items-start justify-content-start  mb-3 \">\n                        <div className=\"p-2 d-flex align-items-center justify-content-start \">\n                          {' '}\n                          <i\n                            id={element.id}\n                            className={`${element.path_img_service}`}\n                            style={{\n                              color: color !== -1 && color !== undefined ? 'blue' : 'black',\n                              cursor: 'pointer',\n                            }}\n                            onClick={(e) => {\n                              if (color !== -1 && color !== undefined) {\n                                this.alertIcon(element);\n                              } else {\n                                this.props.handleIcon(element);\n                              }\n                            }}\n                          ></i>\n                        </div>\n                        <div\n                          className=\"p-2   d-flex align-items-center \"\n                          style={{ color: 'black' }}\n                        >\n                          {element.name_fr_service}\n                        </div>\n                      </div>\n                    );\n                  })}\n                </Row>\n\n                <br />\n                <Row>\n                  <div className=\"col-lg-12 col-md-12 \">\n                    {servicesSelected.map((servicesSelectedItem, index) => {\n                      return (\n                        <div key={index}>\n                          <EditAllocationItem\n                            key={index}\n                            item={servicesSelectedItem}\n                            // handleChangeMonth={this.handleChangeMonth}\n                          />\n                          <br></br>\n                        </div>\n                      );\n                    })}\n                  </div>\n                </Row>\n                <Row style={{ float: 'right' }}>\n                  <Button\n                    variant=\"contained\"\n                    style={{\n                      borderBottomLeftRadius: '16px',\n                      borderBottomRightRadius: '16px',\n                      borderTopLeftRadius: '16px',\n                      borderTopRightRadius: '16px',\n                    }}\n                    onClick={this.props.cancel}\n                  >\n                    Annuler\n                  </Button>\n                  &nbsp;&nbsp;\n                  <Button\n                    disabled={this.state.student_id == '' || servicesSelected.length == 0}\n                    variant=\"contained\"\n                    style={{\n                      borderBottomLeftRadius: '16px',\n                      borderBottomRightRadius: '16px',\n                      borderTopLeftRadius: '16px',\n                      borderTopRightRadius: '16px',\n                    }}\n                    className=\" bg-indigo text-white \"\n                    onClick={this.props.HandleSubmitAllocationService}\n                  >\n                    Modifier{' '}\n                  </Button>\n                </Row>\n              </div>\n            </form>\n          </ModalBody>\n        </Modal>\n      </Auxiliary>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    userProfile: state.auth.userProfile,\n  };\n}\n\nexport default connect(mapStateToProps, {\n  addAllocationService,\n  editAllocationService,\n  getAllocationServiceByEstablishment,\n})(EditAllocationService);\n"]},"metadata":{},"sourceType":"module"}