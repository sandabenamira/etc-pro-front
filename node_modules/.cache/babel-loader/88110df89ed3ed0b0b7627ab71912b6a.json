{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/containers/SignIn.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport TextField from '@material-ui/core/TextField';\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\nimport IntlMessages from '../util/IntlMessages';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport ForgetPasswordModal from './ForgetPasswordModal';\nimport SweetAlert from 'react-bootstrap-sweetalert';\nimport { hideMessage, showAuthLoader, userFacebookSignIn, userGithubSignIn, userGoogleSignIn, userSignIn, userTwitterSignIn, hideLicenceMessage } from '../actions/Auth';\nimport baseUrl from '../config/config';\nimport axios from 'axios';\n\nclass SignIn extends React.Component {\n  constructor() {\n    super();\n\n    this._handleKeyPress = e => {\n      if (e.key === 'Enter') {\n        this.props.showAuthLoader();\n        const email = this.state.email;\n        const password = this.state.password;\n        this.props.userSignIn({\n          email,\n          password\n        });\n      }\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.onConfirm = () => {\n      this.props.hideLicenceMessage();\n    };\n\n    this.state = {\n      email: '',\n      password: '',\n      forgotPassword: '',\n      errorAlert: false,\n      succedAlert: false,\n      isopen: false\n    };\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.ResetPassword = this.ResetPassword.bind(this);\n  }\n\n  handleCancel() {\n    this.setState({\n      isopen: false\n    });\n  }\n\n  componentDidUpdate() {\n    if (this.props.showMessage) {\n      setTimeout(() => {\n        this.props.hideMessage();\n      }, 500);\n    }\n\n    if (this.props.authUser !== null) {\n      this.props.history.push('/');\n    }\n  }\n\n  ResetPassword() {\n    console.log('test mdp oubliééé');\n    var email1 = this.state.forgotPassword;\n    const params = {\n      email: email1\n    };\n    axios.post(`${baseUrl.baseUrl}/users/reset-user-password`, params, {\n      headers: {\n        'content-type': 'application/json'\n      }\n    }).then(response => {\n      if (response.data.existe === true) {\n        this.setState({\n          succedAlert: true,\n          forgotPassword: ''\n        });\n        setTimeout(function () {\n          this.setState({\n            succedAlert: false,\n            isopen: false\n          });\n        }.bind(this), 2000);\n      } else {\n        this.setState({\n          errorAlert: true,\n          forgotPassword: ''\n        });\n        setTimeout(function () {\n          this.setState({\n            errorAlert: false\n          });\n        }.bind(this), 2000);\n      }\n    }).catch(err => {});\n  }\n\n  render() {\n    const {\n      email,\n      password\n    } = this.state;\n    const {\n      showMessage,\n      loader,\n      alertMessage,\n      showLicenceMessage,\n      alertLicenceMessage\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-login-container d-flex justify-content-center align-items-center animated slideInUpTiny animation-duration-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-login-main-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-logo-content d-flex align-items-center justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"logo-lg\",\n      to: \"/\",\n      title: \"STUPP\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      width: 220,\n      src: require('../assets/images/logoEducapGris.png'),\n      alt: \"STUPP\",\n      title: \"STUPP\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-login-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-login-header mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"appModule.email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-login-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"fieldset\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"appModule.email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 28\n        }\n      }),\n      fullWidth: true,\n      onChange: event => this.setState({\n        email: event.target.value\n      }),\n      defaultValue: email,\n      margin: \"normal\",\n      className: \"mt-1 my-sm-3\",\n      onKeyPress: event => this._handleKeyPress(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      type: \"password\",\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"appModule.password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 28\n        }\n      }),\n      fullWidth: true,\n      onChange: event => this.setState({\n        password: event.target.value\n      }),\n      defaultValue: password,\n      margin: \"normal\",\n      className: \"mt-1 my-sm-3\",\n      onKeyPress: event => this._handleKeyPress(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mb-3 d-flex align-items-center justify-content-between\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => {\n        this.props.showAuthLoader();\n        this.props.userSignIn({\n          email,\n          password\n        });\n      },\n      variant: \"contained\",\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"appModule.signIn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(Link, {\n      to: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Link, {\n      href: \"#\",\n      onClick: () => {\n        this.setState({\n          isopen: true\n        });\n      },\n      color: \"inherit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"forgot.password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-social-block my-1 my-sm-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"signIn.connectWith\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"social-link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      className: \"icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-facebook\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 27\n      }\n    }))), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      className: \"icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-twitter\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 27\n      }\n    }))), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      className: \"icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-google-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 27\n      }\n    }))), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      className: \"icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-github\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 27\n      }\n    })))))))))), loader && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loader-view\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 13\n      }\n    })), showMessage && NotificationManager.error(alertMessage), /*#__PURE__*/React.createElement(NotificationContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }\n    }), this.state.isopen === true ? /*#__PURE__*/React.createElement(ForgetPasswordModal, {\n      isopen: this.state.isopen,\n      handleCancel: this.handleCancel,\n      handleChange: this.handleChange,\n      ResetPassword: this.ResetPassword,\n      errorAlert: this.state.errorAlert,\n      forgotPassword: this.state.forgotPassword,\n      succedAlert: this.state.succedAlert,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }\n    }) : '', /*#__PURE__*/React.createElement(SweetAlert, {\n      show: showLicenceMessage,\n      title: alertLicenceMessage,\n      onConfirm: this.onConfirm,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = ({\n  auth\n}) => {\n  const {\n    loader,\n    alertMessage,\n    showMessage,\n    authUser,\n    showLicenceMessage,\n    alertLicenceMessage\n  } = auth;\n  return {\n    loader,\n    alertMessage,\n    showMessage,\n    authUser,\n    showLicenceMessage,\n    alertLicenceMessage\n  };\n};\n\nexport default connect(mapStateToProps, {\n  userSignIn,\n  hideMessage,\n  showAuthLoader,\n  userFacebookSignIn,\n  userGoogleSignIn,\n  userGithubSignIn,\n  userTwitterSignIn,\n  hideLicenceMessage\n})(SignIn);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/containers/SignIn.js"],"names":["React","Link","connect","TextField","IconButton","Button","NotificationContainer","NotificationManager","IntlMessages","CircularProgress","ForgetPasswordModal","SweetAlert","hideMessage","showAuthLoader","userFacebookSignIn","userGithubSignIn","userGoogleSignIn","userSignIn","userTwitterSignIn","hideLicenceMessage","baseUrl","axios","SignIn","Component","constructor","_handleKeyPress","e","key","props","email","state","password","handleChange","name","event","setState","target","value","onConfirm","forgotPassword","errorAlert","succedAlert","isopen","handleCancel","bind","ResetPassword","componentDidUpdate","showMessage","setTimeout","authUser","history","push","console","log","email1","params","post","headers","then","response","data","existe","catch","err","render","loader","alertMessage","showLicenceMessage","alertLicenceMessage","require","error","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport IntlMessages from '../util/IntlMessages';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport ForgetPasswordModal from './ForgetPasswordModal';\r\nimport SweetAlert from 'react-bootstrap-sweetalert';\r\n\r\nimport {\r\n  hideMessage,\r\n  showAuthLoader,\r\n  userFacebookSignIn,\r\n  userGithubSignIn,\r\n  userGoogleSignIn,\r\n  userSignIn,\r\n  userTwitterSignIn,\r\n  hideLicenceMessage,\r\n} from '../actions/Auth';\r\n\r\nimport baseUrl from '../config/config';\r\nimport axios from 'axios';\r\n\r\nclass SignIn extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      email: '',\r\n      password: '',\r\n      forgotPassword: '',\r\n      errorAlert: false,\r\n      succedAlert: false,\r\n      isopen: false,\r\n    };\r\n    this.handleCancel = this.handleCancel.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.ResetPassword = this.ResetPassword.bind(this);\r\n  }\r\n  handleCancel() {\r\n    this.setState({\r\n      isopen: false,\r\n    });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.props.showMessage) {\r\n      setTimeout(() => {\r\n        this.props.hideMessage();\r\n      }, 500);\r\n    }\r\n    if (this.props.authUser !== null) {\r\n      this.props.history.push('/');\r\n    }\r\n  }\r\n  _handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      this.props.showAuthLoader();\r\n      const email = this.state.email;\r\n      const password = this.state.password;\r\n      this.props.userSignIn({ email, password });\r\n    }\r\n  };\r\n\r\n  handleChange = (name) => (event) => {\r\n    this.setState({ [name]: event.target.value });\r\n  };\r\n\r\n  ResetPassword() {\r\n    console.log('test mdp oubliééé');\r\n    var email1 = this.state.forgotPassword;\r\n\r\n    const params = {\r\n      email: email1,\r\n    };\r\n\r\n    axios\r\n      .post(`${baseUrl.baseUrl}/users/reset-user-password`, params, {\r\n        headers: {\r\n          'content-type': 'application/json',\r\n        },\r\n      })\r\n      .then((response) => {\r\n        if (response.data.existe === true) {\r\n          this.setState({\r\n            succedAlert: true,\r\n            forgotPassword: '',\r\n          });\r\n          setTimeout(\r\n            function() {\r\n              this.setState({ succedAlert: false, isopen: false });\r\n            }.bind(this),\r\n            2000\r\n          );\r\n        } else {\r\n          this.setState({\r\n            errorAlert: true,\r\n            forgotPassword: '',\r\n          });\r\n          setTimeout(\r\n            function() {\r\n              this.setState({ errorAlert: false });\r\n            }.bind(this),\r\n            2000\r\n          );\r\n        }\r\n      })\r\n      .catch((err) => {});\r\n  }\r\n  onConfirm = () => {\r\n    this.props.hideLicenceMessage();\r\n  };\r\n\r\n  render() {\r\n    const { email, password } = this.state;\r\n    const {\r\n      showMessage,\r\n      loader,\r\n      alertMessage,\r\n      showLicenceMessage,\r\n      alertLicenceMessage,\r\n    } = this.props;\r\n    return (\r\n      <div className=\"app-login-container d-flex justify-content-center align-items-center animated slideInUpTiny animation-duration-3\">\r\n        <div className=\"app-login-main-content\">\r\n          <div className=\"app-logo-content d-flex align-items-center justify-content-center\">\r\n            <Link className=\"logo-lg\" to=\"/\" title=\"STUPP\">\r\n              <img\r\n                width={220}\r\n                src={require('../assets/images/logoEducapGris.png')}\r\n                alt=\"STUPP\"\r\n                title=\"STUPP\"\r\n              />\r\n            </Link>\r\n          </div>\r\n          <div className=\"app-login-content\">\r\n            <div className=\"app-login-header mb-4\">\r\n              <h1>\r\n                <IntlMessages id=\"appModule.email\" />\r\n              </h1>\r\n            </div>\r\n            <div className=\"app-login-form\">\r\n              <form>\r\n                <fieldset>\r\n                  <TextField\r\n                    label={<IntlMessages id=\"appModule.email\" />}\r\n                    fullWidth\r\n                    onChange={(event) => this.setState({ email: event.target.value })}\r\n                    defaultValue={email}\r\n                    margin=\"normal\"\r\n                    className=\"mt-1 my-sm-3\"\r\n                    onKeyPress={(event) => this._handleKeyPress(event)}\r\n                  />\r\n                  <TextField\r\n                    type=\"password\"\r\n                    label={<IntlMessages id=\"appModule.password\" />}\r\n                    fullWidth\r\n                    onChange={(event) => this.setState({ password: event.target.value })}\r\n                    defaultValue={password}\r\n                    margin=\"normal\"\r\n                    className=\"mt-1 my-sm-3\"\r\n                    onKeyPress={(event) => this._handleKeyPress(event)}\r\n                  />\r\n\r\n                  <div className=\"mb-3 d-flex align-items-center justify-content-between\">\r\n                    <Button\r\n                      onClick={() => {\r\n                        this.props.showAuthLoader();\r\n                        this.props.userSignIn({ email, password });\r\n                      }}\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                    >\r\n                      <IntlMessages id=\"appModule.signIn\" />\r\n                    </Button>\r\n                    <Link to=\"\"></Link>\r\n\r\n                    <Link\r\n                      href=\"#\"\r\n                      onClick={() => {\r\n                        this.setState({ isopen: true });\r\n                      }}\r\n                      color=\"inherit\"\r\n                    >\r\n                      <IntlMessages id=\"forgot.password\" />\r\n                    </Link>\r\n                  </div>\r\n                  <div className=\"app-social-block my-1 my-sm-3\">\r\n                    <Link to=\"\">\r\n                      <IntlMessages id=\"signIn.connectWith\" />\r\n                    </Link>\r\n\r\n                    <ul className=\"social-link\">\r\n                      <li>\r\n                        <IconButton className=\"icon\">\r\n                          <i className=\"zmdi zmdi-facebook\" />\r\n                        </IconButton>\r\n                      </li>\r\n\r\n                      <li>\r\n                        <IconButton className=\"icon\">\r\n                          <i className=\"zmdi zmdi-twitter\" />\r\n                        </IconButton>\r\n                      </li>\r\n\r\n                      <li>\r\n                        <IconButton className=\"icon\">\r\n                          <i className=\"zmdi zmdi-google-plus\" />\r\n                        </IconButton>\r\n                      </li>\r\n                      <li>\r\n                        <IconButton className=\"icon\">\r\n                          <i className=\"zmdi zmdi-github\" />\r\n                        </IconButton>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                </fieldset>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {loader && (\r\n          <div className=\"loader-view\">\r\n            <CircularProgress />\r\n          </div>\r\n        )}\r\n        {showMessage && NotificationManager.error(alertMessage)}\r\n        <NotificationContainer />\r\n        {this.state.isopen === true ? (\r\n          <ForgetPasswordModal\r\n            isopen={this.state.isopen}\r\n            handleCancel={this.handleCancel}\r\n            handleChange={this.handleChange}\r\n            ResetPassword={this.ResetPassword}\r\n            errorAlert={this.state.errorAlert}\r\n            forgotPassword={this.state.forgotPassword}\r\n            succedAlert={this.state.succedAlert}\r\n          />\r\n        ) : (\r\n          ''\r\n        )}\r\n        <SweetAlert\r\n          show={showLicenceMessage}\r\n          title={alertLicenceMessage}\r\n          onConfirm={this.onConfirm}\r\n        ></SweetAlert>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ auth }) => {\r\n  const {\r\n    loader,\r\n    alertMessage,\r\n    showMessage,\r\n    authUser,\r\n    showLicenceMessage,\r\n    alertLicenceMessage,\r\n  } = auth;\r\n  return { loader, alertMessage, showMessage, authUser, showLicenceMessage, alertLicenceMessage };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n  userSignIn,\r\n  hideMessage,\r\n  showAuthLoader,\r\n  userFacebookSignIn,\r\n  userGoogleSignIn,\r\n  userGithubSignIn,\r\n  userTwitterSignIn,\r\n  hideLicenceMessage,\r\n})(SignIn);\r\n"]},"metadata":{},"sourceType":"module"}