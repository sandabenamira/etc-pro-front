{"ast":null,"code":"import { classService } from '../_services/class.service';\nimport { FETECHED_ALL_MENUS, ADD_MENU, EDIT_MENU, DELETE_MENU, HANDLE_REQUEST_CLOSE, SHOW_ERROR_MESSAGE, HIDE_ERROR_MESSAGE, HIDE_SUCCESS_MESSAGE, SHOW_SUCCESS_MESSAGE } from '../constants/ActionTypes';\nimport baseUrl from \"../config/config\";\nimport axios from \"axios\";\nexport const addMenu = itemMENU => {\n  //1\n  return dispatch => {\n    let apiEndpoint = `/cafeteria?access_token=${localStorage.token}`;\n    classService.post(apiEndpoint, itemMENU).then(response => {\n      if (response) {\n        dispatch({\n          type: ADD_MENU,\n          payload: response.data\n        });\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: 'La création est effectuée avec succès'\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_SUCCESS_MESSAGE\n          });\n        }, 4000);\n      } else {\n        dispatch({\n          type: SHOW_ERROR_MESSAGE,\n          payload: \"Une erreur est survenue lors de la création merci d'essayer à nouveau\"\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_ERROR_MESSAGE\n          });\n        }, 4000);\n      }\n    });\n  };\n};\nexport const getMenus = () => {\n  return dispatch => {\n    let apiEndpoint = `/cafeteria?access_token=${localStorage.token}`;\n    classService.get(apiEndpoint).then(response => {\n      const list = response.data;\n      const menuList = list.filter(element => element.status);\n      dispatch({\n        type: FETECHED_ALL_MENUS,\n        payload: menuList\n      });\n    }).catch(err => {});\n  };\n};\nexport const getMenusByEstablishmentId = establishmentId => {\n  return dispatch => {\n    let apiEndpoint = `/cafeteria?access_token=${localStorage.token}&filter[where][establishment_id]=` + establishmentId;\n    classService.get(apiEndpoint).then(response => {\n      const list = response.data;\n      const menuList = list.filter(element => element.status);\n      dispatch({\n        type: FETECHED_ALL_MENUS,\n        payload: menuList\n      });\n    }).catch(err => {});\n  };\n};\nexport function deleteMenus(itemId) {\n  return dispatch => {\n    axios.patch(`${baseUrl.baseUrl}/cafeteria/` + itemId + `?access_token=${localStorage.token}`, {\n      status: false\n    }).then(response => {\n      dispatch({\n        type: DELETE_MENU,\n        payload: response.data\n      });\n    }).catch(function (error) {\n      console.log('error', error);\n    });\n  };\n}\nexport function editMenu(data) {\n  return dispatch => {\n    let Data = {\n      menu_date: data.menu_date,\n      prix: data.prix,\n      suite: data.suite,\n      dessert: data.dessert,\n      entree: data.entree,\n      establishment_id: data.establishment_id,\n      status: true,\n      id: data.id\n    };\n    let apiEndpoint = `/cafeteria/` + data.id + `?access_token=${localStorage.token}`;\n    classService.put(apiEndpoint, Data).then(response => {\n      if (response) {\n        dispatch({\n          type: EDIT_MENU,\n          payload: response.data\n        });\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: 'La modification est effectuée avec succès'\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_SUCCESS_MESSAGE\n          });\n        }, 4000);\n      } else {\n        dispatch({\n          type: SHOW_ERROR_MESSAGE,\n          payload: \"Une erreur est survenue lors de la modification merci d'essayer à nouveau\"\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_ERROR_MESSAGE\n          });\n        }, 4000);\n      }\n    });\n  };\n}\nexport const MENUAction = {\n  addMenu,\n  getMenus,\n  editMenu,\n  deleteMenus,\n  getMenusByEstablishmentId\n};","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/actions/CafeteriaAction.js"],"names":["classService","FETECHED_ALL_MENUS","ADD_MENU","EDIT_MENU","DELETE_MENU","HANDLE_REQUEST_CLOSE","SHOW_ERROR_MESSAGE","HIDE_ERROR_MESSAGE","HIDE_SUCCESS_MESSAGE","SHOW_SUCCESS_MESSAGE","baseUrl","axios","addMenu","itemMENU","dispatch","apiEndpoint","localStorage","token","post","then","response","type","payload","data","setTimeout","getMenus","get","list","menuList","filter","element","status","catch","err","getMenusByEstablishmentId","establishmentId","deleteMenus","itemId","patch","error","console","log","editMenu","Data","menu_date","prix","suite","dessert","entree","establishment_id","id","put","MENUAction"],"mappings":"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","sourcesContent":["import { classService } from '../_services/class.service';\nimport {\n  FETECHED_ALL_MENUS,\n  ADD_MENU,\n  EDIT_MENU,\n  DELETE_MENU,\n  HANDLE_REQUEST_CLOSE,\n  SHOW_ERROR_MESSAGE,\n  HIDE_ERROR_MESSAGE,\n  HIDE_SUCCESS_MESSAGE,\n  SHOW_SUCCESS_MESSAGE,\n} from '../constants/ActionTypes';\nimport baseUrl from \"../config/config\";\nimport axios from \"axios\";\nexport const addMenu= (itemMENU) => {\n  //1\n  return (dispatch) => {\n    let apiEndpoint = `/cafeteria?access_token=${localStorage.token}`;\n    classService.post(apiEndpoint, itemMENU).then((response) => {\n     \n      if (response) {\n        dispatch({ type: ADD_MENU, payload: response.data });\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: 'La création est effectuée avec succès',\n        });\n        setTimeout(() => {\n          dispatch({ type: HIDE_SUCCESS_MESSAGE });\n        }, 4000);\n      } else {\n        dispatch({\n          type: SHOW_ERROR_MESSAGE,\n          payload:\n            \"Une erreur est survenue lors de la création merci d'essayer à nouveau\",\n        });\n        setTimeout(() => {\n          dispatch({ type: HIDE_ERROR_MESSAGE });\n        }, 4000);\n      }\n    });\n  };\n};\n\nexport const getMenus = () => {\n  return (dispatch) => {\n    let apiEndpoint = `/cafeteria?access_token=${localStorage.token}`;\n    classService\n      .get(apiEndpoint)\n      .then((response) => {\n        const list = response.data;\n        const menuList = list.filter((element) => element.status);\n        dispatch({ type: FETECHED_ALL_MENUS, payload: menuList });\n      })\n      .catch((err) => {});\n  };\n};\n\nexport const getMenusByEstablishmentId = (establishmentId) => {\n  return (dispatch) => {\n    let apiEndpoint =\n      `/cafeteria?access_token=${localStorage.token}&filter[where][establishment_id]=` +\n      establishmentId;\n      classService\n      .get(apiEndpoint)\n      .then((response) => {\n        const list = response.data;\n        const menuList = list.filter((element) => element.status);\n\n        dispatch({ type: FETECHED_ALL_MENUS, payload: menuList });\n      })\n      .catch((err) => {});\n  };\n};\n\nexport function deleteMenus(itemId) {\n  return (dispatch) => {\n    axios.patch(`${baseUrl.baseUrl}/cafeteria/` + itemId + `?access_token=${localStorage.token}`, {\n      status: false,\n    })\n      .then(response => {\n       \n        dispatch({ type: DELETE_MENU, payload: response.data });\n      })\n      .catch(function (error) {\n        console.log('error', error)\n      });\n  };\n}\n\nexport function editMenu(data) {\n  return (dispatch) => {\n    let Data = {\n      menu_date : data.menu_date,\n      prix :data.prix,\n      suite : data.suite,\n      dessert : data.dessert,\n      entree : data.entree,\n      establishment_id:data.establishment_id,\n      status:true,\n      id:data.id,\n    };\n    let apiEndpoint =\n      `/cafeteria/` + data.id + `?access_token=${localStorage.token}`;\n      classService.put(apiEndpoint, Data).then((response) => {\n      if (response) {\n        dispatch({ type: EDIT_MENU, payload: response.data });\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: 'La modification est effectuée avec succès',\n        });\n        setTimeout(() => {\n          dispatch({ type: HIDE_SUCCESS_MESSAGE });\n        }, 4000);\n      } else {\n        dispatch({\n          type: SHOW_ERROR_MESSAGE,\n          payload:\n            \"Une erreur est survenue lors de la modification merci d'essayer à nouveau\",\n        });\n        setTimeout(() => {\n          dispatch({ type: HIDE_ERROR_MESSAGE });\n        }, 4000);\n      }\n    });\n  };\n}\n\nexport const MENUAction = {\n    addMenu,\n    getMenus,\n  editMenu,\n  deleteMenus,\n  getMenusByEstablishmentId,\n};\n"]},"metadata":{},"sourceType":"module"}