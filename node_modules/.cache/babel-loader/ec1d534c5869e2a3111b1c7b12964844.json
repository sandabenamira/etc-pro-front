{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/Room/AddRoom.js\";\nimport React from \"react\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Button from \"@material-ui/core/Button\";\nimport Auxiliary from \"../../../../../util/Auxiliary\";\nimport { Modal, ModalBody, ModalHeader } from \"reactstrap\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport { addRoom } from \"../../../../../actions/roomAction\";\nimport { connect } from \"react-redux\";\nconst roleIdAdmin = 2;\nconst roleIdSuperAdmin = 1;\n\nconst Error = ({\n  test\n}) => {\n  if (test < 0) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-message invalid\",\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 16,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"room.numberError\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-message invalid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 10\n    }\n  }, \"\\xA0\");\n};\n\nclass AddRoom extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = name => event => {\n      if (name == \"name\") {\n        let nameError = false;\n        nameError = this.props.rooms.filter(element => element.name === event.target.value.trim()).length > 0;\n        this.setState({\n          [name]: event.target.value,\n          nameError: nameError\n        });\n      } else {\n        this.setState({\n          [name]: event.target.value\n        });\n      }\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const name = this.state.name;\n      const max_number = this.state.max_number;\n      const description = this.state.description;\n      const establishment_id = this.state.establishment;\n      const fk_id_school_year = this.props.userProfile.school_year_id;\n      const data = {\n        name,\n        max_number,\n        description,\n        establishment_id,\n        fk_id_school_year\n      };\n      this.props.addRoom(data);\n      this.setState({\n        previewVisible: false,\n        name: \"\",\n        max_number: \"\",\n        description: \"\",\n        establishment: \"\",\n        schoolYear: \"\"\n      });\n      this.props.cancelModal();\n    };\n\n    this.state = {\n      previewVisible: true,\n      ListEstablishment: [],\n      name: \"\",\n      description: \"\",\n      schoolYear: \"\",\n      establishment: \"\",\n      max_number: \"\",\n      nameError: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    const roleId = this.props.userProfile.role_id;\n    const establishmentId = this.props.userProfile.establishment_id;\n\n    if (roleId === roleIdAdmin || roleId === 7) {\n      this.setState({\n        establishment: establishmentId\n      });\n    }\n  }\n\n  handleCancel() {\n    this.setState({\n      previewVisible: false,\n      name: \"\",\n      description: \"\",\n      establishment_id: 0,\n      schoolYear_id: \"\"\n    });\n    this.props.cancelModal();\n  }\n\n  isNumber(value) {\n    if (value.length > 0) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Auxiliary, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Modal, {\n      isOpen: this.state.previewVisible,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      toggle: this.handleCancel,\n      className: \"modal-box-header bg-primary text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"sidebar.rooms\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 16\n      }\n    })), /*#__PURE__*/React.createElement(ModalBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"row\",\n      autoComplete: \"off\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 15\n      }\n    }, this.props.userProfile.role_id === roleIdSuperAdmin ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      required: true,\n      id: \"establishment\",\n      onChange: this.handleChange(\"establishment\"),\n      select: true,\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.establishments.formadd.establishment\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 25\n        }\n      }),\n      value: this.state.establishment,\n      SelectProps: {},\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }, this.props.ListEstablishment.map(option => /*#__PURE__*/React.createElement(MenuItem, {\n      key: option.id,\n      value: option.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 25\n      }\n    }, option.name)))) : \"\", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      required: true,\n      name: \"name\",\n      id: \"name\",\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"room.name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 28\n        }\n      }),\n      onChange: this.handleChange(\"name\"),\n      value: this.state.name,\n      margin: \"normal\",\n      fullWidth: true,\n      error: this.state.nameError,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(FormHelperText, {\n      error: this.state.nameError,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 19\n      }\n    }, this.state.nameError ? /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"room.nameError\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 23\n      }\n    }) : \"\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      required: true,\n      name: \"max_number\",\n      id: \"max_number\",\n      type: \"number\",\n      error: this.state.max_number < 0,\n      inputProps: {\n        min: 0\n      },\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"room.max_number\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 28\n        }\n      }),\n      onChange: this.handleChange(\"max_number\"),\n      value: this.state.max_number,\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Error, {\n      test: this.state.max_number,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      name: \"description\",\n      id: \"description\",\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"room.description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 28\n        }\n      }),\n      onChange: this.handleChange(\"description\"),\n      value: this.state.description,\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"font\", {\n      color: \"red\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 21\n      }\n    }, \"*\"), \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"component.required_fields\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 22\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 text-left \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      disabled: this.state.nameError,\n      variant: \"contained\",\n      className: \"jr-btn bg-indigo text-white \",\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.establishments.formadd.buttonAdd\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      className: \"jr-btn bg-grey text-white \",\n      onClick: this.handleCancel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.establishments.formadd.buttonCancel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 23\n      }\n    }))))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {};\n};\n\nexport default connect(mapStateToProps, {\n  addRoom\n})(AddRoom);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/Room/AddRoom.js"],"names":["React","IntlMessages","TextField","MenuItem","Button","Auxiliary","Modal","ModalBody","ModalHeader","FormHelperText","addRoom","connect","roleIdAdmin","roleIdSuperAdmin","Error","test","color","AddRoom","Component","constructor","props","handleChange","name","event","nameError","rooms","filter","element","target","value","trim","length","setState","handleSubmit","e","preventDefault","state","max_number","description","establishment_id","establishment","fk_id_school_year","userProfile","school_year_id","data","previewVisible","schoolYear","cancelModal","ListEstablishment","bind","handleCancel","componentDidMount","roleId","role_id","establishmentId","schoolYear_id","isNumber","render","map","option","id","min","mapStateToProps"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Button from \"@material-ui/core/Button\";\nimport Auxiliary from \"../../../../../util/Auxiliary\";\nimport { Modal, ModalBody, ModalHeader } from \"reactstrap\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport { addRoom } from \"../../../../../actions/roomAction\";\nimport { connect } from \"react-redux\";\nconst roleIdAdmin = 2;\nconst roleIdSuperAdmin = 1;\nconst Error = ({ test }) => {\n  if (test < 0) {\n    return (\n      <div className=\"form-message invalid\" style={{ color: \"red\" }}>\n        <IntlMessages id=\"room.numberError\" />\n      </div>\n    );\n  }\n  return <div className=\"form-message invalid\">&nbsp;</div>;\n};\n\nclass AddRoom extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      previewVisible: true,\n      ListEstablishment: [],\n      name: \"\",\n      description: \"\",\n      schoolYear:\"\",\n      establishment: \"\",\n      max_number: \"\",\n      nameError: false,\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    const roleId = this.props.userProfile.role_id;\n    const establishmentId = this.props.userProfile.establishment_id;\n    if (roleId === roleIdAdmin || roleId === 7) {\n      this.setState({ establishment: establishmentId });\n    }\n  }\n\n  handleCancel() {\n    this.setState({\n      previewVisible: false,\n      name: \"\",\n      description: \"\",\n      establishment_id: 0,\n      schoolYear_id:\"\"\n    });\n    this.props.cancelModal();\n  }\n\n  handleChange = (name) => (event) => {\n    if (name == \"name\") {\n      let nameError = false;\n      nameError =\n        this.props.rooms.filter(\n          (element) => element.name === event.target.value.trim()\n        ).length > 0;\n\n      this.setState({ [name]: event.target.value, nameError: nameError });\n    } else {\n      this.setState({ [name]: event.target.value });\n    }\n  };\n  isNumber(value) {\n    if (value.length > 0) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const name = this.state.name;\n    const max_number = this.state.max_number;\n    const description = this.state.description;\n    const establishment_id = this.state.establishment;\n    const fk_id_school_year = this.props.userProfile.school_year_id;\n     const data = { name, max_number, description, establishment_id,fk_id_school_year };\n    this.props.addRoom(data);\n    this.setState({\n      previewVisible: false,\n      name: \"\",\n      max_number: \"\",\n      description: \"\",\n      establishment: \"\",\n      schoolYear: \"\"\n    });\n    this.props.cancelModal();\n  };\n  render() {\n    return (\n      <div className=\"app-wrapper\">\n        <Auxiliary>\n          <Modal isOpen={this.state.previewVisible}>\n            <ModalHeader\n              toggle={this.handleCancel}\n              className=\"modal-box-header bg-primary text-white\"\n            >\n              {<IntlMessages id=\"sidebar.rooms\" />}\n            </ModalHeader>\n            <ModalBody>\n              <form\n                className=\"row\"\n                autoComplete=\"off\"\n                onSubmit={this.handleSubmit}\n              >\n                {this.props.userProfile.role_id === roleIdSuperAdmin ? (\n                  <div className=\"col-sm-6\">\n                    <TextField\n                      required\n                      id=\"establishment\"\n                      onChange={this.handleChange(\"establishment\")}\n                      select\n                      label={\n                        <IntlMessages id=\"components.establishments.formadd.establishment\" />\n                      }\n                      value={this.state.establishment}\n                      SelectProps={{}}\n                      margin=\"normal\"\n                      fullWidth\n                    >\n                      {this.props.ListEstablishment.map((option) => (\n                        <MenuItem key={option.id} value={option.id}>\n                          {option.name}\n                        </MenuItem>\n                      ))}\n                    </TextField>\n                  </div>\n                ) : (\n                  \"\"\n                )}\n                <div className=\"col-sm-6\">\n                  <TextField\n                    required\n                    name=\"name\"\n                    id=\"name\"\n                    label={<IntlMessages id=\"room.name\" />}\n                    onChange={this.handleChange(\"name\")}\n                    value={this.state.name}\n                    margin=\"normal\"\n                    fullWidth\n                    error={this.state.nameError}\n                  />\n                  <FormHelperText error={this.state.nameError}>\n                    {this.state.nameError ? (\n                      <IntlMessages id=\"room.nameError\" />\n                    ) : (\n                      \"\"\n                    )}\n                  </FormHelperText>\n                </div>\n                <div className=\"col-sm-6\">\n                  <TextField\n                    required\n                    name=\"max_number\"\n                    id=\"max_number\"\n                    type=\"number\"\n                    error={this.state.max_number < 0}\n                    inputProps={{ min: 0 }}\n                    label={<IntlMessages id=\"room.max_number\" />}\n                    onChange={this.handleChange(\"max_number\")}\n                    value={this.state.max_number}\n                    margin=\"normal\"\n                    fullWidth\n                  />\n                  <Error test={this.state.max_number} />\n                </div>\n                <div className=\"col-sm-6\">\n                  <TextField\n                    name=\"description\"\n                    id=\"description\"\n                    label={<IntlMessages id=\"room.description\" />}\n                    onChange={this.handleChange(\"description\")}\n                    value={this.state.description}\n                    margin=\"normal\"\n                    fullWidth\n                  />\n                </div>\n                <br />\n                <br />\n                <br />\n                <br />\n                <br />\n                <div className=\"col-sm-12\">\n                  <h4>\n                    <font color=\"red\">*</font>{\" \"}\n                    {<IntlMessages id=\"component.required_fields\" />}\n                  </h4>\n                </div>\n                <div className=\"col-md-12 text-left \">\n                  <br />\n                  <br />\n                  <Button\n                    disabled={this.state.nameError}\n                    variant=\"contained\"\n                    className=\"jr-btn bg-indigo text-white \"\n                    type=\"submit\"\n                  >\n                    {\n                      <IntlMessages id=\"components.establishments.formadd.buttonAdd\" />\n                    }\n                  </Button>\n                  <Button\n                    variant=\"contained\"\n                    className=\"jr-btn bg-grey text-white \"\n                    onClick={this.handleCancel}\n                  >\n                    {\n                      <IntlMessages id=\"components.establishments.formadd.buttonCancel\" />\n                    }\n                  </Button>\n                </div>\n              </form>\n            </ModalBody>\n          </Modal>\n        </Auxiliary>\n      </div>\n    );\n  }\n}\n \nconst mapStateToProps = (state) => {\n  return {\n  \n  };\n};\n\nexport default connect(mapStateToProps,{addRoom})(AddRoom);\n"]},"metadata":{},"sourceType":"module"}