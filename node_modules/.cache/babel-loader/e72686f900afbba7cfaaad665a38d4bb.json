{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Cafeteria/index.js\";\nimport React from 'react';\nimport IntlMessages from '../../../util/IntlMessages';\nimport ContainerHeader from '../../../components/ContainerHeader/index';\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\nimport { connect } from 'react-redux';\nimport { addMenu } from '../../../actions/CafeteriaAction';\nimport { getMenusByEstablishmentId } from '../../../actions/CafeteriaAction';\nimport { UncontrolledAlert } from 'reactstrap';\nimport Can from '../../../can';\nimport { RoleContext } from '../../../Context';\nimport TextField from '@material-ui/core/TextField';\nimport { KeyboardDatePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport DateFnsUtils from '@date-io/moment';\nimport { roleIdSuperAdmin } from '../../../config/config';\nimport { roleIdAdmin } from '../../../config/config';\nimport { roleIdDirector } from '../../../config/config';\nimport AddCafeteriaMenu from './AddCafeteriaMenu';\nimport CafeteriaMenuList from './CafeteriaMenuList';\nimport CardBox from \"../../../components/CardBox/index\";\n\nclass Cafeteria extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangeDateFilter = date => {\n      if (date === null) {\n        this.setState({\n          selectedFilterDate: null\n        });\n      } else {\n        this.setState({\n          selectedFilterDate: date.format().slice(0, 10)\n        });\n      }\n    };\n\n    this.addCafeteriaMenu = () => {\n      var data = {};\n      data.menu_date = this.state.menu_date;\n      data.prix = this.state.prix;\n      data.suite = this.state.suite;\n      data.dessert = this.state.dessert;\n      data.entree = this.state.entree;\n      data.establishment_id = this.props.userProfile.establishment_id;\n      data.status = true;\n      this.props.addMenu(data);\n      this.setState({\n        addIsopen: false,\n        menu_date: new Date(),\n        prix: '',\n        suite: '',\n        dessert: '',\n        entree: ''\n      });\n    };\n\n    this.handleChangeDate = date => {\n      this.setState({\n        menu_date: date\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleCancel = () => {\n      this.setState({\n        addIsopen: false\n      });\n    };\n\n    this.addMenuShowModal = () => {\n      this.setState({\n        addIsopen: true\n      });\n    };\n\n    this.state = {\n      addIsopen: false,\n      menu_date: new Date(),\n      prix: '',\n      suite: '',\n      dessert: '',\n      entree: '',\n      selectedFilterDate: null\n    };\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.addMenuShowModal = this.addMenuShowModal.bind(this);\n    this.handleChangeDate = this.handleChangeDate.bind(this);\n    this.addCafeteriaMenu = this.addCafeteriaMenu.bind(this);\n    this.handleChangeDateFilter = this.handleChangeDateFilter.bind(this);\n  }\n\n  componentWillMount() {\n    this.props.getMenusByEstablishmentId(this.props.userProfile.establishment_id);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ContainerHeader, {\n      match: this.props.match,\n      title: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"sidebar.components.cafeteria\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 18\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }\n    }), this.props.successStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }, \" \", this.props.message, \" \")) : '', this.props.errorStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-danger bg-danger text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }\n    }, \" \", this.props.message)) : '', /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(RoleContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }\n    }, ({\n      role\n    }) => /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"user-filter:visit\",\n      yes: () => /*#__PURE__*/React.createElement(CardBox, {\n        styleName: \"col-lg-12 text-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-12  d-flex justify-content-between\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Can, {\n        role: role,\n        perform: \"user-filter-establishment:visit\",\n        yes: () => /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-md-2 text-left\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(TextField, {\n          className: \"mt-0\",\n          variant: \"outlined\",\n          required: true,\n          name: \"establishment_id\",\n          id: \"establishment_id\",\n          select: true,\n          label: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"components.student.formadd.establishment\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 31\n            }\n          }) //  value={this.state.establishment_id}\n          // onChange={this.handleChangeEstablishment('establishment_id')}\n          ,\n          SelectProps: {},\n          margin: \"normal\",\n          fullWidth: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 27\n          }\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-4 text-left \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"form-group\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(MuiPickersUtilsProvider, {\n        utils: DateFnsUtils,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(KeyboardDatePicker, {\n        label: \"                                           \",\n        clearable: true,\n        fullWidth: true,\n        id: \"selectedFilterDate\",\n        name: \"selectedFilterDate\",\n        value: this.state.selectedFilterDate,\n        onChange: this.handleChangeDateFilter,\n        format: \"DD-MM-YYYY\",\n        autoOk: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 27\n        }\n      })))), this.props.userProfile.role_id === roleIdSuperAdmin || this.props.userProfile.role_id === roleIdAdmin || this.props.userProfile.role_id === roleIdDirector ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-2 text-right \",\n        style: {\n          marginBottom: 20\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Fab, {\n        size: \"small\",\n        color: \"primary\",\n        \"aria-label\": \"Add\",\n        onClick: this.addMenuShowModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(AddIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 29\n        }\n      }))) : '')),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }\n    })), this.state.addIsopen === true ? /*#__PURE__*/React.createElement(AddCafeteriaMenu, {\n      MenuList: this.props.MenuList,\n      values: this.state,\n      handleCancel: this.handleCancel,\n      handleChange: this.handleChange,\n      handleChangeDate: this.handleChangeDate,\n      addCafeteriaMenu: this.addCafeteriaMenu,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 11\n      }\n    }) : '', /*#__PURE__*/React.createElement(CafeteriaMenuList, {\n      MenuList: this.props.MenuList,\n      values: this.state,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }\n    }));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    userProfile: state.auth.userProfile,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    settings: state.settings.locale,\n    MenuList: state.CafeteriaReducer.remoteCafeteria\n  };\n}\n\nexport default connect(mapStateToProps, {\n  addMenu,\n  getMenusByEstablishmentId\n})(Cafeteria);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Cafeteria/index.js"],"names":["React","IntlMessages","ContainerHeader","Fab","AddIcon","connect","addMenu","getMenusByEstablishmentId","UncontrolledAlert","Can","RoleContext","TextField","KeyboardDatePicker","MuiPickersUtilsProvider","DateFnsUtils","roleIdSuperAdmin","roleIdAdmin","roleIdDirector","AddCafeteriaMenu","CafeteriaMenuList","CardBox","Cafeteria","Component","constructor","props","handleChangeDateFilter","date","setState","selectedFilterDate","format","slice","addCafeteriaMenu","data","menu_date","state","prix","suite","dessert","entree","establishment_id","userProfile","status","addIsopen","Date","handleChangeDate","handleChange","name","event","target","value","handleCancel","addMenuShowModal","bind","componentWillMount","render","match","successStatus","message","errorStatus","role","role_id","marginBottom","MenuList","mapStateToProps","auth","alert","success","error","settings","locale","CafeteriaReducer","remoteCafeteria"],"mappings":"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","sourcesContent":["\nimport React from 'react';\nimport IntlMessages from '../../../util/IntlMessages';\nimport ContainerHeader from '../../../components/ContainerHeader/index';\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\nimport { connect } from 'react-redux';\nimport { addMenu } from '../../../actions/CafeteriaAction';\nimport { getMenusByEstablishmentId } from '../../../actions/CafeteriaAction';\nimport { UncontrolledAlert } from 'reactstrap';\nimport Can from '../../../can';\nimport { RoleContext } from '../../../Context';\nimport TextField from '@material-ui/core/TextField';\nimport {\n  KeyboardDatePicker,\n  MuiPickersUtilsProvider,\n} from '@material-ui/pickers';\nimport DateFnsUtils from '@date-io/moment';\nimport { roleIdSuperAdmin } from '../../../config/config';\nimport { roleIdAdmin } from '../../../config/config';\nimport { roleIdDirector } from '../../../config/config';\nimport AddCafeteriaMenu from './AddCafeteriaMenu';\nimport CafeteriaMenuList from './CafeteriaMenuList';\nimport CardBox from \"../../../components/CardBox/index\";\n\n\nclass Cafeteria extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      addIsopen: false,\n      menu_date: new Date(),\n      prix: '',\n      suite: '',\n      dessert: '',\n      entree: '',\n      selectedFilterDate: null,\n    };\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.addMenuShowModal = this.addMenuShowModal.bind(this);\n    this.handleChangeDate = this.handleChangeDate.bind(this);\n    this.addCafeteriaMenu = this.addCafeteriaMenu.bind(this);\n    this.handleChangeDateFilter = this.handleChangeDateFilter.bind(this);\n  }\n  handleChangeDateFilter = (date) => {\n    if (date === null) {\n      this.setState({\n        selectedFilterDate: null,\n      });\n    } else {\n      this.setState({\n        selectedFilterDate: date.format().slice(0, 10),\n      });\n    }\n  };\n\n  addCafeteriaMenu = () => {\n    var data = {};\n    data.menu_date = this.state.menu_date;\n    data.prix = this.state.prix;\n    data.suite = this.state.suite;\n    data.dessert = this.state.dessert;\n    data.entree = this.state.entree;\n    data.establishment_id = this.props.userProfile.establishment_id;\n    data.status = true;\n    this.props.addMenu(data);\n    this.setState({\n      addIsopen: false,\n      menu_date: new Date(),\n      prix: '',\n      suite: '',\n      dessert: '',\n      entree: '',\n    });\n  };\n\n  handleChangeDate = (date) => {\n    this.setState({ menu_date: date });\n  };\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n\n  handleCancel = () => {\n    this.setState({\n      addIsopen: false,\n    });\n  };\n\n  addMenuShowModal = () => {\n    this.setState({ addIsopen: true });\n  };\n\n  componentWillMount() {\n    this.props.getMenusByEstablishmentId(\n      this.props.userProfile.establishment_id\n    );\n  }\n\n  render() {\n\n    return (\n      <div className=\"app-wrapper\">\n        <ContainerHeader\n          match={this.props.match}\n          title={<IntlMessages id=\"sidebar.components.cafeteria\" />}\n        />\n        {this.props.successStatus ? (\n          <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n            <span className=\"icon-addon alert-addon\">\n              <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n            </span>\n            <span className=\"d-inline-block\"> {this.props.message} </span>\n          </UncontrolledAlert>\n        ) : (\n            ''\n          )}\n        {this.props.errorStatus ? (\n          <UncontrolledAlert className=\"alert-addon-card bg-danger bg-danger text-white shadow-lg\">\n            <span className=\"icon-addon alert-addon\">\n              <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n            </span>\n            <span className=\"d-inline-block\"> {this.props.message}</span>\n          </UncontrolledAlert>\n        ) : (\n            ''\n          )}\n        <br />\n\n        <RoleContext.Consumer>\n          {({ role }) => (\n            <Can\n              role={role}\n              perform=\"user-filter:visit\"\n              yes={() => (\n                <CardBox styleName=\"col-lg-12 text-primary\">\n                  <div className=\"col-md-12  d-flex justify-content-between\">\n                    <Can\n                      role={role}\n                      perform=\"user-filter-establishment:visit\"\n                      yes={() => (\n                        <div className=\"col-md-2 text-left\">\n                          <TextField\n                            className=\"mt-0\"\n                            variant=\"outlined\"\n                            required\n                            name=\"establishment_id\"\n                            id=\"establishment_id\"\n                            select\n                            label={\n                              <IntlMessages id=\"components.student.formadd.establishment\" />\n                            }\n                            //  value={this.state.establishment_id}\n                            // onChange={this.handleChangeEstablishment('establishment_id')}\n                            SelectProps={{}}\n                            margin=\"normal\"\n                            fullWidth\n                          >\n                            {/* {this.state.establishments.map(establishment => (\n                            <MenuItem key={establishment.id} value={establishment.id}>\n                              {this.props.settings == \"tunisia\" ? establishment.ar_name : establishment.name}\n                            </MenuItem>\n                          ))} */}\n                          </TextField>\n                        </div>\n                      )}\n                    />\n                    <div className=\"col-md-4 text-left \">\n                      <div className=\"form-group\">\n                        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                          <KeyboardDatePicker\n                            label=\"                                           \"\n                            clearable\n                            fullWidth\n                            id=\"selectedFilterDate\"\n                            name=\"selectedFilterDate\"\n                            value={this.state.selectedFilterDate}\n                            onChange={this.handleChangeDateFilter}\n                            format=\"DD-MM-YYYY\"\n                            autoOk\n                          />\n                        </MuiPickersUtilsProvider>\n                      </div>\n                    </div>\n\n                    {this.props.userProfile.role_id === roleIdSuperAdmin ||\n                      this.props.userProfile.role_id === roleIdAdmin ||\n                      this.props.userProfile.role_id === roleIdDirector ? (\n                        <div\n                          className=\"col-md-2 text-right \"\n                          style={{ marginBottom: 20 }}\n                        >\n                          <Fab\n                            size=\"small\"\n                            color=\"primary\"\n                            aria-label=\"Add\"\n                            onClick={this.addMenuShowModal}\n                          >\n                            <AddIcon />\n                          </Fab>\n                        </div>\n                      ) : (\n                        ''\n                      )}\n                  </div>\n                </CardBox>\n              )}\n            />\n          )}\n        </RoleContext.Consumer>\n\n        {this.state.addIsopen === true ? (\n          <AddCafeteriaMenu\n            MenuList={this.props.MenuList}\n            values={this.state}\n            handleCancel={this.handleCancel}\n            handleChange={this.handleChange}\n            handleChangeDate={this.handleChangeDate}\n            addCafeteriaMenu={this.addCafeteriaMenu}\n          />\n        ) : (\n            ''\n          )}\n\n        {\n          <CafeteriaMenuList\n            MenuList={this.props.MenuList}\n            values={this.state}\n          />\n        }\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    userProfile: state.auth.userProfile,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    settings: state.settings.locale,\n    MenuList: state.CafeteriaReducer.remoteCafeteria,\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  {\n    addMenu,\n    getMenusByEstablishmentId,\n  }\n)(Cafeteria);\n"]},"metadata":{},"sourceType":"module"}