{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/UsersManagement/Users.js\";\nimport React from 'react';\nimport CardBox from '../../../../../components/CardBox/index';\nimport { connect } from 'react-redux';\nimport ArchiveUsers from './ArchiveUsers';\nimport UsersList from './UsersList';\nimport { UncontrolledAlert } from 'reactstrap';\nimport AddUsers from './AddUsers';\nimport { getAllRole } from '../../../../../actions/usersAction';\nimport { getSchoolYearEtabs } from '../../../../../actions/SchoolYearEtabAction';\nimport countriesList from '../../../../../constants/const';\nimport { addUsers // getAllUsersForAdmin,\n// getAllUsersForSuperAdministrator,\n} from '../../../../../actions/usersAction';\nimport Can from '../../../../../can';\nimport { RoleContext } from '../../../../../Context';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport { roleIdSuperAdmin, roleIdAdmin, roleIdProfessor, roleIdStudent, roleIdDirector, roleIdParent, roleIdSupervisor } from '../../../../../config/config';\nimport { toUpperCaseFirst, toLowerCaseFirst } from '../../../../../constants/ReactConst';\nimport { addUserPermitted } from '../../../../../constants/validationFunctions';\nimport LoaderModal from './LoaderModal';\nimport { getAssignementCourse } from '../../../../../actions/AssignementAction';\nimport IntlMessages from '../../../../../util/IntlMessages';\nconst listRolesUsers = [{\n  id: roleIdAdmin,\n  label: /*#__PURE__*/React.createElement(IntlMessages, {\n    id: `role.admin`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 12\n    }\n  }),\n  value: roleIdAdmin,\n  labelBackEnd: 'Admin'\n}, {\n  id: roleIdDirector,\n  label: /*#__PURE__*/React.createElement(IntlMessages, {\n    id: `component.etablishments.info.director`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 12\n    }\n  }),\n  value: roleIdDirector,\n  labelBackEnd: 'Director'\n}, {\n  id: roleIdSupervisor,\n  label: /*#__PURE__*/React.createElement(IntlMessages, {\n    id: `role.supervisor`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 12\n    }\n  }),\n  value: roleIdSupervisor,\n  labelBackEnd: 'Vie scolaire'\n}, {\n  id: roleIdProfessor,\n  label: /*#__PURE__*/React.createElement(IntlMessages, {\n    id: `toDo.professor`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 12\n    }\n  }),\n  value: roleIdProfessor,\n  labelBackEnd: 'Professor'\n}, {\n  id: roleIdStudent,\n  label: /*#__PURE__*/React.createElement(IntlMessages, {\n    id: `userStuppDisplay.Student`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 12\n    }\n  }),\n  value: roleIdStudent,\n  labelBackEnd: 'Student'\n}, {\n  id: roleIdParent,\n  label: /*#__PURE__*/React.createElement(IntlMessages, {\n    id: `userStuppDisplay.Parent`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 12\n    }\n  }),\n  value: roleIdParent,\n  labelBackEnd: 'Parent'\n}];\n\nclass Users extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangeStudentClass = selectedOption => {\n      let listGroupClass = [];\n      selectedOption.groups.map(element => {\n        if (element.status) {\n          var object = {};\n          object.label = element.name;\n          object.id = element.id;\n          object.value = element.id;\n          listGroupClass.push(object);\n        }\n      });\n      this.setState({\n        studentClass: selectedOption.id,\n        levelId: selectedOption.levelId,\n        sectionId: selectedOption.sectionId,\n        listGroupClass\n      });\n    };\n\n    this.handleChangeAlerte = name => {\n      this.setState({\n        sessionExist: true,\n        messageAlerte: 'Il existe dÃ©ja une licence pour cet etablissement'\n      });\n      setTimeout(() => {\n        this.setState({\n          sessionExist: false,\n          messageAlerte: ''\n        });\n      }, 4000);\n    };\n\n    this.handleChangeEducationType = name => event => {\n      let obj = JSON.parse(event.target.value);\n      this.setState({\n        educationItem: obj,\n        educationTypeId: obj.id\n      });\n    };\n\n    this.handleChangePhone = value => {\n      this.setState({\n        userPhoneNumber: value\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleChangeBirthdayDate = date => {\n      this.setState({\n        birthdayDate: date,\n        birthdayDateCheck: true\n      });\n    };\n\n    this.handleChangeRole = selectedOption => {\n      if (selectedOption.id == roleIdStudent) {\n        this.setState({\n          birthdayDate: moment().year() - 6 + '-01-01'\n        });\n      }\n\n      this.setState({\n        roleId: selectedOption.id,\n        roleName: selectedOption.label\n      });\n    };\n\n    this.handleChangeGroupClassRoom = selectedOption => {\n      this.setState({\n        groupId: selectedOption.id\n      });\n    };\n\n    this.handleChangeSchoolYear = selectedOption => {\n      this.setState({\n        schoolyearId: selectedOption.id\n      });\n    };\n\n    this.handleChangeClassRoom = (selectedOption, name, index) => {\n      if (name === 'classId') {\n        let subjectIds = this.state.listOfSubjects.map(element => element.subjectId);\n        this.setState({\n          subjectIds\n        });\n        let subjectsList = [];\n        this.props.courseAssignment.map(element => {\n          // if (element.fk_id_class_v4 === selectedOption.id && !subjectIds.includes(element.id)) {\n          if (element.fk_id_class_v4 === selectedOption.id) {\n            var object = {};\n            object.label = element.subject.name;\n            object.id = element.id;\n            object.value = element.id;\n            subjectsList.push(object);\n          }\n        });\n        let newListSubjects = this.state.listOfSubjects.map((objSubject, i) => i === index ? { ...objSubject,\n          [name]: selectedOption.value,\n          subjects: subjectsList\n        } : objSubject // : {\n        //     ...objSubject,\n        //     subjects: objSubject.subjects.filter(\n        //       (element) => !subjectIds.includes(element.id)\n        //     ),\n        //   }\n        );\n        this.setState({\n          listOfSubjects: newListSubjects\n        });\n      } else if (name === 'subjectId') {\n        // let subjectIds = this.state.listOfSubjects.map((element) => element.subjectId);\n        let subjectIds = [selectedOption.value];\n        this.state.listOfSubjects.map(element => {\n          if (element.id != index) {\n            subjectIds.push(element.subjectId);\n          }\n        });\n        this.setState({\n          subjectIds\n        });\n        let newListSubjects = this.state.listOfSubjects.map((objSubject, i) => i === index ? { ...objSubject,\n          [name]: selectedOption.value\n        } : objSubject);\n        this.setState({\n          listOfSubjects: newListSubjects\n        });\n      }\n    };\n\n    this.addNewSubject = index => {\n      let listOfSubjects = [];\n      this.state.listOfSubjects.map(element => {\n        listOfSubjects.push({\n          id: element.id,\n          classId: element.classId,\n          subjectId: element.subjectId,\n          subjects: element.subjects,\n          isAdded: true\n        });\n      });\n      listOfSubjects.push({\n        id: index,\n        classId: 0,\n        subjectId: 0,\n        subjects: [],\n        isAdded: false\n      });\n      this.setState({\n        listOfSubjects\n      });\n    };\n\n    this.deleteChoice = index => {\n      let subjectIds = [];\n      this.state.listOfSubjects.map(element => {\n        if (element.id != index) {\n          subjectIds.push(element.subjectId);\n        }\n      });\n      let listOfSubjectsClasses = [];\n      let newIndex = 0;\n      this.state.listOfSubjects.map(element => {\n        if (element.id !== index) {\n          listOfSubjectsClasses.push({ ...element,\n            id: newIndex\n          });\n          newIndex++;\n        }\n      });\n      this.setState({\n        listOfSubjects: listOfSubjectsClasses,\n        subjectIds\n      });\n    };\n\n    this.handleChangeParent = selectedOption => {\n      this.setState({\n        parentId: selectedOption.id\n      });\n    };\n\n    this.handleChangeStudent = selectedOption => {\n      this.setState({\n        studentId: selectedOption.id\n      });\n    };\n\n    this.handleChangeCountries = selectedOption => {\n      this.setState({\n        userCountry: selectedOption.id\n      });\n    };\n\n    this.handleChangeEstablishments = selectedOption => {\n      this.setState({\n        establishmentId: selectedOption.id\n      });\n    };\n\n    this.handleChangeFunctions = selectedOption => {\n      this.setState({\n        functionName: selectedOption.label\n      });\n    };\n\n    this.uploadPhoto = e => {\n      if (e.target.files[0] !== undefined) {\n        let file = e.target.files[0];\n        this.setState({\n          userPhoto: file,\n          photoText: file.name\n        });\n      } else {\n        this.setState({\n          messageAlerte: \"Vous n'avez pas choisir une photo\",\n          alerteFiltre: true\n        });\n        setTimeout(() => {\n          this.setState({\n            messageAlerte: '',\n            alerteFiltre: false\n          });\n        }, 4000);\n      }\n    };\n\n    this.openArchive = () => {\n      this.setState(previousState => ({\n        openArchive: !previousState.openArchive\n      }));\n    };\n\n    this.state = {\n      listRoles: [],\n      listSchoolYears: [],\n      roleId: '',\n      roleName: '',\n      schoolyearId: null,\n      classRoomId: null,\n      subjectId: null,\n      parentId: null,\n      studentId: null,\n      userName: '',\n      userLastName: '',\n      userNationnality: '',\n      userCIN: '',\n      userIdentifier: '',\n      userMail: '',\n      userPhoneNumber: '',\n      userAdress: '',\n      userCountry: '',\n      userZipCode: '',\n      userPhoto: '',\n      userGender: '',\n      birthdayDate: moment().year() - 18 + '-01-01',\n      birthdayPlace: '',\n      countriesList: [],\n      usefulInformation: '',\n      userPapiersFiles: [],\n      nameUserPapiersFiles: [],\n      isOpen: false,\n      openArchive: false,\n      isOpenArchive: false,\n      messageAlerte: '',\n      photoText: '',\n      nameFiles: [],\n      establishmentsList: [],\n      establishmentId: '',\n      classRoomList: [],\n      subjectsList: [],\n      classForStudent: [],\n      studentClass: null,\n      functionName: '',\n      missingValue: false,\n      alertMessage: '',\n      subjectItem: {},\n      listOfSubjects: [{\n        id: 0,\n        classId: 0,\n        subjectId: 0,\n        subjects: []\n      }],\n      parentsList: [],\n      studentsList: [],\n      levelId: null,\n      sectionId: null,\n      userList: {\n        users: [],\n        students: [],\n        parents: [],\n        professors: [],\n        admins: [],\n        directors: [],\n        supervisors: []\n      },\n      permissionList: [],\n      birthdayDateCheck: false,\n      listGroupClass: [],\n      groupId: null,\n      subjectIds: []\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleArchive = this.handleArchive.bind(this);\n    this.handleChangeBirthdayDate = this.handleChangeBirthdayDate.bind(this);\n    this.openArchiveModal = this.openArchiveModal.bind(this);\n    this.handleChangeAlerte = this.handleChangeAlerte.bind(this);\n    this.handleChangeRole = this.handleChangeRole.bind(this);\n    this.handleChangeSchoolYear = this.handleChangeSchoolYear.bind(this);\n    this.handleChangeClassRoom = this.handleChangeClassRoom.bind(this);\n    this.handleChangeParent = this.handleChangeParent.bind(this);\n    this.handleChangeStudent = this.handleChangeStudent.bind(this);\n    this.handleChangeCountries = this.handleChangeCountries.bind(this);\n    this.attachFile = this.attachFile.bind(this);\n    this.uploadPhoto = this.uploadPhoto.bind(this);\n    this.openArchive = this.openArchive.bind(this);\n    this.handleChangeEstablishments = this.handleChangeEstablishments.bind(this);\n    this.handleChangeStudentClass = this.handleChangeStudentClass.bind(this);\n    this.handleChangeFunctions = this.handleChangeFunctions.bind(this);\n    this.handleChangePhone = this.handleChangePhone.bind(this);\n    this.addNewSubject = this.addNewSubject.bind(this);\n    this.deleteChoice = this.deleteChoice.bind(this);\n    this.handleChangeGroupClassRoom = this.handleChangeGroupClassRoom.bind(this);\n  }\n\n  openArchiveModal() {\n    this.setState(previousState => ({\n      isOpenArchive: !previousState.isOpenArchive\n    }));\n  }\n\n  handleCancel() {\n    this.setState({\n      isOpen: false\n    });\n  } // openAddModal() {\n  //   this.setState({ isOpen: true });\n  // }\n\n\n  openAddModal() {\n    this.setState(previousState => ({\n      isOpen: !previousState.isOpen\n    }));\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    let AssignementIdProf = [];\n    this.state.listOfSubjects.map(element => {\n      if (element.subjectId != 0) {\n        AssignementIdProf.push(element.subjectId);\n      }\n    });\n\n    if (this.state.roleId === '' || this.state.schoolyearId === '' || this.state.birthdayDateCheck === false && this.state.roleId === roleIdStudent) {\n      this.setState({\n        missingValue: true,\n        alertMessage: 'Il faut remplir les champs obligatoires '\n      });\n      setTimeout(() => {\n        this.setState({\n          alertMessage: '',\n          missingValue: false\n        });\n      }, 4000);\n    } else {\n      if (this.state.roleId === roleIdProfessor && AssignementIdProf.length === 0) {\n        this.setState({\n          missingValue: true,\n          alertMessage: 'Il faut affecter une classe et une matiÃ©re pour le professeur '\n        });\n        setTimeout(() => {\n          this.setState({\n            alertMessage: '',\n            missingValue: false\n          });\n        }, 4000);\n      } else {\n        this.openAddModal();\n        let data = {\n          name: this.state.userName.toUpperCase(),\n          surname: toUpperCaseFirst(this.state.userLastName),\n          gender: this.state.userGender,\n          dateOfBirth: this.state.birthdayDate,\n          placeOfBirth: this.state.birthdayPlace,\n          address: this.state.userAdress,\n          nationality: this.state.userNationnality,\n          phone: this.state.userPhoneNumber,\n          status: true,\n          cin: this.state.userCIN,\n          userIdentifier: this.state.userIdentifier,\n          zipCode: this.state.userZipCode,\n          userCountry: this.state.userCountry,\n          userPhoto: this.state.userPhoto,\n          userPapiersFiles: this.state.userPapiersFiles,\n          name_ar: 'string',\n          surname_ar: 'string',\n          email: this.state.userMail,\n          roleId: this.state.roleId,\n          establishmentId: this.state.establishmentId,\n          assignClassSubject: AssignementIdProf,\n          studentClass: this.state.studentClass,\n          schoolyearId: this.state.schoolyearId,\n          functionName: this.state.functionName,\n          password: '123456',\n          login: 'login1',\n          levelId: this.state.levelId,\n          sectionId: this.state.sectionId,\n          usefulInformation: this.state.usefulInformation,\n          parentId: this.state.parentId,\n          studentId: this.state.studentId,\n          groupId: this.state.groupId\n        };\n        console.log(data, 'data avant action');\n        this.props.addUsers(data);\n        this.setState({\n          roleId: '',\n          roleName: '',\n          schoolyearId: '',\n          classRoomId: '',\n          subjectId: '',\n          parentId: null,\n          studentId: null,\n          userName: '',\n          userLastName: '',\n          userNationnality: '',\n          userCIN: '',\n          userIdentifier: '',\n          userMail: '',\n          userPhoneNumber: '',\n          userAdress: '',\n          userCountry: '',\n          userZipCode: '',\n          userPhoto: '',\n          userGender: '',\n          birthdayDate: moment().year() - 18 + '-01-01',\n          birthdayPlace: '',\n          usefulInformation: '',\n          userPapiersFiles: [],\n          nameUserPapiersFiles: [],\n          isOpen: false,\n          photoText: '',\n          nameFiles: [],\n          establishmentId: this.props.userProfile.establishment_id,\n          subjectsList: [],\n          studentClass: null,\n          functionName: '',\n          missingValue: false,\n          subjectItem: {},\n          listOfSubjects: [{\n            id: 0,\n            classId: 0,\n            subjectId: 0,\n            subjects: []\n          }],\n          levelId: null,\n          sectionId: null,\n          birthdayDateCheck: false,\n          groupId: null\n        });\n      }\n    }\n  }\n\n  handleArchive(event) {\n    event.preventDefault();\n    this.openAddModal();\n    this.setState({});\n  }\n\n  attachFile(e) {\n    var oldFiles = this.state.userPapiersFiles;\n    var nameFiles = this.state.nameUserPapiersFiles;\n\n    if (e.target.files !== undefined) {\n      var files = Object.values(e.target.files);\n\n      if (this.state.nameUserPapiersFiles.length + files.length < 6) {\n        files.map(element => {\n          nameFiles.push(element.name);\n          oldFiles.push(element);\n        });\n        this.setState({\n          userPapiersfiles: oldFiles,\n          nameFiles\n        });\n      }\n    } else {\n      this.setState({\n        messageAlerte: 'vous avez dÃ©passer 5 fichiers',\n        alerteStatus: true\n      });\n      setTimeout(() => {\n        this.setState({\n          messageAlerte: '',\n          alerteStatus: false\n        });\n      }, 4000);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.ClassSettings !== this.props.ClassSettings) {\n      let classForStudent = [];\n      classForStudent = this.props.ClassSettings.map(element => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        object.sectionId = element.fk_id_section_v4;\n        object.levelId = element.fk_id_level_v4;\n        object.groups = element.group;\n        return object;\n      });\n      this.setState({\n        classForStudent\n      });\n    }\n\n    if (prevProps.courseAssignment !== this.props.courseAssignment) {\n      let classRoomList = [];\n      classRoomList = this.props.courseAssignment.map(element => {\n        var object = {};\n        object.label = element.class.name;\n        object.id = element.class.id;\n        object.value = element.class.id;\n        return object;\n      });\n\n      let classRoomListFiltredByID = _.uniqBy(classRoomList, 'id');\n\n      this.setState({\n        classRoomList: classRoomListFiltredByID\n      });\n    }\n\n    if (prevProps.usersReducer.roles !== this.props.usersReducer.roles || prevProps.userPermission !== this.props.userPermission) {\n      let listRoles = [];\n      this.props.usersReducer.roles.map(element => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n\n        if (this.props.userProfile.role_id == roleIdSuperAdmin) {\n          listRoles.push(object);\n        } else {\n          let permitted = false;\n          permitted = addUserPermitted(object.label, this.props.userPermission);\n\n          if (permitted) {\n            listRoles.push(object);\n          }\n        }\n      });\n      this.setState({\n        listRoles: listRoles\n      });\n    }\n\n    if (prevProps.userProfile.establishment_id !== this.props.userProfile.establishment_id) {\n      this.setState({\n        establishmentId: this.props.userProfile.establishment_id\n      });\n    }\n\n    if (prevProps.establishments !== this.props.establishments) {\n      let establishmentsList = [];\n      establishmentsList = this.props.establishments.map(element => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        return object;\n      });\n      this.setState({\n        establishmentsList\n      });\n    }\n\n    if (prevProps.schoolYearEtabs !== this.props.schoolYearEtabs) {\n      let listSchoolYears = [];\n      listSchoolYears = this.props.schoolYearEtabs.map(element => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        object.startDate = element.start_date;\n        object.endtDate = element.end_date;\n        return object;\n      });\n      let countriesListUser = [];\n      countriesListUser = countriesList.countriesList.map(element => {\n        var object = {};\n        object.label = element.name_fr;\n        object.id = element.code;\n        object.value = element.code;\n        return object;\n      });\n      this.setState({\n        listSchoolYears: listSchoolYears,\n        countriesList: countriesListUser\n      });\n    }\n\n    if (prevProps.usersReducer !== this.props.usersReducer) {\n      let parentsList = [];\n      parentsList = this.props.usersReducer.parents.map(element => {\n        var object = {};\n        object.label = element.name + ' ' + element.surname;\n        object.id = element.parentId[0];\n        object.value = element.parentId[0];\n        return object;\n      });\n      let studentsList = [];\n      studentsList = this.props.usersReducer.students.map(element => {\n        var object = {};\n        object.label = element.name + ' ' + element.surname;\n        object.id = element.studentId[0];\n        object.value = element.studentId[0];\n        return object;\n      });\n      this.setState({\n        parentsList,\n        studentsList\n      });\n    }\n\n    if (prevProps.usersReducer.users !== this.props.usersReducer.users) {\n      this.setState({\n        userList: this.props.usersReducer\n      });\n    }\n\n    if (prevProps.userPermission !== this.props.userPermission) {\n      this.setState({\n        permissionList: this.props.userPermission\n      });\n    }\n  }\n\n  UNSAFE_componentWillMount() {\n    this.props.getAllRole();\n    this.props.getSchoolYearEtabs(); // this.props.getAllUsersForAdmin(\n    //   this.props.userProfile.establishment_id,\n    //   this.props.userProfile.school_year_id\n    // );\n    // this.props.getAllUsersForSuperAdministrator();\n\n    this.props.getAssignementCourse(this.props.userProfile.establishment_id, this.props.userProfile.school_year_id);\n  }\n\n  componentDidMount() {\n    if (this.props.userPermission != undefined) {\n      this.setState({\n        permissionList: this.props.userPermission\n      });\n    }\n\n    if (this.props.establishments != undefined) {\n      let establishmentsList = [];\n      establishmentsList = this.props.establishments.map(element => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        return object;\n      });\n      this.setState({\n        establishmentsList,\n        establishmentId: this.props.userProfile.establishment_id\n      });\n    }\n\n    if (this.props.ClassSettings != undefined) {\n      let classForStudent = [];\n      classForStudent = this.props.ClassSettings.map(element => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        object.sectionId = element.fk_id_section_v4;\n        object.levelId = element.fk_id_level_v4;\n        object.groups = element.group;\n        return object;\n      });\n      this.setState({\n        classForStudent\n      });\n    }\n\n    if (this.props.courseAssignment != undefined) {\n      let classRoomList = [];\n      classRoomList = this.props.courseAssignment.map(element => {\n        var object = {};\n        object.label = element.class.name;\n        object.id = element.class.id;\n        object.value = element.class.id;\n        return object;\n      });\n\n      let classRoomListFiltredByID = _.uniqBy(classRoomList, 'id');\n\n      this.setState({\n        classRoomList: classRoomListFiltredByID\n      });\n    }\n\n    if (typeof this.props.usersReducer.parents != 'undefined') {\n      let parentsList = [];\n      parentsList = this.props.usersReducer.parents.map(element => {\n        var object = {};\n        object.label = element.name + ' ' + element.surname;\n        object.id = element.id;\n        object.value = element.id;\n        return object;\n      });\n      this.setState({\n        parentsList\n      });\n    }\n\n    if (this.props.usersReducer.students != undefined) {\n      let studentsList = [];\n      studentsList = this.props.usersReducer.students.map(element => {\n        var object = {};\n        object.label = element.name + ' ' + element.surname;\n        object.id = element.studentId[0];\n        object.value = element.studentId[0];\n        return object;\n      });\n      this.setState({\n        studentsList\n      });\n    }\n\n    this.setState({\n      userList: this.props.usersReducer\n    });\n  }\n\n  render() {\n    console.log(this.state.listOfSubjects, 'listOfSubjects');\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper\",\n      style: {\n        marginLeft: '5%',\n        marginRight: '10%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 721,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"  d-flex flex-column mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 728,\n        columnNumber: 9\n      }\n    }, this.state.missingValue ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-danger text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 730,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 731,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 732,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 734,\n        columnNumber: 15\n      }\n    }, \" \", this.state.alertMessage, \" \")) : '', this.props.errorStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-danger text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 740,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 741,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 742,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 744,\n        columnNumber: 15\n      }\n    }, this.props.message, \" \")) : '', this.props.successStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 750,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 751,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 752,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 754,\n        columnNumber: 15\n      }\n    }, \" \", this.props.message, \" \")) : '', this.state.listRoles.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bd-highlight\",\n      style: {\n        width: '90%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 760,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12 col-sm-12 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 761,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(AddUsers, {\n      openAddModal: this.openAddModal,\n      handleCancel: this.handleCancel,\n      handleChange: this.handleChange,\n      handleSubmit: this.handleSubmit,\n      handleArchive: this.handleArchive,\n      handleChangeRole: this.handleChangeRole,\n      handleChangeSchoolYear: this.handleChangeSchoolYear,\n      handleChangeClassRoom: this.handleChangeClassRoom,\n      handleChangeBirthdayDate: this.handleChangeBirthdayDate,\n      handleChangeParent: this.handleChangeParent,\n      handleChangeStudent: this.handleChangeStudent,\n      handleChangeCountries: this.handleChangeCountries,\n      handleChangeStudentClass: this.handleChangeStudentClass,\n      attachFile: this.attachFile,\n      uploadPhoto: this.uploadPhoto,\n      openArchive: this.openArchive,\n      handleChangeEstablishments: this.handleChangeEstablishments,\n      handleChangeFunctions: this.handleChangeFunctions,\n      handleChangePhone: this.handleChangePhone,\n      addNewSubject: this.addNewSubject,\n      deleteChoice: this.deleteChoice,\n      parentsList: this.state.parentsList,\n      studentsList: this.state.studentsList,\n      handleChangeGroupClassRoom: this.handleChangeGroupClassRoom,\n      values: this.state,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 762,\n        columnNumber: 17\n      }\n    }))) : '', !this.state.openArchive ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bd-highlight\",\n      style: {\n        width: '90%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 816,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12 col-sm-12 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 817,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(UsersList, {\n      usersList: this.state.userList,\n      permissionList: this.state.permissionList,\n      listClassFilter: this.state.classForStudent,\n      usefulData: this.state,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 819,\n        columnNumber: 17\n      }\n    }))) : ''), this.props.userLoading ? /*#__PURE__*/React.createElement(LoaderModal, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 839,\n        columnNumber: 35\n      }\n    }) : '');\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    usersReducer: state.usersReducer,\n    userProfile: state.auth.userProfile,\n    establishments: state.establishment.remoteEstablishments,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    schoolYearEtabs: state.schoolYearEtab.remoteSchoolYearEtab,\n    courseAssignment: state.AssignementReducer.courseAssignment,\n    ClassSettings: state.ClassSettingsReducer.classSettings,\n    userPermission: state.PermissionReducer.userPermission,\n    userLoading: state.usersReducer.userLoading,\n    groupsList: state.GroupsReducer.groupsList\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getAllRole,\n  getSchoolYearEtabs,\n  addUsers,\n  // getAllUsersForAdmin,\n  getAssignementCourse // getAllUsersForSuperAdministrator,\n\n})(Users);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/UsersManagement/Users.js"],"names":["React","CardBox","connect","ArchiveUsers","UsersList","UncontrolledAlert","AddUsers","getAllRole","getSchoolYearEtabs","countriesList","addUsers","Can","RoleContext","_","moment","roleIdSuperAdmin","roleIdAdmin","roleIdProfessor","roleIdStudent","roleIdDirector","roleIdParent","roleIdSupervisor","toUpperCaseFirst","toLowerCaseFirst","addUserPermitted","LoaderModal","getAssignementCourse","IntlMessages","listRolesUsers","id","label","value","labelBackEnd","Users","Component","constructor","props","handleChangeStudentClass","selectedOption","listGroupClass","groups","map","element","status","object","name","push","setState","studentClass","levelId","sectionId","handleChangeAlerte","sessionExist","messageAlerte","setTimeout","handleChangeEducationType","event","obj","JSON","parse","target","educationItem","educationTypeId","handleChangePhone","userPhoneNumber","handleChange","handleChangeBirthdayDate","date","birthdayDate","birthdayDateCheck","handleChangeRole","year","roleId","roleName","handleChangeGroupClassRoom","groupId","handleChangeSchoolYear","schoolyearId","handleChangeClassRoom","index","subjectIds","state","listOfSubjects","subjectId","subjectsList","courseAssignment","fk_id_class_v4","subject","newListSubjects","objSubject","i","subjects","addNewSubject","classId","isAdded","deleteChoice","listOfSubjectsClasses","newIndex","handleChangeParent","parentId","handleChangeStudent","studentId","handleChangeCountries","userCountry","handleChangeEstablishments","establishmentId","handleChangeFunctions","functionName","uploadPhoto","e","files","undefined","file","userPhoto","photoText","alerteFiltre","openArchive","previousState","listRoles","listSchoolYears","classRoomId","userName","userLastName","userNationnality","userCIN","userIdentifier","userMail","userAdress","userZipCode","userGender","birthdayPlace","usefulInformation","userPapiersFiles","nameUserPapiersFiles","isOpen","isOpenArchive","nameFiles","establishmentsList","classRoomList","classForStudent","missingValue","alertMessage","subjectItem","parentsList","studentsList","userList","users","students","parents","professors","admins","directors","supervisors","permissionList","openAddModal","bind","handleCancel","handleSubmit","handleArchive","openArchiveModal","attachFile","preventDefault","AssignementIdProf","length","data","toUpperCase","surname","gender","dateOfBirth","placeOfBirth","address","nationality","phone","cin","zipCode","name_ar","surname_ar","email","assignClassSubject","password","login","console","log","userProfile","establishment_id","oldFiles","Object","values","userPapiersfiles","alerteStatus","componentDidUpdate","prevProps","ClassSettings","fk_id_section_v4","fk_id_level_v4","group","class","classRoomListFiltredByID","uniqBy","usersReducer","roles","userPermission","role_id","permitted","establishments","schoolYearEtabs","startDate","start_date","endtDate","end_date","countriesListUser","name_fr","code","UNSAFE_componentWillMount","school_year_id","componentDidMount","render","marginLeft","marginRight","errorStatus","message","successStatus","width","userLoading","mapStateToProps","auth","establishment","remoteEstablishments","alert","success","error","schoolYearEtab","remoteSchoolYearEtab","AssignementReducer","ClassSettingsReducer","classSettings","PermissionReducer","groupsList","GroupsReducer"],"mappings":"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","sourcesContent":["import React from 'react';\nimport CardBox from '../../../../../components/CardBox/index';\nimport { connect } from 'react-redux';\nimport ArchiveUsers from './ArchiveUsers';\nimport UsersList from './UsersList';\nimport { UncontrolledAlert } from 'reactstrap';\nimport AddUsers from './AddUsers';\nimport { getAllRole } from '../../../../../actions/usersAction';\nimport { getSchoolYearEtabs } from '../../../../../actions/SchoolYearEtabAction';\nimport countriesList from '../../../../../constants/const';\nimport {\n  addUsers,\n  // getAllUsersForAdmin,\n  // getAllUsersForSuperAdministrator,\n} from '../../../../../actions/usersAction';\nimport Can from '../../../../../can';\nimport { RoleContext } from '../../../../../Context';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport {\n  roleIdSuperAdmin,\n  roleIdAdmin,\n  roleIdProfessor,\n  roleIdStudent,\n  roleIdDirector,\n  roleIdParent,\n  roleIdSupervisor,\n} from '../../../../../config/config';\nimport { toUpperCaseFirst, toLowerCaseFirst } from '../../../../../constants/ReactConst';\nimport { addUserPermitted } from '../../../../../constants/validationFunctions';\nimport LoaderModal from './LoaderModal';\nimport { getAssignementCourse } from '../../../../../actions/AssignementAction';\nimport IntlMessages from '../../../../../util/IntlMessages';\n\nconst listRolesUsers = [\n  {\n    id: roleIdAdmin,\n    label: <IntlMessages id={`role.admin`} />,\n    value: roleIdAdmin,\n    labelBackEnd: 'Admin',\n  },\n  {\n    id: roleIdDirector,\n    label: <IntlMessages id={`component.etablishments.info.director`} />,\n    value: roleIdDirector,\n    labelBackEnd: 'Director',\n  },\n  {\n    id: roleIdSupervisor,\n    label: <IntlMessages id={`role.supervisor`} />,\n    value: roleIdSupervisor,\n    labelBackEnd: 'Vie scolaire',\n  },\n  {\n    id: roleIdProfessor,\n    label: <IntlMessages id={`toDo.professor`} />,\n    value: roleIdProfessor,\n    labelBackEnd: 'Professor',\n  },\n  {\n    id: roleIdStudent,\n    label: <IntlMessages id={`userStuppDisplay.Student`} />,\n    value: roleIdStudent,\n    labelBackEnd: 'Student',\n  },\n  {\n    id: roleIdParent,\n    label: <IntlMessages id={`userStuppDisplay.Parent`} />,\n    value: roleIdParent,\n    labelBackEnd: 'Parent',\n  },\n];\nclass Users extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      listRoles: [],\n      listSchoolYears: [],\n      roleId: '',\n      roleName: '',\n      schoolyearId: null,\n      classRoomId: null,\n      subjectId: null,\n      parentId: null,\n      studentId: null,\n      userName: '',\n      userLastName: '',\n      userNationnality: '',\n      userCIN: '',\n      userIdentifier: '',\n      userMail: '',\n      userPhoneNumber: '',\n      userAdress: '',\n      userCountry: '',\n      userZipCode: '',\n      userPhoto: '',\n      userGender: '',\n      birthdayDate: moment().year() - 18 + '-01-01',\n      birthdayPlace: '',\n      countriesList: [],\n      usefulInformation: '',\n      userPapiersFiles: [],\n      nameUserPapiersFiles: [],\n      isOpen: false,\n      openArchive: false,\n      isOpenArchive: false,\n      messageAlerte: '',\n      photoText: '',\n      nameFiles: [],\n      establishmentsList: [],\n      establishmentId: '',\n      classRoomList: [],\n      subjectsList: [],\n      classForStudent: [],\n      studentClass: null,\n      functionName: '',\n      missingValue: false,\n      alertMessage: '',\n      subjectItem: {},\n      listOfSubjects: [\n        {\n          id: 0,\n          classId: 0,\n          subjectId: 0,\n          subjects: [],\n        },\n      ],\n      parentsList: [],\n      studentsList: [],\n      levelId: null,\n      sectionId: null,\n      userList: {\n        users: [],\n        students: [],\n        parents: [],\n        professors: [],\n        admins: [],\n        directors: [],\n        supervisors: [],\n      },\n      permissionList: [],\n      birthdayDateCheck: false,\n      listGroupClass: [],\n      groupId: null,\n      subjectIds: [],\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleArchive = this.handleArchive.bind(this);\n    this.handleChangeBirthdayDate = this.handleChangeBirthdayDate.bind(this);\n    this.openArchiveModal = this.openArchiveModal.bind(this);\n    this.handleChangeAlerte = this.handleChangeAlerte.bind(this);\n    this.handleChangeRole = this.handleChangeRole.bind(this);\n    this.handleChangeSchoolYear = this.handleChangeSchoolYear.bind(this);\n    this.handleChangeClassRoom = this.handleChangeClassRoom.bind(this);\n    this.handleChangeParent = this.handleChangeParent.bind(this);\n    this.handleChangeStudent = this.handleChangeStudent.bind(this);\n    this.handleChangeCountries = this.handleChangeCountries.bind(this);\n    this.attachFile = this.attachFile.bind(this);\n    this.uploadPhoto = this.uploadPhoto.bind(this);\n    this.openArchive = this.openArchive.bind(this);\n    this.handleChangeEstablishments = this.handleChangeEstablishments.bind(this);\n    this.handleChangeStudentClass = this.handleChangeStudentClass.bind(this);\n    this.handleChangeFunctions = this.handleChangeFunctions.bind(this);\n    this.handleChangePhone = this.handleChangePhone.bind(this);\n\n    this.addNewSubject = this.addNewSubject.bind(this);\n    this.deleteChoice = this.deleteChoice.bind(this);\n    this.handleChangeGroupClassRoom = this.handleChangeGroupClassRoom.bind(this);\n  }\n  handleChangeStudentClass = (selectedOption) => {\n    let listGroupClass = [];\n    selectedOption.groups.map((element) => {\n      if (element.status) {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        listGroupClass.push(object);\n      }\n    });\n    this.setState({\n      studentClass: selectedOption.id,\n      levelId: selectedOption.levelId,\n      sectionId: selectedOption.sectionId,\n      listGroupClass,\n    });\n  };\n  handleChangeAlerte = (name) => {\n    this.setState({\n      sessionExist: true,\n      messageAlerte: 'Il existe dÃ©ja une licence pour cet etablissement',\n    });\n    setTimeout(() => {\n      this.setState({ sessionExist: false, messageAlerte: '' });\n    }, 4000);\n  };\n  handleChangeEducationType = (name) => (event) => {\n    let obj = JSON.parse(event.target.value);\n\n    this.setState({ educationItem: obj, educationTypeId: obj.id });\n  };\n  openArchiveModal() {\n    this.setState((previousState) => ({\n      isOpenArchive: !previousState.isOpenArchive,\n    }));\n  }\n  handleCancel() {\n    this.setState({ isOpen: false });\n  }\n  // openAddModal() {\n  //   this.setState({ isOpen: true });\n  // }\n  openAddModal() {\n    this.setState((previousState) => ({\n      isOpen: !previousState.isOpen,\n    }));\n  }\n  handleSubmit(event) {\n    event.preventDefault();\n    let AssignementIdProf = [];\n    this.state.listOfSubjects.map((element) => {\n      if (element.subjectId != 0) {\n        AssignementIdProf.push(element.subjectId);\n      }\n    });\n    if (\n      this.state.roleId === '' ||\n      this.state.schoolyearId === '' ||\n      (this.state.birthdayDateCheck === false && this.state.roleId === roleIdStudent)\n    ) {\n      this.setState({\n        missingValue: true,\n        alertMessage: 'Il faut remplir les champs obligatoires ',\n      });\n      setTimeout(() => {\n        this.setState({ alertMessage: '', missingValue: false });\n      }, 4000);\n    } else {\n      if (this.state.roleId === roleIdProfessor && AssignementIdProf.length === 0) {\n        this.setState({\n          missingValue: true,\n          alertMessage: 'Il faut affecter une classe et une matiÃ©re pour le professeur ',\n        });\n        setTimeout(() => {\n          this.setState({ alertMessage: '', missingValue: false });\n        }, 4000);\n      } else {\n        this.openAddModal();\n        let data = {\n          name: this.state.userName.toUpperCase(),\n          surname: toUpperCaseFirst(this.state.userLastName),\n          gender: this.state.userGender,\n          dateOfBirth: this.state.birthdayDate,\n          placeOfBirth: this.state.birthdayPlace,\n          address: this.state.userAdress,\n          nationality: this.state.userNationnality,\n          phone: this.state.userPhoneNumber,\n          status: true,\n          cin: this.state.userCIN,\n          userIdentifier: this.state.userIdentifier,\n          zipCode: this.state.userZipCode,\n          userCountry: this.state.userCountry,\n          userPhoto: this.state.userPhoto,\n          userPapiersFiles: this.state.userPapiersFiles,\n          name_ar: 'string',\n          surname_ar: 'string',\n          email: this.state.userMail,\n          roleId: this.state.roleId,\n          establishmentId: this.state.establishmentId,\n          assignClassSubject: AssignementIdProf,\n          studentClass: this.state.studentClass,\n          schoolyearId: this.state.schoolyearId,\n          functionName: this.state.functionName,\n          password: '123456',\n          login: 'login1',\n          levelId: this.state.levelId,\n          sectionId: this.state.sectionId,\n          usefulInformation: this.state.usefulInformation,\n          parentId: this.state.parentId,\n          studentId: this.state.studentId,\n          groupId: this.state.groupId,\n        };\n        console.log(data, 'data avant action');\n        this.props.addUsers(data);\n        this.setState({\n          roleId: '',\n          roleName: '',\n          schoolyearId: '',\n          classRoomId: '',\n          subjectId: '',\n          parentId: null,\n          studentId: null,\n          userName: '',\n          userLastName: '',\n          userNationnality: '',\n          userCIN: '',\n          userIdentifier: '',\n          userMail: '',\n          userPhoneNumber: '',\n          userAdress: '',\n          userCountry: '',\n          userZipCode: '',\n          userPhoto: '',\n          userGender: '',\n          birthdayDate: moment().year() - 18 + '-01-01',\n          birthdayPlace: '',\n          usefulInformation: '',\n          userPapiersFiles: [],\n          nameUserPapiersFiles: [],\n          isOpen: false,\n          photoText: '',\n          nameFiles: [],\n          establishmentId: this.props.userProfile.establishment_id,\n          subjectsList: [],\n          studentClass: null,\n          functionName: '',\n          missingValue: false,\n          subjectItem: {},\n          listOfSubjects: [\n            {\n              id: 0,\n              classId: 0,\n              subjectId: 0,\n              subjects: [],\n            },\n          ],\n          levelId: null,\n          sectionId: null,\n          birthdayDateCheck: false,\n          groupId: null,\n        });\n      }\n    }\n  }\n  handleChangePhone = (value) => {\n    this.setState({ userPhoneNumber: value });\n  };\n  handleArchive(event) {\n    event.preventDefault();\n    this.openAddModal();\n    this.setState({});\n  }\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n  handleChangeBirthdayDate = (date) => {\n    this.setState({ birthdayDate: date, birthdayDateCheck: true });\n  };\n  handleChangeRole = (selectedOption) => {\n    if (selectedOption.id == roleIdStudent) {\n      this.setState({\n        birthdayDate: moment().year() - 6 + '-01-01',\n      });\n    }\n    this.setState({\n      roleId: selectedOption.id,\n      roleName: selectedOption.label,\n    });\n  };\n  handleChangeGroupClassRoom = (selectedOption) => {\n    this.setState({ groupId: selectedOption.id });\n  };\n  handleChangeSchoolYear = (selectedOption) => {\n    this.setState({ schoolyearId: selectedOption.id });\n  };\n  handleChangeClassRoom = (selectedOption, name, index) => {\n    if (name === 'classId') {\n      let subjectIds = this.state.listOfSubjects.map((element) => element.subjectId);\n      this.setState({ subjectIds });\n      let subjectsList = [];\n      this.props.courseAssignment.map((element) => {\n        // if (element.fk_id_class_v4 === selectedOption.id && !subjectIds.includes(element.id)) {\n        if (element.fk_id_class_v4 === selectedOption.id) {\n          var object = {};\n          object.label = element.subject.name;\n          object.id = element.id;\n          object.value = element.id;\n          subjectsList.push(object);\n        }\n      });\n      let newListSubjects = this.state.listOfSubjects.map(\n        (objSubject, i) =>\n          i === index\n            ? {\n                ...objSubject,\n                [name]: selectedOption.value,\n                subjects: subjectsList,\n              }\n            : objSubject\n        // : {\n        //     ...objSubject,\n        //     subjects: objSubject.subjects.filter(\n        //       (element) => !subjectIds.includes(element.id)\n        //     ),\n        //   }\n      );\n      this.setState({ listOfSubjects: newListSubjects });\n    } else if (name === 'subjectId') {\n      // let subjectIds = this.state.listOfSubjects.map((element) => element.subjectId);\n      let subjectIds = [selectedOption.value];\n      this.state.listOfSubjects.map((element) => {\n        if (element.id != index) {\n          subjectIds.push(element.subjectId);\n        }\n      });\n      this.setState({ subjectIds });\n      let newListSubjects = this.state.listOfSubjects.map((objSubject, i) =>\n        i === index ? { ...objSubject, [name]: selectedOption.value } : objSubject\n      );\n      this.setState({ listOfSubjects: newListSubjects });\n    }\n  };\n  addNewSubject = (index) => {\n    let listOfSubjects = [];\n    this.state.listOfSubjects.map((element) => {\n      listOfSubjects.push({\n        id: element.id,\n        classId: element.classId,\n        subjectId: element.subjectId,\n        subjects: element.subjects,\n        isAdded: true,\n      });\n    });\n    listOfSubjects.push({\n      id: index,\n      classId: 0,\n      subjectId: 0,\n      subjects: [],\n      isAdded: false,\n    });\n\n    this.setState({ listOfSubjects });\n  };\n  deleteChoice = (index) => {\n    let subjectIds = [];\n    this.state.listOfSubjects.map((element) => {\n      if (element.id != index) {\n        subjectIds.push(element.subjectId);\n      }\n    });\n    let listOfSubjectsClasses = [];\n    let newIndex = 0;\n\n    this.state.listOfSubjects.map((element) => {\n      if (element.id !== index) {\n        listOfSubjectsClasses.push({ ...element, id: newIndex });\n        newIndex++;\n      }\n    });\n\n    this.setState({ listOfSubjects: listOfSubjectsClasses, subjectIds });\n  };\n\n  handleChangeParent = (selectedOption) => {\n    this.setState({ parentId: selectedOption.id });\n  };\n  handleChangeStudent = (selectedOption) => {\n    this.setState({ studentId: selectedOption.id });\n  };\n  handleChangeCountries = (selectedOption) => {\n    this.setState({ userCountry: selectedOption.id });\n  };\n  handleChangeEstablishments = (selectedOption) => {\n    this.setState({ establishmentId: selectedOption.id });\n  };\n  handleChangeFunctions = (selectedOption) => {\n    this.setState({ functionName: selectedOption.label });\n  };\n  attachFile(e) {\n    var oldFiles = this.state.userPapiersFiles;\n\n    var nameFiles = this.state.nameUserPapiersFiles;\n    if (e.target.files !== undefined) {\n      var files = Object.values(e.target.files);\n      if (this.state.nameUserPapiersFiles.length + files.length < 6) {\n        files.map((element) => {\n          nameFiles.push(element.name);\n          oldFiles.push(element);\n        });\n        this.setState({ userPapiersfiles: oldFiles, nameFiles });\n      }\n    } else {\n      this.setState({\n        messageAlerte: 'vous avez dÃ©passer 5 fichiers',\n        alerteStatus: true,\n      });\n      setTimeout(() => {\n        this.setState({ messageAlerte: '', alerteStatus: false });\n      }, 4000);\n    }\n  }\n  uploadPhoto = (e) => {\n    if (e.target.files[0] !== undefined) {\n      let file = e.target.files[0];\n      this.setState({ userPhoto: file, photoText: file.name });\n    } else {\n      this.setState({\n        messageAlerte: \"Vous n'avez pas choisir une photo\",\n        alerteFiltre: true,\n      });\n      setTimeout(() => {\n        this.setState({ messageAlerte: '', alerteFiltre: false });\n      }, 4000);\n    }\n  };\n  openArchive = () => {\n    this.setState((previousState) => ({\n      openArchive: !previousState.openArchive,\n    }));\n  };\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.ClassSettings !== this.props.ClassSettings) {\n      let classForStudent = [];\n      classForStudent = this.props.ClassSettings.map((element) => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        object.sectionId = element.fk_id_section_v4;\n        object.levelId = element.fk_id_level_v4;\n        object.groups = element.group;\n        return object;\n      });\n      this.setState({ classForStudent });\n    }\n    if (prevProps.courseAssignment !== this.props.courseAssignment) {\n      let classRoomList = [];\n      classRoomList = this.props.courseAssignment.map((element) => {\n        var object = {};\n        object.label = element.class.name;\n        object.id = element.class.id;\n        object.value = element.class.id;\n        return object;\n      });\n      let classRoomListFiltredByID = _.uniqBy(classRoomList, 'id');\n      this.setState({ classRoomList: classRoomListFiltredByID });\n    }\n\n    if (\n      prevProps.usersReducer.roles !== this.props.usersReducer.roles ||\n      prevProps.userPermission !== this.props.userPermission\n    ) {\n      let listRoles = [];\n\n      this.props.usersReducer.roles.map((element) => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        if (this.props.userProfile.role_id == roleIdSuperAdmin) {\n          listRoles.push(object);\n        } else {\n          let permitted = false;\n          permitted = addUserPermitted(object.label, this.props.userPermission);\n          if (permitted) {\n            listRoles.push(object);\n          }\n        }\n      });\n      this.setState({ listRoles: listRoles });\n    }\n\n    if (prevProps.userProfile.establishment_id !== this.props.userProfile.establishment_id) {\n      this.setState({\n        establishmentId: this.props.userProfile.establishment_id,\n      });\n    }\n\n    if (prevProps.establishments !== this.props.establishments) {\n      let establishmentsList = [];\n      establishmentsList = this.props.establishments.map((element) => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        return object;\n      });\n      this.setState({ establishmentsList });\n    }\n\n    if (prevProps.schoolYearEtabs !== this.props.schoolYearEtabs) {\n      let listSchoolYears = [];\n      listSchoolYears = this.props.schoolYearEtabs.map((element) => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        object.startDate = element.start_date;\n        object.endtDate = element.end_date;\n        return object;\n      });\n      let countriesListUser = [];\n      countriesListUser = countriesList.countriesList.map((element) => {\n        var object = {};\n        object.label = element.name_fr;\n        object.id = element.code;\n        object.value = element.code;\n        return object;\n      });\n      this.setState({\n        listSchoolYears: listSchoolYears,\n        countriesList: countriesListUser,\n      });\n    }\n    if (prevProps.usersReducer !== this.props.usersReducer) {\n      let parentsList = [];\n      parentsList = this.props.usersReducer.parents.map((element) => {\n        var object = {};\n        object.label = element.name + ' ' + element.surname;\n        object.id = element.parentId[0];\n        object.value = element.parentId[0];\n        return object;\n      });\n      let studentsList = [];\n      studentsList = this.props.usersReducer.students.map((element) => {\n        var object = {};\n        object.label = element.name + ' ' + element.surname;\n        object.id = element.studentId[0];\n        object.value = element.studentId[0];\n        return object;\n      });\n      this.setState({ parentsList, studentsList });\n    }\n    if (prevProps.usersReducer.users !== this.props.usersReducer.users) {\n      this.setState({ userList: this.props.usersReducer });\n    }\n    if (prevProps.userPermission !== this.props.userPermission) {\n      this.setState({ permissionList: this.props.userPermission });\n    }\n  }\n  UNSAFE_componentWillMount() {\n    this.props.getAllRole();\n    this.props.getSchoolYearEtabs();\n    // this.props.getAllUsersForAdmin(\n    //   this.props.userProfile.establishment_id,\n    //   this.props.userProfile.school_year_id\n    // );\n    // this.props.getAllUsersForSuperAdministrator();\n    this.props.getAssignementCourse(\n      this.props.userProfile.establishment_id,\n      this.props.userProfile.school_year_id\n    );\n  }\n\n  componentDidMount() {\n    if (this.props.userPermission != undefined) {\n      this.setState({ permissionList: this.props.userPermission });\n    }\n    if (this.props.establishments != undefined) {\n      let establishmentsList = [];\n      establishmentsList = this.props.establishments.map((element) => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        return object;\n      });\n      this.setState({\n        establishmentsList,\n        establishmentId: this.props.userProfile.establishment_id,\n      });\n    }\n    if (this.props.ClassSettings != undefined) {\n      let classForStudent = [];\n      classForStudent = this.props.ClassSettings.map((element) => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        object.sectionId = element.fk_id_section_v4;\n        object.levelId = element.fk_id_level_v4;\n        object.groups = element.group;\n        return object;\n      });\n      this.setState({ classForStudent });\n    }\n    if (this.props.courseAssignment != undefined) {\n      let classRoomList = [];\n      classRoomList = this.props.courseAssignment.map((element) => {\n        var object = {};\n        object.label = element.class.name;\n        object.id = element.class.id;\n        object.value = element.class.id;\n        return object;\n      });\n      let classRoomListFiltredByID = _.uniqBy(classRoomList, 'id');\n      this.setState({ classRoomList: classRoomListFiltredByID });\n    }\n    if (typeof this.props.usersReducer.parents != 'undefined') {\n      let parentsList = [];\n      parentsList = this.props.usersReducer.parents.map((element) => {\n        var object = {};\n        object.label = element.name + ' ' + element.surname;\n        object.id = element.id;\n        object.value = element.id;\n        return object;\n      });\n      this.setState({ parentsList });\n    }\n    if (this.props.usersReducer.students != undefined) {\n      let studentsList = [];\n      studentsList = this.props.usersReducer.students.map((element) => {\n        var object = {};\n        object.label = element.name + ' ' + element.surname;\n        object.id = element.studentId[0];\n        object.value = element.studentId[0];\n        return object;\n      });\n      this.setState({ studentsList });\n    }\n    this.setState({ userList: this.props.usersReducer });\n  }\n\n  render() {\n    console.log(this.state.listOfSubjects, 'listOfSubjects');\n    return (\n      <div\n        className=\"app-wrapper\"\n        style={{\n          marginLeft: '5%',\n          marginRight: '10%',\n        }}\n      >\n        <div className=\"  d-flex flex-column mb-3\">\n          {this.state.missingValue ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-success bg-danger text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\"> {this.state.alertMessage} </span>\n            </UncontrolledAlert>\n          ) : (\n            ''\n          )}\n          {this.props.errorStatus ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-success bg-danger text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\">{this.props.message} </span>\n            </UncontrolledAlert>\n          ) : (\n            ''\n          )}\n          {this.props.successStatus ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\"> {this.props.message} </span>\n            </UncontrolledAlert>\n          ) : (\n            ''\n          )}\n          {this.state.listRoles.length > 0 ? (\n            <div className=\" bd-highlight\" style={{ width: '90%' }}>\n              <CardBox styleName=\"col-lg-12 col-sm-12 col-md-12\">\n                <AddUsers\n                  openAddModal={this.openAddModal}\n                  handleCancel={this.handleCancel}\n                  handleChange={this.handleChange}\n                  handleSubmit={this.handleSubmit}\n                  handleArchive={this.handleArchive}\n                  handleChangeRole={this.handleChangeRole}\n                  handleChangeSchoolYear={this.handleChangeSchoolYear}\n                  handleChangeClassRoom={this.handleChangeClassRoom}\n                  handleChangeBirthdayDate={this.handleChangeBirthdayDate}\n                  handleChangeParent={this.handleChangeParent}\n                  handleChangeStudent={this.handleChangeStudent}\n                  handleChangeCountries={this.handleChangeCountries}\n                  handleChangeStudentClass={this.handleChangeStudentClass}\n                  attachFile={this.attachFile}\n                  uploadPhoto={this.uploadPhoto}\n                  openArchive={this.openArchive}\n                  handleChangeEstablishments={this.handleChangeEstablishments}\n                  handleChangeFunctions={this.handleChangeFunctions}\n                  handleChangePhone={this.handleChangePhone}\n                  addNewSubject={this.addNewSubject}\n                  deleteChoice={this.deleteChoice}\n                  parentsList={this.state.parentsList}\n                  studentsList={this.state.studentsList}\n                  handleChangeGroupClassRoom={this.handleChangeGroupClassRoom}\n                  values={this.state}\n                />\n              </CardBox>\n            </div>\n          ) : (\n            ''\n          )}\n\n          {/* <RoleContext.Consumer>\n            {({ role }) => (\n              <Can\n                role={role}\n                perform=\"add-service\"\n                yes={() => (\n                  <>\n                    {this.state.openArchive ? (\n                      <div>\n                        <ArchiveUsers openArchive={this.openArchive} />\n                      </div>\n                    ) : (\n                      ''\n                    )}\n                  </>\n                )}\n                establishements\n              />\n            )}\n          </RoleContext.Consumer> */}\n          {!this.state.openArchive ? (\n            <div className=\" bd-highlight\" style={{ width: '90%' }}>\n              <CardBox styleName=\"col-lg-12 col-sm-12 col-md-12\">\n                {/* <UsersList usersList={this.props.usersReducer} /> */}\n                <UsersList\n                  usersList={this.state.userList}\n                  permissionList={this.state.permissionList}\n                  listClassFilter={this.state.classForStudent}\n                  usefulData={this.state}\n                />\n              </CardBox>\n            </div>\n          ) : (\n            ''\n          )}\n        </div>\n        {/* <div className=\" bd-highlight\" style={{ width: '90%' }}>\n          <CardBox styleName=\"col-lg-12 col-sm-12 col-md-12\">\n            <ArchiveUsers\n              isOpenArchive={this.state.isOpenArchive}\n              openArchiveModal={this.openArchiveModal}\n            />\n          </CardBox>\n        </div> */}\n        {this.props.userLoading ? <LoaderModal /> : ''}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    usersReducer: state.usersReducer,\n    userProfile: state.auth.userProfile,\n    establishments: state.establishment.remoteEstablishments,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    schoolYearEtabs: state.schoolYearEtab.remoteSchoolYearEtab,\n    courseAssignment: state.AssignementReducer.courseAssignment,\n    ClassSettings: state.ClassSettingsReducer.classSettings,\n    userPermission: state.PermissionReducer.userPermission,\n    userLoading: state.usersReducer.userLoading,\n    groupsList: state.GroupsReducer.groupsList,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getAllRole,\n  getSchoolYearEtabs,\n  addUsers,\n  // getAllUsersForAdmin,\n  getAssignementCourse,\n  // getAllUsersForSuperAdministrator,\n})(Users);\n"]},"metadata":{},"sourceType":"module"}