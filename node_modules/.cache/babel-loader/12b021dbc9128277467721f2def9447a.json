{"ast":null,"code":"import rules from \"./rbac-rules\";\n\nconst check = (rules, role, action, data) => {\n  console.log('roooooleee ', role);\n  const permissions = rules[role];\n\n  if (!permissions) {\n    // role is not present in the rules\n    return false;\n  }\n\n  const staticPermissions = permissions.static;\n\n  if (staticPermissions && staticPermissions.includes(action)) {\n    // static rule not provided for action\n    return true;\n  }\n\n  const dynamicPermissions = permissions.dynamic;\n\n  if (dynamicPermissions) {\n    const permissionCondition = dynamicPermissions[action];\n\n    if (!permissionCondition) {\n      // dynamic rule not provided for action\n      return false;\n    }\n\n    return permissionCondition(data);\n  }\n\n  return false;\n};\n\nconst Can = props => check(rules, props.role, props.perform, props.data) ? props.yes() : props.no();\n\nCan.defaultProps = {\n  yes: () => null,\n  no: () => null\n};\nexport default Can;","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/can.js"],"names":["rules","check","role","action","data","console","log","permissions","staticPermissions","static","includes","dynamicPermissions","dynamic","permissionCondition","Can","props","perform","yes","no","defaultProps"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,cAAlB;;AAEA,MAAMC,KAAK,GAAG,CAACD,KAAD,EAAQE,IAAR,EAAcC,MAAd,EAAsBC,IAAtB,KAA+B;AAC3CC,EAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA0BJ,IAA1B;AACA,QAAMK,WAAW,GAAGP,KAAK,CAACE,IAAD,CAAzB;;AACA,MAAI,CAACK,WAAL,EAAkB;AAChB;AACA,WAAO,KAAP;AACD;;AAED,QAAMC,iBAAiB,GAAGD,WAAW,CAACE,MAAtC;;AAEA,MAAID,iBAAiB,IAAIA,iBAAiB,CAACE,QAAlB,CAA2BP,MAA3B,CAAzB,EAA6D;AAC3D;AACA,WAAO,IAAP;AACD;;AAED,QAAMQ,kBAAkB,GAAGJ,WAAW,CAACK,OAAvC;;AAEA,MAAID,kBAAJ,EAAwB;AACtB,UAAME,mBAAmB,GAAGF,kBAAkB,CAACR,MAAD,CAA9C;;AACA,QAAI,CAACU,mBAAL,EAA0B;AACxB;AACA,aAAO,KAAP;AACD;;AAED,WAAOA,mBAAmB,CAACT,IAAD,CAA1B;AACD;;AACD,SAAO,KAAP;AACD,CA3BD;;AA6BA,MAAMU,GAAG,GAAGC,KAAK,IACfd,KAAK,CAACD,KAAD,EAAQe,KAAK,CAACb,IAAd,EAAoBa,KAAK,CAACC,OAA1B,EAAmCD,KAAK,CAACX,IAAzC,CAAL,GACIW,KAAK,CAACE,GAAN,EADJ,GAEIF,KAAK,CAACG,EAAN,EAHN;;AAKAJ,GAAG,CAACK,YAAJ,GAAmB;AACjBF,EAAAA,GAAG,EAAE,MAAM,IADM;AAEjBC,EAAAA,EAAE,EAAE,MAAM;AAFO,CAAnB;AAKA,eAAeJ,GAAf","sourcesContent":["import rules from \"./rbac-rules\";\n\nconst check = (rules, role, action, data) => {\n  console.log('roooooleee ',role);\n  const permissions = rules[role];\n  if (!permissions) {\n    // role is not present in the rules\n    return false;\n  }\n\n  const staticPermissions = permissions.static;\n\n  if (staticPermissions && staticPermissions.includes(action)) {\n    // static rule not provided for action\n    return true;\n  }\n\n  const dynamicPermissions = permissions.dynamic;\n\n  if (dynamicPermissions) {\n    const permissionCondition = dynamicPermissions[action];\n    if (!permissionCondition) {\n      // dynamic rule not provided for action\n      return false;\n    }\n\n    return permissionCondition(data);\n  }\n  return false;\n};\n\nconst Can = props =>\n  check(rules, props.role, props.perform, props.data)\n    ? props.yes()\n    : props.no();\n\nCan.defaultProps = {\n  yes: () => null,\n  no: () => null\n};\n\nexport default Can;"]},"metadata":{},"sourceType":"module"}