{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/PermissionSetting/PermissionList.js\";\nimport React, { Component } from 'react';\nimport CardBox from '../../../../../components/CardBox/index';\nimport Select from 'react-select';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport Button from '@material-ui/core/Button';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport PermissionListItem from './PermissionListItem';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ResetPermission from './ResetPermission';\nimport PermissionConfirmation from './PermissionConfirmation';\nexport class PermissionList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      listPermissions: [],\n      listPermissionsModified: [],\n      modalReset: false,\n      modalConfirmation: false\n    };\n    this.addPermission = this.addPermission.bind(this);\n    this.deletePermission = this.deletePermission.bind(this);\n    this.resetPermission = this.resetPermission.bind(this);\n    this.applyPermission = this.applyPermission.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      listPermissions: this.props.listPermissions\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.listPermissions !== this.props.listPermissions) {\n      this.setState({\n        listPermissions: this.props.listPermissions\n      });\n    }\n  }\n\n  handleCancel() {\n    this.setState({\n      modalReset: false,\n      modalConfirmation: false\n    });\n  }\n\n  applyPermission() {\n    let listPermissionsModified = this.state.listPermissions.filter(permission => permission.modified);\n    console.log(listPermissionsModified, 'listPermissionsModified');\n    this.setState({\n      listPermissionsModified,\n      modalConfirmation: false\n    });\n  }\n\n  resetPermission() {\n    this.setState({\n      listPermissions: this.props.listPermissions,\n      listPermissionsModified: [],\n      modalReset: false\n    });\n  }\n\n  deletePermission(idPermission, idRole) {\n    let newListPermissions = this.state.listPermissions.map(permission => {\n      let newPermission = permission.id === parseInt(idPermission) ? { ...permission,\n        role: permission.role.filter(role => role != idRole),\n        modified: true\n      } : permission;\n      return newPermission;\n    });\n    this.setState({\n      listPermissions: newListPermissions\n    });\n  }\n\n  addPermission(idPermission, idRole) {\n    let newListPermissions = this.state.listPermissions.map(permission => {\n      let newPermission = permission.id === parseInt(idPermission) ? { ...permission,\n        role: permission.role.concat([idRole]),\n        modified: true\n      } : permission;\n      return newPermission;\n    });\n    this.setState({\n      listPermissions: newListPermissions\n    });\n  }\n\n  render() {\n    const {\n      values\n    } = this.props; // console.log(values, 'valuuues');\n\n    console.log(this.state.listPermissions, 'stateeeee');\n    console.log(this.state.listPermissionsModified, 'listPermissionsModified');\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 col-lg-12 col-sm-12 d-flex flex-column bd-highlight mb-3 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ResetPermission, {\n      modal: this.state.modalReset,\n      handleCancelReset: this.handleCancel,\n      handleSubmit: this.resetPermission,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(PermissionConfirmation, {\n      modal: this.state.modalConfirmation,\n      handleCancel: this.handleCancel,\n      handleSubmit: this.applyPermission,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-md-12 col-lg-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-row bd-highlight  \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-3 col-md-6 col-lg-6 col-sm-6  mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      style: {\n        color: '#0000CD',\n        fontFamily: 'Roboto'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 15\n      }\n    }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"sidebar.components.permissionSetting\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 col-md-2 col-lg-2 col-sm-2    \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      id: \"moduleId\",\n      name: \"moduleId\",\n      select: true,\n      value: values.moduleId // onChange={this.props.handleChange('moduleId')}\n      ,\n      SelectProps: {},\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `sidebar.modules`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 24\n        }\n      }),\n      InputProps: {\n        disableUnderline: true\n      },\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      key: 0,\n      value: 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `userStuppDisplay.all`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 19\n      }\n    })), this.props.estabModule.map((element, index) => /*#__PURE__*/React.createElement(MenuItem, {\n      key: index,\n      value: element.module.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 19\n      }\n    }, element.module.name)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 col-md-2 col-lg-2 col-sm-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      id: \"subModuleId\",\n      name: \"subModuleId\",\n      select: true,\n      value: values.subModuleId // onChange={this.props.handleChange('subModuleId')}\n      ,\n      SelectProps: {},\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `sidebar.modules`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 24\n        }\n      }),\n      InputProps: {\n        disableUnderline: true\n      },\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      key: 0,\n      value: 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `userStuppDisplay.all`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 19\n      }\n    })))))), /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-md-12 col-lg-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"table-responsive-material\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TableHead, {\n      className: \"th-border-b\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(TableRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 19\n      }\n    }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `action.type.of.education`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `role.admin`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 19\n      }\n    }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `component.etablishments.info.director`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 19\n      }\n    }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `role.Supervisor`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 19\n      }\n    }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `toDo.professor`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 19\n      }\n    }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `userStuppDisplay.Student`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 19\n      }\n    }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `userStuppDisplay.Parent`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(TableBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 15\n      }\n    }, this.state.listPermissions.map((element, index) => {\n      return /*#__PURE__*/React.createElement(PermissionListItem, {\n        key: index,\n        permission: element,\n        addPermission: this.addPermission,\n        deletePermission: this.deletePermission,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }\n      });\n    }))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-row-reverse bd-highlight col-md-12 col-lg-12 col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bd-highlight \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      className: \"bg-secondary text-white \",\n      style: {\n        borderBottomLeftRadius: '10px',\n        borderBottomRightRadius: '10px',\n        borderTopLeftRadius: '10px',\n        borderTopRightRadius: '10px',\n        width: '100%',\n        height: '80%',\n        textTransform: 'capitalize'\n      },\n      onClick: () => this.setState({\n        modalConfirmation: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 13\n      }\n    }, true ? /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"superadmin.apply.button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 17\n      }\n    }) : /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"button.modify\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bd-highlight mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      style: {\n        borderBottomLeftRadius: '10px',\n        borderBottomRightRadius: '10px',\n        borderTopLeftRadius: '10px',\n        borderTopRightRadius: '10px',\n        width: '100%',\n        height: '80%',\n        textTransform: 'capitalize'\n      },\n      className: \" bg-grey text-white \",\n      onClick: () => this.setState({\n        modalReset: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.classes.formadd.buttonCancel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 15\n      }\n    })))));\n  }\n\n}\nexport default PermissionList;","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/PermissionSetting/PermissionList.js"],"names":["React","Component","CardBox","Select","IntlMessages","Button","Table","TableBody","TableCell","TableHead","TableRow","PermissionListItem","TextField","MenuItem","ResetPermission","PermissionConfirmation","PermissionList","constructor","props","state","listPermissions","listPermissionsModified","modalReset","modalConfirmation","addPermission","bind","deletePermission","resetPermission","applyPermission","handleCancel","componentDidMount","setState","componentDidUpdate","prevProps","filter","permission","modified","console","log","idPermission","idRole","newListPermissions","map","newPermission","id","parseInt","role","concat","render","values","color","fontFamily","moduleId","disableUnderline","estabModule","element","index","module","name","subModuleId","borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius","width","height","textTransform"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport CardBox from '../../../../../components/CardBox/index';\nimport Select from 'react-select';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport Button from '@material-ui/core/Button';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport PermissionListItem from './PermissionListItem';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ResetPermission from './ResetPermission';\nimport PermissionConfirmation from './PermissionConfirmation';\n\nexport class PermissionList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      listPermissions: [],\n      listPermissionsModified: [],\n      modalReset: false,\n      modalConfirmation: false,\n    };\n\n    this.addPermission = this.addPermission.bind(this);\n    this.deletePermission = this.deletePermission.bind(this);\n    this.resetPermission = this.resetPermission.bind(this);\n    this.applyPermission = this.applyPermission.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n  }\n  componentDidMount() {\n    this.setState({ listPermissions: this.props.listPermissions });\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.listPermissions !== this.props.listPermissions) {\n      this.setState({ listPermissions: this.props.listPermissions });\n    }\n  }\n  handleCancel() {\n    this.setState({ modalReset: false, modalConfirmation: false });\n  }\n  applyPermission() {\n    let listPermissionsModified = this.state.listPermissions.filter(\n      (permission) => permission.modified\n    );\n    console.log(listPermissionsModified, 'listPermissionsModified');\n    this.setState({ listPermissionsModified, modalConfirmation: false });\n  }\n  resetPermission() {\n    this.setState({\n      listPermissions: this.props.listPermissions,\n      listPermissionsModified: [],\n      modalReset: false,\n    });\n  }\n  deletePermission(idPermission, idRole) {\n    let newListPermissions = this.state.listPermissions.map((permission) => {\n      let newPermission =\n        permission.id === parseInt(idPermission)\n          ? {\n              ...permission,\n              role: permission.role.filter((role) => role != idRole),\n              modified: true,\n            }\n          : permission;\n      return newPermission;\n    });\n    this.setState({\n      listPermissions: newListPermissions,\n    });\n  }\n  addPermission(idPermission, idRole) {\n    let newListPermissions = this.state.listPermissions.map((permission) => {\n      let newPermission =\n        permission.id === parseInt(idPermission)\n          ? {\n              ...permission,\n              role: permission.role.concat([idRole]),\n              modified: true,\n            }\n          : permission;\n      return newPermission;\n    });\n    this.setState({\n      listPermissions: newListPermissions,\n    });\n  }\n  render() {\n    const { values } = this.props;\n    // console.log(values, 'valuuues');\n    console.log(this.state.listPermissions, 'stateeeee');\n    console.log(this.state.listPermissionsModified, 'listPermissionsModified');\n\n    return (\n      <div className=\"col-md-12 col-lg-12 col-sm-12 d-flex flex-column bd-highlight mb-3 \">\n        <ResetPermission\n          modal={this.state.modalReset}\n          handleCancelReset={this.handleCancel}\n          handleSubmit={this.resetPermission}\n        ></ResetPermission>\n        <PermissionConfirmation\n          modal={this.state.modalConfirmation}\n          handleCancel={this.handleCancel}\n          handleSubmit={this.applyPermission}\n        ></PermissionConfirmation>\n        <CardBox styleName=\"col-md-12 col-lg-12 col-sm-12\">\n          <div className=\"d-flex flex-row bd-highlight  \">\n            <div className=\"p-3 col-md-6 col-lg-6 col-sm-6  mt-4\">\n              <h1 style={{ color: '#0000CD', fontFamily: 'Roboto' }}>\n                {' '}\n                <IntlMessages id=\"sidebar.components.permissionSetting\" />\n              </h1>\n            </div>\n            <div className=\"p-2 col-md-2 col-lg-2 col-sm-2    \">\n              <TextField\n                id=\"moduleId\"\n                name=\"moduleId\"\n                select\n                value={values.moduleId}\n               // onChange={this.props.handleChange('moduleId')}\n                SelectProps={{}}\n                label={<IntlMessages id={`sidebar.modules`} />}\n                InputProps={{ disableUnderline: true }}\n                margin=\"normal\"\n                fullWidth\n              >\n                <MenuItem key={0} value={0}>\n                  <IntlMessages id={`userStuppDisplay.all`} />\n                </MenuItem>\n                {this.props.estabModule.map((element, index) => (\n                  <MenuItem key={index} value={element.module.id}>\n                    {element.module.name}\n                    {/* <IntlMessages id={`sidebar.components.${element.module.path}`} /> */}\n                  </MenuItem>\n                ))}\n              </TextField>\n            </div>\n            <div className=\"p-2 col-md-2 col-lg-2 col-sm-2\">\n              <TextField\n                id=\"subModuleId\"\n                name=\"subModuleId\"\n                select\n                value={values.subModuleId}\n                // onChange={this.props.handleChange('subModuleId')}\n                SelectProps={{}}\n                label={<IntlMessages id={`sidebar.modules`} />}\n                InputProps={{ disableUnderline: true }}\n                margin=\"normal\"\n                fullWidth\n              >\n                <MenuItem key={0} value={0}>\n                  <IntlMessages id={`userStuppDisplay.all`} />\n                </MenuItem>\n                {/* {values.subModuleList.map((subModule) => (\n                  <MenuItem key={subModule.id} value={subModule.id}>\n                    {subModule.name}\n                    <IntlMessages id={`sidebar.components.${subModule.name}`} />\n                  </MenuItem>\n                ))} */}\n              </TextField>\n            </div>\n          </div>\n        </CardBox>\n        <CardBox styleName=\"col-md-12 col-lg-12 col-sm-12\">\n          <div className=\"table-responsive-material\">\n            <Table>\n              <TableHead className=\"th-border-b\">\n                <TableRow>\n                  <TableCell>\n                    {' '}\n                    <IntlMessages id={`action.type.of.education`} />\n                  </TableCell>\n\n                  <TableCell>\n                    <IntlMessages id={`role.admin`} />\n                  </TableCell>\n                  <TableCell>\n                    {' '}\n                    <IntlMessages id={`component.etablishments.info.director`} />\n                  </TableCell>\n                  <TableCell>\n                    {' '}\n                    <IntlMessages id={`role.Supervisor`} />\n                  </TableCell>\n                  <TableCell>\n                    {' '}\n                    <IntlMessages id={`toDo.professor`} />\n                  </TableCell>\n                  <TableCell>\n                    {' '}\n                    <IntlMessages id={`userStuppDisplay.Student`} />\n                  </TableCell>\n                  <TableCell>\n                    {' '}\n                    <IntlMessages id={`userStuppDisplay.Parent`} />\n                  </TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {this.state.listPermissions.map((element, index) => {\n                  return (\n                    <PermissionListItem\n                      key={index}\n                      permission={element}\n                      addPermission={this.addPermission}\n                      deletePermission={this.deletePermission}\n                    />\n                  );\n                })}\n              </TableBody>\n            </Table>\n          </div>\n        </CardBox>\n        <div className=\"d-flex flex-row-reverse bd-highlight col-md-12 col-lg-12 col-sm-12\">\n          <div className=\" bd-highlight \">\n            <Button\n              variant=\"contained\"\n              className=\"bg-secondary text-white \"\n              style={{\n                borderBottomLeftRadius: '10px',\n                borderBottomRightRadius: '10px',\n                borderTopLeftRadius: '10px',\n                borderTopRightRadius: '10px',\n                width: '100%',\n                height: '80%',\n                textTransform: 'capitalize',\n              }}\n              onClick={() => this.setState({ modalConfirmation: true })}\n            >\n              {true ? (\n                <IntlMessages id=\"superadmin.apply.button\" />\n              ) : (\n                <IntlMessages id=\"button.modify\" />\n              )}\n            </Button>\n          </div>\n          <div className=\" bd-highlight mr-2\">\n            <Button\n              variant=\"contained\"\n              style={{\n                borderBottomLeftRadius: '10px',\n                borderBottomRightRadius: '10px',\n                borderTopLeftRadius: '10px',\n                borderTopRightRadius: '10px',\n                width: '100%',\n                height: '80%',\n                textTransform: 'capitalize',\n              }}\n              className=\" bg-grey text-white \"\n              onClick={() => this.setState({ modalReset: true })}\n            >\n              <IntlMessages id=\"components.classes.formadd.buttonCancel\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default PermissionList;\n"]},"metadata":{},"sourceType":"module"}