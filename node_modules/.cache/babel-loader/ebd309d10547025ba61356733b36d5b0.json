{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/Subject/Subjects.js\";\nimport React from 'react';\nimport ContainerHeader from '../../../../../components/ContainerHeader/index';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport SubjectList from './SubjectList';\nimport { getSubject, subjectsByLevelBySection } from \"../../../../../actions/subjectAction\";\nimport { getEstablishment } from \"../../../../../actions/establishmentAction\";\nimport { getSections } from '../../../../../actions/sectionAction';\nimport { getLevels } from '../../../../../actions/classLevelAction';\nimport { getEstabTypes } from '../../../../../actions/estabTypeAction';\nimport { getSectionFromLevel } from '../../../../../actions/sectionAction';\nimport { getLevelListFromEstabType } from \"../../../../../actions/classLevelAction\";\nimport { getCountries } from \"../../../../../actions/countriesAction\";\nimport _ from \"lodash\";\nimport { connect } from \"react-redux\";\nimport CardBox from '../../../../../components/CardBox/index';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nfunction mapStateToProps(state) {\n  return {\n    subjects: state.subject.remoteSubjects,\n    establishments: state.establishment.remoteEstablishments,\n    levels: state.ClassLevels.remoteLevels,\n    sections: state.classSections.remoteSections,\n    EstabTypes: state.EstabTypes.remoteEstabTypes,\n    countries: state.countries.remoteCountries\n  };\n}\n\n;\n\nclass Subjects extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n\n      if (name === 'countrie') {\n        let idsOfEstabType = _.uniqBy(_.map(_.filter(this.props.establishments, {\n          countries_id: event.target.value\n        }), 'estab_type_id'));\n\n        let listOfEstabType = [];\n        idsOfEstabType.forEach(id => {\n          let filtredList = this.props.EstabTypes.filter(element => element.id === id);\n          listOfEstabType.push(filtredList[0]);\n        });\n        this.setState({\n          listOfEstabType\n        });\n      }\n    };\n\n    this.handleChangeLevel = event => {\n      if (event.target.value == 26 || event.target.value == 27 || event.target.value == 28 || event.target.value == 29 || event.target.value < 11) {\n        this.setState({\n          level_id: event.target.value,\n          sectionDisabled: true,\n          section_id: 0\n        });\n      } else {\n        this.setState({\n          level_id: event.target.value,\n          sectionDisabled: false,\n          section_id: 0\n        });\n      }\n    };\n\n    this.state = {\n      addSubjectModal: false,\n      subjectsList: [],\n      subjectItem: [],\n      edit: false,\n      modalDelete: false,\n      itemId: 0,\n      estabType: '',\n      level_id: 0,\n      section_id: 0,\n      countrie: '',\n      sectionDisabled: true,\n      listOfEstabType: []\n    };\n    this.editItemSubject = this.editItemSubject.bind(this);\n    this.requestDeleteSubject = this.requestDeleteSubject.bind(this);\n    this.handleCancelModalDelete = this.handleCancelModalDelete.bind(this);\n    this.handleCancelModal = this.handleCancelModal.bind(this);\n    this.addSubject = this.addSubject.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeLevel = this.handleChangeLevel.bind(this);\n  }\n\n  requestDeleteSubject(id) {\n    this.setState({\n      modalDelete: true,\n      itemId: id\n    });\n  }\n\n  editItemSubject(id) {\n    const subjectItem = this.props.subjects.find(element => element.id === id);\n    this.setState({\n      subjectItem: subjectItem,\n      edit: true\n    });\n  }\n\n  componentDidMount() {\n    this.props.getSubject();\n    this.props.getEstablishment();\n    this.props.getSections();\n    this.props.getLevels();\n    this.props.getEstabTypes();\n    this.props.getCountries();\n  }\n\n  handleCancelModal() {\n    this.setState({\n      edit: false,\n      addSubjectModal: false\n    });\n  }\n\n  handleCancelModalDelete() {\n    this.setState({\n      modalDelete: false,\n      itemId: 0\n    });\n  }\n\n  addSubject() {\n    this.setState({\n      addSubjectModal: true\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ContainerHeader, {\n      match: this.props.match,\n      title: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"sidebar.subjects\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 66\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      required: true,\n      id: \"countrie\",\n      select: true,\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"educational.system\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 40\n        }\n      }),\n      value: this.state.countrie,\n      onChange: this.handleChange('countrie'),\n      SelectProps: {},\n      margin: \"normal\",\n      defaultValue: \"\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 29\n      }\n    }, this.props.countries.map(countrie => /*#__PURE__*/React.createElement(MenuItem, {\n      key: countrie.id,\n      value: countrie.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 37\n      }\n    }, countrie.name)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      required: true,\n      id: \"estabType\",\n      select: true,\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.student.formadd.establishment\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 40\n        }\n      }),\n      value: this.state.estabType,\n      onChange: this.handleChange('estabType'),\n      SelectProps: {},\n      margin: \"normal\",\n      defaultValue: \"\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 29\n      }\n    }, this.state.listOfEstabType.map(EstabType => /*#__PURE__*/React.createElement(MenuItem, {\n      key: EstabType.id,\n      value: EstabType.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 37\n      }\n    }, EstabType.name)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      required: true,\n      id: \"level_id\",\n      select: true,\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.note.niveau\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 40\n        }\n      }),\n      value: this.state.establishment_id,\n      onChange: this.handleChangeLevel,\n      SelectProps: {},\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 29\n      }\n    }, getLevelListFromEstabType(this.props.levels, this.state.estabType).map(option => /*#__PURE__*/React.createElement(MenuItem, {\n      key: option.id,\n      value: option.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 37\n      }\n    }, option.name)))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      required: true,\n      id: \"section_id\",\n      select: true,\n      disabled: this.state.sectionDisabled,\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.class.level.input.label.section\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 40\n        }\n      }),\n      value: this.state.establishment_id,\n      onChange: this.handleChange('section_id'),\n      SelectProps: {},\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 29\n      }\n    }, getSectionFromLevel(this.props.sections, this.state.level_id).map(option => /*#__PURE__*/React.createElement(MenuItem, {\n      key: option.id,\n      value: option.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 37\n      }\n    }, option.name)))))), this.state.sectionDisabled || this.state.section_id || this.state.countrie !== 1 ? /*#__PURE__*/React.createElement(SubjectList, {\n      list: subjectsByLevelBySection(this.props.subjects, this.state.level_id, this.state.section_id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 21\n      }\n    }) : \"\");\n  }\n\n}\n\nexport default connect(mapStateToProps, {\n  getSections,\n  getLevels,\n  getSubject,\n  getEstablishment,\n  getEstabTypes,\n  getSectionFromLevel,\n  getCountries\n})(Subjects);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/Subject/Subjects.js"],"names":["React","ContainerHeader","IntlMessages","SubjectList","getSubject","subjectsByLevelBySection","getEstablishment","getSections","getLevels","getEstabTypes","getSectionFromLevel","getLevelListFromEstabType","getCountries","_","connect","CardBox","TextField","MenuItem","mapStateToProps","state","subjects","subject","remoteSubjects","establishments","establishment","remoteEstablishments","levels","ClassLevels","remoteLevels","sections","classSections","remoteSections","EstabTypes","remoteEstabTypes","countries","remoteCountries","Subjects","Component","constructor","props","handleChange","name","event","setState","target","value","idsOfEstabType","uniqBy","map","filter","countries_id","listOfEstabType","forEach","id","filtredList","element","push","handleChangeLevel","level_id","sectionDisabled","section_id","addSubjectModal","subjectsList","subjectItem","edit","modalDelete","itemId","estabType","countrie","editItemSubject","bind","requestDeleteSubject","handleCancelModalDelete","handleCancelModal","addSubject","find","componentDidMount","render","match","EstabType","establishment_id","option"],"mappings":"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","sourcesContent":["\nimport React from 'react';\nimport ContainerHeader from '../../../../../components/ContainerHeader/index';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport SubjectList from './SubjectList';\nimport { getSubject, subjectsByLevelBySection } from \"../../../../../actions/subjectAction\";\nimport { getEstablishment } from \"../../../../../actions/establishmentAction\";\nimport { getSections } from '../../../../../actions/sectionAction';\nimport { getLevels } from '../../../../../actions/classLevelAction';\nimport { getEstabTypes } from '../../../../../actions/estabTypeAction';\nimport { getSectionFromLevel } from '../../../../../actions/sectionAction';\nimport { getLevelListFromEstabType } from \"../../../../../actions/classLevelAction\";\nimport { getCountries } from \"../../../../../actions/countriesAction\";\nimport _ from \"lodash\";\n\n\nimport { connect } from \"react-redux\";\nimport CardBox from '../../../../../components/CardBox/index';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nfunction mapStateToProps(state) {\n    return {\n        subjects: state.subject.remoteSubjects,\n        establishments: state.establishment.remoteEstablishments,\n        levels: state.ClassLevels.remoteLevels,\n        sections: state.classSections.remoteSections,\n        EstabTypes: state.EstabTypes.remoteEstabTypes,\n        countries: state.countries.remoteCountries,\n    };\n};\n\nclass Subjects extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            addSubjectModal: false,\n            subjectsList: [],\n            subjectItem: [],\n            edit: false,\n            modalDelete: false,\n            itemId: 0,\n            estabType: '',\n            level_id: 0,\n            section_id: 0,\n            countrie: '',\n            sectionDisabled: true,\n            listOfEstabType: []\n        };\n        this.editItemSubject = this.editItemSubject.bind(this);\n        this.requestDeleteSubject = this.requestDeleteSubject.bind(this);\n        this.handleCancelModalDelete = this.handleCancelModalDelete.bind(this);\n        this.handleCancelModal = this.handleCancelModal.bind(this);\n        this.addSubject = this.addSubject.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleChangeLevel = this.handleChangeLevel.bind(this);\n\n\n    }\n\n    requestDeleteSubject(id) {\n        this.setState({ modalDelete: true, itemId: id });\n    };\n\n    editItemSubject(id) {\n        const subjectItem = this.props.subjects.find(element => element.id === id);\n        this.setState({ subjectItem: subjectItem, edit: true });\n    };\n\n    handleChange = name => event => {\n        this.setState({ [name]: event.target.value });\n        if (name === 'countrie') {\n            let idsOfEstabType = _.uniqBy(_.map(_.filter(this.props.establishments, { countries_id: event.target.value }), 'estab_type_id'))\n            let listOfEstabType = []\n            idsOfEstabType.forEach(id => {\n                let filtredList = this.props.EstabTypes.filter(element => element.id === id)\n                listOfEstabType.push(filtredList[0])\n            });\n             this.setState({ listOfEstabType })\n        }\n    };\n\n    handleChangeLevel = event => {\n\n        if (event.target.value == 26 || event.target.value == 27 || event.target.value == 28 || event.target.value == 29 || event.target.value < 11) {\n            this.setState({ level_id: event.target.value, sectionDisabled: true, section_id: 0 })\n\n        } else {\n            this.setState({ level_id: event.target.value, sectionDisabled: false, section_id: 0 })\n        }\n    };\n    componentDidMount() {\n        this.props.getSubject();\n        this.props.getEstablishment();\n        this.props.getSections();\n        this.props.getLevels();\n        this.props.getEstabTypes();\n        this.props.getCountries();\n    };\n\n    handleCancelModal() {\n        this.setState({ edit: false, addSubjectModal: false })\n    };\n\n    handleCancelModalDelete() {\n        this.setState({ modalDelete: false, itemId: 0 })\n    };\n    addSubject() {\n        this.setState({ addSubjectModal: true });\n    }\n\n    render() {\n \n        return (\n            <div className=\"app-wrapper\">\n                <ContainerHeader match={this.props.match} title={<IntlMessages id=\"sidebar.subjects\" />} />\n                {/* <div className=\"col-md-12 text-right \" style={{ marginBottom: 20 }}>\n                    <Fab size=\"small\" color=\"primary\" aria-label=\"Add\" onClick={this.addSubject}>\n                        <AddIcon />\n                    </Fab>\n                    &nbsp;&nbsp;&nbsp;\n                    <Fab size=\"small\" color=\"primary\" >\n                        <Input />\n                    </Fab>\n                </div>\n                {this.state.edit ?\n                    <EditSubject\n                        subjectItem={this.state.subjectItem}\n                        listEstablishment={this.props.establishments}\n                        cancelModal={this.handleCancelModal} /> : ''}\n                {this.state.modalDelete ?\n                    <DeleteSubject\n                        cancelModalDelete={this.handleCancelModalDelete}\n                        itemId={this.state.itemId} /> : ''} */}\n                <CardBox styleName=\"col-lg-12\" >\n                    <div className=\"row\">\n                        <div className=\"col-sm-3\">\n                            <TextField\n                                required\n                                id=\"countrie\"\n                                select\n                                label={<IntlMessages id=\"educational.system\" />}\n                                value={this.state.countrie}\n                                onChange={this.handleChange('countrie')}\n                                SelectProps={{}}\n                                margin=\"normal\"\n                                defaultValue=''\n                                fullWidth >\n                                {this.props.countries.map(countrie => (\n                                    <MenuItem key={countrie.id} value={countrie.id}>\n                                        {countrie.name}\n                                    </MenuItem>\n                                ))}\n                            </TextField>\n                        </div>\n\n\n\n                        <div className=\"col-sm-3\">\n                            <TextField\n                                required\n                                id=\"estabType\"\n                                select\n                                label={<IntlMessages id=\"components.student.formadd.establishment\" />}\n                                value={this.state.estabType}\n                                onChange={this.handleChange('estabType')}\n                                SelectProps={{}}\n                                margin=\"normal\"\n                                defaultValue=''\n                                fullWidth >\n                                {this.state.listOfEstabType.map(EstabType => (\n                                    <MenuItem key={EstabType.id} value={EstabType.id}>\n                                        {EstabType.name}\n                                    </MenuItem>\n                                ))}\n                            </TextField>\n                        </div>\n                        <div className=\"col-sm-3\">\n                            <TextField\n                                required\n                                id=\"level_id\"\n                                select\n                                label={<IntlMessages id=\"components.note.niveau\" />}\n                                value={this.state.establishment_id}\n                                onChange={this.handleChangeLevel}\n                                SelectProps={{}}\n                                margin=\"normal\"\n                                fullWidth >\n                                {getLevelListFromEstabType(this.props.levels, this.state.estabType).map(option => (\n                                    <MenuItem key={option.id} value={option.id}>\n                                        {option.name}\n                                    </MenuItem>\n                                ))}\n                            </TextField>\n                        </div>\n                        <div className=\"col-sm-3\">\n                            <TextField\n                                required\n                                id=\"section_id\"\n                                select\n                                disabled={this.state.sectionDisabled}\n                                label={<IntlMessages id=\"components.class.level.input.label.section\" />}\n                                value={this.state.establishment_id}\n                                onChange={this.handleChange('section_id')}\n                                SelectProps={{}}\n                                margin=\"normal\"\n                                fullWidth >\n                                {getSectionFromLevel(this.props.sections, this.state.level_id).map(option => (\n                                    <MenuItem key={option.id} value={option.id}>\n                                        {option.name}\n                                    </MenuItem>\n                                ))}\n                            </TextField>\n                        </div>\n                    </div>\n                </CardBox>\n\n                {((this.state.sectionDisabled) || (this.state.section_id) || (this.state.countrie !== 1)) ?\n                    <SubjectList\n                        list={subjectsByLevelBySection(this.props.subjects, this.state.level_id, this.state.section_id)}\n                    />\n                    : \"\"}\n            </div>\n\n        )\n    }\n}\nexport default connect(mapStateToProps, { getSections, getLevels, getSubject, getEstablishment, getEstabTypes, getSectionFromLevel, getCountries })(Subjects);"]},"metadata":{},"sourceType":"module"}