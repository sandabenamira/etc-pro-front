{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Learning/routes/Moocs/MoocsList.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { deleteMoocs, editMoocs } from \"../../../../../actions/MoocsActions\";\nimport MoocsItem from \"./MoocsItem\";\nimport DeleteMoocs from \"./DeleteMoocs\";\nimport EditMoocs from \"./EditMoocs\";\nimport _ from \"lodash\";\nimport { roleIdProfessor } from \"../../../../../config/config\";\n\nclass MoocsList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.submitDeleteMoocs = event => {\n      this.props.deleteMoocs(this.state.deleteItem);\n      this.setState({\n        deleteIsOpen: false\n      });\n    };\n\n    this.handleDelete = item => {\n      this.setState({\n        deleteIsOpen: true,\n        deleteItem: item\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleChangeSubject = name => event => {\n      let obj = JSON.parse(event.target.value);\n      let courseAssignment = this.props.courseAssignment.filter(element => element.fk_id_subject_v4 === obj.subjectId);\n      this.setState({\n        itemSubject: event.target.value,\n        courseAssignment: courseAssignment,\n        roomClasses: [],\n        moocsAssignment: [],\n        assignmentRefresh: []\n      });\n    };\n\n    this.handleChangeClass = name => event => {\n      this.setState({\n        moocsAssignment: event.target.value\n      });\n      let roomClasses = event.target.value.map(element => element.id);\n      let assignmentRefresh = event.target.value.map(element => {\n        let data = {\n          assignementId: element.id,\n          classId: element.class.id,\n          className: element.class.name,\n          subjectName: element.subject.name,\n          subjectId: element.subject.id\n        };\n        return data;\n      });\n      this.setState({\n        roomClasses,\n        assignmentRefresh\n      });\n    };\n\n    this.onDrop = e => {\n      if (e.target.files[0] !== undefined) {\n        let file = e.target.files[0];\n        this.setState({\n          moocsFile: file,\n          moocsText: file.name\n        });\n      } else {\n        this.setState({\n          messageAlerte: \"Vous n'avez pas choisir un vidÃ©o\",\n          alerteFiltre: true\n        });\n        setTimeout(() => {\n          this.setState({\n            messageAlerte: \"\",\n            alerteFiltre: false\n          });\n        }, 4000);\n      }\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      let userReresh = {\n        profileId: this.props.userProfile.id,\n        name: this.props.userProfile.user.name,\n        surname: this.props.userProfile.user.surname\n      };\n      let data = {\n        topicMoocs: this.state.topicMoocs,\n        idAssignement: this.state.roomClasses,\n        prerequiste: this.state.prerequiste,\n        educationalGoals: this.state.educationalGoals,\n        SessionMoocs: this.state.SessionMoocs,\n        durationMoocs: this.state.durationMoocs,\n        status: true,\n        moocsFile: this.state.moocsFile,\n        posteur: this.props.userProfile.id,\n        id: this.state.moocsItem.id,\n        moocsUrl: this.state.moocsUrl,\n        assignmentRefresh: this.state.assignmentRefresh,\n        userReresh\n      };\n      this.props.editMoocs(data);\n      this.setState({\n        isOpen: false,\n        moocsItem: {},\n        moocsText: \"\",\n        moocsFile: null,\n        topicMoocs: \"\",\n        prerequiste: \"\",\n        educationalGoals: \"\",\n        SessionMoocs: \"\",\n        durationMoocs: 30,\n        courseAssignment: [],\n        roomClasses: [],\n        itemSubject: \"\",\n        moocsUrl: \"\",\n        moocsAssignment: []\n      });\n    };\n\n    this.editMoocsShowModal = item => {\n      let roomClasses = item.moocsAssignCourse.map(element => element.assignementId);\n      let moocsAssignment = [];\n      let courseAssignment = [];\n      let assignmentRefresh = [];\n\n      if (this.props.userProfile.role_id === roleIdProfessor) {\n        courseAssignment = this.props.assignmentClassSubjectProf.filter(element => element.fk_id_subject_v4 === item.moocsAssignCourse[0].subjectId);\n        moocsAssignment = this.props.assignmentClassSubjectProf.filter(element => roomClasses.includes(element.id));\n        assignmentRefresh = moocsAssignment.map(element => {\n          let data = {\n            assignementId: element.id,\n            classId: element.class.id,\n            className: element.class.name,\n            subjectName: element.subject.name,\n            subjectId: element.subject.id\n          };\n          return data;\n        });\n      } else {\n        courseAssignment = this.props.courseAssignment.filter(element => element.fk_id_subject_v4 === item.moocsAssignCourse[0].subjectId);\n        moocsAssignment = this.props.courseAssignment.filter(element => roomClasses.includes(element.id));\n        assignmentRefresh = moocsAssignment.map(element => {\n          let data = {\n            assignementId: element.id,\n            classId: element.class.id,\n            className: element.class.name,\n            subjectName: element.subject.name,\n            subjectId: element.subject.id\n          };\n          return data;\n        });\n      }\n\n      this.setState({\n        moocsAssignment,\n        isOpen: true,\n        moocsItem: item,\n        moocsText: item.moocsUrl.slice(59),\n        moocsUrl: item.moocsUrl,\n        topicMoocs: item.moocsTopic,\n        prerequiste: item.prerequiste,\n        educationalGoals: item.educationalGoals,\n        SessionMoocs: item.moocsSession,\n        dateOfCreation: new Date(),\n        durationMoocs: 30,\n        courseAssignment: courseAssignment,\n        assignmentRefresh: assignmentRefresh,\n        roomClasses: roomClasses,\n        itemSubject: JSON.stringify({\n          subjectId: item.moocsAssignCourse[0].subjectId,\n          subjectName: item.moocsAssignCourse[0].subjectName\n        })\n      });\n    };\n\n    this.state = {\n      isOpen: false,\n      deleteIsOpen: false,\n      moocsItem: {},\n      moocsText: \"\",\n      moocsFile: null,\n      topicMoocs: \"\",\n      prerequiste: \"\",\n      educationalGoals: \"\",\n      SessionMoocs: \"\",\n      dateOfCreation: new Date(),\n      durationMoocs: \"\",\n      courseAssignment: [],\n      roomClasses: [],\n      moocsAssignment: [],\n      assignmentRefresh: [],\n      id: null,\n      moocsUrl: \"\"\n    };\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.editMoocsShowModal = this.editMoocsShowModal.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleCancel() {\n    this.setState({\n      isOpen: false,\n      deleteIsOpen: false\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row col-lg-12 col-md-12 bd-highlight\",\n      style: {\n        backgroundColor: \"#FFFFFF\",\n        width: \"100%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }\n    }, !_.isEmpty(this.props.listMoocs) ? this.props.listMoocs.map((moocsItem, index) => /*#__PURE__*/React.createElement(MoocsItem, {\n      key: index,\n      moocsItem: moocsItem,\n      editMoocsShowModal: this.editMoocsShowModal,\n      handleDelete: this.handleDelete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 15\n      }\n    })) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 13\n      }\n    })), this.state.isOpen === true ? /*#__PURE__*/React.createElement(EditMoocs, {\n      values: this.state,\n      handleAnnule: this.handleCancel,\n      handleChange: this.handleChange,\n      handleSubmit: this.handleSubmit,\n      handleChangeSubject: this.handleChangeSubject,\n      handleChangeClass: this.handleChangeClass,\n      onDrop: this.onDrop,\n      subjects: this.props.subjects,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }\n    }) : \"\", this.state.deleteIsOpen === true ? /*#__PURE__*/React.createElement(DeleteMoocs, {\n      handleCancel: this.handleCancel,\n      deleteIsOpen: this.state.deleteIsOpen,\n      submitDeleteMoocs: this.submitDeleteMoocs,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }\n    }) : \"\");\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    userProfile: state.auth.userProfile\n  };\n}\n\nexport default connect(mapStateToProps, {\n  deleteMoocs,\n  editMoocs\n})(MoocsList);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Learning/routes/Moocs/MoocsList.js"],"names":["React","Component","connect","deleteMoocs","editMoocs","MoocsItem","DeleteMoocs","EditMoocs","_","roleIdProfessor","MoocsList","constructor","props","submitDeleteMoocs","event","state","deleteItem","setState","deleteIsOpen","handleDelete","item","handleChange","name","target","value","handleChangeSubject","obj","JSON","parse","courseAssignment","filter","element","fk_id_subject_v4","subjectId","itemSubject","roomClasses","moocsAssignment","assignmentRefresh","handleChangeClass","map","id","data","assignementId","classId","class","className","subjectName","subject","onDrop","e","files","undefined","file","moocsFile","moocsText","messageAlerte","alerteFiltre","setTimeout","handleSubmit","preventDefault","userReresh","profileId","userProfile","user","surname","topicMoocs","idAssignement","prerequiste","educationalGoals","SessionMoocs","durationMoocs","status","posteur","moocsItem","moocsUrl","isOpen","editMoocsShowModal","moocsAssignCourse","role_id","assignmentClassSubjectProf","includes","slice","moocsTopic","moocsSession","dateOfCreation","Date","stringify","handleCancel","bind","render","backgroundColor","width","isEmpty","listMoocs","index","subjects","mapStateToProps","auth"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,qCAAvC;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,SAASC,eAAT,QAAgC,8BAAhC;;AACA,MAAMC,SAAN,SAAwBT,SAAxB,CAAkC;AAChCU,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAmCnBC,iBAnCmB,GAmCEC,KAAD,IAAW;AAC7B,WAAKF,KAAL,CAAWT,WAAX,CAAuB,KAAKY,KAAL,CAAWC,UAAlC;AACA,WAAKC,QAAL,CAAc;AACZC,QAAAA,YAAY,EAAE;AADF,OAAd;AAGD,KAxCkB;;AAAA,SA0CnBC,YA1CmB,GA0CHC,IAAD,IAAU;AACvB,WAAKH,QAAL,CAAc;AAAEC,QAAAA,YAAY,EAAE,IAAhB;AAAsBF,QAAAA,UAAU,EAAEI;AAAlC,OAAd;AACD,KA5CkB;;AAAA,SA6CnBC,YA7CmB,GA6CHC,IAAD,IAAWR,KAAD,IAAW;AAClC,WAAKG,QAAL,CAAc;AAAE,SAACK,IAAD,GAAQR,KAAK,CAACS,MAAN,CAAaC;AAAvB,OAAd;AACD,KA/CkB;;AAAA,SAiDnBC,mBAjDmB,GAiDIH,IAAD,IAAWR,KAAD,IAAW;AACzC,UAAIY,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWd,KAAK,CAACS,MAAN,CAAaC,KAAxB,CAAV;AACA,UAAIK,gBAAgB,GAAG,KAAKjB,KAAL,CAAWiB,gBAAX,CAA4BC,MAA5B,CACpBC,OAAD,IAAaA,OAAO,CAACC,gBAAR,KAA6BN,GAAG,CAACO,SADzB,CAAvB;AAGA,WAAKhB,QAAL,CAAc;AACZiB,QAAAA,WAAW,EAAEpB,KAAK,CAACS,MAAN,CAAaC,KADd;AAEZK,QAAAA,gBAAgB,EAAEA,gBAFN;AAGZM,QAAAA,WAAW,EAAE,EAHD;AAIZC,QAAAA,eAAe,EAAE,EAJL;AAKZC,QAAAA,iBAAiB,EAAE;AALP,OAAd;AAOD,KA7DkB;;AAAA,SA8DnBC,iBA9DmB,GA8DEhB,IAAD,IAAWR,KAAD,IAAW;AACvC,WAAKG,QAAL,CAAc;AAAEmB,QAAAA,eAAe,EAAEtB,KAAK,CAACS,MAAN,CAAaC;AAAhC,OAAd;AACA,UAAIW,WAAW,GAAGrB,KAAK,CAACS,MAAN,CAAaC,KAAb,CAAmBe,GAAnB,CAAwBR,OAAD,IAAaA,OAAO,CAACS,EAA5C,CAAlB;AACA,UAAIH,iBAAiB,GAAGvB,KAAK,CAACS,MAAN,CAAaC,KAAb,CAAmBe,GAAnB,CAAwBR,OAAD,IAAa;AAC1D,YAAIU,IAAI,GAAG;AACTC,UAAAA,aAAa,EAAEX,OAAO,CAACS,EADd;AAETG,UAAAA,OAAO,EAAEZ,OAAO,CAACa,KAAR,CAAcJ,EAFd;AAGTK,UAAAA,SAAS,EAAEd,OAAO,CAACa,KAAR,CAActB,IAHhB;AAITwB,UAAAA,WAAW,EAAEf,OAAO,CAACgB,OAAR,CAAgBzB,IAJpB;AAKTW,UAAAA,SAAS,EAAEF,OAAO,CAACgB,OAAR,CAAgBP;AALlB,SAAX;AAOA,eAAOC,IAAP;AACD,OATuB,CAAxB;AAUA,WAAKxB,QAAL,CAAc;AAAEkB,QAAAA,WAAF;AAAeE,QAAAA;AAAf,OAAd;AACD,KA5EkB;;AAAA,SA6EnBW,MA7EmB,GA6ETC,CAAD,IAAO;AACd,UAAIA,CAAC,CAAC1B,MAAF,CAAS2B,KAAT,CAAe,CAAf,MAAsBC,SAA1B,EAAqC;AACnC,YAAIC,IAAI,GAAGH,CAAC,CAAC1B,MAAF,CAAS2B,KAAT,CAAe,CAAf,CAAX;AACA,aAAKjC,QAAL,CAAc;AAAEoC,UAAAA,SAAS,EAAED,IAAb;AAAmBE,UAAAA,SAAS,EAAEF,IAAI,CAAC9B;AAAnC,SAAd;AACD,OAHD,MAGO;AACL,aAAKL,QAAL,CAAc;AACZsC,UAAAA,aAAa,EAAE,kCADH;AAEZC,UAAAA,YAAY,EAAE;AAFF,SAAd;AAIAC,QAAAA,UAAU,CAAC,MAAM;AACf,eAAKxC,QAAL,CAAc;AAAEsC,YAAAA,aAAa,EAAE,EAAjB;AAAqBC,YAAAA,YAAY,EAAE;AAAnC,WAAd;AACD,SAFS,EAEP,IAFO,CAAV;AAGD;AACF,KA1FkB;;AAAA,SA2FnBE,YA3FmB,GA2FH5C,KAAD,IAAW;AACxBA,MAAAA,KAAK,CAAC6C,cAAN;AACA,UAAIC,UAAU,GAAG;AACfC,QAAAA,SAAS,EAAE,KAAKjD,KAAL,CAAWkD,WAAX,CAAuBtB,EADnB;AAEflB,QAAAA,IAAI,EAAE,KAAKV,KAAL,CAAWkD,WAAX,CAAuBC,IAAvB,CAA4BzC,IAFnB;AAGf0C,QAAAA,OAAO,EAAE,KAAKpD,KAAL,CAAWkD,WAAX,CAAuBC,IAAvB,CAA4BC;AAHtB,OAAjB;AAKA,UAAIvB,IAAI,GAAG;AACTwB,QAAAA,UAAU,EAAE,KAAKlD,KAAL,CAAWkD,UADd;AAETC,QAAAA,aAAa,EAAE,KAAKnD,KAAL,CAAWoB,WAFjB;AAGTgC,QAAAA,WAAW,EAAE,KAAKpD,KAAL,CAAWoD,WAHf;AAITC,QAAAA,gBAAgB,EAAE,KAAKrD,KAAL,CAAWqD,gBAJpB;AAKTC,QAAAA,YAAY,EAAE,KAAKtD,KAAL,CAAWsD,YALhB;AAMTC,QAAAA,aAAa,EAAE,KAAKvD,KAAL,CAAWuD,aANjB;AAOTC,QAAAA,MAAM,EAAE,IAPC;AAQTlB,QAAAA,SAAS,EAAE,KAAKtC,KAAL,CAAWsC,SARb;AASTmB,QAAAA,OAAO,EAAE,KAAK5D,KAAL,CAAWkD,WAAX,CAAuBtB,EATvB;AAUTA,QAAAA,EAAE,EAAE,KAAKzB,KAAL,CAAW0D,SAAX,CAAqBjC,EAVhB;AAWTkC,QAAAA,QAAQ,EAAE,KAAK3D,KAAL,CAAW2D,QAXZ;AAYTrC,QAAAA,iBAAiB,EAAE,KAAKtB,KAAL,CAAWsB,iBAZrB;AAaTuB,QAAAA;AAbS,OAAX;AAeA,WAAKhD,KAAL,CAAWR,SAAX,CAAqBqC,IAArB;AACA,WAAKxB,QAAL,CAAc;AACZ0D,QAAAA,MAAM,EAAE,KADI;AAEZF,QAAAA,SAAS,EAAE,EAFC;AAGZnB,QAAAA,SAAS,EAAE,EAHC;AAIZD,QAAAA,SAAS,EAAE,IAJC;AAKZY,QAAAA,UAAU,EAAE,EALA;AAMZE,QAAAA,WAAW,EAAE,EAND;AAOZC,QAAAA,gBAAgB,EAAE,EAPN;AAQZC,QAAAA,YAAY,EAAE,EARF;AASZC,QAAAA,aAAa,EAAE,EATH;AAUZzC,QAAAA,gBAAgB,EAAE,EAVN;AAWZM,QAAAA,WAAW,EAAE,EAXD;AAYZD,QAAAA,WAAW,EAAE,EAZD;AAaZwC,QAAAA,QAAQ,EAAE,EAbE;AAcZtC,QAAAA,eAAe,EAAE;AAdL,OAAd;AAgBD,KAlIkB;;AAAA,SAmInBwC,kBAnImB,GAmIGxD,IAAD,IAAU;AAC5B,UAAIe,WAAW,GAAGf,IAAI,CAACyD,iBAAL,CAAuBtC,GAAvB,CAChBR,OAAD,IAAaA,OAAO,CAACW,aADJ,CAAlB;AAGD,UAAIN,eAAe,GAAG,EAAtB;AACA,UAAIP,gBAAgB,GAAG,EAAvB;AACA,UAAIQ,iBAAiB,GAAG,EAAxB;;AACA,UAAI,KAAKzB,KAAL,CAAWkD,WAAX,CAAuBgB,OAAvB,KAAmCrE,eAAvC,EAAwD;AACtDoB,QAAAA,gBAAgB,GAAG,KAAKjB,KAAL,CAAWmE,0BAAX,CAAsCjD,MAAtC,CAChBC,OAAD,IACEA,OAAO,CAACC,gBAAR,KAA6BZ,IAAI,CAACyD,iBAAL,CAAuB,CAAvB,EAA0B5C,SAFxC,CAAnB;AAIAG,QAAAA,eAAe,GAAG,KAAKxB,KAAL,CAAWmE,0BAAX,CAAsCjD,MAAtC,CACfC,OAAD,IAAaI,WAAW,CAAC6C,QAAZ,CAAqBjD,OAAO,CAACS,EAA7B,CADG,CAAlB;AAGAH,QAAAA,iBAAiB,GAAGD,eAAe,CAACG,GAAhB,CAAqBR,OAAD,IAAa;AACnD,cAAIU,IAAI,GAAG;AACTC,YAAAA,aAAa,EAAEX,OAAO,CAACS,EADd;AAETG,YAAAA,OAAO,EAAEZ,OAAO,CAACa,KAAR,CAAcJ,EAFd;AAGTK,YAAAA,SAAS,EAAEd,OAAO,CAACa,KAAR,CAActB,IAHhB;AAITwB,YAAAA,WAAW,EAAEf,OAAO,CAACgB,OAAR,CAAgBzB,IAJpB;AAKTW,YAAAA,SAAS,EAAEF,OAAO,CAACgB,OAAR,CAAgBP;AALlB,WAAX;AAOA,iBAAOC,IAAP;AACD,SATmB,CAApB;AAUD,OAlBD,MAkBO;AACLZ,QAAAA,gBAAgB,GAAG,KAAKjB,KAAL,CAAWiB,gBAAX,CAA4BC,MAA5B,CAChBC,OAAD,IACEA,OAAO,CAACC,gBAAR,KAA6BZ,IAAI,CAACyD,iBAAL,CAAuB,CAAvB,EAA0B5C,SAFxC,CAAnB;AAIAG,QAAAA,eAAe,GAAG,KAAKxB,KAAL,CAAWiB,gBAAX,CAA4BC,MAA5B,CAAoCC,OAAD,IACnDI,WAAW,CAAC6C,QAAZ,CAAqBjD,OAAO,CAACS,EAA7B,CADgB,CAAlB;AAGAH,QAAAA,iBAAiB,GAAGD,eAAe,CAACG,GAAhB,CAAqBR,OAAD,IAAa;AACnD,cAAIU,IAAI,GAAG;AACTC,YAAAA,aAAa,EAAEX,OAAO,CAACS,EADd;AAETG,YAAAA,OAAO,EAAEZ,OAAO,CAACa,KAAR,CAAcJ,EAFd;AAGTK,YAAAA,SAAS,EAAEd,OAAO,CAACa,KAAR,CAActB,IAHhB;AAITwB,YAAAA,WAAW,EAAEf,OAAO,CAACgB,OAAR,CAAgBzB,IAJpB;AAKTW,YAAAA,SAAS,EAAEF,OAAO,CAACgB,OAAR,CAAgBP;AALlB,WAAX;AAOA,iBAAOC,IAAP;AACD,SATmB,CAApB;AAUD;;AAED,WAAKxB,QAAL,CAAc;AACZmB,QAAAA,eADY;AAEZuC,QAAAA,MAAM,EAAE,IAFI;AAGZF,QAAAA,SAAS,EAAErD,IAHC;AAIZkC,QAAAA,SAAS,EAAElC,IAAI,CAACsD,QAAL,CAAcO,KAAd,CAAoB,EAApB,CAJC;AAKZP,QAAAA,QAAQ,EAAEtD,IAAI,CAACsD,QALH;AAMZT,QAAAA,UAAU,EAAE7C,IAAI,CAAC8D,UANL;AAOZf,QAAAA,WAAW,EAAE/C,IAAI,CAAC+C,WAPN;AAQZC,QAAAA,gBAAgB,EAAEhD,IAAI,CAACgD,gBARX;AASZC,QAAAA,YAAY,EAAEjD,IAAI,CAAC+D,YATP;AAUZC,QAAAA,cAAc,EAAE,IAAIC,IAAJ,EAVJ;AAWZf,QAAAA,aAAa,EAAE,EAXH;AAYZzC,QAAAA,gBAAgB,EAAEA,gBAZN;AAaZQ,QAAAA,iBAAiB,EAAEA,iBAbP;AAcZF,QAAAA,WAAW,EAAEA,WAdD;AAeZD,QAAAA,WAAW,EAAEP,IAAI,CAAC2D,SAAL,CAAe;AAC1BrD,UAAAA,SAAS,EAAEb,IAAI,CAACyD,iBAAL,CAAuB,CAAvB,EAA0B5C,SADX;AAE1Ba,UAAAA,WAAW,EAAE1B,IAAI,CAACyD,iBAAL,CAAuB,CAAvB,EAA0B/B;AAFb,SAAf;AAfD,OAAd;AAoBD,KApMkB;;AAEjB,SAAK/B,KAAL,GAAa;AACX4D,MAAAA,MAAM,EAAE,KADG;AAEXzD,MAAAA,YAAY,EAAE,KAFH;AAGXuD,MAAAA,SAAS,EAAE,EAHA;AAIXnB,MAAAA,SAAS,EAAE,EAJA;AAKXD,MAAAA,SAAS,EAAE,IALA;AAMXY,MAAAA,UAAU,EAAE,EAND;AAOXE,MAAAA,WAAW,EAAE,EAPF;AAQXC,MAAAA,gBAAgB,EAAE,EARP;AASXC,MAAAA,YAAY,EAAE,EATH;AAUXe,MAAAA,cAAc,EAAE,IAAIC,IAAJ,EAVL;AAWXf,MAAAA,aAAa,EAAE,EAXJ;AAYXzC,MAAAA,gBAAgB,EAAE,EAZP;AAaXM,MAAAA,WAAW,EAAE,EAbF;AAcXC,MAAAA,eAAe,EAAE,EAdN;AAeXC,MAAAA,iBAAiB,EAAE,EAfR;AAgBXG,MAAAA,EAAE,EAAE,IAhBO;AAiBXkC,MAAAA,QAAQ,EAAE;AAjBC,KAAb;AAmBA,SAAKa,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKrE,YAAL,GAAoB,KAAKA,YAAL,CAAkBqE,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKnE,YAAL,GAAoB,KAAKA,YAAL,CAAkBmE,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKZ,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBY,IAAxB,CAA6B,IAA7B,CAA1B;AACA,SAAK/D,mBAAL,GAA2B,KAAKA,mBAAL,CAAyB+D,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKlD,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBkD,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKxC,MAAL,GAAc,KAAKA,MAAL,CAAYwC,IAAZ,CAAiB,IAAjB,CAAd;AAEA,SAAK9B,YAAL,GAAoB,KAAKA,YAAL,CAAkB8B,IAAlB,CAAuB,IAAvB,CAApB;AACD;;AAEDD,EAAAA,YAAY,GAAG;AACb,SAAKtE,QAAL,CAAc;AAAE0D,MAAAA,MAAM,EAAE,KAAV;AAAiBzD,MAAAA,YAAY,EAAE;AAA/B,KAAd;AACD;;AAmKDuE,EAAAA,MAAM,GAAG;AACP,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,SAAS,EAAC,sCADZ;AAEE,MAAA,KAAK,EAAE;AAAEC,QAAAA,eAAe,EAAE,SAAnB;AAA8BC,QAAAA,KAAK,EAAE;AAArC,OAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIG,CAACnF,CAAC,CAACoF,OAAF,CAAU,KAAKhF,KAAL,CAAWiF,SAArB,CAAD,GACC,KAAKjF,KAAL,CAAWiF,SAAX,CAAqBtD,GAArB,CAAyB,CAACkC,SAAD,EAAYqB,KAAZ,kBACvB,oBAAC,SAAD;AACE,MAAA,GAAG,EAAEA,KADP;AAEE,MAAA,SAAS,EAAErB,SAFb;AAGE,MAAA,kBAAkB,EAAE,KAAKG,kBAH3B;AAIE,MAAA,YAAY,EAAE,KAAKzD,YAJrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADD,gBAUC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAdJ,CADF,EAmBG,KAAKJ,KAAL,CAAW4D,MAAX,KAAsB,IAAtB,gBACC,oBAAC,SAAD;AACE,MAAA,MAAM,EAAE,KAAK5D,KADf;AAEE,MAAA,YAAY,EAAE,KAAKwE,YAFrB;AAGE,MAAA,YAAY,EAAE,KAAKlE,YAHrB;AAIE,MAAA,YAAY,EAAE,KAAKqC,YAJrB;AAKE,MAAA,mBAAmB,EAAE,KAAKjC,mBAL5B;AAME,MAAA,iBAAiB,EAAE,KAAKa,iBAN1B;AAOE,MAAA,MAAM,EAAE,KAAKU,MAPf;AAQE,MAAA,QAAQ,EAAE,KAAKpC,KAAL,CAAWmF,QARvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAYC,EA/BJ,EAkCG,KAAKhF,KAAL,CAAWG,YAAX,KAA4B,IAA5B,gBACC,oBAAC,WAAD;AACE,MAAA,YAAY,EAAE,KAAKqE,YADrB;AAEE,MAAA,YAAY,EAAE,KAAKxE,KAAL,CAAWG,YAF3B;AAGE,MAAA,iBAAiB,EAAE,KAAKL,iBAH1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAOC,EAzCJ,CADF;AA+CD;;AAtP+B;;AAwPlC,SAASmF,eAAT,CAAyBjF,KAAzB,EAAgC;AAC9B,SAAO;AACL+C,IAAAA,WAAW,EAAE/C,KAAK,CAACkF,IAAN,CAAWnC;AADnB,GAAP;AAID;;AAED,eAAe5D,OAAO,CAAC8F,eAAD,EAAkB;AAAE7F,EAAAA,WAAF;AAAeC,EAAAA;AAAf,CAAlB,CAAP,CAAqDM,SAArD,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { deleteMoocs, editMoocs } from \"../../../../../actions/MoocsActions\";\nimport MoocsItem from \"./MoocsItem\";\nimport DeleteMoocs from \"./DeleteMoocs\";\nimport EditMoocs from \"./EditMoocs\";\nimport _ from \"lodash\";\nimport { roleIdProfessor } from \"../../../../../config/config\";\nclass MoocsList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      deleteIsOpen: false,\n      moocsItem: {},\n      moocsText: \"\",\n      moocsFile: null,\n      topicMoocs: \"\",\n      prerequiste: \"\",\n      educationalGoals: \"\",\n      SessionMoocs: \"\",\n      dateOfCreation: new Date(),\n      durationMoocs: \"\",\n      courseAssignment: [],\n      roomClasses: [],\n      moocsAssignment: [],\n      assignmentRefresh: [],\n      id: null,\n      moocsUrl: \"\",\n    };\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.editMoocsShowModal = this.editMoocsShowModal.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleCancel() {\n    this.setState({ isOpen: false, deleteIsOpen: false });\n  }\n  submitDeleteMoocs = (event) => {\n    this.props.deleteMoocs(this.state.deleteItem);\n    this.setState({\n      deleteIsOpen: false,\n    });\n  };\n\n  handleDelete = (item) => {\n    this.setState({ deleteIsOpen: true, deleteItem: item });\n  };\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n \n  handleChangeSubject = (name) => (event) => {\n    let obj = JSON.parse(event.target.value);\n    let courseAssignment = this.props.courseAssignment.filter(\n      (element) => element.fk_id_subject_v4 === obj.subjectId\n    );\n    this.setState({\n      itemSubject: event.target.value,\n      courseAssignment: courseAssignment,\n      roomClasses: [],\n      moocsAssignment: [],\n      assignmentRefresh: [],\n    });\n  };\n  handleChangeClass = (name) => (event) => {\n    this.setState({ moocsAssignment: event.target.value });\n    let roomClasses = event.target.value.map((element) => element.id);\n    let assignmentRefresh = event.target.value.map((element) => {\n      let data = {\n        assignementId: element.id,\n        classId: element.class.id,\n        className: element.class.name,\n        subjectName: element.subject.name,\n        subjectId: element.subject.id,\n      };\n      return data;\n    });\n    this.setState({ roomClasses, assignmentRefresh });\n  };\n  onDrop = (e) => {\n    if (e.target.files[0] !== undefined) {\n      let file = e.target.files[0];\n      this.setState({ moocsFile: file, moocsText: file.name });\n    } else {\n      this.setState({\n        messageAlerte: \"Vous n'avez pas choisir un vidÃ©o\",\n        alerteFiltre: true,\n      });\n      setTimeout(() => {\n        this.setState({ messageAlerte: \"\", alerteFiltre: false });\n      }, 4000);\n    }\n  };\n  handleSubmit = (event) => {\n    event.preventDefault();\n    let userReresh = {\n      profileId: this.props.userProfile.id,\n      name: this.props.userProfile.user.name,\n      surname: this.props.userProfile.user.surname,\n    };\n    let data = {\n      topicMoocs: this.state.topicMoocs,\n      idAssignement: this.state.roomClasses,\n      prerequiste: this.state.prerequiste,\n      educationalGoals: this.state.educationalGoals,\n      SessionMoocs: this.state.SessionMoocs,\n      durationMoocs: this.state.durationMoocs,\n      status: true,\n      moocsFile: this.state.moocsFile,\n      posteur: this.props.userProfile.id,\n      id: this.state.moocsItem.id,\n      moocsUrl: this.state.moocsUrl,\n      assignmentRefresh: this.state.assignmentRefresh,\n      userReresh,\n    };\n    this.props.editMoocs(data);\n    this.setState({\n      isOpen: false,\n      moocsItem: {},\n      moocsText: \"\",\n      moocsFile: null,\n      topicMoocs: \"\",\n      prerequiste: \"\",\n      educationalGoals: \"\",\n      SessionMoocs: \"\",\n      durationMoocs: 30,\n      courseAssignment: [],\n      roomClasses: [],\n      itemSubject: \"\",\n      moocsUrl: \"\",\n      moocsAssignment: [],\n    });\n  };\n  editMoocsShowModal = (item) => {\n     let roomClasses = item.moocsAssignCourse.map(\n      (element) => element.assignementId\n    );\n    let moocsAssignment = [];\n    let courseAssignment = [];\n    let assignmentRefresh = [];\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      courseAssignment = this.props.assignmentClassSubjectProf.filter(\n        (element) =>\n          element.fk_id_subject_v4 === item.moocsAssignCourse[0].subjectId\n      );\n      moocsAssignment = this.props.assignmentClassSubjectProf.filter(\n        (element) => roomClasses.includes(element.id)\n      );\n      assignmentRefresh = moocsAssignment.map((element) => {\n        let data = {\n          assignementId: element.id,\n          classId: element.class.id,\n          className: element.class.name,\n          subjectName: element.subject.name,\n          subjectId: element.subject.id,\n        };\n        return data;\n      });\n    } else {\n      courseAssignment = this.props.courseAssignment.filter(\n        (element) =>\n          element.fk_id_subject_v4 === item.moocsAssignCourse[0].subjectId\n      );\n      moocsAssignment = this.props.courseAssignment.filter((element) =>\n        roomClasses.includes(element.id)\n      );\n      assignmentRefresh = moocsAssignment.map((element) => {\n        let data = {\n          assignementId: element.id,\n          classId: element.class.id,\n          className: element.class.name,\n          subjectName: element.subject.name,\n          subjectId: element.subject.id,\n        };\n        return data;\n      });\n    }\n\n    this.setState({\n      moocsAssignment,\n      isOpen: true,\n      moocsItem: item,\n      moocsText: item.moocsUrl.slice(59),\n      moocsUrl: item.moocsUrl,\n      topicMoocs: item.moocsTopic,\n      prerequiste: item.prerequiste,\n      educationalGoals: item.educationalGoals,\n      SessionMoocs: item.moocsSession,\n      dateOfCreation: new Date(),\n      durationMoocs: 30,\n      courseAssignment: courseAssignment,\n      assignmentRefresh: assignmentRefresh,\n      roomClasses: roomClasses,\n      itemSubject: JSON.stringify({\n        subjectId: item.moocsAssignCourse[0].subjectId,\n        subjectName: item.moocsAssignCourse[0].subjectName,\n      }),\n    });\n  };\n  render() {\n    return (\n      <div>\n        <div\n          className=\"row col-lg-12 col-md-12 bd-highlight\"\n          style={{ backgroundColor: \"#FFFFFF\", width: \"100%\" }}\n        >\n          {!_.isEmpty(this.props.listMoocs) ? (\n            this.props.listMoocs.map((moocsItem, index) => (\n              <MoocsItem\n                key={index}\n                moocsItem={moocsItem}\n                editMoocsShowModal={this.editMoocsShowModal}\n                handleDelete={this.handleDelete}\n              />\n            ))\n          ) : (\n            <div></div>\n          )}\n        </div>\n\n        {this.state.isOpen === true ? (\n          <EditMoocs\n            values={this.state}\n            handleAnnule={this.handleCancel}\n            handleChange={this.handleChange}\n            handleSubmit={this.handleSubmit}\n            handleChangeSubject={this.handleChangeSubject}\n            handleChangeClass={this.handleChangeClass}\n            onDrop={this.onDrop}\n            subjects={this.props.subjects}\n          />\n        ) : (\n          \"\"\n        )}\n\n        {this.state.deleteIsOpen === true ? (\n          <DeleteMoocs\n            handleCancel={this.handleCancel}\n            deleteIsOpen={this.state.deleteIsOpen}\n            submitDeleteMoocs={this.submitDeleteMoocs}\n          />\n        ) : (\n          \"\"\n        )}\n\n      </div>\n    );\n  }\n}\nfunction mapStateToProps(state) {\n  return {\n    userProfile: state.auth.userProfile,\n\n  };\n}\n\nexport default connect(mapStateToProps, { deleteMoocs, editMoocs })(MoocsList);\n"]},"metadata":{},"sourceType":"module"}