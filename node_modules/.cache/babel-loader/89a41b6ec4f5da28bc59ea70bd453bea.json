{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/FinancialManagement/routes/ServiceAllocation/ServiceAllocationComp/EditAllocationItem.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tab from '@material-ui/core/Tab';\nimport moment from 'moment';\nimport { frequencyMonthly, frequencyQuarterly, frequencyAnnually } from '../../../../../../config/config';\nimport { UncontrolledAlert } from 'reactstrap';\n\nfunction TabContainer(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 10\n    }\n  }, props.children);\n}\n\nTabContainer.propTypes = {\n  children: PropTypes.node.isRequired\n};\nconst monthNames = ['Jan.', 'Fev.', 'Mar.', 'Avr.', 'Mai.', 'Jui.', 'Jul.', 'Aou.', 'Sep.', 'Oct.', 'Nov.', 'Dec.'];\n\nclass EditAllocationItem extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = (monthId, monthValue) => event => {\n      var tab = this.state.SelectedMonthList;\n\n      if (new Date() - new Date(monthValue) > 0) {\n        this.setState({\n          alerteMonth: true\n        });\n        setTimeout(() => {\n          this.setState({\n            alerteMonth: false\n          });\n        }, 1500);\n      } else {\n        var index = tab.findIndex(element => element == parseInt(monthId, 10));\n\n        if (index == -1) {\n          tab.push(parseInt(monthId, 10));\n          this.setState({\n            SelectedMonthList: tab\n          });\n        } else {\n          tab.splice(index, 1);\n          this.setState({\n            SelectedMonthList: tab\n          });\n        }\n      }\n    };\n\n    this.SelectedMonth = monthId => {\n      var tab = this.state.SelectedMonthList;\n      let checked = false;\n      var test = tab.findIndex(element => element == parseInt(monthId, 10));\n\n      if (this.props.item.allocation_month.length !== 0) {\n        if (test == -1) {\n          checked = false;\n        } else {\n          checked = true;\n        }\n      }\n\n      return checked;\n    };\n\n    this.state = {\n      value: 0,\n      SelectedMonthList: [],\n      monthList: [],\n      alerteMonth: false\n    };\n    this.SelectedMonth = this.SelectedMonth.bind(this);\n  }\n\n  componentDidMount() {\n    let element = this.props.item;\n    var dateStart = moment(element.service_v2.start_date_service);\n    var dateEnd = moment(element.service_v2.end_date_service);\n    var monthList = [];\n\n    while (dateEnd > dateStart || dateStart.format('M') === dateEnd.format('M')) {\n      var month = new Date(dateStart.format('YYYY-MM-01'));\n      monthList.push({\n        idMonth: parseInt(dateStart.format('MM'), 10),\n        label: monthNames[month.getMonth()],\n        value: dateStart.format('YYYY-MM-01')\n      });\n      dateStart.add(1, 'month');\n    }\n\n    const SelectedMonthList = this.props.item.allocation_month;\n    this.setState({\n      monthList: monthList,\n      SelectedMonthList\n    });\n  } // componentDidUpdate(prevProps, prevState) {\n  //   if (prevProps.item.fk_id_service != this.props.item.fk_id_service) {\n  //     let element = this.props.item;\n  //     var dateStart = moment(element.service_v2.start_date_service);\n  //     var dateEnd = moment(element.service_v2.end_date_service);\n  //     var monthList = [];\n  //     while (dateEnd > dateStart || dateStart.format('M') === dateEnd.format('M')) {\n  //       var month = new Date(dateStart.format('YYYY-MM-01'));\n  //       monthList.push({\n  //         idMonth: parseInt(dateStart.format('MM'), 10),\n  //         label: monthNames[month.getMonth()],\n  //         value: dateStart.format('YYYY-MM-01'),\n  //       });\n  //       dateStart.add(1, 'month');\n  //     }\n  //     this.setState({\n  //       SelectedMonthList: this.props.item.allocation_month,\n  //       monthList: monthList,\n  //     });\n  //   }\n  // }\n\n\n  render() {\n    //console.log(this.state.SelectedMonthList,'monthList');\n    const {\n      value,\n      monthList\n    } = this.state;\n    let element = this.props.item; // console.log(this.props.item.allocation_month, 'this.props.item.allocation_month');\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, this.state.alerteMonth ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-danger bg-danger text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 15\n      }\n    }, \" Mois non modifiable \"))) : '', /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100 d-flex align-items-center justify-content-center \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(AppBar, {\n      color: \"inherit\",\n      position: \"static\",\n      style: {\n        borderRadius: '80px',\n        border: '0.5px solid #abada8',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'end',\n        width: '92%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      value: value,\n      onChange: this.handleChange,\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Tab, {\n      disabled: true,\n      icon: /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-start \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"p-1 icon-btn zmdi zmdi-check-circle zmdi-hc-1x \",\n        style: {\n          color: '#4a3ea3'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }\n      }), ' ', /*#__PURE__*/React.createElement(\"i\", {\n        className: `${element.service_v2.path_img_service} pl-2 pr-2`,\n        style: {\n          color: 'blue'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"h5\", {\n        className: \" pt-3\",\n        style: {\n          fontWeight: 'bold',\n          color: '#4a3ea3'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }\n      }, element.service_v2.name_fr_service), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex pl-2 align-items-center pt-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 23\n        }\n      }, \"|\"))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Tab, {\n      icon: /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex align-items-center justify-content-start \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"p-1 icon-btn zmdi  zmdi-check-circle zmdi-hc-1x \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }\n      }), ' ', /*#__PURE__*/React.createElement(\"h5\", {\n        className: \" pt-3 pl-2\",\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 21\n        }\n      }, this.props.item.service_v2.fk_id_frequency === frequencyMonthly ? 'Mensuel' : this.props.item.service_v2.fk_id_frequency === frequencyQuarterly ? 'Trimestrielle' : this.props.item.service_v2.fk_id_frequency === frequencyAnnually ? 'Annuelle' : 'Autre Choix')),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Tab, {\n      disabled: true,\n      style: {\n        width: '50px',\n        marginRight: '20px'\n      },\n      icon: /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex  align-items-center justify-content-start \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"p-1 icon-btn  zmdi zmdi-shopping-basket zmdi-hc-2x \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 21\n        }\n      }), ' ', /*#__PURE__*/React.createElement(\"h5\", {\n        className: \" pt-3 pl-2\",\n        style: {\n          fontWeight: 'bold'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 21\n        }\n      }, element.service_v2.price_service)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    })), this.props.item.service_v2.fk_id_frequency === 4 || this.props.item.service_v2.fk_id_frequency === 5 ? /*#__PURE__*/React.createElement(\"div\", {\n      style: {},\n      className: \"col-lg-10 col-md-10  d-flex justify-content-end align-items-center \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-8 col-md-8 d-flex flex-row justify-content-end align-items-center \",\n      style: {\n        borderTop: '2px solid black'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }\n    }, monthList.map(month => {\n      return /*#__PURE__*/React.createElement(\"h6\", {\n        key: month.idMonth,\n        id: month.idMonth,\n        name: month.idMonth,\n        onClick: this.handleChange(month.idMonth, month.value),\n        className: this.SelectedMonth(month.idMonth) === false ? 'pt-3 pl-3 text-center text-secondary' : 'pt-3 pl-3 text-center text-primary',\n        style: {\n          fontWeight: 'bold',\n          textAlign: 'center',\n          cursor: 'pointer'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 23\n        }\n      }, month.label);\n    }))) : '')));\n  }\n\n}\n\nexport default EditAllocationItem;","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/FinancialManagement/routes/ServiceAllocation/ServiceAllocationComp/EditAllocationItem.js"],"names":["React","Component","PropTypes","AppBar","Tab","moment","frequencyMonthly","frequencyQuarterly","frequencyAnnually","UncontrolledAlert","TabContainer","props","padding","children","propTypes","node","isRequired","monthNames","EditAllocationItem","constructor","handleChange","monthId","monthValue","event","tab","state","SelectedMonthList","Date","setState","alerteMonth","setTimeout","index","findIndex","element","parseInt","push","splice","SelectedMonth","checked","test","item","allocation_month","length","value","monthList","bind","componentDidMount","dateStart","service_v2","start_date_service","dateEnd","end_date_service","format","month","idMonth","label","getMonth","add","render","borderRadius","border","display","alignItems","justifyContent","width","color","path_img_service","fontWeight","name_fr_service","fk_id_frequency","marginRight","price_service","borderTop","map","textAlign","cursor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport AppBar from '@material-ui/core/AppBar';\nimport Tab from '@material-ui/core/Tab';\nimport moment from 'moment';\nimport {\n  frequencyMonthly,\n  frequencyQuarterly,\n  frequencyAnnually,\n} from '../../../../../../config/config';\nimport { UncontrolledAlert } from 'reactstrap';\n\nfunction TabContainer(props) {\n  return <div style={{ padding: 20 }}>{props.children}</div>;\n}\n\nTabContainer.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nconst monthNames = [\n  'Jan.',\n  'Fev.',\n  'Mar.',\n  'Avr.',\n  'Mai.',\n  'Jui.',\n  'Jul.',\n  'Aou.',\n  'Sep.',\n  'Oct.',\n  'Nov.',\n  'Dec.',\n];\nclass EditAllocationItem extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: 0,\n      SelectedMonthList: [],\n      monthList: [],\n      alerteMonth: false,\n    };\n    this.SelectedMonth = this.SelectedMonth.bind(this);\n  }\n  handleChange = (monthId, monthValue) => (event) => {\n    var tab = this.state.SelectedMonthList;\n\n    if (new Date() - new Date(monthValue) > 0) {\n      this.setState({\n        alerteMonth: true,\n      });\n      setTimeout(() => {\n        this.setState({\n          alerteMonth: false,\n        });\n      }, 1500);\n    } else {\n      var index = tab.findIndex((element) => element == parseInt(monthId, 10));\n      if (index == -1) {\n        tab.push(parseInt(monthId, 10));\n        this.setState({\n          SelectedMonthList: tab,\n        });\n      } else {\n        tab.splice(index, 1);\n        this.setState({\n          SelectedMonthList: tab,\n        });\n      }\n     }\n  };\n\n  SelectedMonth = (monthId) => {\n    var tab = this.state.SelectedMonthList;\n    let checked = false;\n    var test = tab.findIndex((element) => element == parseInt(monthId, 10));\n\n    if (this.props.item.allocation_month.length !== 0) {\n      if (test == -1) {\n        checked = false;\n      } else {\n        checked = true;\n      }\n    }\n\n    return checked;\n  };\n \n  componentDidMount() {\n    let element = this.props.item;\n    var dateStart = moment(element.service_v2.start_date_service);\n    var dateEnd = moment(element.service_v2.end_date_service);\n    var monthList = [];\n    while (dateEnd > dateStart || dateStart.format('M') === dateEnd.format('M')) {\n      var month = new Date(dateStart.format('YYYY-MM-01'));\n      monthList.push({\n        idMonth: parseInt(dateStart.format('MM'), 10),\n        label: monthNames[month.getMonth()],\n        value: dateStart.format('YYYY-MM-01'),\n      });\n\n      dateStart.add(1, 'month');\n    }\n    const SelectedMonthList = this.props.item.allocation_month;\n    this.setState({\n      monthList: monthList,\n      SelectedMonthList,\n    });\n  }\n  // componentDidUpdate(prevProps, prevState) {\n  //   if (prevProps.item.fk_id_service != this.props.item.fk_id_service) {\n  //     let element = this.props.item;\n  //     var dateStart = moment(element.service_v2.start_date_service);\n  //     var dateEnd = moment(element.service_v2.end_date_service);\n  //     var monthList = [];\n  //     while (dateEnd > dateStart || dateStart.format('M') === dateEnd.format('M')) {\n  //       var month = new Date(dateStart.format('YYYY-MM-01'));\n  //       monthList.push({\n  //         idMonth: parseInt(dateStart.format('MM'), 10),\n  //         label: monthNames[month.getMonth()],\n  //         value: dateStart.format('YYYY-MM-01'),\n  //       });\n\n  //       dateStart.add(1, 'month');\n  //     }\n\n  //     this.setState({\n  //       SelectedMonthList: this.props.item.allocation_month,\n  //       monthList: monthList,\n  //     });\n  //   }\n  // }\n\n  render() {\n    //console.log(this.state.SelectedMonthList,'monthList');\n    const { value, monthList } = this.state;\n    let element = this.props.item;\n    // console.log(this.props.item.allocation_month, 'this.props.item.allocation_month');\n\n    return (\n      <>\n        {this.state.alerteMonth ? (\n          <div className=\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\">\n            <UncontrolledAlert className=\"alert-addon-card bg-danger bg-danger text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\"> Mois non modifiable </span>\n            </UncontrolledAlert>\n          </div>\n        ) : (\n          ''\n        )}\n        <div className=\"w-100 d-flex align-items-center justify-content-center \">\n          <AppBar\n            color=\"inherit\"\n            position=\"static\"\n            style={{\n              borderRadius: '80px',\n              border: '0.5px solid #abada8',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'end',\n              width: '92%',\n            }}\n          >\n            <div value={value} onChange={this.handleChange} className=\"\">\n              <Tab\n                disabled\n                icon={\n                  <div className=\"d-flex align-items-center justify-content-start \">\n                    <i\n                      className=\"p-1 icon-btn zmdi zmdi-check-circle zmdi-hc-1x \"\n                      style={{ color: '#4a3ea3' }}\n                    ></i>{' '}\n                    <i\n                      className={`${element.service_v2.path_img_service} pl-2 pr-2`}\n                      style={{ color: 'blue' }}\n                    ></i>\n                    <h5 className=\" pt-3\" style={{ fontWeight: 'bold', color: '#4a3ea3' }}>\n                      {element.service_v2.name_fr_service}\n                    </h5>\n                    <div className=\"d-flex pl-2 align-items-center pt-2\">\n                      <h1>|</h1>\n                    </div>\n                  </div>\n                }\n              />\n\n              <Tab\n                icon={\n                  <div className=\"d-flex align-items-center justify-content-start \">\n                    <i className=\"p-1 icon-btn zmdi  zmdi-check-circle zmdi-hc-1x \"></i>{' '}\n                    <h5 className=\" pt-3 pl-2\" style={{ fontWeight: 'bold' }}>\n                      {this.props.item.service_v2.fk_id_frequency === frequencyMonthly\n                        ? 'Mensuel'\n                        : this.props.item.service_v2.fk_id_frequency === frequencyQuarterly\n                        ? 'Trimestrielle'\n                        : this.props.item.service_v2.fk_id_frequency === frequencyAnnually\n                        ? 'Annuelle'\n                        : 'Autre Choix'}\n                    </h5>\n                  </div>\n                }\n              />\n              <Tab\n                disabled\n                style={{\n                  width: '50px',\n                  marginRight: '20px',\n                }}\n                icon={\n                  <div className=\"d-flex  align-items-center justify-content-start \">\n                    <i className=\"p-1 icon-btn  zmdi zmdi-shopping-basket zmdi-hc-2x \"></i>{' '}\n                    <h5 className=\" pt-3 pl-2\" style={{ fontWeight: 'bold' }}>\n                      {element.service_v2.price_service}\n                    </h5>\n                  </div>\n                }\n              />\n            </div>\n\n            {this.props.item.service_v2.fk_id_frequency === 4 ||\n            this.props.item.service_v2.fk_id_frequency === 5 ? (\n              <div\n                style={{}}\n                className=\"col-lg-10 col-md-10  d-flex justify-content-end align-items-center \"\n              >\n                <div\n                  className=\"col-lg-8 col-md-8 d-flex flex-row justify-content-end align-items-center \"\n                  style={{\n                    borderTop: '2px solid black',\n                  }}\n                >\n                  {monthList.map((month) => {\n                    return (\n                      <h6\n                        key={month.idMonth}\n                        id={month.idMonth}\n                        name={month.idMonth}\n                        onClick={this.handleChange(month.idMonth, month.value)}\n                        className={\n                          this.SelectedMonth(month.idMonth) === false\n                            ? 'pt-3 pl-3 text-center text-secondary'\n                            : 'pt-3 pl-3 text-center text-primary'\n                        }\n                        style={{\n                          fontWeight: 'bold',\n                          textAlign: 'center',\n                          cursor: 'pointer',\n                        }}\n                      >\n                        {month.label}\n                      </h6>\n                    );\n                  })}\n                </div>\n              </div>\n            ) : (\n              ''\n            )}\n          </AppBar>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default EditAllocationItem;\n"]},"metadata":{},"sourceType":"module"}