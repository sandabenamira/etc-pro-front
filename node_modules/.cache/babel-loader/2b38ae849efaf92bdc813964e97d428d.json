{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap-pro/educap-pro-front/src/app/routes/Learning/routes/VirtualClasses/VirtualClass.js\";\nimport React from 'react';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport CardBox from '../../../../../components/CardBox/index';\nimport { connect } from 'react-redux';\nimport { UncontrolledAlert } from 'reactstrap';\nimport AddVirtualClass from './AddVirtualClass';\nimport _ from 'lodash';\nimport { RoleContext } from '../../../../../Context';\nimport Can from '../../../../../can';\nimport { roleIdProfessor, roleIdAdmin, roleIdParent, roleIdStudent } from '../../../../../config/config';\nimport { fetchProfessorBySubject } from '../../../../../actions/ToDo';\nimport VirtualClassList from './VirtualClassList';\nimport ArchiveVirtualClass from './ArchiveVirtualClass';\nimport JitsiComponent from './JitsiComponent';\nimport { addClassVirtual, getClassesVirtual } from '../../../../../actions/VirtualClassAction';\nimport axios from 'axios';\nimport baseUrl from '../../../../../config/config';\nimport Fab from '@material-ui/core/Fab';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport { privateStatus, publicStatus, allStatus } from '../../../../../config/config';\nimport moment from 'moment';\nimport VirtualClassListItems from './VirtualClassListItems';\nimport IconWithTextCard from '../../../FinancialManagement/routes/ServiceAllocation/ServiceAllocationComp/IconWithTextCard';\n\nclass VirtualClass extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleChangeProfessor = name => event => {\n      let obj = JSON.parse(event.target.value);\n      this.setState({\n        professorId: obj.profId,\n        profName: obj.profName,\n        profSurname: obj.profSurname,\n        itemProfessor: event.target.value\n      });\n      let apiEndpoint = `${baseUrl.baseUrl}/course_v4?access_token=${localStorage.token}&filter[where][fk_id_professor]=${obj.profId}&filter[include][assignmentClassSubject][subject]`;\n      axios.get(apiEndpoint).then(res => {\n        let subjects = [];\n        res.data.forEach(element => {\n          if (element.assignmentClassSubject.fk_id_class_v4 === this.state.classId) {\n            let newObj = { ...element.assignmentClassSubject,\n              courseId: element.id\n            }; // subjects.push(element.assignmentClassSubject);\n\n            subjects.push(newObj);\n          }\n        });\n        this.setState({\n          subjects\n        });\n      });\n    };\n\n    this.handleStartTimeChange = time => {\n      let startTimeClassError;\n\n      if (moment(this.state.dateVirtualClass).format('LL') == moment(new Date()).format('LL')) {\n        startTimeClassError = moment(time._d).isBefore(this.state.endTimeClass) && moment(time._d).isAfter(this.state.dateVirtualClass);\n      } else {\n        startTimeClassError = moment(time._d).isBefore(this.state.endTimeClass);\n      }\n\n      let endTimeClassError = moment(this.state.endTimeClass).isAfter(time._d);\n      this.setState({\n        startTimeClass: time._d,\n        startTimeClassError: startTimeClassError,\n        endTimeClassError: endTimeClassError\n      });\n    };\n\n    this.handleEndTimeChange = time => {\n      let endTimeClassError = moment(time._d).isAfter(this.state.startTimeClass);\n      let startTimeClassError;\n\n      if (moment(this.state.dateVirtualClass).format('LL') == moment(new Date()).format('LL')) {\n        startTimeClassError = moment(this.state.startTimeClass).isBefore(time._d) && moment(this.state.startTimeClass).isAfter(this.state.dateVirtualClass);\n      } else {\n        startTimeClassError = moment(this.state.startTimeClass).isBefore(time._d);\n      }\n\n      this.setState({\n        endTimeClass: time._d,\n        endTimeClassError: endTimeClassError,\n        startTimeClassError: startTimeClassError\n      });\n    };\n\n    this.handleChangeDate = date => {\n      let startTimeClassError;\n\n      if (moment(date._d).format('LL') == moment(new Date()).format('LL')) {\n        startTimeClassError = moment(this.state.startTimeClass).isBefore(this.state.endTimeClass) && moment(this.state.startTimeClass).isAfter(date._d);\n      } else {\n        startTimeClassError = moment(this.state.startTimeClass).isBefore(this.state.endTimeClass);\n      }\n\n      this.setState({\n        dateVirtualClass: date._d,\n        startTimeClassError: startTimeClassError\n      });\n    };\n\n    this.handleChangeSubject = name => event => {\n      let obj = JSON.parse(event.target.value);\n      this.setState({\n        itemSubject: event.target.value,\n        subjectId: obj.subjectId,\n        subjectName: obj.subjectName,\n        subjectColor: obj.subjectColor,\n        courseId: obj.courseId\n      });\n    };\n\n    this.handleChangeClass = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n      let obj = JSON.parse(event.target.value);\n      this.setState({\n        classId: obj.classId,\n        classeName: obj.classeName\n      });\n\n      if (this.props.userProfile.role_id === roleIdProfessor) {\n        let subjects = this.state.assignmentClassSubject.filter(element => element.class.id === obj.classId);\n        this.setState({\n          subjects\n        });\n      } else {\n        let apiEndpoint = `${baseUrl.baseUrl}/assignment_class_subjects?access_token=${localStorage.token}&filter[where][fk_id_class_v4]=${obj.classId}&filter[include][course][professor][profile][user]`;\n        axios.get(apiEndpoint).then(res => {\n          let courses = [];\n          res.data.forEach(element => {\n            courses.push(element.course);\n          });\n\n          let newCoursesList = _.flatten(courses);\n\n          let professorsFiltredByID = _.uniqBy(newCoursesList, 'fk_id_professor');\n\n          this.setState({\n            professors: professorsFiltredByID,\n            subjects: []\n          });\n        });\n      }\n    };\n\n    this.addVirtualClass = e => {\n      e.preventDefault();\n\n      if (this.state.endTimeClassError && this.state.startTimeClassError) {\n        let dateClass = moment(this.state.dateVirtualClass).format('LL');\n        let endHourClass = moment(this.state.endTimeClass).format('HH:mm');\n        let startHourClass = moment(this.state.startTimeClass).format('HH:mm');\n        let timedebutAdd = Date.parse(dateClass + ' ' + startHourClass) / 60000;\n        let timefinAdd = Date.parse(dateClass + ' ' + endHourClass) / 60000;\n        const result = this.props.virtualClasses.filter(item => {\n          let dateClassItem = moment(item.date_virtual_class).format('LL');\n          let endHourClassItem = moment(item.end_time_class).format('HH:mm');\n          let startHourClassItem = moment(item.start_time_class).format('HH:mm');\n          let timedebutItem = Date.parse(dateClassItem + ' ' + startHourClassItem) / 60000;\n          let timefinItem = Date.parse(dateClassItem + ' ' + endHourClassItem) / 60000;\n          return item.classeId == this.state.classId && dateClassItem == dateClass && (timedebutAdd <= timedebutItem && timefinItem <= timefinAdd || timedebutItem <= timedebutAdd && timedebutAdd <= timefinItem || timedebutItem <= timefinAdd && timefinAdd <= timefinItem);\n        });\n\n        if (result.length > 0) {\n          this.setState({\n            alerteDate: true\n          });\n          setTimeout(() => {\n            this.setState({\n              alerteDate: false\n            });\n          }, 3000);\n        } else {\n          this.setState({\n            call: true\n          });\n          let data = {\n            virtualClassName: this.state.virtualClassName,\n            accessibility: this.state.accessibility,\n            classId: this.state.classId,\n            subjectId: this.state.subjectId,\n            professorId: this.state.professorId,\n            dateVirtualClass: this.state.dateVirtualClass,\n            startTimeClass: this.state.startTimeClass,\n            endTimeClass: this.state.endTimeClass,\n            classUrl: this.state.classUrl,\n            password: this.state.password,\n            publish: this.state.isPublish,\n            profName: this.state.profName,\n            profSurname: this.state.profSurname,\n            subjectName: this.state.subjectName,\n            classeName: this.state.classeName,\n            subjectColor: this.state.subjectColor,\n            courseId: this.state.courseId,\n            description: this.state.description\n          };\n          this.props.dispatch(addClassVirtual(data));\n          this.setState({\n            call: false,\n            isOpen: false,\n            virtualClassName: '',\n            accessibility: '',\n            classId: null,\n            subjectId: null,\n            itemClass: {},\n            itemSubject: {},\n            itemProfessor: {},\n            dateVirtualClass: new Date(),\n            startTimeClass: new Date(),\n            endTimeClass: new Date(),\n            classUrl: '',\n            password: '',\n            description: ''\n          });\n\n          if (this.props.userProfile.role_id === roleIdAdmin) {\n            this.setState({\n              professorId: null\n            });\n          }\n        }\n      }\n    };\n\n    this.state = {\n      isOpen: false,\n      dateVirtualClass: new Date(),\n      virtualClassName: '',\n      classUrl: '',\n      password: '',\n      description: '',\n      startTimeClass: new Date(Date.now() + 60000),\n      endTimeClass: new Date(Date.now() + 120000),\n      virtualClassStatus: '',\n      accessibility: false,\n      levels: [],\n      sectionsDisable: true,\n      sections: [],\n      subjects: [],\n      classes: [],\n      professors: [],\n      classId: null,\n      courseId: null,\n      subjectId: null,\n      levelId: null,\n      professorId: null,\n      class_password: '',\n      call: false,\n      filterValues: 0,\n      roleUserId: 1,\n      assignmentClassSubject: [],\n      isPublish: false,\n      endTimeClassError: true,\n      startTimeClassError: true,\n      profName: '',\n      profSurname: '',\n      subjectName: '',\n      classeName: '',\n      subjectColor: '',\n      itemClass: '',\n      itemProfessor: '',\n      itemSubject: '',\n      classItem: {},\n      filterStatus: 'all',\n      openArchive: false,\n      alerteDate: false,\n      prog: 0,\n      encours: 0,\n      terminé: 0\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeProfessor = this.handleChangeProfessor.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.addVirtualClass = this.addVirtualClass.bind(this);\n    this.handleStartTimeChange = this.handleStartTimeChange.bind(this);\n    this.handleEndTimeChange = this.handleEndTimeChange.bind(this);\n    this.handleChangeDate = this.handleChangeDate.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.openArchive = this.openArchive.bind(this);\n  }\n\n  handleArchive(event) {\n    event.preventDefault();\n    this.openAddModal();\n    this.setState({});\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.virtualClasses !== this.props.virtualClasses) {\n      let prog = 0;\n      let encours = 0;\n      let terminé = 0;\n      let VirtualClassListFinal = this.props.virtualClasses.map(elementItem => {\n        const sys = Date.parse(new Date()) / 60000;\n        const start = Date.parse(elementItem.date_virtual_class.slice(0, 10) + ' ' + moment(elementItem.start_time_class).format('HH:mm')) / 60000;\n        const end = Date.parse(elementItem.date_virtual_class.slice(0, 10) + ' ' + moment(elementItem.end_time_class).format('HH:mm')) / 60000;\n\n        if (start > sys && end > sys) {\n          terminé = ++terminé;\n          this.setState({\n            terminé: terminé\n          });\n        } else if (start < sys && end > sys) {\n          encours = ++encours;\n          this.setState({\n            encours: encours\n          });\n        } else if (start < sys && end < sys) {\n          prog = ++prog;\n          this.setState({\n            prog: prog\n          });\n        } else if (this.props.filterStatus == 'all') {\n          return elementItem;\n        }\n      });\n    }\n\n    if (prevProps.ClassSettings !== this.props.ClassSettings) {\n      if (this.props.userProfile.role_id === roleIdProfessor) {} else {\n        this.setState({\n          classes: this.props.ClassSettings\n        });\n      }\n    }\n\n    if (prevProps.userProfile.school_year_id !== this.props.userProfile.school_year_id) {\n      this.props.dispatch(getClassesVirtual(this.props.userProfile.establishment_id, this.props.userProfile.school_year_id, this.props.userProfile.role_id, this.props.userProfile.id));\n      this.setState({\n        subjects: [],\n        professors: [],\n        itemClass: '',\n        itemSubject: '',\n        itemProfessor: ''\n      });\n\n      if (this.props.userProfile.role_id === roleIdProfessor) {\n        let apiEndpoint = `${baseUrl.baseUrl}/professors?access_token=${localStorage.token}&filter[where][profile_id]=${this.props.userProfile.id}&filter[include][course][assignmentClassSubject]=class&filter[include][course][assignmentClassSubject]=subject`;\n        axios.get(apiEndpoint).then(res => {\n          let data = _.map(res.data, 'course');\n\n          let classes = [];\n          let assignmentClassSubject = [];\n          data[0].forEach(element => {\n            if (element.assignmentClassSubject.class.fk_id_school_year == this.props.userProfile.school_year_id) {\n              let newObj = { ...element.assignmentClassSubject,\n                courseId: element.id\n              };\n              classes.push(element.assignmentClassSubject.class); // assignmentClassSubject.push(element.assignmentClassSubject);\n\n              assignmentClassSubject.push(newObj);\n            }\n          });\n          this.setState({\n            classes,\n            professorId: res.data[0].id,\n            assignmentClassSubject,\n            subjects: [],\n            professors: [],\n            itemClass: '',\n            itemSubject: '',\n            itemProfessor: ''\n          });\n        });\n        let apiEndpoint1 = `${baseUrl.baseUrl}/users?access_token=${localStorage.token}&filter[where][id]=${this.props.userProfile.user_id}&filter[include][course][assignmentClassSubject]=class&filter[include][course][assignmentClassSubject]=subject`;\n        axios.get(apiEndpoint1).then(res => {\n          this.setState({\n            profName: res.data.name,\n            profSurname: res.data.surname\n          });\n        });\n      }\n    }\n  }\n\n  UNSAFE_componentWillMount() {\n    this.props.dispatch(getClassesVirtual(this.props.userProfile.establishment_id, this.props.userProfile.school_year_id, this.props.userProfile.role_id, this.props.userProfile.id));\n\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      let apiEndpoint = `${baseUrl.baseUrl}/professors?access_token=${localStorage.token}&filter[where][profile_id]=${this.props.userProfile.id}&filter[include][course][assignmentClassSubject]=class&filter[include][course][assignmentClassSubject]=subject`;\n      axios.get(apiEndpoint).then(res => {\n        let data = _.map(res.data, 'course');\n\n        let classes = [];\n        let assignmentClassSubject = [];\n        data[0].forEach(element => {\n          if (element.assignmentClassSubject.class.fk_id_school_year == this.props.userProfile.school_year_id) {\n            let newObj = { ...element.assignmentClassSubject,\n              courseId: element.id\n            };\n            classes.push(element.assignmentClassSubject.class);\n            assignmentClassSubject.push(newObj); // assignmentClassSubject.push(element.assignmentClassSubject);\n          }\n        });\n        this.setState({\n          classes,\n          professorId: res.data[0].id,\n          assignmentClassSubject\n        });\n      });\n      let apiEndpoint1 = `${baseUrl.baseUrl}/users?access_token=${localStorage.token}&filter[where][id]=${this.props.userProfile.user_id}&filter[include][course][assignmentClassSubject]=class&filter[include][course][assignmentClassSubject]=subject`;\n      axios.get(apiEndpoint1).then(res => {\n        this.setState({\n          profName: res.data.name,\n          profSurname: res.data.surname\n        });\n      });\n    } else {\n      this.props.dispatch(fetchProfessorBySubject(this.props.userProfile.establishment_id));\n      this.setState({\n        classes: this.props.ClassSettings\n      });\n    }\n\n    if (this.props.userProfile.role_id == 3) {\n      this.setState({\n        roleUserId: this.props.userProfile.user.profiles[0].professors[0].id\n      });\n    }\n  }\n\n  openAddModal() {\n    this.setState(previousState => ({\n      isOpen: !previousState.isOpen\n    }));\n  }\n\n  openArchive() {\n    this.setState(previousState => ({\n      openArchive: !previousState.openArchive\n    }));\n  }\n\n  render() {\n    let detailCards = [{\n      cardColor: 'primary',\n      imageIcon: require('../../../FinancialManagement/routes/ServiceAllocation/Icone/project-icon.png'),\n      title: this.props.virtualClasses.length,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `virtual.class.total`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 19\n        }\n      })\n    }, {\n      cardColor: 'secondary',\n      imageIcon: require('../../../FinancialManagement/routes/ServiceAllocation/Icone/tasks-icon.png'),\n      title: this.state.prog,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `virtual.class.terminée`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 19\n        }\n      })\n    }, {\n      cardColor: 'info',\n      imageIcon: require('../../../FinancialManagement/routes/ServiceAllocation/Icone/teams-icon.png'),\n      title: this.state.encours,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `virtual.class.encours`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 19\n        }\n      })\n    }, {\n      cardColor: 'warning',\n      imageIcon: require('../../../FinancialManagement/routes/ServiceAllocation/Icone/files-icon.png'),\n      title: this.state.terminé,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `virtual.class.programmé`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 19\n        }\n      })\n    }];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper col-lg-12 col-md-12\",\n      style: {\n        marginLeft: '2%',\n        marginRight: 'auto'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row col-lg-12 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 9\n      }\n    }, detailCards.map((data, index) => /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"col-xl-3 col-lg-3 col-md-6 col-sm-6 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IconWithTextCard, {\n      data: data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"  mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight\",\n      style: {\n        marginLeft: '4%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 517,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"sidebar.components.liste.classes.virtuelles\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-row bd-highlight mb-3\",\n      style: {\n        marginLeft: '4%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight pointer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      onClick: () => this.setState({\n        filterStatus: 'all'\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"service.filter.with.all\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 13\n      }\n    }, \"|\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight pointer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      onClick: () => this.setState({\n        filterStatus: 'progress'\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"status.classe.virtual.progr\\xE9s\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 13\n      }\n    }, \"|\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight pointer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      onClick: () => this.setState({\n        filterStatus: 'upcoming'\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 15\n      }\n    }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"status.classe.virtual.programm\\xE9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 13\n      }\n    }, \"|\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight pointer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h5\", {\n      onClick: () => this.setState({\n        filterStatus: 'past'\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"status.classe.virtual.t\\xE9rmin\\xE9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 17\n      }\n    })))), this.props.successStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 15\n      }\n    }, \" \", this.props.message, \" \")) : '', this.props.errorStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-danger bg-danger text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 15\n      }\n    }, \" \", this.props.message, \" \")) : '', /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bd-highlight\",\n      style: {\n        width: '100%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12 col-md-12 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(AddVirtualClass, {\n      values: this.state,\n      handleArchive: this.handleArchive,\n      openAddModal: this.openAddModal,\n      handleChangeDate: this.handleChangeDate,\n      handleChange: this.handleChange,\n      handleStartTimeChange: this.handleStartTimeChange,\n      handleEndTimeChange: this.handleEndTimeChange,\n      addVirtualClass: this.addVirtualClass,\n      handleChangeClass: this.handleChangeClass,\n      handleChangeProfessor: this.handleChangeProfessor,\n      handleChangeSubject: this.handleChangeSubject,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 589,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 590,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"  col-lg-12 col-md-12 bd-highlight\",\n      style: {\n        paddingRight: 'auto',\n        paddingLeft: '2%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(VirtualClassList, {\n      virtualClasses: this.props.virtualClasses,\n      subjectList: this.state.subjectList,\n      editClassShowModal: this.editClassShowModal,\n      filterStatus: this.state.filterStatus,\n      roleUserId: this.state.roleUserId,\n      classes: this.props.ClassSettings,\n      assignmentClassSubject: this.state.assignmentClassSubject,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(RoleContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 611,\n        columnNumber: 11\n      }\n    }, ({\n      role\n    }) => /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"add-service\",\n      yes: () => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-12 col-md-12 bd-highlight\",\n        style: {\n          paddingRight: 'auto',\n          paddingLeft: '2%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 617,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-start align-items-center \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 625,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 27\n        }\n      }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"service.button.archive\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 629,\n          columnNumber: 29\n        }\n      }), ' ')), ' ', \"\\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(Fab, {\n        size: \"small\",\n        color: \"secondary\",\n        \"aria-label\": \"Add\",\n        onClick: this.openArchive,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 633,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(DeleteOutlineIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 27\n        }\n      }))), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 642,\n          columnNumber: 23\n        }\n      }), this.state.openArchive ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 645,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(ArchiveVirtualClass, {\n        virtualClassesArchived: this.props.archivedVirtualClass,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 646,\n          columnNumber: 27\n        }\n      })) : '')),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 613,\n        columnNumber: 15\n      }\n    }))), this.state.call == true ? /*#__PURE__*/React.createElement(JitsiComponent, {\n      values: this.state,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 660,\n        columnNumber: 36\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 660,\n        columnNumber: 77\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userProfile: state.auth.userProfile,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    establishmentData: state.subject.establishmentData,\n    classes: state.ClassSettingsReducer.classSettings,\n    subjectsProfessors: state.toDo.subjectsProfessors,\n    virtualClasses: state.classVirtualReducer.remoteClassVirtual,\n    ClassSettings: state.ClassSettingsReducer.classSettings,\n    archivedVirtualClass: state.classVirtualReducer.archivedVirtualClass\n  };\n};\n\nexport default connect(mapStateToProps)(VirtualClass);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap-pro/educap-pro-front/src/app/routes/Learning/routes/VirtualClasses/VirtualClass.js"],"names":["React","IntlMessages","CardBox","connect","UncontrolledAlert","AddVirtualClass","_","RoleContext","Can","roleIdProfessor","roleIdAdmin","roleIdParent","roleIdStudent","fetchProfessorBySubject","VirtualClassList","ArchiveVirtualClass","JitsiComponent","addClassVirtual","getClassesVirtual","axios","baseUrl","Fab","DeleteOutlineIcon","privateStatus","publicStatus","allStatus","moment","VirtualClassListItems","IconWithTextCard","VirtualClass","Component","constructor","props","handleChange","name","event","setState","target","value","handleChangeProfessor","obj","JSON","parse","professorId","profId","profName","profSurname","itemProfessor","apiEndpoint","localStorage","token","get","then","res","subjects","data","forEach","element","assignmentClassSubject","fk_id_class_v4","state","classId","newObj","courseId","id","push","handleStartTimeChange","time","startTimeClassError","dateVirtualClass","format","Date","_d","isBefore","endTimeClass","isAfter","endTimeClassError","startTimeClass","handleEndTimeChange","handleChangeDate","date","handleChangeSubject","itemSubject","subjectId","subjectName","subjectColor","handleChangeClass","classeName","userProfile","role_id","filter","class","courses","course","newCoursesList","flatten","professorsFiltredByID","uniqBy","professors","addVirtualClass","e","preventDefault","dateClass","endHourClass","startHourClass","timedebutAdd","timefinAdd","result","virtualClasses","item","dateClassItem","date_virtual_class","endHourClassItem","end_time_class","startHourClassItem","start_time_class","timedebutItem","timefinItem","classeId","length","alerteDate","setTimeout","call","virtualClassName","accessibility","classUrl","password","publish","isPublish","description","dispatch","isOpen","itemClass","now","virtualClassStatus","levels","sectionsDisable","sections","classes","levelId","class_password","filterValues","roleUserId","classItem","filterStatus","openArchive","prog","encours","terminé","openAddModal","bind","handleArchive","componentDidUpdate","prevProps","VirtualClassListFinal","map","elementItem","sys","start","slice","end","ClassSettings","school_year_id","establishment_id","fk_id_school_year","apiEndpoint1","user_id","surname","UNSAFE_componentWillMount","user","profiles","previousState","render","detailCards","cardColor","imageIcon","require","title","subTitle","marginLeft","marginRight","index","successStatus","message","errorStatus","width","paddingRight","paddingLeft","subjectList","editClassShowModal","role","archivedVirtualClass","mapStateToProps","auth","alert","success","error","establishmentData","subject","ClassSettingsReducer","classSettings","subjectsProfessors","toDo","classVirtualReducer","remoteClassVirtual"],"mappings":"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","sourcesContent":["import React from 'react';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport CardBox from '../../../../../components/CardBox/index';\nimport { connect } from 'react-redux';\nimport { UncontrolledAlert } from 'reactstrap';\nimport AddVirtualClass from './AddVirtualClass';\nimport _ from 'lodash';\nimport { RoleContext } from '../../../../../Context';\nimport Can from '../../../../../can';\nimport {\n  roleIdProfessor,\n  roleIdAdmin,\n  roleIdParent,\n  roleIdStudent,\n} from '../../../../../config/config';\nimport { fetchProfessorBySubject } from '../../../../../actions/ToDo';\nimport VirtualClassList from './VirtualClassList';\nimport ArchiveVirtualClass from './ArchiveVirtualClass';\nimport JitsiComponent from './JitsiComponent';\nimport { addClassVirtual, getClassesVirtual } from '../../../../../actions/VirtualClassAction';\nimport axios from 'axios';\nimport baseUrl from '../../../../../config/config';\nimport Fab from '@material-ui/core/Fab';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport { privateStatus, publicStatus, allStatus } from '../../../../../config/config';\nimport moment from 'moment';\nimport VirtualClassListItems from './VirtualClassListItems';\nimport IconWithTextCard from '../../../FinancialManagement/routes/ServiceAllocation/ServiceAllocationComp/IconWithTextCard';\n\nclass VirtualClass extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpen: false,\n      dateVirtualClass: new Date(),\n      virtualClassName: '',\n      classUrl: '',\n      password: '',\n      description: '',\n      startTimeClass: new Date(Date.now() + 60000),\n      endTimeClass: new Date(Date.now() + 120000),\n      virtualClassStatus: '',\n      accessibility: false,\n      levels: [],\n      sectionsDisable: true,\n      sections: [],\n      subjects: [],\n      classes: [],\n      professors: [],\n      classId: null,\n      courseId: null,\n      subjectId: null,\n      levelId: null,\n      professorId: null,\n      class_password: '',\n      call: false,\n      filterValues: 0,\n      roleUserId: 1,\n      assignmentClassSubject: [],\n      isPublish: false,\n      endTimeClassError: true,\n      startTimeClassError: true,\n      profName: '',\n      profSurname: '',\n      subjectName: '',\n      classeName: '',\n      subjectColor: '',\n      itemClass: '',\n      itemProfessor: '',\n      itemSubject: '',\n      classItem: {},\n      filterStatus: 'all',\n      openArchive: false,\n      alerteDate: false,\n      prog: 0,\n      encours: 0,\n      terminé: 0,\n    };\n\n    this.openAddModal = this.openAddModal.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeProfessor = this.handleChangeProfessor.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.addVirtualClass = this.addVirtualClass.bind(this);\n    this.handleStartTimeChange = this.handleStartTimeChange.bind(this);\n    this.handleEndTimeChange = this.handleEndTimeChange.bind(this);\n    this.handleChangeDate = this.handleChangeDate.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.openArchive = this.openArchive.bind(this);\n  }\n\n  handleArchive(event) {\n    event.preventDefault();\n    this.openAddModal();\n    this.setState({});\n  }\n\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n\n  handleChangeProfessor = (name) => (event) => {\n    let obj = JSON.parse(event.target.value);\n    this.setState({\n      professorId: obj.profId,\n      profName: obj.profName,\n      profSurname: obj.profSurname,\n      itemProfessor: event.target.value,\n    });\n    let apiEndpoint = `${baseUrl.baseUrl}/course_v4?access_token=${localStorage.token}&filter[where][fk_id_professor]=${obj.profId}&filter[include][assignmentClassSubject][subject]`;\n    axios.get(apiEndpoint).then((res) => {\n      let subjects = [];\n      res.data.forEach((element) => {\n        if (element.assignmentClassSubject.fk_id_class_v4 === this.state.classId) {\n          let newObj = {\n            ...element.assignmentClassSubject,\n            courseId: element.id,\n          };\n\n          // subjects.push(element.assignmentClassSubject);\n          subjects.push(newObj);\n        }\n      });\n      this.setState({ subjects });\n    });\n  };\n\n  handleStartTimeChange = (time) => {\n    let startTimeClassError;\n\n    if (moment(this.state.dateVirtualClass).format('LL') == moment(new Date()).format('LL')) {\n      startTimeClassError =\n        moment(time._d).isBefore(this.state.endTimeClass) &&\n        moment(time._d).isAfter(this.state.dateVirtualClass);\n    } else {\n      startTimeClassError = moment(time._d).isBefore(this.state.endTimeClass);\n    }\n\n    let endTimeClassError = moment(this.state.endTimeClass).isAfter(time._d);\n    this.setState({\n      startTimeClass: time._d,\n      startTimeClassError: startTimeClassError,\n      endTimeClassError: endTimeClassError,\n    });\n  };\n\n  handleEndTimeChange = (time) => {\n    let endTimeClassError = moment(time._d).isAfter(this.state.startTimeClass);\n    let startTimeClassError;\n\n    if (moment(this.state.dateVirtualClass).format('LL') == moment(new Date()).format('LL')) {\n      startTimeClassError =\n        moment(this.state.startTimeClass).isBefore(time._d) &&\n        moment(this.state.startTimeClass).isAfter(this.state.dateVirtualClass);\n    } else {\n      startTimeClassError = moment(this.state.startTimeClass).isBefore(time._d);\n    }\n\n    this.setState({\n      endTimeClass: time._d,\n      endTimeClassError: endTimeClassError,\n      startTimeClassError: startTimeClassError,\n    });\n  };\n\n  handleChangeDate = (date) => {\n    let startTimeClassError;\n\n    if (moment(date._d).format('LL') == moment(new Date()).format('LL')) {\n      startTimeClassError =\n        moment(this.state.startTimeClass).isBefore(this.state.endTimeClass) &&\n        moment(this.state.startTimeClass).isAfter(date._d);\n    } else {\n      startTimeClassError = moment(this.state.startTimeClass).isBefore(this.state.endTimeClass);\n    }\n    this.setState({\n      dateVirtualClass: date._d,\n      startTimeClassError: startTimeClassError,\n    });\n  };\n\n  handleChangeSubject = (name) => (event) => {\n    let obj = JSON.parse(event.target.value);\n\n    this.setState({\n      itemSubject: event.target.value,\n      subjectId: obj.subjectId,\n      subjectName: obj.subjectName,\n      subjectColor: obj.subjectColor,\n      courseId: obj.courseId,\n    });\n  };\n\n  handleChangeClass = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n    let obj = JSON.parse(event.target.value);\n    this.setState({\n      classId: obj.classId,\n      classeName: obj.classeName,\n    });\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      let subjects = this.state.assignmentClassSubject.filter(\n        (element) => element.class.id === obj.classId\n      );\n      this.setState({ subjects });\n    } else {\n      let apiEndpoint = `${baseUrl.baseUrl}/assignment_class_subjects?access_token=${localStorage.token}&filter[where][fk_id_class_v4]=${obj.classId}&filter[include][course][professor][profile][user]`;\n      axios.get(apiEndpoint).then((res) => {\n        let courses = [];\n        res.data.forEach((element) => {\n          courses.push(element.course);\n        });\n        let newCoursesList = _.flatten(courses);\n        let professorsFiltredByID = _.uniqBy(newCoursesList, 'fk_id_professor');\n        this.setState({ professors: professorsFiltredByID, subjects: [] });\n      });\n    }\n  };\n\n  addVirtualClass = (e) => {\n    e.preventDefault();\n\n    if (this.state.endTimeClassError && this.state.startTimeClassError) {\n      let dateClass = moment(this.state.dateVirtualClass).format('LL');\n      let endHourClass = moment(this.state.endTimeClass).format('HH:mm');\n      let startHourClass = moment(this.state.startTimeClass).format('HH:mm');\n      let timedebutAdd = Date.parse(dateClass + ' ' + startHourClass) / 60000;\n      let timefinAdd = Date.parse(dateClass + ' ' + endHourClass) / 60000;\n\n      const result = this.props.virtualClasses.filter((item) => {\n        let dateClassItem = moment(item.date_virtual_class).format('LL');\n        let endHourClassItem = moment(item.end_time_class).format('HH:mm');\n        let startHourClassItem = moment(item.start_time_class).format('HH:mm');\n\n        let timedebutItem = Date.parse(dateClassItem + ' ' + startHourClassItem) / 60000;\n        let timefinItem = Date.parse(dateClassItem + ' ' + endHourClassItem) / 60000;\n\n        return (\n          item.classeId == this.state.classId &&\n          dateClassItem == dateClass &&\n          ((timedebutAdd <= timedebutItem && timefinItem <= timefinAdd) ||\n            (timedebutItem <= timedebutAdd && timedebutAdd <= timefinItem) ||\n            (timedebutItem <= timefinAdd && timefinAdd <= timefinItem))\n        );\n      });\n\n      if (result.length > 0) {\n        this.setState({ alerteDate: true });\n        setTimeout(() => {\n          this.setState({ alerteDate: false });\n        }, 3000);\n      } else {\n        this.setState({\n          call: true,\n        });\n        let data = {\n          virtualClassName: this.state.virtualClassName,\n          accessibility: this.state.accessibility,\n          classId: this.state.classId,\n          subjectId: this.state.subjectId,\n          professorId: this.state.professorId,\n          dateVirtualClass: this.state.dateVirtualClass,\n          startTimeClass: this.state.startTimeClass,\n          endTimeClass: this.state.endTimeClass,\n          classUrl: this.state.classUrl,\n          password: this.state.password,\n          publish: this.state.isPublish,\n          profName: this.state.profName,\n          profSurname: this.state.profSurname,\n          subjectName: this.state.subjectName,\n          classeName: this.state.classeName,\n          subjectColor: this.state.subjectColor,\n          courseId: this.state.courseId,\n          description: this.state.description,\n        };\n        this.props.dispatch(addClassVirtual(data));\n        this.setState({\n          call: false,\n          isOpen: false,\n          virtualClassName: '',\n          accessibility: '',\n          classId: null,\n          subjectId: null,\n          itemClass: {},\n          itemSubject: {},\n          itemProfessor: {},\n          dateVirtualClass: new Date(),\n          startTimeClass: new Date(),\n          endTimeClass: new Date(),\n          classUrl: '',\n          password: '',\n          description: '',\n        });\n        if (this.props.userProfile.role_id === roleIdAdmin) {\n          this.setState({ professorId: null });\n        }\n      }\n    }\n  };\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.virtualClasses !== this.props.virtualClasses) {\n      let prog = 0;\n      let encours = 0;\n      let terminé = 0;\n\n      let VirtualClassListFinal = this.props.virtualClasses.map((elementItem) => {\n        const sys = Date.parse(new Date()) / 60000;\n        const start =\n          Date.parse(\n            elementItem.date_virtual_class.slice(0, 10) +\n              ' ' +\n              moment(elementItem.start_time_class).format('HH:mm')\n          ) / 60000;\n        const end =\n          Date.parse(\n            elementItem.date_virtual_class.slice(0, 10) +\n              ' ' +\n              moment(elementItem.end_time_class).format('HH:mm')\n          ) / 60000;\n\n        if (start > sys && end > sys) {\n          terminé = ++terminé;\n          this.setState({ terminé: terminé });\n        } else if (start < sys && end > sys) {\n          encours = ++encours;\n          this.setState({ encours: encours });\n        } else if (start < sys && end < sys) {\n          prog = ++prog;\n          this.setState({ prog: prog });\n        } else if (this.props.filterStatus == 'all') {\n          return elementItem;\n        }\n      });\n    }\n    if (prevProps.ClassSettings !== this.props.ClassSettings) {\n      if (this.props.userProfile.role_id === roleIdProfessor) {\n      } else {\n        this.setState({ classes: this.props.ClassSettings });\n      }\n    }\n    if (prevProps.userProfile.school_year_id !== this.props.userProfile.school_year_id) {\n      this.props.dispatch(\n        getClassesVirtual(\n          this.props.userProfile.establishment_id,\n          this.props.userProfile.school_year_id,\n          this.props.userProfile.role_id,\n          this.props.userProfile.id\n        )\n      );\n\n      this.setState({\n        subjects: [],\n        professors: [],\n        itemClass: '',\n        itemSubject: '',\n        itemProfessor: '',\n      });\n      if (this.props.userProfile.role_id === roleIdProfessor) {\n        let apiEndpoint = `${baseUrl.baseUrl}/professors?access_token=${localStorage.token}&filter[where][profile_id]=${this.props.userProfile.id}&filter[include][course][assignmentClassSubject]=class&filter[include][course][assignmentClassSubject]=subject`;\n        axios.get(apiEndpoint).then((res) => {\n          let data = _.map(res.data, 'course');\n\n          let classes = [];\n          let assignmentClassSubject = [];\n          data[0].forEach((element) => {\n            if (\n              element.assignmentClassSubject.class.fk_id_school_year ==\n              this.props.userProfile.school_year_id\n            ) {\n              let newObj = {\n                ...element.assignmentClassSubject,\n                courseId: element.id,\n              };\n\n              classes.push(element.assignmentClassSubject.class);\n              // assignmentClassSubject.push(element.assignmentClassSubject);\n              assignmentClassSubject.push(newObj);\n            }\n          });\n          this.setState({\n            classes,\n            professorId: res.data[0].id,\n            assignmentClassSubject,\n            subjects: [],\n            professors: [],\n            itemClass: '',\n            itemSubject: '',\n            itemProfessor: '',\n          });\n        });\n        let apiEndpoint1 = `${baseUrl.baseUrl}/users?access_token=${localStorage.token}&filter[where][id]=${this.props.userProfile.user_id}&filter[include][course][assignmentClassSubject]=class&filter[include][course][assignmentClassSubject]=subject`;\n        axios.get(apiEndpoint1).then((res) => {\n          this.setState({\n            profName: res.data.name,\n            profSurname: res.data.surname,\n          });\n        });\n      }\n    }\n  }\n\n  UNSAFE_componentWillMount() {\n    this.props.dispatch(\n      getClassesVirtual(\n        this.props.userProfile.establishment_id,\n        this.props.userProfile.school_year_id,\n        this.props.userProfile.role_id,\n        this.props.userProfile.id\n      )\n    );\n\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      let apiEndpoint = `${baseUrl.baseUrl}/professors?access_token=${localStorage.token}&filter[where][profile_id]=${this.props.userProfile.id}&filter[include][course][assignmentClassSubject]=class&filter[include][course][assignmentClassSubject]=subject`;\n      axios.get(apiEndpoint).then((res) => {\n        let data = _.map(res.data, 'course');\n\n        let classes = [];\n        let assignmentClassSubject = [];\n        data[0].forEach((element) => {\n          if (\n            element.assignmentClassSubject.class.fk_id_school_year ==\n            this.props.userProfile.school_year_id\n          ) {\n            let newObj = {\n              ...element.assignmentClassSubject,\n              courseId: element.id,\n            };\n            classes.push(element.assignmentClassSubject.class);\n            assignmentClassSubject.push(newObj);\n\n            // assignmentClassSubject.push(element.assignmentClassSubject);\n          }\n        });\n        this.setState({\n          classes,\n          professorId: res.data[0].id,\n          assignmentClassSubject,\n        });\n      });\n      let apiEndpoint1 = `${baseUrl.baseUrl}/users?access_token=${localStorage.token}&filter[where][id]=${this.props.userProfile.user_id}&filter[include][course][assignmentClassSubject]=class&filter[include][course][assignmentClassSubject]=subject`;\n      axios.get(apiEndpoint1).then((res) => {\n        this.setState({\n          profName: res.data.name,\n          profSurname: res.data.surname,\n        });\n      });\n    } else {\n      this.props.dispatch(fetchProfessorBySubject(this.props.userProfile.establishment_id));\n      this.setState({ classes: this.props.ClassSettings });\n    }\n    if (this.props.userProfile.role_id == 3) {\n      this.setState({\n        roleUserId: this.props.userProfile.user.profiles[0].professors[0].id,\n      });\n    }\n  }\n\n  openAddModal() {\n    this.setState((previousState) => ({\n      isOpen: !previousState.isOpen,\n    }));\n  }\n  openArchive() {\n    this.setState((previousState) => ({\n      openArchive: !previousState.openArchive,\n    }));\n  }\n\n  render() {\n    let detailCards = [\n      {\n        cardColor: 'primary',\n        imageIcon: require('../../../FinancialManagement/routes/ServiceAllocation/Icone/project-icon.png'),\n        title: this.props.virtualClasses.length,\n        subTitle: <IntlMessages id={`virtual.class.total`} />,\n      },\n      {\n        cardColor: 'secondary',\n        imageIcon: require('../../../FinancialManagement/routes/ServiceAllocation/Icone/tasks-icon.png'),\n        title: this.state.prog,\n        subTitle: <IntlMessages id={`virtual.class.terminée`} />,\n      },\n      {\n        cardColor: 'info',\n        imageIcon: require('../../../FinancialManagement/routes/ServiceAllocation/Icone/teams-icon.png'),\n        title: this.state.encours,\n        subTitle: <IntlMessages id={`virtual.class.encours`} />,\n      },\n      {\n        cardColor: 'warning',\n        imageIcon: require('../../../FinancialManagement/routes/ServiceAllocation/Icone/files-icon.png'),\n        title: this.state.terminé,\n        subTitle: <IntlMessages id={`virtual.class.programmé`} />,\n      },\n    ];\n\n    return (\n      <div\n        className=\"app-wrapper col-lg-12 col-md-12\"\n        style={{\n          marginLeft: '2%',\n          marginRight: 'auto',\n        }}\n      >\n        <div className=\"row col-lg-12 col-md-12\">\n          {detailCards.map((data, index) => (\n            <div key={index} className=\"col-xl-3 col-lg-3 col-md-6 col-sm-6 col-12\">\n              <IconWithTextCard data={data} />\n            </div>\n          ))}\n        </div>\n        <div className=\"  mb-3\">\n          <div className=\"p-2 bd-highlight\" style={{ marginLeft: '4%' }}>\n            <h1>\n              <b>\n                <IntlMessages id=\"sidebar.components.liste.classes.virtuelles\" />\n              </b>\n            </h1>\n          </div>\n          <div className=\"d-flex flex-row bd-highlight mb-3\" style={{ marginLeft: '4%' }}>\n            <div className=\"p-2 bd-highlight pointer\">\n              <h5 onClick={() => this.setState({ filterStatus: 'all' })}>\n                <IntlMessages id=\"service.filter.with.all\" />\n              </h5>\n            </div>\n            <div className=\"p-2 bd-highlight\">|</div>\n\n            <div className=\"p-2 bd-highlight pointer\">\n              <h5 onClick={() => this.setState({ filterStatus: 'progress' })}>\n                <IntlMessages id=\"status.classe.virtual.progrés\" />\n              </h5>\n            </div>\n            <div className=\"p-2 bd-highlight\">|</div>\n            <div className=\"p-2 bd-highlight pointer\">\n              <h5 onClick={() => this.setState({ filterStatus: 'upcoming' })}>\n                {' '}\n                <IntlMessages id=\"status.classe.virtual.programmé\" />\n              </h5>\n            </div>\n\n            <div className=\"p-2 bd-highlight\">|</div>\n            <div className=\"p-2 bd-highlight pointer\">\n              <h5 onClick={() => this.setState({ filterStatus: 'past' })}>\n                <IntlMessages id=\"status.classe.virtual.términé\" />\n              </h5>\n            </div>\n          </div>\n\n          {this.props.successStatus ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\"> {this.props.message} </span>\n            </UncontrolledAlert>\n          ) : (\n            ''\n          )}\n          {this.props.errorStatus ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-danger bg-danger text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\"> {this.props.message} </span>\n            </UncontrolledAlert>\n          ) : (\n            ''\n          )}\n\n          <div className=\" bd-highlight\" style={{ width: '100%' }}>\n            <CardBox styleName=\"col-lg-12 col-md-12 \">\n              <AddVirtualClass\n                values={this.state}\n                handleArchive={this.handleArchive}\n                openAddModal={this.openAddModal}\n                handleChangeDate={this.handleChangeDate}\n                handleChange={this.handleChange}\n                handleStartTimeChange={this.handleStartTimeChange}\n                handleEndTimeChange={this.handleEndTimeChange}\n                addVirtualClass={this.addVirtualClass}\n                handleChangeClass={this.handleChangeClass}\n                handleChangeProfessor={this.handleChangeProfessor}\n                handleChangeSubject={this.handleChangeSubject}\n              />\n            </CardBox>\n          </div>\n          <div>\n            <div>\n              <div\n                className=\"  col-lg-12 col-md-12 bd-highlight\"\n                style={{\n                  paddingRight: 'auto',\n                  paddingLeft: '2%',\n                }}\n              >\n                <VirtualClassList\n                  virtualClasses={this.props.virtualClasses}\n                  subjectList={this.state.subjectList}\n                  editClassShowModal={this.editClassShowModal}\n                  filterStatus={this.state.filterStatus}\n                  roleUserId={this.state.roleUserId}\n                  classes={this.props.ClassSettings}\n                  assignmentClassSubject={this.state.assignmentClassSubject}\n                />\n              </div>\n            </div>\n          </div>\n\n          <RoleContext.Consumer>\n            {({ role }) => (\n              <Can\n                role={role}\n                perform=\"add-service\"\n                yes={() => (\n                  <div\n                    className=\"col-lg-12 col-md-12 bd-highlight\"\n                    style={{\n                      paddingRight: 'auto',\n                      paddingLeft: '2%',\n                    }}\n                  >\n                    <div>\n                      <div className=\"d-flex justify-content-start align-items-center \">\n                        <h1>\n                          <b>\n                            {' '}\n                            <IntlMessages id=\"service.button.archive\" />{' '}\n                          </b>\n                        </h1>{' '}\n                        &nbsp;&nbsp;&nbsp;\n                        <Fab\n                          size=\"small\"\n                          color=\"secondary\"\n                          aria-label=\"Add\"\n                          onClick={this.openArchive}\n                        >\n                          <DeleteOutlineIcon />\n                        </Fab>\n                      </div>\n                      <br />\n\n                      {this.state.openArchive ? (\n                        <div>\n                          <ArchiveVirtualClass\n                            virtualClassesArchived={this.props.archivedVirtualClass}\n                          ></ArchiveVirtualClass>\n                        </div>\n                      ) : (\n                        ''\n                      )}\n                    </div>\n                  </div>\n                )}\n              />\n            )}\n          </RoleContext.Consumer>\n        </div>\n        {this.state.call == true ? <JitsiComponent values={this.state} /> : <div></div>}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    userProfile: state.auth.userProfile,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    establishmentData: state.subject.establishmentData,\n    classes: state.ClassSettingsReducer.classSettings,\n    subjectsProfessors: state.toDo.subjectsProfessors,\n    virtualClasses: state.classVirtualReducer.remoteClassVirtual,\n    ClassSettings: state.ClassSettingsReducer.classSettings,\n    archivedVirtualClass: state.classVirtualReducer.archivedVirtualClass,\n  };\n};\n\nexport default connect(mapStateToProps)(VirtualClass);\n"]},"metadata":{},"sourceType":"module"}