{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Cafeteria/EditCafeteriaMenu.js\";\nimport React, { Component } from 'react';\nimport IntlMessages from '../../../util/IntlMessages';\nimport Auxiliary from '../../../util/Auxiliary';\nimport { Modal, ModalBody, ModalHeader } from 'reactstrap';\nimport TextField from '@material-ui/core/TextField';\nimport CardBox from '../../../components/CardBox/index';\nimport Button from '@material-ui/core/Button';\nimport { KeyboardDatePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport DateFnsUtils from '@date-io/moment';\nimport { connect } from 'react-redux';\nimport { getSections } from '../../../actions/sectionAction';\nimport { getLevels } from '../../../actions/classLevelAction';\nimport { getClassesByEstablishmentId } from '../../../actions/classeAction';\nimport moment from 'moment';\nimport { UncontrolledAlert } from 'reactstrap';\n\nclass EditCafeteriaMenu extends Component {\n  constructor(props) {\n    super(props);\n\n    this.checkDate = date => {\n      const result = this.props.MenuList.filter(menu => moment(menu.menu_date).format('LL') == moment(date).format('LL'));\n      return result;\n    };\n\n    this.state = {\n      alerte: false,\n      alerteDate: false\n    };\n    this.checkDate = this.checkDate.bind(this);\n  }\n\n  render() {\n    const {\n      values,\n      addIsopen,\n      handleCancel,\n      handleChange,\n      addCafeteriaMenu,\n      MenuList\n    } = this.props;\n    var disabled = values.dessert == '' || values.prix === '' || values.entree == '' || values.suite == '';\n    var result = this.checkDate(values.menu_date);\n    return /*#__PURE__*/React.createElement(Auxiliary, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Modal, {\n      isOpen: values.editIsopen,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      toggle: this.props.handleCancel,\n      className: \"modal-box-header bg-primary text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"new.cantine.title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 14\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(ModalBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      autoComplete: \"off\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      heading: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"component.etablishments.info.general\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }\n      }),\n      styleName: \"col-lg-12 text-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6 text-left \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(MuiPickersUtilsProvider, {\n      utils: DateFnsUtils,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(KeyboardDatePicker, {\n      label: \"                                           \",\n      clearable: true,\n      fullWidth: true,\n      id: \"menu_date\",\n      name: \"menu_date\",\n      value: values.menu_date,\n      onChange: this.props.handleChangeDate,\n      format: \"DD-MM-YYYY\",\n      autoOk: true,\n      minDate: new Date(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 27\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      required: true,\n      name: \"prix\",\n      id: \"prix\",\n      helperText: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"service.price\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 29\n        }\n      }),\n      onChange: handleChange('prix'),\n      value: values.prix,\n      margin: \"normal\",\n      type: \"number\",\n      fullWidth: true,\n      inputProps: {\n        min: 0\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 25\n      }\n    }))))), /*#__PURE__*/React.createElement(CardBox, {\n      heading: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"new.cantine.plats\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 28\n        }\n      }),\n      styleName: \"col-lg-12 text-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      required: true,\n      name: \"entree\",\n      id: \"entree\",\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"new.cantine.entree\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 34\n        }\n      }),\n      onChange: handleChange('entree'),\n      value: values.entree,\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      required: true,\n      name: \"suite\",\n      id: \"suite\",\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"new.cantine.suite\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 34\n        }\n      }),\n      onChange: handleChange('suite'),\n      value: values.suite,\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      required: true,\n      name: \"dessert\",\n      id: \"dessert\",\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"new.cantine.dessert\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 34\n        }\n      }),\n      onChange: handleChange('dessert'),\n      value: values.dessert,\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 25\n      }\n    })))))), this.state.alerte ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-danger bg-danger text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"alerte.ajout.classVirtual\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 21\n      }\n    }))) : '', this.state.alerteDate ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-danger bg-danger text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"alerte.date\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 21\n      }\n    }))) : '', /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 text-right \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      className: \"jr-btn bg-indigo text-white \" //onClick={this.props.editCafeteriaMenu}\n      ,\n      onClick: () => {\n        if (disabled) {\n          this.setState({\n            alerte: true\n          });\n          setTimeout(() => {\n            this.setState({\n              alerte: false\n            });\n          }, 2000);\n        } else {\n          if (result.length == 1 && result[0].id == values.id || result.length == 0) {\n            this.props.editCafeteriaMenu();\n          } else {\n            this.setState({\n              alerteDate: true\n            });\n            setTimeout(() => {\n              this.setState({\n                alerteDate: false\n              });\n            }, 2000);\n          }\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"button.modify\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 20\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      className: \"jr-btn bg-grey text-white \",\n      onClick: this.props.handleCancel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.establishments.formadd.buttonCancel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 21\n      }\n    })))))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    userProfile: state.auth.userProfile,\n    classLevels: state.ClassLevels.remoteLevels,\n    classSections: state.classSections.remoteSections,\n    classes: state.classes,\n    settings: state.settings.locale\n  };\n}\n\nexport default connect(mapStateToProps, {\n  getSections,\n  getLevels,\n  getClassesByEstablishmentId\n})(EditCafeteriaMenu);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Cafeteria/EditCafeteriaMenu.js"],"names":["React","Component","IntlMessages","Auxiliary","Modal","ModalBody","ModalHeader","TextField","CardBox","Button","KeyboardDatePicker","MuiPickersUtilsProvider","DateFnsUtils","connect","getSections","getLevels","getClassesByEstablishmentId","moment","UncontrolledAlert","EditCafeteriaMenu","constructor","props","checkDate","date","result","MenuList","filter","menu","menu_date","format","state","alerte","alerteDate","bind","render","values","addIsopen","handleCancel","handleChange","addCafeteriaMenu","disabled","dessert","prix","entree","suite","editIsopen","handleChangeDate","Date","min","setState","setTimeout","length","id","editCafeteriaMenu","mapStateToProps","userProfile","auth","classLevels","ClassLevels","remoteLevels","classSections","remoteSections","classes","settings","locale"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport IntlMessages from '../../../util/IntlMessages';\nimport Auxiliary from '../../../util/Auxiliary';\nimport { Modal, ModalBody, ModalHeader } from 'reactstrap';\nimport TextField from '@material-ui/core/TextField';\nimport CardBox from '../../../components/CardBox/index';\nimport Button from '@material-ui/core/Button';\nimport {\n  KeyboardDatePicker,\n  MuiPickersUtilsProvider,\n} from '@material-ui/pickers';\nimport DateFnsUtils from '@date-io/moment';\nimport { connect } from 'react-redux';\nimport { getSections } from '../../../actions/sectionAction';\nimport { getLevels } from '../../../actions/classLevelAction';\nimport { getClassesByEstablishmentId } from '../../../actions/classeAction';\nimport moment from 'moment';\nimport { UncontrolledAlert } from 'reactstrap';\n\nclass EditCafeteriaMenu extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      alerte: false,\n      alerteDate: false,\n    };\n    this.checkDate = this.checkDate.bind(this);\n  }\n  checkDate = (date) => {\n    const result = this.props.MenuList.filter(\n      (menu) => moment(menu.menu_date).format('LL') == moment(date).format('LL')\n    );\n\n    return result;\n  };\n  render() {\n    const {\n      values,\n      addIsopen,\n      handleCancel,\n      handleChange,\n      addCafeteriaMenu,\n      MenuList,\n    } = this.props;\n\n    var disabled =\n      values.dessert == '' ||\n      values.prix === '' ||\n      values.entree == '' ||\n      values.suite == '';\n    var result = this.checkDate(values.menu_date);\n\n    return (\n      <Auxiliary>\n        <Modal isOpen={values.editIsopen}>\n          <ModalHeader\n            toggle={this.props.handleCancel}\n            className=\"modal-box-header bg-primary text-white\"\n          >\n            {<IntlMessages id=\"new.cantine.title\" />}\n          </ModalHeader>\n          <br />\n          <ModalBody>\n            <form autoComplete=\"off\">\n              <div className=\"row\">\n                <CardBox\n                  heading={\n                    <IntlMessages id=\"component.etablishments.info.general\" />\n                  }\n                  styleName=\"col-lg-12 text-primary\"\n                >\n                  <div className=\"row\">\n                    <div className=\"col-md-6 text-left \">\n                      <div className=\"form-group\">\n                        <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                          <KeyboardDatePicker\n                            label=\"                                           \"\n                            clearable\n                            fullWidth\n                            id=\"menu_date\"\n                            name=\"menu_date\"\n                            value={values.menu_date}\n                            onChange={this.props.handleChangeDate}\n                            format=\"DD-MM-YYYY\"\n                            autoOk\n                            minDate={new Date()}\n                          />\n                        </MuiPickersUtilsProvider>\n                      </div>\n                    </div>\n\n                    <div className=\"col-md-6\">\n                      <div className=\"form-group\">\n                        <TextField\n                          required\n                          name=\"prix\"\n                          id=\"prix\"\n                          helperText={\n                            <IntlMessages id=\"service.price\" />\n                          }\n                          onChange={handleChange('prix')}\n                          value={values.prix}\n                          margin=\"normal\"\n                          type=\"number\"\n                          fullWidth\n                          inputProps={{min: 0}}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </CardBox>\n\n                <CardBox\n                  heading={<IntlMessages id=\"new.cantine.plats\" />}\n                  styleName=\"col-lg-12 text-primary\"\n                >\n                  <div className=\"row\">\n                    <div className=\"col-md-12\">\n                      <div className=\"form-group\">\n                        <TextField\n                          required\n                          name=\"entree\"\n                          id=\"entree\"\n                          label={<IntlMessages id=\"new.cantine.entree\" />}\n                          onChange={handleChange('entree')}\n                          value={values.entree}\n                          margin=\"normal\"\n                          fullWidth\n                        />\n                      </div>\n                    </div>\n                    <div className=\"col-md-12\">\n                      <div className=\"form-group\">\n                        <TextField\n                          required\n                          name=\"suite\"\n                          id=\"suite\"\n                          label={<IntlMessages id=\"new.cantine.suite\" />}\n                          onChange={handleChange('suite')}\n                          value={values.suite}\n                          margin=\"normal\"\n                          fullWidth\n                        />\n                      </div>\n                    </div>\n                    <div className=\"col-md-12\">\n                      <div className=\"form-group\">\n                        <TextField\n                          required\n                          name=\"dessert\"\n                          id=\"dessert\"\n                          label={<IntlMessages id=\"new.cantine.dessert\" />}\n                          onChange={handleChange('dessert')}\n                          value={values.dessert}\n                          margin=\"normal\"\n                          fullWidth\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </CardBox>\n              </div>\n              {this.state.alerte ? (\n                <UncontrolledAlert className=\"alert-addon-card bg-danger bg-danger text-white shadow-lg\">\n                  <span className=\"icon-addon alert-addon\">\n                    <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n                  </span>\n                  <span className=\"d-inline-block\">\n                    <IntlMessages id=\"alerte.ajout.classVirtual\" />\n                  </span>\n                </UncontrolledAlert>\n              ) : (\n                ''\n              )}\n              {this.state.alerteDate ? (\n                <UncontrolledAlert className=\"alert-addon-card bg-danger bg-danger text-white shadow-lg\">\n                  <span className=\"icon-addon alert-addon\">\n                    <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n                  </span>\n                  <span className=\"d-inline-block\">\n                    <IntlMessages id=\"alerte.date\" />\n                  </span>\n                </UncontrolledAlert>\n              ) : (\n                ''\n              )}\n              <div className=\"col-md-12 text-right \">\n                <br />\n                <br />\n                <Button\n                  variant=\"contained\"\n                  className=\"jr-btn bg-indigo text-white \"\n                  //onClick={this.props.editCafeteriaMenu}\n                  onClick={() => {\n                    if (disabled) {\n                      this.setState({ alerte: true });\n                      setTimeout(() => {\n                        this.setState({ alerte: false });\n                      }, 2000);\n                    } else {\n                      if (\n                        (result.length == 1 && result[0].id == values.id) ||\n                        result.length == 0\n                      ) {\n                        this.props.editCafeteriaMenu();\n                      } else {\n                        this.setState({ alerteDate: true });\n                        setTimeout(() => {\n                          this.setState({ alerteDate: false });\n                        }, 2000);\n                      }\n                    }\n                  }}\n                >\n                  {<IntlMessages id=\"button.modify\" />}\n                </Button>\n                <Button\n                  variant=\"contained\"\n                  className=\"jr-btn bg-grey text-white \"\n                  onClick={this.props.handleCancel}\n                >\n                  {\n                    <IntlMessages id=\"components.establishments.formadd.buttonCancel\" />\n                  }\n                </Button>\n              </div>\n            </form>\n          </ModalBody>\n        </Modal>\n      </Auxiliary>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    userProfile: state.auth.userProfile,\n    classLevels: state.ClassLevels.remoteLevels,\n    classSections: state.classSections.remoteSections,\n    classes: state.classes,\n    settings: state.settings.locale,\n  };\n}\nexport default connect(\n  mapStateToProps,\n  {\n    getSections,\n    getLevels,\n    getClassesByEstablishmentId,\n  }\n)(EditCafeteriaMenu);\n"]},"metadata":{},"sourceType":"module"}