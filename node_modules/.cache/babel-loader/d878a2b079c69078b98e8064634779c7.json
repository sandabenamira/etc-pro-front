{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Learning/routes/Homeworks/Homework.js\";\nimport React from \"react\";\nimport IconWithTextCard from \"../../../CommonComponents/IconWithTextCard\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport HomeworkInProgress from \"./HomeworkInProgress\";\nimport CardBox from \"../../../../../components/CardBox/index\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport Fab from \"@material-ui/core/Fab\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport RemoveSharpIcon from \"@material-ui/icons/RemoveSharp\";\nimport { connect } from \"react-redux\";\nimport AddHomework from \"./AddHomework\";\nimport { UncontrolledAlert } from 'reactstrap';\nimport { classService } from '../../../../../_services/class.service';\nimport HomeworkList from \"./HomeworkList\";\n\nclass Homework extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangePublicationDate = date => {\n      this.setState({\n        publicationDate: date\n      });\n    };\n\n    this.handleChangePostTime = time => {\n      this.setState({\n        postTime: time._d\n      });\n    };\n\n    this.handleChangeSubject = selectedOption => {\n      this.setState({\n        subjectId: selectedOption.value,\n        subjectColor: selectedOption.color\n      }); // apiEndpoint = `/assignment_class_subjects?access_token=${localStorage.token}&where={\"establishment_id\":${establishment_id}}`;\n      // classService.get(apiEndpoint).then((response) => {\n      //   if (response) {\n      //     console.log('response', response);\n      //     // this.setState({ countesComplaints: response.data.count });\n      //   }\n      // });\n    };\n\n    this.handleChangeHomeworkType = selectedOption => {\n      this.setState({\n        HomeworkType: selectedOption.value\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.state = {\n      isOpenAddModal: false,\n      nameFile: \"\",\n      HomeworkTypes: [{\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"toDo.book.exercise\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 26,\n            columnNumber: 18\n          }\n        }),\n        value: \"book\",\n        id: 1\n      }, {\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"toDo.series.exercise\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 31,\n            columnNumber: 18\n          }\n        }),\n        value: \"serie\",\n        id: 2\n      }, {\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"toDo.other.exercise\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 18\n          }\n        }),\n        value: \"other\",\n        id: 3\n      }],\n      homeworkType: \"\",\n      subjectId: null,\n      subjectColor: \"\",\n      description: \"\",\n      courseUrl: \"\",\n      homeworkFiles: [],\n      nameFiles: [],\n      publicationDate: new Date(),\n      postTime: new Date()\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeHomeworkType = this.handleChangeHomeworkType.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.attachFile = this.attachFile.bind(this);\n    this.deleteFile = this.deleteFile.bind(this);\n    this.handleChangePostTime = this.handleChangePostTime.bind(this);\n    this.handleChangePublicationDate = this.handleChangePublicationDate.bind(this);\n  }\n\n  deleteFile(filename) {\n    let nameFiles = this.state.nameFiles.filter(element => element != filename);\n    let homeworkFiles = this.state.homeworkFiles.filter(element => element.name != filename);\n    this.setState({\n      nameFiles,\n      homeworkFiles\n    });\n  }\n\n  attachFile(e) {\n    var oldFiles = this.state.homeworkFiles;\n    var files = Object.values(e.target.files);\n    var nameFiles = this.state.nameFiles;\n\n    if (files !== undefined && this.state.nameFiles.length + files.length < 6) {\n      files.map(element => {\n        nameFiles.push(element.name);\n        oldFiles.push(element);\n      });\n      this.setState({\n        homeworkFiles: oldFiles,\n        nameFiles\n      });\n    } else {\n      this.setState({\n        messageAlerte: \"Vous avez dépasser 5 fichiers\",\n        alerteStatus: true\n      });\n      setTimeout(() => {\n        this.setState({\n          messageAlerte: \"\",\n          alerteStatus: false\n        });\n      }, 4000);\n    }\n  }\n\n  openAddModal() {\n    this.setState({\n      isOpenAddModal: !this.state.isOpenAddModal\n    });\n  }\n\n  UNSAFE_componentWillMount() {\n    console.log(\"UNSAFE_componentWillMount\", this.props.subjects);\n    let subjects = createListSubject(this.props.subjects);\n    this.setState({\n      subjects\n    });\n  }\n\n  componentDidUpdate(previouProps) {\n    if (previouProps.subjects !== this.props.subjects) {\n      let subjects = createListSubject(this.props.subjects);\n      this.setState({\n        subjects\n      });\n    }\n  }\n\n  render() {\n    console.log(\"this.state\", this.state);\n    let detailCards = [{\n      cardColor: \"primary\",\n      imageIcon: require(\"../../../../../assets/images/dashboard/teams-icon.png\"),\n      // title: this.props.virtualClasses.length,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `message.Numbers.of.students`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 19\n        }\n      })\n    }, {\n      cardColor: \"secondary\",\n      imageIcon: require(\"../../../../../assets/images/dashboard/tasks-icon.png\"),\n      // title: this.state.prog,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `homework.file`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 19\n        }\n      })\n    }, {\n      cardColor: \"info\",\n      imageIcon: require(\"../../../../../assets/images/dashboard/project-icon.png\"),\n      // title: this.state.encours,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `homework.uncorrected`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 19\n        }\n      })\n    }, {\n      cardColor: \"success\",\n      imageIcon: require(\"../../../../../assets/images/dashboard/files-icon.png\"),\n      // title: this.state.encours,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `homework.educational.files`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 19\n        }\n      })\n    } //   {\n    //     cardColor: \"warning\",\n    //     imageIcon: require(\"../../../FinancialManagement/routes/ServiceAllocation/Icone/files-icon.png\"),\n    //     // title: this.state.terminé,\n    //     subTitle: <IntlMessages id={`virtual.class.programmé`} />,\n    //   },\n    ];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper col-lg-12 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-column mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row col-lg-12 col-md- col-sm-12  \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 11\n      }\n    }, detailCards.map((data, index) => /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"col-xl-3 col-lg-3 col-md-6 col-sm-6 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IconWithTextCard, {\n      data: data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 11\n      }\n    }, this.state.alerteStatus && /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-danger bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 15\n      }\n    }, \" \", this.state.messageAlerte, \" \"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 col-md-auto \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(HomeworkInProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Fab, {\n      size: \"small\",\n      color: \"secondary\",\n      \"aria-label\": \"Add\",\n      onClick: this.openAddModal.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 21\n      }\n    }, this.state.isOpenAddModal ? /*#__PURE__*/React.createElement(RemoveSharpIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 25\n      }\n    }) : /*#__PURE__*/React.createElement(AddIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2\",\n      style: {\n        fontFamily: \"Roboto\",\n        fontSize: \"17px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"modal.addToDo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pl-5 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Fab, {\n      size: \"small\",\n      \"aria-label\": \"Add\",\n      style: {\n        backgroundColor: \"#ffbb33\",\n        color: \"#ffffff\"\n      } // onClick={this.props.openAddModal}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(DeleteOutlineIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 23\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2\",\n      style: {\n        fontFamily: \"Roboto\",\n        fontSize: \"17px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"icon.archives\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 21\n      }\n    })))), this.state.isOpenAddModal && /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(AddHomework, {\n      values: this.state,\n      handleChange: this.handleChange,\n      handleChangeHomeworkType: this.handleChangeHomeworkType,\n      subjects: this.props.subjects,\n      handleChangeSubject: this.handleChangeSubject,\n      attachFile: this.attachFile,\n      deleteFile: this.deleteFile,\n      handleChangePostTime: this.handleChangePostTime,\n      handleChangePublicationDate: this.handleChangePublicationDate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(HomeworkList, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 16\n      }\n    })))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userProfile: state.auth.userProfile,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    subjects: state.subject.subjects\n  };\n};\n\nexport default connect(mapStateToProps)(Homework);\n\nfunction createListSubject(subjects) {\n  let newList = subjects.map(element => {\n    let object = {};\n    object.label = element.name;\n    object.id = element.id;\n    object.value = element.id;\n    object.color = element.color;\n    return object;\n  });\n  return newList;\n}","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Learning/routes/Homeworks/Homework.js"],"names":["React","IconWithTextCard","IntlMessages","HomeworkInProgress","CardBox","AddIcon","Fab","DeleteOutlineIcon","RemoveSharpIcon","connect","AddHomework","UncontrolledAlert","classService","HomeworkList","Homework","Component","constructor","props","handleChangePublicationDate","date","setState","publicationDate","handleChangePostTime","time","postTime","_d","handleChangeSubject","selectedOption","subjectId","value","subjectColor","color","handleChangeHomeworkType","HomeworkType","handleChange","name","event","target","state","isOpenAddModal","nameFile","HomeworkTypes","label","id","homeworkType","description","courseUrl","homeworkFiles","nameFiles","Date","bind","attachFile","deleteFile","filename","filter","element","e","oldFiles","files","Object","values","undefined","length","map","push","messageAlerte","alerteStatus","setTimeout","openAddModal","UNSAFE_componentWillMount","console","log","subjects","createListSubject","componentDidUpdate","previouProps","render","detailCards","cardColor","imageIcon","require","subTitle","data","index","fontFamily","fontSize","backgroundColor","mapStateToProps","userProfile","auth","successStatus","alert","success","errorStatus","error","message","subject","newList","object"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport IconWithTextCard from \"../../../CommonComponents/IconWithTextCard\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport HomeworkInProgress from \"./HomeworkInProgress\";\nimport CardBox from \"../../../../../components/CardBox/index\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport Fab from \"@material-ui/core/Fab\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport RemoveSharpIcon from \"@material-ui/icons/RemoveSharp\";\nimport { connect } from \"react-redux\";\nimport AddHomework from \"./AddHomework\";\nimport { UncontrolledAlert } from 'reactstrap';\nimport { classService } from '../../../../../_services/class.service';\n\nimport HomeworkList from \"./HomeworkList\";\n\nclass Homework extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpenAddModal: false,\n      nameFile: \"\",\n      HomeworkTypes: [\n        {\n          label: <IntlMessages id=\"toDo.book.exercise\" />,\n          value: \"book\",\n          id: 1,\n        },\n        {\n          label: <IntlMessages id=\"toDo.series.exercise\" />,\n          value: \"serie\",\n          id: 2,\n        },\n        {\n          label: <IntlMessages id=\"toDo.other.exercise\" />,\n          value: \"other\",\n          id: 3,\n        },\n      ],\n      homeworkType: \"\",\n      subjectId: null,\n      subjectColor: \"\",\n      description: \"\",\n      courseUrl: \"\",\n      homeworkFiles: [],\n      nameFiles: [],\n      publicationDate: new Date(),\n      postTime: new Date(),\n      \n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeHomeworkType = this.handleChangeHomeworkType.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.attachFile = this.attachFile.bind(this);\n    this.deleteFile = this.deleteFile.bind(this);\n    this.handleChangePostTime = this.handleChangePostTime.bind(this);\n    this.handleChangePublicationDate = this.handleChangePublicationDate.bind(this);\n\n    \n  }\n\n\n  handleChangePublicationDate = (date) => {\n    this.setState({ publicationDate: date });\n  };\n\n  handleChangePostTime = (time) => {\n    this.setState({ postTime: time._d });\n  };\n\n  deleteFile(filename) {\n    let nameFiles = this.state.nameFiles.filter((element) => element != filename);\n\n\n    let homeworkFiles = this.state.homeworkFiles.filter(\n      (element) => element.name != filename\n    );\n\n    this.setState({ nameFiles,  homeworkFiles });\n  }\n\n  attachFile(e) {\n    var oldFiles = this.state.homeworkFiles;\n    var files = Object.values(e.target.files);\n    var nameFiles = this.state.nameFiles;\n    if (files !== undefined && this.state.nameFiles.length + files.length < 6) {\n      files.map((element) => {\n        nameFiles.push(element.name);\n        oldFiles.push(element);\n      });\n      this.setState({ homeworkFiles: oldFiles, nameFiles });\n    } else {\n      this.setState({\n        messageAlerte: \"Vous avez dépasser 5 fichiers\",\n        alerteStatus: true,\n      });\n      setTimeout(() => {\n        this.setState({ messageAlerte: \"\", alerteStatus: false });\n      }, 4000);\n    }\n  }\n\n  handleChangeSubject = (selectedOption) => {\n    this.setState({\n      subjectId: selectedOption.value,\n      subjectColor: selectedOption.color,\n    });\n\n    // apiEndpoint = `/assignment_class_subjects?access_token=${localStorage.token}&where={\"establishment_id\":${establishment_id}}`;\n    // classService.get(apiEndpoint).then((response) => {\n    //   if (response) {\n    //     console.log('response', response);\n    //     // this.setState({ countesComplaints: response.data.count });\n    //   }\n    // });\n\n  };\n\n  handleChangeHomeworkType = (selectedOption) => {\n    this.setState({ HomeworkType: selectedOption.value });\n  };\n\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n\n  openAddModal() {\n    this.setState({ isOpenAddModal: !this.state.isOpenAddModal });\n  }\n\n  UNSAFE_componentWillMount() {\n    console.log(\"UNSAFE_componentWillMount\", this.props.subjects);\n    let subjects = createListSubject(this.props.subjects);\n    this.setState({ subjects });\n  }\n  componentDidUpdate(previouProps) {\n    if (previouProps.subjects !== this.props.subjects) {\n      let subjects = createListSubject(this.props.subjects);\n      this.setState({ subjects });\n    }\n  }\n\n  render() {\n    console.log(\"this.state\", this.state);\n    let detailCards = [\n      {\n        cardColor: \"primary\",\n        imageIcon: require(\"../../../../../assets/images/dashboard/teams-icon.png\"),\n\n        // title: this.props.virtualClasses.length,\n        subTitle: <IntlMessages id={`message.Numbers.of.students`} />,\n      },\n      {\n        cardColor: \"secondary\",\n        imageIcon: require(\"../../../../../assets/images/dashboard/tasks-icon.png\"),\n        // title: this.state.prog,\n        subTitle: <IntlMessages id={`homework.file`} />,\n      },\n      {\n        cardColor: \"info\",\n        imageIcon: require(\"../../../../../assets/images/dashboard/project-icon.png\"),\n        // title: this.state.encours,\n        subTitle: <IntlMessages id={`homework.uncorrected`} />,\n      },\n      {\n        cardColor: \"success\",\n        imageIcon: require(\"../../../../../assets/images/dashboard/files-icon.png\"),\n        // title: this.state.encours,\n        subTitle: <IntlMessages id={`homework.educational.files`} />,\n      },\n      //   {\n      //     cardColor: \"warning\",\n      //     imageIcon: require(\"../../../FinancialManagement/routes/ServiceAllocation/Icone/files-icon.png\"),\n      //     // title: this.state.terminé,\n      //     subTitle: <IntlMessages id={`virtual.class.programmé`} />,\n      //   },\n    ];\n    return (\n      <div className=\"app-wrapper col-lg-12 col-md-12\">\n        <div className=\"d-flex flex-column mb-3\">\n          <div className=\"row col-lg-12 col-md- col-sm-12  \">\n            {detailCards.map((data, index) => (\n              <div\n                key={index}\n                className=\"col-xl-3 col-lg-3 col-md-6 col-sm-6 col-12\"\n              >\n                <IconWithTextCard data={data} />\n              </div>\n            ))}\n          </div>\n          <div>\n          {this.state.alerteStatus &&\n            <UncontrolledAlert className=\"alert-addon-card bg-danger bg-success text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\"> {this.state.messageAlerte} </span>\n            </UncontrolledAlert>}\n          </div>\n          <div className=\"row\">\n            <div className=\"col-12 col-md-auto \">\n              <CardBox styleName=\"row\">\n                <HomeworkInProgress />\n              </CardBox>\n            </div>\n\n            <div className=\"col \">\n              <CardBox styleName=\"col-lg-12 \">\n                <div className=\"row\">\n                  <div>\n                    <Fab\n                      size=\"small\"\n                      color=\"secondary\"\n                      aria-label=\"Add\"\n                      onClick={this.openAddModal.bind(this)}\n                    >\n                      {this.state.isOpenAddModal ? (\n                        <RemoveSharpIcon />\n                      ) : (\n                        <AddIcon />\n                      )}\n                    </Fab>\n                  </div>\n                  <div\n                    className=\"p-2\"\n                    style={{ fontFamily: \"Roboto\", fontSize: \"17px\" }}\n                  >\n                    <IntlMessages id=\"modal.addToDo\" />\n                  </div>\n\n                  <div className=\"pl-5 \">\n                    <Fab\n                      size=\"small\"\n                      aria-label=\"Add\"\n                      style={{ backgroundColor: \"#ffbb33\", color: \"#ffffff\" }}\n                      // onClick={this.props.openAddModal}\n                    >\n                      {/* {this.props.values.isOpen ? (\n                          <RemoveSharpIcon />\n                        ) : ( */}\n                      <DeleteOutlineIcon />\n                      {/* )} */}\n                    </Fab>\n                  </div>\n                  <div\n                    className=\"p-2\"\n                    style={{ fontFamily: \"Roboto\", fontSize: \"17px\" }}\n                  >\n                    <IntlMessages id=\"icon.archives\" />\n                  </div>\n                </div>\n              </CardBox>\n              {this.state.isOpenAddModal && (\n                <CardBox styleName=\"col-lg-12\">\n                  <AddHomework\n                    values={this.state}\n                    handleChange={this.handleChange}\n                    handleChangeHomeworkType={this.handleChangeHomeworkType}\n                    subjects={this.props.subjects}\n                    handleChangeSubject={this.handleChangeSubject}\n                    attachFile={this.attachFile}\n                    deleteFile = {this.deleteFile}\n                    handleChangePostTime={this.handleChangePostTime}\n                    handleChangePublicationDate= {this.handleChangePublicationDate}\n\n                  />\n                </CardBox>\n              )}\n               <HomeworkList/>\n            </div>\n          </div>\n\n         \n         \n\n\n\n\n\n        </div>\n      </div>\n    );\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    userProfile: state.auth.userProfile,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    subjects: state.subject.subjects,\n  };\n};\nexport default connect(mapStateToProps)(Homework);\n\nfunction createListSubject(subjects) {\n  let newList = subjects.map((element) => {\n    let object = {};\n    object.label = element.name;\n    object.id = element.id;\n    object.value = element.id;\n    object.color = element.color;\n    return object;\n  });\n  return newList;\n}\n"]},"metadata":{},"sourceType":"module"}