{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/components/mail/MailDetail/index.js\";\nimport React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport CustomScrollbars from '../../../util/CustomScrollbars';\nimport baseUrl from '../../../config/config';\nimport axios from 'axios';\nimport _ from 'lodash';\nimport ComposeMail from '../../mail/Compose/index';\n\nvar dateFormat = require('dateformat');\n\nclass MailDetail extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      anchorEl: undefined,\n      open: false,\n      showDetail: false,\n      senderInfo: '',\n      receiverInfo: '',\n      url: '',\n      openCompose: false\n    };\n\n    this.handleClick = event => {\n      this.setState({\n        open: true,\n        anchorEl: event.currentTarget\n      });\n    };\n\n    this.onComposeMail = () => {\n      this.setState({\n        openCompose: true,\n        open: false\n      });\n    };\n\n    this.handleRequestClose = () => {\n      this.setState({\n        openCompose: false\n      });\n    };\n  }\n\n  componentWillMount() {\n    axios.get(`${baseUrl.baseUrl}/profiles/` + this.props.mail.sender_id + `/user?access_token=${localStorage.token}`).then(res => {\n      const senderInfo = res.data;\n      this.setState({\n        senderInfo\n      });\n    });\n    axios.get(`${baseUrl.baseUrl}/profiles/` + this.props.mail.receiver_id + `/user?access_token=${localStorage.token}`).then(res => {\n      const receiverInfo = res.data;\n      this.setState({\n        receiverInfo\n      });\n    });\n  }\n\n  onMailSend(dataReply) {\n    dataReply.sender_id = this.props.mail.receiver_id;\n    dataReply.receiver_id = this.props.mail.sender_id;\n    this.props.onMailSend(dataReply);\n  }\n\n  componentDidMount() {\n    if (this.props.mail.files !== null) {\n      var estblishmentId = localStorage.getItem('establishment_id');\n      axios.get(`${baseUrl.baseUrl}/establishments/` + estblishmentId + `?access_token=${localStorage.token}`).then(response => {\n        this.setState({\n          establishmentName: response.data.name\n        });\n        axios.get(`${baseUrl.baseUrl}/containers/checkFileExist/${response.data.name}?access_token=${localStorage.token}`).then(response => {\n          let fileList = _.isEmpty(response.data.checkFile) ? null : response.data.checkFile.find(item => item.name === this.props.mail.files);\n          const establishLogoUrl = _.isEmpty(fileList) ? null : `${baseUrl.baseUrl}/containers/` + this.state.establishmentName + '/download/' + fileList.name + `?access_token=${localStorage.token}`;\n\n          if (establishLogoUrl !== null) {\n            axios({\n              url: establishLogoUrl,\n              method: 'GET',\n              responseType: 'arraybuffer'\n            }).then(response => {\n              var arr = response.data;\n              var data2 = new Uint8Array(arr);\n              var blob = new Blob([data2], {\n                type: 'application/pdf'\n              });\n              var url = URL.createObjectURL(blob);\n              this.setState({\n                url: url\n              });\n            }).catch(err => {\n              console.log('erorrrrrrrrr', err);\n            });\n          } else {\n            this.setState({\n              url: null\n            });\n          }\n        });\n      });\n    }\n  }\n\n  render() {\n    const {\n      mail,\n      onStartSelect,\n      onImportantSelect,\n      width,\n      user\n    } = this.props;\n    const {\n      openCompose\n    } = this.state;\n    const options = ['Reply', 'Forward', 'Print'];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"module-detail mail-detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CustomScrollbars, {\n      className: \"module-list-scroll scrollbar\",\n      style: {\n        height: width >= 1200 ? 'calc(100vh - 315px)' : 'calc(100vh - 295px)'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }\n    }, (() => {\n      if (this.props.mail.files !== null) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"mail-header\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"mail-header-content col pl-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"subject\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 21\n          }\n        }, mail.subject)), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"mail-header-actions\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          className: \"icon-btn\",\n          href: this.state.url,\n          target: \"_blank\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(IconButton, {\n          className: \"icon-btn\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"zmdi zmdi-eye\",\n          style: {\n            color: '#3F51B5'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 25\n          }\n        })), ' '), /*#__PURE__*/React.createElement(\"a\", {\n          className: \"icon-btn\",\n          href: this.state.url,\n          download: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(IconButton, {\n          className: \"icon-btn\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"zmdi zmdi-download\",\n          style: {\n            color: '#3F51B5'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 25\n          }\n        })), ' '), /*#__PURE__*/React.createElement(IconButton, {\n          type: \"button\",\n          className: \"icon-btn\",\n          onClick: () => {\n            onStartSelect(mail);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 21\n          }\n        }, mail.starred ? /*#__PURE__*/React.createElement(\"i\", {\n          className: \"zmdi zmdi-star\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 25\n          }\n        }) : /*#__PURE__*/React.createElement(\"i\", {\n          className: \"zmdi zmdi-star-outline\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 25\n          }\n        })), /*#__PURE__*/React.createElement(IconButton, {\n          type: \"button\",\n          className: \"icon-btn\",\n          onClick: () => {\n            onImportantSelect(mail);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 21\n          }\n        }, mail.important ? /*#__PURE__*/React.createElement(\"i\", {\n          className: \"zmdi zmdi-label-alt\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 25\n          }\n        }) : /*#__PURE__*/React.createElement(\"i\", {\n          className: \"zmdi zmdi-label-alt-outline\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 25\n          }\n        }))));\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"mail-header\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"mail-header-content col pl-0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"subject\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 21\n          }\n        }, mail.subject)), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"mail-header-actions\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(IconButton, {\n          type: \"button\",\n          className: \"icon-btn\",\n          onClick: () => {\n            onStartSelect(mail);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 21\n          }\n        }, mail.starred ? /*#__PURE__*/React.createElement(\"i\", {\n          className: \"zmdi zmdi-star\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 25\n          }\n        }) : /*#__PURE__*/React.createElement(\"i\", {\n          className: \"zmdi zmdi-star-outline\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 25\n          }\n        })), /*#__PURE__*/React.createElement(IconButton, {\n          type: \"button\",\n          className: \"icon-btn\",\n          onClick: () => {\n            onImportantSelect(mail);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 21\n          }\n        }, mail.important ? /*#__PURE__*/React.createElement(\"i\", {\n          className: \"zmdi zmdi-label-alt\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 25\n          }\n        }) : /*#__PURE__*/React.createElement(\"i\", {\n          className: \"zmdi zmdi-label-alt-outline\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 25\n          }\n        }))));\n      }\n    })(), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mail-user-info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sender-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 13\n      }\n    }, this.state.senderInfo.username + ': ' + mail.profile.user.email, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"send-to text-grey\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 15\n      }\n    }, \"to me\")), /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"More\",\n      \"aria-owns\": this.state.open ? 'long-SidenavContent.js' : null,\n      \"aria-haspopup\": true,\n      onClick: this.handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(MoreVertIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(Menu, {\n      id: \"long-menu\",\n      anchorEl: this.state.anchorEl,\n      open: this.state.open,\n      onClose: this.handleRequestClose,\n      MenuListProps: {\n        style: {\n          width: 200\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 13\n      }\n    }, options.map(option => /*#__PURE__*/React.createElement(MenuItem, {\n      key: option,\n      onClick: this.onComposeMail,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 17\n      }\n    }, option))), /*#__PURE__*/React.createElement(ComposeMail, {\n      open: openCompose,\n      user: user,\n      subjectReply: 'Re ' + this.props.mail.subject,\n      emailReplay: this.props.mail.profile.user.email,\n      onClose: this.handleRequestClose,\n      onMailSend: this.onMailSend.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"show-detail\",\n      onClick: () => {\n        this.setState({\n          showDetail: !this.state.showDetail\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 11\n      }\n    }, this.state.showDetail ? 'Hide Detail' : 'Show Detail'), this.state.showDetail && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }\n    }, \"From: \"), this.state.senderInfo.username + ': ' + mail.profile.user.email), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }\n    }, \" To: \"), this.state.receiverInfo.username), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 17\n      }\n    }, \"Date: \"), dateFormat(mail.date_hour_mail, 'dddd, mmmm dS, yyyy, HH:MM'))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"font\", {\n      size: \"+2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 13\n      }\n    }, \" \", mail.message)), mail.hasAttachments && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"attachment-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 15\n      }\n    }, \"Attachments (\", mail.hasAttachments.length, \")\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 15\n      }\n    }, mail.attachments.map((attachment, index) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-3\",\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"size-100\",\n      src: attachment.preview,\n      alt: attachment.fileName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"size\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 21\n      }\n    }, attachment.size)))))));\n  }\n\n}\n\nexport default MailDetail;","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/components/mail/MailDetail/index.js"],"names":["React","IconButton","Menu","MenuItem","MoreVertIcon","CustomScrollbars","baseUrl","axios","_","ComposeMail","dateFormat","require","MailDetail","Component","state","anchorEl","undefined","open","showDetail","senderInfo","receiverInfo","url","openCompose","handleClick","event","setState","currentTarget","onComposeMail","handleRequestClose","componentWillMount","get","props","mail","sender_id","localStorage","token","then","res","data","receiver_id","onMailSend","dataReply","componentDidMount","files","estblishmentId","getItem","response","establishmentName","name","fileList","isEmpty","checkFile","find","item","establishLogoUrl","method","responseType","arr","data2","Uint8Array","blob","Blob","type","URL","createObjectURL","catch","err","console","log","render","onStartSelect","onImportantSelect","width","user","options","height","subject","color","starred","important","username","profile","email","style","map","option","bind","date_hour_mail","message","hasAttachments","length","attachments","attachment","index","preview","fileName","size"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport CustomScrollbars from '../../../util/CustomScrollbars';\r\nimport baseUrl from '../../../config/config';\r\nimport axios from 'axios';\r\nimport _ from 'lodash';\r\nimport ComposeMail from '../../mail/Compose/index';\r\n\r\nvar dateFormat = require('dateformat');\r\nclass MailDetail extends React.Component {\r\n  state = {\r\n    anchorEl: undefined,\r\n    open: false,\r\n    showDetail: false,\r\n    senderInfo: '',\r\n    receiverInfo: '',\r\n    url: '',\r\n    openCompose: false,\r\n  };\r\n\r\n  handleClick = (event) => {\r\n    this.setState({ open: true, anchorEl: event.currentTarget });\r\n  };\r\n  onComposeMail = () => {\r\n    this.setState({ openCompose: true, open: false });\r\n  };\r\n  handleRequestClose = () => {\r\n    this.setState({ openCompose: false });\r\n  };\r\n\r\n  componentWillMount() {\r\n    axios\r\n      .get(\r\n        `${baseUrl.baseUrl}/profiles/` +\r\n          this.props.mail.sender_id +\r\n          `/user?access_token=${localStorage.token}`\r\n      )\r\n      .then((res) => {\r\n        const senderInfo = res.data;\r\n        this.setState({ senderInfo });\r\n      });\r\n    axios\r\n      .get(\r\n        `${baseUrl.baseUrl}/profiles/` +\r\n          this.props.mail.receiver_id +\r\n          `/user?access_token=${localStorage.token}`\r\n      )\r\n      .then((res) => {\r\n        const receiverInfo = res.data;\r\n        this.setState({ receiverInfo });\r\n      });\r\n  }\r\n  onMailSend(dataReply) {\r\n    dataReply.sender_id = this.props.mail.receiver_id;\r\n    dataReply.receiver_id = this.props.mail.sender_id;\r\n    this.props.onMailSend(dataReply);\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.mail.files !== null) {\r\n      var estblishmentId = localStorage.getItem('establishment_id');\r\n      axios\r\n        .get(\r\n          `${baseUrl.baseUrl}/establishments/` +\r\n            estblishmentId +\r\n            `?access_token=${localStorage.token}`\r\n        )\r\n        .then((response) => {\r\n          this.setState({\r\n            establishmentName: response.data.name,\r\n          });\r\n          axios\r\n            .get(\r\n              `${baseUrl.baseUrl}/containers/checkFileExist/${response.data.name}?access_token=${localStorage.token}`\r\n            )\r\n            .then((response) => {\r\n              let fileList = _.isEmpty(response.data.checkFile)\r\n                ? null\r\n                : response.data.checkFile.find(\r\n                    (item) => item.name === this.props.mail.files\r\n                  );\r\n              const establishLogoUrl = _.isEmpty(fileList)\r\n                ? null\r\n                : `${baseUrl.baseUrl}/containers/` +\r\n                  this.state.establishmentName +\r\n                  '/download/' +\r\n                  fileList.name +\r\n                  `?access_token=${localStorage.token}`;\r\n              if (establishLogoUrl !== null) {\r\n                axios({\r\n                  url: establishLogoUrl,\r\n                  method: 'GET',\r\n                  responseType: 'arraybuffer',\r\n                })\r\n                  .then((response) => {\r\n                    var arr = response.data;\r\n                    var data2 = new Uint8Array(arr);\r\n                    var blob = new Blob([data2], { type: 'application/pdf' });\r\n                    var url = URL.createObjectURL(blob);\r\n                    this.setState({\r\n                      url: url,\r\n                    });\r\n                  })\r\n                  .catch((err) => {\r\n                    console.log('erorrrrrrrrr', err);\r\n                  });\r\n              } else {\r\n                this.setState({\r\n                  url: null,\r\n                });\r\n              }\r\n            });\r\n        });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { mail, onStartSelect, onImportantSelect, width, user } = this.props;\r\n    const { openCompose } = this.state;\r\n    const options = ['Reply', 'Forward', 'Print'];\r\n    return (\r\n      <div className=\"module-detail mail-detail\">\r\n        <CustomScrollbars\r\n          className=\"module-list-scroll scrollbar\"\r\n          style={{\r\n            height:\r\n              width >= 1200 ? 'calc(100vh - 315px)' : 'calc(100vh - 295px)',\r\n          }}\r\n        >\r\n          {(() => {\r\n            if (this.props.mail.files !== null) {\r\n              return (\r\n                <div className=\"mail-header\">\r\n                  <div className=\"mail-header-content col pl-0\">\r\n                    <div className=\"subject\">{mail.subject}</div>\r\n                  </div>\r\n                  <div className=\"mail-header-actions\">\r\n                    <a\r\n                      className=\"icon-btn\"\r\n                      href={this.state.url}\r\n                      target=\"_blank\"\r\n                    >\r\n                      <IconButton className=\"icon-btn\">\r\n                        <i\r\n                          className=\"zmdi zmdi-eye\"\r\n                          style={{ color: '#3F51B5' }}\r\n                        />\r\n                      </IconButton>{' '}\r\n                    </a>\r\n                    <a className=\"icon-btn\" href={this.state.url} download>\r\n                      <IconButton className=\"icon-btn\">\r\n                        <i\r\n                          className=\"zmdi zmdi-download\"\r\n                          style={{ color: '#3F51B5' }}\r\n                        />\r\n                      </IconButton>{' '}\r\n                    </a>\r\n                    <IconButton\r\n                      type=\"button\"\r\n                      className=\"icon-btn\"\r\n                      onClick={() => {\r\n                        onStartSelect(mail);\r\n                      }}\r\n                    >\r\n                      {mail.starred ? (\r\n                        <i className=\"zmdi zmdi-star\" />\r\n                      ) : (\r\n                        <i className=\"zmdi zmdi-star-outline\" />\r\n                      )}\r\n                    </IconButton>\r\n                    <IconButton\r\n                      type=\"button\"\r\n                      className=\"icon-btn\"\r\n                      onClick={() => {\r\n                        onImportantSelect(mail);\r\n                      }}\r\n                    >\r\n                      {mail.important ? (\r\n                        <i className=\"zmdi zmdi-label-alt\" />\r\n                      ) : (\r\n                        <i className=\"zmdi zmdi-label-alt-outline\" />\r\n                      )}\r\n                    </IconButton>\r\n                  </div>\r\n                </div>\r\n              );\r\n            } else {\r\n              return (\r\n                <div className=\"mail-header\">\r\n                  <div className=\"mail-header-content col pl-0\">\r\n                    <div className=\"subject\">{mail.subject}</div>\r\n                  </div>\r\n                  <div className=\"mail-header-actions\">\r\n                    <IconButton\r\n                      type=\"button\"\r\n                      className=\"icon-btn\"\r\n                      onClick={() => {\r\n                        onStartSelect(mail);\r\n                      }}\r\n                    >\r\n                      {mail.starred ? (\r\n                        <i className=\"zmdi zmdi-star\" />\r\n                      ) : (\r\n                        <i className=\"zmdi zmdi-star-outline\" />\r\n                      )}\r\n                    </IconButton>\r\n                    <IconButton\r\n                      type=\"button\"\r\n                      className=\"icon-btn\"\r\n                      onClick={() => {\r\n                        onImportantSelect(mail);\r\n                      }}\r\n                    >\r\n                      {mail.important ? (\r\n                        <i className=\"zmdi zmdi-label-alt\" />\r\n                      ) : (\r\n                        <i className=\"zmdi zmdi-label-alt-outline\" />\r\n                      )}\r\n                    </IconButton>\r\n                  </div>\r\n                </div>\r\n              );\r\n            }\r\n          })()}\r\n          <hr />\r\n          <div className=\"mail-user-info\">\r\n            <div className=\"sender-name\">\r\n              {this.state.senderInfo.username + ': ' + mail.profile.user.email}\r\n              <div className=\"send-to text-grey\">to me</div>\r\n            </div>\r\n            <IconButton\r\n              aria-label=\"More\"\r\n              aria-owns={this.state.open ? 'long-SidenavContent.js' : null}\r\n              aria-haspopup\r\n              onClick={this.handleClick}\r\n            >\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n            <Menu\r\n              id=\"long-menu\"\r\n              anchorEl={this.state.anchorEl}\r\n              open={this.state.open}\r\n              onClose={this.handleRequestClose}\r\n              MenuListProps={{\r\n                style: {\r\n                  width: 200,\r\n                },\r\n              }}\r\n            >\r\n              {options.map((option) => (\r\n                <MenuItem key={option} onClick={this.onComposeMail}>\r\n                  {option}\r\n                </MenuItem>\r\n              ))}\r\n            </Menu>\r\n            <ComposeMail\r\n              open={openCompose}\r\n              user={user}\r\n              subjectReply={'Re ' + this.props.mail.subject}\r\n              emailReplay={this.props.mail.profile.user.email}\r\n              onClose={this.handleRequestClose}\r\n              onMailSend={this.onMailSend.bind(this)}\r\n            />\r\n          </div>\r\n          <div\r\n            className=\"show-detail\"\r\n            onClick={() => {\r\n              this.setState({ showDetail: !this.state.showDetail });\r\n            }}\r\n          >\r\n            {this.state.showDetail ? 'Hide Detail' : 'Show Detail'}\r\n          </div>\r\n          {this.state.showDetail && (\r\n            <div>\r\n              <div>\r\n                <strong>From: </strong>\r\n                {this.state.senderInfo.username +\r\n                  ': ' +\r\n                  mail.profile.user.email}\r\n              </div>\r\n              <div>\r\n                <strong> To: </strong>\r\n                {this.state.receiverInfo.username}\r\n              </div>\r\n              <div>\r\n                <strong>Date: </strong>\r\n                {dateFormat(mail.date_hour_mail, 'dddd, mmmm dS, yyyy, HH:MM')}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <br></br>\r\n          <p className=\"message\">\r\n            <font size=\"+2\"> {mail.message}</font>\r\n          </p>\r\n\r\n          {mail.hasAttachments && (\r\n            <div className=\"attachment-block\">\r\n              <h3>Attachments ({mail.hasAttachments.length})</h3>\r\n              <div className=\"row\">\r\n                {mail.attachments.map((attachment, index) => (\r\n                  <div className=\"col-3\" key={index}>\r\n                    <img\r\n                      className=\"size-100\"\r\n                      src={attachment.preview}\r\n                      alt={attachment.fileName}\r\n                    />\r\n                    <div className=\"size\">{attachment.size}</div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </CustomScrollbars>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MailDetail;\r\n"]},"metadata":{},"sourceType":"module"}