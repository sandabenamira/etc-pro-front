{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap-pro/educap-pro-front/src/app/routes/Learning/routes/Moocs/Moocs.js\";\nimport React from 'react';\nimport CardBox from '../../../../../components/CardBox/index';\nimport AddMoocs from './AddMoocs';\nimport { connect } from 'react-redux';\nimport MoocsList from './MoocsList';\nimport ArchiveMoocs from './ArchiveMoocs';\nimport { UncontrolledAlert } from 'reactstrap';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport Fab from '@material-ui/core/Fab';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport moment from 'moment';\nimport { addMoocs } from '../../../../../actions/MoocsActions';\nimport { getMoocs } from '../../../../../actions/MoocsActions';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconWithTextCard from '../../../FinancialManagement/routes/ServiceAllocation/ServiceAllocationComp/IconWithTextCard';\nimport { RoleContext } from '../../../../../Context';\nimport Can from '../../../../../can';\nimport _ from 'lodash';\nimport { roleIdProfessor, roleIdAdmin } from '../../../../../config/config';\nimport axios from 'axios';\nimport baseUrl from '../../../../../config/config';\nimport Loader from 'react-loader-spinner';\nimport LoaderModal from './LoaderModal';\nimport { element } from 'prop-types';\n\nclass Moocs extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleChangeSubject = name => event => {\n      let obj = JSON.parse(event.target.value);\n      let courseAssignment = [];\n\n      if (this.props.userProfile.role_id === roleIdProfessor) {\n        courseAssignment = this.state.assignmentClassSubjectProf.filter(element => element.fk_id_subject_v4 === obj.subjectId);\n      } else {\n        courseAssignment = this.props.courseAssignment.filter(element => element.fk_id_subject_v4 === obj.subjectId);\n      }\n\n      this.setState({\n        itemSubject: obj,\n        subjectId: obj.subjectId,\n        subjectName: obj.subjectName,\n        courseAssignment: courseAssignment,\n        moocsAssignment: [],\n        roomClasses: [],\n        assignmentRefresh: []\n      });\n    };\n\n    this.handleChangeClass = name => event => {\n      this.setState({\n        moocsAssignment: event.target.value\n      });\n      let roomClasses = event.target.value.map(element => element.id);\n      let assignmentRefresh = event.target.value.map(element => {\n        let data = {\n          assignementId: element.id,\n          classId: element.class.id,\n          className: element.class.name,\n          subjectName: element.subject.name,\n          subjectId: element.subject.id\n        };\n        return data;\n      });\n      this.setState({\n        roomClasses,\n        assignmentRefresh\n      });\n    };\n\n    this.onDrop = e => {\n      if (e.target.files[0] !== undefined) {\n        let file = e.target.files[0];\n        this.setState({\n          moocsFile: file,\n          moocsText: file.name\n        });\n      } else {\n        this.setState({\n          messageAlerte: \"Vous n'avez pas choisir un vidÃ©o\",\n          alerteFiltre: true\n        });\n        setTimeout(() => {\n          this.setState({\n            messageAlerte: '',\n            alerteFiltre: false\n          });\n        }, 4000);\n      }\n    };\n\n    this.handleChangeFilter = name => event => {\n      if (name === 'filterLevelId') {\n        let filterClasses = [];\n\n        if (this.props.userProfile.role_id === roleIdProfessor) {\n          filterClasses = this.state.classProf.filter(element => element.fk_id_level_v4 == event.target.value);\n        } else {\n          filterClasses = this.props.ClassSettings.filter(element => element.fk_id_level_v4 == event.target.value);\n        }\n\n        this.setState({\n          [name]: event.target.value,\n          filterClasses,\n          filterCourseAssignment: [],\n          listMoocs: this.props.listMoocs,\n          filterClassId: '',\n          filterAssignmentId: ''\n        });\n      } else if (name === 'filterClassId') {\n        let filterCourseAssignment = [];\n\n        if (this.props.userProfile.role_id === roleIdProfessor) {\n          filterCourseAssignment = this.state.assignmentClassSubjectProf.filter(element => element.fk_id_class_v4 == event.target.value);\n        } else {\n          filterCourseAssignment = this.props.courseAssignment.filter(element => element.fk_id_class_v4 == event.target.value);\n        }\n\n        let moocsAssignCourseFilter = [];\n        let filterMoocs = this.props.listMoocs.filter(mooc => {\n          moocsAssignCourseFilter = mooc.moocsAssignCourse.filter(element => element.classId == event.target.value);\n\n          if (moocsAssignCourseFilter.length > 0) {\n            return mooc;\n          }\n        });\n        this.setState({\n          [name]: event.target.value,\n          filterCourseAssignment,\n          listMoocs: filterMoocs,\n          filterAssignmentId: ''\n        });\n      } else {\n        if (event.target.value == 0) {\n          let moocsAssignCourseFilter = [];\n          let filterMoocs = this.props.listMoocs.filter(mooc => {\n            moocsAssignCourseFilter = mooc.moocsAssignCourse.filter(element => element.classId == this.state.filterClassId);\n\n            if (moocsAssignCourseFilter.length > 0) {\n              return mooc;\n            }\n          });\n          this.setState({\n            [name]: event.target.value,\n            listMoocs: filterMoocs\n          });\n        } else {\n          let moocsAssignCourseFilter = [];\n          let filterMoocs = this.props.listMoocs.filter(mooc => {\n            moocsAssignCourseFilter = mooc.moocsAssignCourse.filter(element => element.assignementId == event.target.value);\n\n            if (moocsAssignCourseFilter.length > 0) {\n              return mooc;\n            }\n          });\n          this.setState({\n            [name]: event.target.value,\n            listMoocs: filterMoocs\n          });\n        }\n      }\n    };\n\n    this.state = {\n      isOpen: false,\n      messageAlerte: '',\n      moocsText: '',\n      moocsFile: null,\n      topicMoocs: '',\n      idCourse: null,\n      idClasses: null,\n      prerequisite: '',\n      educationalGoals: '',\n      SessionMoocs: '',\n      dateOfCreation: new Date(),\n      durationMoocs: '',\n      courseAssignment: [],\n      roomClasses: [],\n      filterLevelId: '',\n      filterClassId: '',\n      filterAssignmentId: '',\n      filterClasses: [],\n      filterCourseAssignment: [],\n      listMoocs: [],\n      assignmentClassSubjectProf: [],\n      openArchive: false,\n      itemSubject: {},\n      subjectId: '',\n      subjectName: '',\n      moocsAssignment: [],\n      assignmentRefresh: [],\n      levelProf: [],\n      classProf: []\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChangeFilter = this.handleChangeFilter.bind(this);\n    this.openArchive = this.openArchive.bind(this);\n  }\n\n  openArchive() {\n    this.setState(previousState => ({\n      openArchive: !previousState.openArchive\n    }));\n  }\n\n  UNSAFE_componentWillMount() {\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      let apiEndpoint = `${baseUrl.baseUrl}/professors?access_token=${localStorage.token}&filter[where][profile_id]=${this.props.userProfile.id}&filter[include][course][assignmentClassSubject]=class&filter[include][course][assignmentClassSubject]=subject`;\n      axios.get(apiEndpoint).then(res => {\n        let data = _.map(res.data, 'course');\n\n        let subjects = [];\n        let assignmentClassSubjectProf = [];\n        let levelProf = [];\n        let classProf = [];\n        data[0].forEach(element => {\n          if (element.assignmentClassSubject.class.fk_id_school_year == this.props.userProfile.school_year_id) {\n            classProf.push(element.assignmentClassSubject.class);\n            subjects.push(element.assignmentClassSubject.subject);\n            assignmentClassSubjectProf.push(element.assignmentClassSubject);\n            let level = this.props.levels.find(levelItem => levelItem.id == element.assignmentClassSubject.class.fk_id_level_v4);\n\n            if (level != undefined) {\n              levelProf.push(level);\n            }\n          }\n        });\n\n        let levelFiltredByID = _.uniqBy(levelProf, 'id');\n\n        let classFiltredByID = _.uniqBy(classProf, 'id');\n\n        let subjectFiltred = _.uniqBy(subjects, 'id');\n\n        this.setState({\n          subjects: subjectFiltred,\n          assignmentClassSubjectProf,\n          levelProf: levelFiltredByID,\n          classProf: classFiltredByID\n        });\n      });\n    } else {\n      this.setState({\n        subjects: this.props.subjects\n      });\n    }\n\n    this.setState({\n      listMoocs: this.props.listMoocs\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.userProfile.school_year_id !== this.props.userProfile.school_year_id) {\n      this.props.dispatch(getMoocs(this.props.userProfile.establishment_id, this.props.userProfile.school_year_id, this.props.userProfile.role_id, this.props.userProfile.id));\n    }\n\n    if (prevProps.subjects !== this.props.subjects && this.props.userProfile.role_id === roleIdAdmin) {\n      this.setState({\n        subjects: this.props.subjects\n      });\n    }\n\n    if (prevProps.listMoocs !== this.props.listMoocs) {\n      this.setState({\n        listMoocs: this.props.listMoocs\n      });\n    }\n  }\n\n  openAddModal() {\n    this.setState(previousState => ({\n      isOpen: !previousState.isOpen\n    }));\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    let userReresh = {\n      profileId: this.props.userProfile.id,\n      name: this.props.userProfile.user.name,\n      surname: this.props.userProfile.user.surname\n    };\n    let data = {\n      topicMoocs: this.state.topicMoocs,\n      idAssignement: this.state.roomClasses,\n      prerequisite: this.state.prerequisite,\n      educationalGoals: this.state.educationalGoals,\n      SessionMoocs: this.state.SessionMoocs,\n      dateOfCreation: moment(this.state.dateOfCreation).format(),\n      durationMoocs: this.state.durationMoocs,\n      status: true,\n      moocsFile: this.state.moocsFile,\n      posteur: this.props.userProfile.id,\n      assignmentRefresh: this.state.assignmentRefresh,\n      userReresh\n    };\n    this.props.dispatch(addMoocs(data));\n    this.openAddModal();\n    this.setState({\n      topicMoocs: '',\n      roomClasses: [],\n      prerequisite: '',\n      educationalGoals: '',\n      SessionMoocs: '',\n      moocsFile: '',\n      posteur: '',\n      moocsText: '',\n      moocsAssignment: [],\n      assignmentRefresh: [],\n      itemSubject: {}\n    });\n  }\n\n  render() {\n    var MoocsByMonth = 0;\n    this.props.listMoocs.map(element => {\n      var d = new Date();\n      var n = d.getMonth();\n      var check = moment(element.dateOfCreation, 'YYYY/MM/DD');\n      var month = check.format('M');\n\n      if (month == n + 1) {\n        MoocsByMonth = MoocsByMonth + 1;\n      }\n    });\n    let detailCards = [{\n      cardColor: 'primary',\n      imageIcon: require('../../../FinancialManagement/routes/ServiceAllocation/Icone/project-icon.png'),\n      title: this.props.listMoocs.length,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `moocs.total`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 19\n        }\n      })\n    }, {\n      cardColor: 'secondary',\n      imageIcon: require('../../../FinancialManagement/routes/ServiceAllocation/Icone/tasks-icon.png'),\n      title: MoocsByMonth,\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `moocs.month`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 19\n        }\n      })\n    }, {\n      cardColor: 'info',\n      imageIcon: require('../../../FinancialManagement/routes/ServiceAllocation/Icone/teams-icon.png'),\n      title: '1111',\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `moocs.vue`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 19\n        }\n      })\n    }, {\n      cardColor: 'warning',\n      imageIcon: require('../../../FinancialManagement/routes/ServiceAllocation/Icone/files-icon.png'),\n      title: '1111',\n      subTitle: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `moocs.likes`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 19\n        }\n      })\n    }];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper col-lg-12 col-md-12\",\n      style: {\n        marginLeft: '2%',\n        marginRight: 'auto'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row col-lg-12 col-md-12 \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 9\n      }\n    }, detailCards.map((data, index) => /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      className: \"col-xl-3 col-lg-3 col-md-6 col-sm-6 col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IconWithTextCard, {\n      data: data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 9\n      }\n    }, this.props.errorStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-danger   text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 15\n      }\n    }, \" \", this.props.message, \" \")) : '', this.props.successStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 15\n      }\n    }, \" \", this.props.message, \" \")) : '', this.state.alerteFiltre ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-danger bg-danger text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 15\n      }\n    }, ' ', this.state.messageAlerte, ' ')) : '', /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bd-highlight \",\n      style: {\n        width: '99%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(AddMoocs, {\n      openAddModal: this.openAddModal,\n      handleChange: this.handleChange,\n      handleChangeSubject: this.handleChangeSubject,\n      handleChangeClass: this.handleChangeClass,\n      handleSubmit: this.handleSubmit,\n      onDrop: this.onDrop,\n      values: this.state,\n      courseAssignment: this.state.courseAssignment,\n      subjects: this.state.subjects,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(RoleContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 11\n      }\n    }, ({\n      role\n    }) => /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"add-service\",\n      yes: () => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-12 col-md-12 bd-highlight\",\n        style: {\n          paddingRight: 'auto',\n          paddingLeft: '2%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row col-lg-12 col-md-12\",\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          paddingBottom: '3%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-xl-2 col-lg-2 col-md-2 col-sm-2 col-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        id: \"classLevel\",\n        name: \"classLevel\",\n        select: true,\n        value: this.state.filterLevelId,\n        onChange: this.handleChangeFilter('filterLevelId'),\n        SelectProps: {},\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: `components.note.niveau`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 34\n          }\n        }),\n        InputProps: {\n          disableUnderline: true\n        },\n        margin: \"normal\",\n        fullWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 25\n        }\n      }, this.props.userProfile.role_id === roleIdProfessor ? this.state.levelProf.map(option => /*#__PURE__*/React.createElement(MenuItem, {\n        key: option.id,\n        value: option.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 33\n        }\n      }, option.name)) : this.props.levels.map(option => /*#__PURE__*/React.createElement(MenuItem, {\n        key: option.id,\n        value: option.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 476,\n          columnNumber: 33\n        }\n      }, option.name)))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-xl-2 col-lg-2 col-md-2 col-sm-2 col-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 482,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        id: \"idClasse\",\n        name: \"idClasse\",\n        select: true,\n        value: this.state.filterClassId,\n        onChange: this.handleChangeFilter('filterClassId'),\n        SelectProps: {},\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: `components.note.class`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 490,\n            columnNumber: 34\n          }\n        }),\n        InputProps: {\n          disableUnderline: true\n        },\n        margin: \"normal\",\n        fullWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 25\n        }\n      }, this.state.filterClasses.length > 0 ? this.state.filterClasses.map(option => /*#__PURE__*/React.createElement(MenuItem, {\n        key: option.id,\n        value: option.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 31\n        }\n      }, option.name)) : /*#__PURE__*/React.createElement(MenuItem, {\n        key: 0,\n        value: 0,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 29\n        }\n      }, \"Pas de classe\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-xl-2 col-lg-2 col-md-2 col-sm-2 col-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 508,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        id: \"idSection\",\n        name: \"idSection\",\n        select: true,\n        value: this.state.filterAssignmentId,\n        onChange: this.handleChangeFilter('filterAssignmentId'),\n        SelectProps: {},\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: `components.note.subject`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 519,\n            columnNumber: 29\n          }\n        }),\n        InputProps: {\n          disableUnderline: true\n        },\n        margin: \"normal\",\n        fullWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 25\n        }\n      }, this.state.filterCourseAssignment.length > 0 ? /*#__PURE__*/React.createElement(MenuItem, {\n        key: 0,\n        value: 0,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 29\n        }\n      }, \"all\") : '', this.state.filterCourseAssignment.length > 0 ? this.state.filterCourseAssignment.map(option => /*#__PURE__*/React.createElement(MenuItem, {\n        key: option.id,\n        value: option.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 31\n        }\n      }, option.subject.name)) : /*#__PURE__*/React.createElement(MenuItem, {\n        key: 0,\n        value: 0,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 29\n        }\n      }, \"Pas de mati\\xE9re\"))))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12 col-md-12 bd-highlight\",\n      style: {\n        paddingRight: 'auto',\n        paddingLeft: '2%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(MoocsList, {\n      listMoocs: this.state.listMoocs,\n      handleChangeSubject: this.handleChangeSubject,\n      handleChangeClass: this.handleChangeClass,\n      handleSubmit: this.handleSubmit,\n      onDrop: this.onDrop,\n      values: this.state,\n      courseAssignment: this.props.courseAssignment,\n      assignmentClassSubjectProf: this.state.assignmentClassSubjectProf,\n      subjects: this.state.subjects,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(RoleContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 9\n      }\n    }, ({\n      role\n    }) => /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"add-service\",\n      yes: () => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-12 col-md-12 bd-highlight\",\n        style: {\n          paddingRight: 'auto',\n          paddingLeft: '2%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-start align-items-center \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 592,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 593,\n          columnNumber: 25\n        }\n      }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"service.button.archive\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 27\n        }\n      }), ' ')), ' ', \"\\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(Fab, {\n        size: \"small\",\n        color: \"secondary\",\n        \"aria-label\": \"Add\",\n        onClick: this.openArchive,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(DeleteOutlineIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 25\n        }\n      }))), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 21\n        }\n      }), this.state.openArchive ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(ArchiveMoocs, {\n        listMoocsArchived: this.props.listMoocsArchived,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 612,\n          columnNumber: 25\n        }\n      })) : '')),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 13\n      }\n    })), this.props.moocsLoading ? /*#__PURE__*/React.createElement(LoaderModal, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 36\n      }\n    }) : '');\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    userProfile: state.auth.userProfile,\n    listMoocs: state.MoocsReducer.remoteMoocs,\n    moocsLoading: state.MoocsReducer.moocsLoading,\n    subjects: state.subject.subjects,\n    courseAssignment: state.AssignementReducer.courseAssignment,\n    listMoocsArchived: state.MoocsReducer.archivedMoocs,\n    levels: state.levelsReducer.levels,\n    ClassSettings: state.ClassSettingsReducer.classSettings\n  };\n};\n\nexport default connect(mapStateToProps)(Moocs);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap-pro/educap-pro-front/src/app/routes/Learning/routes/Moocs/Moocs.js"],"names":["React","CardBox","AddMoocs","connect","MoocsList","ArchiveMoocs","UncontrolledAlert","IntlMessages","Fab","DeleteOutlineIcon","moment","addMoocs","getMoocs","TextField","MenuItem","IconWithTextCard","RoleContext","Can","_","roleIdProfessor","roleIdAdmin","axios","baseUrl","Loader","LoaderModal","element","Moocs","Component","constructor","props","handleChange","name","event","setState","target","value","handleChangeSubject","obj","JSON","parse","courseAssignment","userProfile","role_id","state","assignmentClassSubjectProf","filter","fk_id_subject_v4","subjectId","itemSubject","subjectName","moocsAssignment","roomClasses","assignmentRefresh","handleChangeClass","map","id","data","assignementId","classId","class","className","subject","onDrop","e","files","undefined","file","moocsFile","moocsText","messageAlerte","alerteFiltre","setTimeout","handleChangeFilter","filterClasses","classProf","fk_id_level_v4","ClassSettings","filterCourseAssignment","listMoocs","filterClassId","filterAssignmentId","fk_id_class_v4","moocsAssignCourseFilter","filterMoocs","mooc","moocsAssignCourse","length","isOpen","topicMoocs","idCourse","idClasses","prerequisite","educationalGoals","SessionMoocs","dateOfCreation","Date","durationMoocs","filterLevelId","openArchive","levelProf","openAddModal","bind","handleSubmit","previousState","UNSAFE_componentWillMount","apiEndpoint","localStorage","token","get","then","res","subjects","forEach","assignmentClassSubject","fk_id_school_year","school_year_id","push","level","levels","find","levelItem","levelFiltredByID","uniqBy","classFiltredByID","subjectFiltred","componentDidUpdate","prevProps","dispatch","establishment_id","preventDefault","userReresh","profileId","user","surname","idAssignement","format","status","posteur","render","MoocsByMonth","d","n","getMonth","check","month","detailCards","cardColor","imageIcon","require","title","subTitle","marginLeft","marginRight","index","errorStatus","message","successStatus","width","role","paddingRight","paddingLeft","display","alignItems","paddingBottom","disableUnderline","option","listMoocsArchived","moocsLoading","mapStateToProps","alert","success","error","auth","MoocsReducer","remoteMoocs","AssignementReducer","archivedMoocs","levelsReducer","ClassSettingsReducer","classSettings"],"mappings":"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","sourcesContent":["import React from 'react';\nimport CardBox from '../../../../../components/CardBox/index';\nimport AddMoocs from './AddMoocs';\nimport { connect } from 'react-redux';\nimport MoocsList from './MoocsList';\nimport ArchiveMoocs from './ArchiveMoocs';\nimport { UncontrolledAlert } from 'reactstrap';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport Fab from '@material-ui/core/Fab';\nimport DeleteOutlineIcon from '@material-ui/icons/DeleteOutline';\nimport moment from 'moment';\nimport { addMoocs } from '../../../../../actions/MoocsActions';\nimport { getMoocs } from '../../../../../actions/MoocsActions';\nimport TextField from '@material-ui/core/TextField';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconWithTextCard from '../../../FinancialManagement/routes/ServiceAllocation/ServiceAllocationComp/IconWithTextCard';\nimport { RoleContext } from '../../../../../Context';\nimport Can from '../../../../../can';\nimport _ from 'lodash';\nimport { roleIdProfessor, roleIdAdmin } from '../../../../../config/config';\nimport axios from 'axios';\nimport baseUrl from '../../../../../config/config';\nimport Loader from 'react-loader-spinner';\nimport LoaderModal from './LoaderModal';\nimport { element } from 'prop-types';\n\nclass Moocs extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isOpen: false,\n      messageAlerte: '',\n      moocsText: '',\n      moocsFile: null,\n      topicMoocs: '',\n      idCourse: null,\n      idClasses: null,\n      prerequisite: '',\n      educationalGoals: '',\n      SessionMoocs: '',\n      dateOfCreation: new Date(),\n      durationMoocs: '',\n      courseAssignment: [],\n      roomClasses: [],\n      filterLevelId: '',\n      filterClassId: '',\n      filterAssignmentId: '',\n      filterClasses: [],\n      filterCourseAssignment: [],\n      listMoocs: [],\n      assignmentClassSubjectProf: [],\n      openArchive: false,\n      itemSubject: {},\n      subjectId: '',\n      subjectName: '',\n      moocsAssignment: [],\n      assignmentRefresh: [],\n      levelProf: [],\n      classProf: [],\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChangeFilter = this.handleChangeFilter.bind(this);\n    this.openArchive = this.openArchive.bind(this);\n  }\n  openArchive() {\n    this.setState((previousState) => ({\n      openArchive: !previousState.openArchive,\n    }));\n  }\n\n  UNSAFE_componentWillMount() {\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      let apiEndpoint = `${baseUrl.baseUrl}/professors?access_token=${localStorage.token}&filter[where][profile_id]=${this.props.userProfile.id}&filter[include][course][assignmentClassSubject]=class&filter[include][course][assignmentClassSubject]=subject`;\n      axios.get(apiEndpoint).then((res) => {\n        let data = _.map(res.data, 'course');\n        let subjects = [];\n        let assignmentClassSubjectProf = [];\n        let levelProf = [];\n        let classProf = [];\n\n        data[0].forEach((element) => {\n          if (\n            element.assignmentClassSubject.class.fk_id_school_year ==\n            this.props.userProfile.school_year_id\n          ) {\n            classProf.push(element.assignmentClassSubject.class);\n\n            subjects.push(element.assignmentClassSubject.subject);\n            assignmentClassSubjectProf.push(element.assignmentClassSubject);\n            let level = this.props.levels.find(\n              (levelItem) =>\n                levelItem.id ==\n                element.assignmentClassSubject.class.fk_id_level_v4\n            );\n            if (level != undefined) {\n              levelProf.push(level);\n            }\n          }\n        });\n        let levelFiltredByID = _.uniqBy(levelProf, 'id');\n\n        let classFiltredByID = _.uniqBy(classProf, 'id');\n        let subjectFiltred = _.uniqBy(subjects, 'id');\n        this.setState({\n          subjects: subjectFiltred,\n          assignmentClassSubjectProf,\n          levelProf: levelFiltredByID,\n          classProf: classFiltredByID,\n        });\n      });\n    } else {\n      this.setState({\n        subjects: this.props.subjects,\n      });\n    }\n    this.setState({\n      listMoocs: this.props.listMoocs,\n    });\n  }\n  \n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.userProfile.school_year_id !==\n      this.props.userProfile.school_year_id\n    ) {\n      this.props.dispatch(\n        getMoocs(\n          this.props.userProfile.establishment_id,\n          this.props.userProfile.school_year_id,\n          this.props.userProfile.role_id,\n          this.props.userProfile.id\n        )\n      );\n    }\n    if (\n      prevProps.subjects !== this.props.subjects &&\n      this.props.userProfile.role_id === roleIdAdmin\n    ) {\n      this.setState({\n        subjects: this.props.subjects,\n      });\n    }\n    if (prevProps.listMoocs !== this.props.listMoocs) {\n      this.setState({\n        listMoocs: this.props.listMoocs,\n      });\n    }\n  }\n\n  openAddModal() {\n    this.setState((previousState) => ({\n      isOpen: !previousState.isOpen,\n    }));\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    let userReresh = {\n      profileId: this.props.userProfile.id,\n      name: this.props.userProfile.user.name,\n      surname: this.props.userProfile.user.surname,\n    };\n    let data = {\n      topicMoocs: this.state.topicMoocs,\n      idAssignement: this.state.roomClasses,\n      prerequisite: this.state.prerequisite,\n      educationalGoals: this.state.educationalGoals,\n      SessionMoocs: this.state.SessionMoocs,\n      dateOfCreation: moment(this.state.dateOfCreation).format(),\n      durationMoocs: this.state.durationMoocs,\n      status: true,\n      moocsFile: this.state.moocsFile,\n      posteur: this.props.userProfile.id,\n      assignmentRefresh: this.state.assignmentRefresh,\n      userReresh,\n    };\n    this.props.dispatch(addMoocs(data));\n    this.openAddModal();\n    this.setState({\n      topicMoocs: '',\n      roomClasses: [],\n      prerequisite: '',\n      educationalGoals: '',\n      SessionMoocs: '',\n      moocsFile: '',\n      posteur: '',\n      moocsText: '',\n      moocsAssignment: [],\n      assignmentRefresh: [],\n      itemSubject: {},\n    });\n  }\n\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n  handleChangeSubject = (name) => (event) => {\n    let obj = JSON.parse(event.target.value);\n    let courseAssignment = [];\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      courseAssignment = this.state.assignmentClassSubjectProf.filter(\n        (element) => element.fk_id_subject_v4 === obj.subjectId\n      );\n    } else {\n      courseAssignment = this.props.courseAssignment.filter(\n        (element) => element.fk_id_subject_v4 === obj.subjectId\n      );\n    }\n    this.setState({\n      itemSubject: obj,\n      subjectId: obj.subjectId,\n      subjectName: obj.subjectName,\n      courseAssignment: courseAssignment,\n      moocsAssignment: [],\n      roomClasses: [],\n      assignmentRefresh: [],\n    });\n  };\n  handleChangeClass = (name) => (event) => {\n    this.setState({ moocsAssignment: event.target.value });\n\n    let roomClasses = event.target.value.map((element) => element.id);\n    let assignmentRefresh = event.target.value.map((element) => {\n      let data = {\n        assignementId: element.id,\n        classId: element.class.id,\n        className: element.class.name,\n        subjectName: element.subject.name,\n        subjectId: element.subject.id,\n      };\n      return data;\n    });\n    this.setState({ roomClasses, assignmentRefresh });\n  };\n  onDrop = (e) => {\n    if (e.target.files[0] !== undefined) {\n      let file = e.target.files[0];\n      this.setState({ moocsFile: file, moocsText: file.name });\n    } else {\n      this.setState({\n        messageAlerte: \"Vous n'avez pas choisir un vidÃ©o\",\n        alerteFiltre: true,\n      });\n      setTimeout(() => {\n        this.setState({ messageAlerte: '', alerteFiltre: false });\n      }, 4000);\n    }\n  };\n  handleChangeFilter = (name) => (event) => {\n    if (name === 'filterLevelId') {\n      let filterClasses = [];\n      if (this.props.userProfile.role_id === roleIdProfessor) {\n        filterClasses = this.state.classProf.filter(\n          (element) => element.fk_id_level_v4 == event.target.value\n        );\n      } else {\n        filterClasses = this.props.ClassSettings.filter(\n          (element) => element.fk_id_level_v4 == event.target.value\n        );\n      }\n\n      this.setState({\n        [name]: event.target.value,\n        filterClasses,\n        filterCourseAssignment: [],\n        listMoocs: this.props.listMoocs,\n        filterClassId: '',\n        filterAssignmentId: '',\n      });\n    } else if (name === 'filterClassId') {\n      let filterCourseAssignment = [];\n      if (this.props.userProfile.role_id === roleIdProfessor) {\n        filterCourseAssignment = this.state.assignmentClassSubjectProf.filter(\n          (element) => element.fk_id_class_v4 == event.target.value\n        );\n      } else {\n        filterCourseAssignment = this.props.courseAssignment.filter(\n          (element) => element.fk_id_class_v4 == event.target.value\n        );\n      }\n\n      let moocsAssignCourseFilter = [];\n      let filterMoocs = this.props.listMoocs.filter((mooc) => {\n        moocsAssignCourseFilter = mooc.moocsAssignCourse.filter(\n          (element) => element.classId == event.target.value\n        );\n        if (moocsAssignCourseFilter.length > 0) {\n          return mooc;\n        }\n      });\n\n      this.setState({\n        [name]: event.target.value,\n        filterCourseAssignment,\n        listMoocs: filterMoocs,\n        filterAssignmentId: '',\n      });\n    } else {\n      if (event.target.value == 0) {\n        let moocsAssignCourseFilter = [];\n        let filterMoocs = this.props.listMoocs.filter((mooc) => {\n          moocsAssignCourseFilter = mooc.moocsAssignCourse.filter(\n            (element) => element.classId == this.state.filterClassId\n          );\n          if (moocsAssignCourseFilter.length > 0) {\n            return mooc;\n          }\n        });\n        this.setState({ [name]: event.target.value, listMoocs: filterMoocs });\n      } else {\n        let moocsAssignCourseFilter = [];\n        let filterMoocs = this.props.listMoocs.filter((mooc) => {\n          moocsAssignCourseFilter = mooc.moocsAssignCourse.filter(\n            (element) => element.assignementId == event.target.value\n          );\n          if (moocsAssignCourseFilter.length > 0) {\n            return mooc;\n          }\n        });\n        this.setState({ [name]: event.target.value, listMoocs: filterMoocs });\n      }\n    }\n  };\n\n  render() {\n    var MoocsByMonth = 0;\n    this.props.listMoocs.map((element) => {\n      var d = new Date();\n      var n = d.getMonth();\n      var check = moment(element.dateOfCreation, 'YYYY/MM/DD');\n      var month = check.format('M');\n\n      if (month == n + 1) {\n        MoocsByMonth = MoocsByMonth + 1;\n      }\n    });\n\n    let detailCards = [\n      {\n        cardColor: 'primary',\n        imageIcon: require('../../../FinancialManagement/routes/ServiceAllocation/Icone/project-icon.png'),\n        title: this.props.listMoocs.length,\n        subTitle: <IntlMessages id={`moocs.total`} />,\n      },\n      {\n        cardColor: 'secondary',\n        imageIcon: require('../../../FinancialManagement/routes/ServiceAllocation/Icone/tasks-icon.png'),\n        title: MoocsByMonth,\n        subTitle: <IntlMessages id={`moocs.month`} />,\n      },\n      {\n        cardColor: 'info',\n        imageIcon: require('../../../FinancialManagement/routes/ServiceAllocation/Icone/teams-icon.png'),\n        title: '1111',\n        subTitle: <IntlMessages id={`moocs.vue`} />,\n      },\n      {\n        cardColor: 'warning',\n        imageIcon: require('../../../FinancialManagement/routes/ServiceAllocation/Icone/files-icon.png'),\n        title: '1111',\n        subTitle: <IntlMessages id={`moocs.likes`} />,\n      },\n    ];\n    return (\n      <div\n        className=\"app-wrapper col-lg-12 col-md-12\"\n        style={{\n          marginLeft: '2%',\n          marginRight: 'auto',\n        }}\n      >\n        <div className=\"row col-lg-12 col-md-12 \">\n          {detailCards.map((data, index) => (\n            <div\n              key={index}\n              className=\"col-xl-3 col-lg-3 col-md-6 col-sm-6 col-12\"\n            >\n              <IconWithTextCard data={data} />\n            </div>\n          ))}\n        </div>\n\n        <div className=\"mb-3\">\n          {this.props.errorStatus ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-danger   text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\"> {this.props.message} </span>\n            </UncontrolledAlert>\n          ) : (\n            ''\n          )}\n          {this.props.successStatus ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\"> {this.props.message} </span>\n            </UncontrolledAlert>\n          ) : (\n            ''\n          )}\n          {this.state.alerteFiltre ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-danger bg-danger text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\">\n                {' '}\n                {this.state.messageAlerte}{' '}\n              </span>\n            </UncontrolledAlert>\n          ) : (\n            ''\n          )}\n          <div className=\" bd-highlight \" style={{ width: '99%' }}>\n            <CardBox styleName=\"col-lg-12 col-md-12\">\n              <AddMoocs\n                openAddModal={this.openAddModal}\n                handleChange={this.handleChange}\n                handleChangeSubject={this.handleChangeSubject}\n                handleChangeClass={this.handleChangeClass}\n                handleSubmit={this.handleSubmit}\n                onDrop={this.onDrop}\n                values={this.state}\n                courseAssignment={this.state.courseAssignment}\n                subjects={this.state.subjects}\n              />\n            </CardBox>\n          </div>\n          <RoleContext.Consumer>\n            {({ role }) => (\n              <Can\n                role={role}\n                perform=\"add-service\"\n                yes={() => (\n                  <div\n                    className=\"col-lg-12 col-md-12 bd-highlight\"\n                    style={{\n                      paddingRight: 'auto',\n                      paddingLeft: '2%',\n                    }}\n                  >\n                    <div\n                      className=\"row col-lg-12 col-md-12\"\n                      style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        paddingBottom: '3%',\n                      }}\n                    >\n                      <div className=\"col-xl-2 col-lg-2 col-md-2 col-sm-2 col-12\">\n                        <TextField\n                          id=\"classLevel\"\n                          name=\"classLevel\"\n                          select\n                          value={this.state.filterLevelId}\n                          onChange={this.handleChangeFilter('filterLevelId')}\n                          SelectProps={{}}\n                          label={<IntlMessages id={`components.note.niveau`} />}\n                          InputProps={{ disableUnderline: true }}\n                          margin=\"normal\"\n                          fullWidth\n                        >\n                          {this.props.userProfile.role_id === roleIdProfessor\n                            ? this.state.levelProf.map((option) => (\n                                <MenuItem key={option.id} value={option.id}>\n                                  {option.name}\n                                </MenuItem>\n                              ))\n                            : this.props.levels.map((option) => (\n                                <MenuItem key={option.id} value={option.id}>\n                                  {option.name}\n                                </MenuItem>\n                              ))}\n                        </TextField>\n                      </div>\n                      <div className=\"col-xl-2 col-lg-2 col-md-2 col-sm-2 col-12\">\n                        <TextField\n                          id=\"idClasse\"\n                          name=\"idClasse\"\n                          select\n                          value={this.state.filterClassId}\n                          onChange={this.handleChangeFilter('filterClassId')}\n                          SelectProps={{}}\n                          label={<IntlMessages id={`components.note.class`} />}\n                          InputProps={{ disableUnderline: true }}\n                          margin=\"normal\"\n                          fullWidth\n                        >\n                          {this.state.filterClasses.length > 0 ? (\n                            this.state.filterClasses.map((option) => (\n                              <MenuItem key={option.id} value={option.id}>\n                                {option.name}\n                              </MenuItem>\n                            ))\n                          ) : (\n                            <MenuItem key={0} value={0}>\n                              Pas de classe\n                            </MenuItem>\n                          )}\n                        </TextField>\n                      </div>\n                      <div className=\"col-xl-2 col-lg-2 col-md-2 col-sm-2 col-12\">\n                        <TextField\n                          id=\"idSection\"\n                          name=\"idSection\"\n                          select\n                          value={this.state.filterAssignmentId}\n                          onChange={this.handleChangeFilter(\n                            'filterAssignmentId'\n                          )}\n                          SelectProps={{}}\n                          label={\n                            <IntlMessages id={`components.note.subject`} />\n                          }\n                          InputProps={{ disableUnderline: true }}\n                          margin=\"normal\"\n                          fullWidth\n                        >\n                          {/* {this.state.filterCourseAssignment.map((option) => (\n                            <MenuItem key={option.id} value={option.id}>\n                              {option.subject.name}\n                            </MenuItem>\n                          ))} */}\n                          {this.state.filterCourseAssignment.length > 0 ? (\n                            <MenuItem key={0} value={0}>\n                              all\n                            </MenuItem>\n                          ) : (\n                            ''\n                          )}\n                          {this.state.filterCourseAssignment.length > 0 ? (\n                            this.state.filterCourseAssignment.map((option) => (\n                              <MenuItem key={option.id} value={option.id}>\n                                {option.subject.name}\n                              </MenuItem>\n                            ))\n                          ) : (\n                            <MenuItem key={0} value={0}>\n                              Pas de matiÃ©re\n                            </MenuItem>\n                          )}\n                        </TextField>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              />\n            )}\n          </RoleContext.Consumer>\n\n          <div\n            className=\"col-lg-12 col-md-12 bd-highlight\"\n            style={{\n              paddingRight: 'auto',\n              paddingLeft: '2%',\n            }}\n          >\n            <MoocsList\n              listMoocs={this.state.listMoocs}\n              handleChangeSubject={this.handleChangeSubject}\n              handleChangeClass={this.handleChangeClass}\n              handleSubmit={this.handleSubmit}\n              onDrop={this.onDrop}\n              values={this.state}\n              courseAssignment={this.props.courseAssignment}\n              assignmentClassSubjectProf={this.state.assignmentClassSubjectProf}\n              subjects={this.state.subjects}\n            />\n          </div>\n        </div>\n        <RoleContext.Consumer>\n          {({ role }) => (\n            <Can\n              role={role}\n              perform=\"add-service\"\n              yes={() => (\n                <div\n                  className=\"col-lg-12 col-md-12 bd-highlight\"\n                  style={{\n                    paddingRight: 'auto',\n                    paddingLeft: '2%',\n                  }}\n                >\n                  <div>\n                    <div className=\"d-flex justify-content-start align-items-center \">\n                      <h1>\n                        <b>\n                          {' '}\n                          <IntlMessages id=\"service.button.archive\" />{' '}\n                        </b>\n                      </h1>{' '}\n                      &nbsp;&nbsp;&nbsp;\n                      <Fab\n                        size=\"small\"\n                        color=\"secondary\"\n                        aria-label=\"Add\"\n                        onClick={this.openArchive}\n                      >\n                        <DeleteOutlineIcon />\n                      </Fab>\n                    </div>\n                    <br />\n\n                    {this.state.openArchive ? (\n                      <div>\n                        <ArchiveMoocs\n                          listMoocsArchived={this.props.listMoocsArchived}\n                        />\n                      </div>\n                    ) : (\n                      ''\n                    )}\n                  </div>\n                </div>\n              )}\n            />\n          )}\n        </RoleContext.Consumer>\n        {this.props.moocsLoading ? <LoaderModal /> : ''}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    userProfile: state.auth.userProfile,\n    listMoocs: state.MoocsReducer.remoteMoocs,\n    moocsLoading: state.MoocsReducer.moocsLoading,\n    subjects: state.subject.subjects,\n    courseAssignment: state.AssignementReducer.courseAssignment,\n    listMoocsArchived: state.MoocsReducer.archivedMoocs,\n    levels: state.levelsReducer.levels,\n    ClassSettings: state.ClassSettingsReducer.classSettings,\n  };\n};\nexport default connect(mapStateToProps)(Moocs);\n"]},"metadata":{},"sourceType":"module"}