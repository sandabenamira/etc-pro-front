{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap-pro/educap-pro-front/src/app/routes/Assiduity/routes/Timetable/TimeTable.js\";\nimport React from 'react';\nimport HTML5Backend from 'react-dnd-html5-backend';\nimport { DragDropContext } from 'react-dnd';\nimport BigCalendar from 'react-big-calendar';\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop';\nimport 'react-big-calendar/lib/addons/dragAndDrop/styles.css';\nimport moment from 'moment';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport { connect } from \"react-redux\";\nimport ContainerHeader from '../../../../../components/ContainerHeader';\nimport CardBox from '../../../../../components/CardBox/index';\nimport AddSupplies from './AddSupplies';\nimport Can from \"../../../../../can\";\nimport { RoleContext } from \"../../../../../Context\";\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport Button from '@material-ui/core/Button';\nimport _ from 'lodash';\nimport { removeEventList } from \"../../../../../actions/planningActions\";\nconst localizer = BigCalendar.momentLocalizer(moment);\nconst DragAndDropCalendar = withDragAndDrop(BigCalendar);\n\nclass TimeTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  componentWillUnmount() {\n    this.props.dispatch(removeEventList());\n  } // annuleModal() {\n  //   this.setState({\n  //     supplieModal: false, eventId: ''\n  //   })\n  // }\n  // handleRequestClose = () => {\n  //   this.setState({\n  //     open: false\n  //   })\n  // }\n  // handleClickEvent(event) {\n  //   if (this.props.userProfile.role_id === roleIdProfessor) {\n  //     this.setState({ supplieModal: true, eventId: event.id });\n  //   } else {\n  //     let apiEndpoint = `/profiles?access_token=${localStorage.token}&filter[where][id]=` + parseInt(event.professor_profile) + `&filter[include][user]`\n  //     classService.get(apiEndpoint)\n  //       .then(res => {\n  //         this.setState({\n  //           eventType: event.event_type,\n  //           eventFrequency: event.frequency,\n  //           eventRoom: event.room_name,\n  //           eventSubject: event.subject_name,\n  //           eventProfessorName: res.data[0].user.name,\n  //           eventProfessorSurname: res.data[0].user.surname,\n  //           eventSupplie: event.supplies,\n  //           open: true\n  //         })\n  //       })\n  //   }\n  // }\n\n\n  eventStyleGetter(event, start, end, isSelected) {\n    let diff = moment.utc(moment(event.end, \"DD/MM/YYYY HH:mm\").diff(moment(event.start, \"DD/MM/YYYY HH:mm\"))).format(\"HH:mm\");\n    const mn = moment.duration(diff).asMinutes();\n    let height = mn * 1.3 * 0.33 + 'px';\n    var backgroundColor = event.subjectColor;\n    var style = {\n      backgroundColor: backgroundColor,\n      opacity: 0.8,\n      color: 'black',\n      border: '0px',\n      display: 'block',\n      borderRadius: '0px',\n      paddingTop: height\n    };\n    return {\n      style: style\n    };\n  }\n\n  EventAgenda({\n    event\n  }) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 12\n      }\n    }, event.event_type === 'exam' ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 38\n      }\n    }, \" \", event.event_type) : null, /*#__PURE__*/React.createElement(\"em\", {\n      style: {\n        color: 'magenta'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 7\n      }\n    }, event.subject_name), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 7\n      }\n    }, event.room_name), \"  \", /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 33\n      }\n    }, event.room_name));\n  }\n\n  render() {\n    let startHours = '';\n    let startMinutes = '';\n    let endHours = '';\n    let endMinutes = '';\n\n    if (this.props.startTime && this.props.endTime) {\n      const startTime = this.props.startTime.split(':');\n      const endTime = this.props.endTime.split(':');\n      startHours = startTime[0];\n      startMinutes = startTime[1];\n      endHours = endTime[0];\n      endMinutes = endTime[1];\n    } else {\n      startHours = '08';\n      startMinutes = '00';\n      endHours = '21';\n      endMinutes = '00';\n    }\n\n    let now = new Date();\n    const startDayTime = new Date();\n    const endDayTime = new Date();\n    startDayTime.setHours(startHours);\n    startDayTime.setMinutes(startMinutes);\n    endDayTime.setHours(endHours);\n    endDayTime.setMinutes(endMinutes);\n    let events = this.props.events ? this.props.events : [];\n    return /*#__PURE__*/React.createElement(RoleContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 7\n      }\n    }, ({\n      role\n    }) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"animated slideInUpTiny animation-duration-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ContainerHeader, {\n      title: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"model.timetable\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 37\n        }\n      }),\n      match: this.props.match,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"emploi-supplies:add\",\n      yes: () => /*#__PURE__*/React.createElement(AddSupplies, {\n        isOpen: this.state.supplieModal,\n        annuleModal: this.annuleModal,\n        eventId: this.state.eventId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"emploi-filter:visit\",\n      yes: () => /*#__PURE__*/React.createElement(CardBox, {\n        styleName: \"col-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Can, {\n        role: role,\n        perform: \"emploi-filter-establishment:visit\",\n        yes: () => /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-lg-3 col-sm-6 col-12\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(FormControl, {\n          className: \"w-100 mb-2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(InputLabel, {\n          htmlFor: \"age-simple\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"components.professor.formadd.etablissement_id\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 63\n          }\n        })), /*#__PURE__*/React.createElement(Select, {\n          value: this.props.establishment,\n          onChange: this.props.handleChange('establishment'),\n          input: /*#__PURE__*/React.createElement(Input, {\n            id: \"establishment\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 38\n            }\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(MenuItem, {\n          value: \"\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 31\n          }\n        }, /*#__PURE__*/React.createElement(\"em\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"autocomplete.emploidutemps.none\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 38\n          }\n        }))), this.props.establishments.map(establishment => /*#__PURE__*/React.createElement(MenuItem, {\n          key: establishment.id,\n          value: establishment.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 33\n          }\n        }, establishment.name))))),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-3 col-sm-6 col-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(FormControl, {\n        className: \"w-100 mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(InputLabel, {\n        htmlFor: \"age-simple\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.note.class\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 59\n        }\n      })), /*#__PURE__*/React.createElement(Select, {\n        value: this.props.classId,\n        onChange: this.props.handleChangeClasse('classId'),\n        input: /*#__PURE__*/React.createElement(Input, {\n          id: \"classId\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 34\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 25\n        }\n      }, this.props.establishmentClass.map(classe => /*#__PURE__*/React.createElement(MenuItem, {\n        key: classe.id,\n        value: classe.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 29\n        }\n      }, classe.name))))))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(DragAndDropCalendar, {\n      localizer: localizer,\n      events: events // onEventDrop={this.moveEvent}\n      ,\n      defaultView: \"week\",\n      defaultDate: now,\n      eventPropGetter: this.eventStyleGetter,\n      components: {\n        event: this.props.event,\n        agenda: {\n          event: this.EventAgenda\n        }\n      } // onSelectEvent={event => this.handleClickEvent(event)}\n      ,\n      messages: {\n        month: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"timetable.month\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 24\n          }\n        }),\n        day: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"timetable.day\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 22\n          }\n        }),\n        today: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"timetable.today\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 24\n          }\n        }),\n        previous: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"appModule.back\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 27\n          }\n        }),\n        next: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"appModule.next\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 23\n          }\n        }),\n        agenda: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"timetable.agenda\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 25\n          }\n        }),\n        week: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"timetable.week\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 23\n          }\n        })\n      },\n      step: 30,\n      timeslots: 1,\n      min: startDayTime,\n      max: endDayTime,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Dialog, {\n      open: this.state.open,\n      TransitionComponent: Slide,\n      onClose: this.handleRequestClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DialogTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.planning.lesson.details\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(DialogContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 17\n      }\n    }, this.state.eventType === \"exam\" ? /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 21\n      }\n    }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.event.planning.modal.add.name.event_type\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 26\n      }\n    }), \"  :\", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 102\n      }\n    }, this.state.eventType)) : null, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 19\n      }\n    }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.note.subject\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 24\n      }\n    }), \"  :\", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 72\n      }\n    }, this.state.eventSubject)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 19\n      }\n    }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"calandar.popup.details.frequency\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 24\n      }\n    }), \": \", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 80\n      }\n    }, this.state.eventFrequency), \" \"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 19\n      }\n    }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"room.name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 24\n      }\n    }), \": \", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 57\n      }\n    }, this.state.eventRoom)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 19\n      }\n    }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"toDo.professor\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 24\n      }\n    }), \": \", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 62\n      }\n    }, this.state.eventProfessorName, \"  \", this.state.eventProfessorSurname)), /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"emploi-display-supplie\",\n      yes: () => {\n        if (!_.isEmpty(this.state.eventSupplie)) {\n          return /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 27\n            }\n          }, \" \", /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 32\n            }\n          }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"supplie\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 39\n            }\n          }), \" \"), \":\", this.state.eventSupplie.map((supplie, index) => /*#__PURE__*/React.createElement(\"div\", {\n            key: index,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 31\n            }\n          }, supplie.name, \" : \", supplie.description)));\n        } else {\n          return null;\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(DialogActions, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.handleRequestClose,\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.establishments.formadd.buttonCancel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 20\n      }\n    }))))));\n  }\n\n}\n\nTimeTable.contextType = RoleContext;\nTimeTable = DragDropContext(HTML5Backend)(TimeTable);\nexport default connect()(TimeTable);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap-pro/educap-pro-front/src/app/routes/Assiduity/routes/Timetable/TimeTable.js"],"names":["React","HTML5Backend","DragDropContext","BigCalendar","withDragAndDrop","moment","Input","InputLabel","MenuItem","FormControl","Select","IntlMessages","connect","ContainerHeader","CardBox","AddSupplies","Can","RoleContext","Dialog","DialogActions","DialogContent","DialogTitle","Slide","Button","_","removeEventList","localizer","momentLocalizer","DragAndDropCalendar","TimeTable","Component","constructor","props","state","componentWillUnmount","dispatch","eventStyleGetter","event","start","end","isSelected","diff","utc","format","mn","duration","asMinutes","height","backgroundColor","subjectColor","style","opacity","color","border","display","borderRadius","paddingTop","EventAgenda","event_type","subject_name","room_name","render","startHours","startMinutes","endHours","endMinutes","startTime","endTime","split","now","Date","startDayTime","endDayTime","setHours","setMinutes","events","role","match","supplieModal","annuleModal","eventId","establishment","handleChange","establishments","map","id","name","classId","handleChangeClasse","establishmentClass","classe","agenda","month","day","today","previous","next","week","open","handleRequestClose","eventType","eventSubject","eventFrequency","eventRoom","eventProfessorName","eventProfessorSurname","isEmpty","eventSupplie","supplie","index","description","contextType"],"mappings":"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","sourcesContent":["\nimport React from 'react'\nimport HTML5Backend from 'react-dnd-html5-backend'\nimport { DragDropContext } from 'react-dnd'\nimport BigCalendar from 'react-big-calendar'\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop';\nimport 'react-big-calendar/lib/addons/dragAndDrop/styles.css';\nimport moment from 'moment';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport { connect } from \"react-redux\";\nimport ContainerHeader from '../../../../../components/ContainerHeader';\nimport CardBox from '../../../../../components/CardBox/index';\nimport AddSupplies from './AddSupplies';\nimport Can from \"../../../../../can\";\nimport { RoleContext } from \"../../../../../Context\";\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport Button from '@material-ui/core/Button';\nimport _ from 'lodash';\nimport { removeEventList } from \"../../../../../actions/planningActions\";\n\n\n\n\nconst localizer = BigCalendar.momentLocalizer(moment);\n\nconst DragAndDropCalendar = withDragAndDrop(BigCalendar);\n\nclass TimeTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n\n    };\n \n  }\n\n  componentWillUnmount() {\n      this.props.dispatch(removeEventList())\n  }\n\n\n  // annuleModal() {\n  //   this.setState({\n  //     supplieModal: false, eventId: ''\n  //   })\n  // }\n\n  // handleRequestClose = () => {\n  //   this.setState({\n  //     open: false\n  //   })\n  // }\n  // handleClickEvent(event) {\n  //   if (this.props.userProfile.role_id === roleIdProfessor) {\n  //     this.setState({ supplieModal: true, eventId: event.id });\n\n\n  //   } else {\n  //     let apiEndpoint = `/profiles?access_token=${localStorage.token}&filter[where][id]=` + parseInt(event.professor_profile) + `&filter[include][user]`\n  //     classService.get(apiEndpoint)\n  //       .then(res => {\n\n  //         this.setState({\n  //           eventType: event.event_type,\n  //           eventFrequency: event.frequency,\n  //           eventRoom: event.room_name,\n  //           eventSubject: event.subject_name,\n  //           eventProfessorName: res.data[0].user.name,\n  //           eventProfessorSurname: res.data[0].user.surname,\n  //           eventSupplie: event.supplies,\n  //           open: true\n  //         })\n  //       })\n\n\n  //   }\n\n  // }\n\n  eventStyleGetter(event, start, end, isSelected) {\n\n    let diff = moment.utc(moment(event.end, \"DD/MM/YYYY HH:mm\").diff(moment(event.start, \"DD/MM/YYYY HH:mm\"))).format(\"HH:mm\")\n    const mn = moment.duration(diff).asMinutes()\n    let height = (mn * 1.3) * 0.33 + 'px'\n    var backgroundColor = event.subjectColor;\n    var style = {\n      backgroundColor: backgroundColor,\n      opacity: 0.8,\n      color: 'black',\n      border: '0px',\n      display: 'block',\n      borderRadius: '0px',\n      paddingTop: height\n\n    };\n    return {\n      style: style\n    };\n  }\n\n  EventAgenda({ event }) {\n    return <span>\n      {event.event_type === 'exam' ? <p> {event.event_type}</p> : null\n      }\n      <em style={{ color: 'magenta' }}>{event.subject_name}</em>\n      <p>{event.room_name}</p>  <p>{event.room_name}</p>\n    </span>\n  }\n\n\n  render() {\n    let startHours = ''\n    let startMinutes = ''\n    let endHours = ''\n    let endMinutes = ''\n    if (this.props.startTime && this.props.endTime) {\n      const startTime = this.props.startTime.split(':');\n      const endTime = this.props.endTime.split(':');\n      startHours = startTime[0]\n      startMinutes = startTime[1]\n      endHours = endTime[0]\n      endMinutes = endTime[1]\n    } else {\n      startHours = '08'\n      startMinutes = '00'\n      endHours = '21'\n      endMinutes = '00'\n    }\n    let now = new Date();\n    const startDayTime = new Date();\n    const endDayTime = new Date();\n    startDayTime.setHours(startHours); startDayTime.setMinutes(startMinutes);\n    endDayTime.setHours(endHours); endDayTime.setMinutes(endMinutes);\n    let events = this.props.events ? this.props.events : [];\n    return (\n      <RoleContext.Consumer>\n        {({ role }) => (\n          <div className=\"animated slideInUpTiny animation-duration-3\">\n            <ContainerHeader title={<IntlMessages id=\"model.timetable\" />} match={this.props.match} />\n\n\n            <Can\n              role={role}\n              perform=\"emploi-supplies:add\"\n              yes={() => (\n                <AddSupplies isOpen={this.state.supplieModal} annuleModal={this.annuleModal} eventId={this.state.eventId} />\n              )}\n            />\n            <Can\n              role={role}\n              perform=\"emploi-filter:visit\"\n              yes={() => (\n                <CardBox styleName=\"col-12\" >\n                  <div className=\"row\">\n                    <Can\n                      role={role}\n                      perform=\"emploi-filter-establishment:visit\"\n\n                      yes={() => (\n                        <div className=\"col-lg-3 col-sm-6 col-12\">\n\n                          <FormControl className=\"w-100 mb-2\">\n                            <InputLabel htmlFor=\"age-simple\">{<IntlMessages id=\"components.professor.formadd.etablissement_id\" />}</InputLabel>\n                            <Select\n                              value={this.props.establishment}\n                              onChange={this.props.handleChange('establishment')}\n                              input={<Input id=\"establishment\" />}\n                            >\n                              <MenuItem value=\"\">\n                                <em>{<IntlMessages id=\"autocomplete.emploidutemps.none\" />}</em>\n                              </MenuItem>\n                              {this.props.establishments.map(establishment => (\n                                <MenuItem key={establishment.id} value={establishment.id}>\n                                  {establishment.name}\n                                </MenuItem>\n                              ))}\n                            </Select>\n                          </FormControl>\n                        </div>\n                      )}\n                    />\n                    <div className=\"col-lg-3 col-sm-6 col-12\">\n                      <FormControl className=\"w-100 mb-2\">\n                        <InputLabel htmlFor=\"age-simple\">{<IntlMessages id=\"components.note.class\" />}</InputLabel>\n                        <Select\n                          value={this.props.classId}\n                          onChange={this.props.handleChangeClasse('classId')}\n                          input={<Input id=\"classId\" />}\n                        >\n                          {this.props.establishmentClass.map(classe => (\n                            <MenuItem key={classe.id} value={classe.id}>\n                              {classe.name}\n                            </MenuItem>\n                          ))}\n                        </Select>\n                      </FormControl>\n                    </div>\n                  </div>\n                </CardBox>\n              )}\n            />\n            <DragAndDropCalendar\n              localizer={localizer}\n              events={events}\n              // onEventDrop={this.moveEvent}\n              defaultView='week'\n              defaultDate={now}\n              eventPropGetter={(this.eventStyleGetter)}\n              components={{\n                event: this.props.event,\n                agenda: {\n                  event: this.EventAgenda\n                }\n              }}\n              // onSelectEvent={event => this.handleClickEvent(event)}\n              messages={{\n                month: <IntlMessages id=\"timetable.month\" />,\n                day: <IntlMessages id=\"timetable.day\" />,\n                today: <IntlMessages id=\"timetable.today\" />,\n                previous: <IntlMessages id=\"appModule.back\" />,\n                next: <IntlMessages id=\"appModule.next\" />,\n                agenda: <IntlMessages id=\"timetable.agenda\" />,\n                week: <IntlMessages id=\"timetable.week\" />,\n              }}\n              step={30}\n              timeslots={1}\n              min={startDayTime}\n              max={endDayTime}\n            />\n            <Dialog open={this.state.open} TransitionComponent={Slide} onClose={this.handleRequestClose}>\n              <DialogTitle>\n                <IntlMessages id=\"components.planning.lesson.details\" />\n              </DialogTitle>\n              <DialogContent>\n                <ul>\n                  {\n                    this.state.eventType  ===\"exam\" ?\n                    <li> <IntlMessages id=\"components.event.planning.modal.add.name.event_type\" />  :<span>{this.state.eventType}</span></li>\n                 : null\n\n                  }\n\n                  <li> <IntlMessages id=\"components.note.subject\" />  :<span>{this.state.eventSubject}</span></li>\n                  <li> <IntlMessages id=\"calandar.popup.details.frequency\" />: <span>{this.state.eventFrequency}</span> </li>\n                  <li> <IntlMessages id=\"room.name\" />: <span>{this.state.eventRoom}</span></li>\n                  <li> <IntlMessages id=\"toDo.professor\" />: <span>{this.state.eventProfessorName}  {this.state.eventProfessorSurname}</span></li>\n                  <Can\n                    role={role}\n                    perform=\"emploi-display-supplie\"\n                    yes={() => {\n                      if (!_.isEmpty(this.state.eventSupplie)) {\n                        return (\n                          <li> <span> <IntlMessages id=\"supplie\" /> </span>:\n                            {this.state.eventSupplie.map((supplie, index) => (\n                              <div key={index} >{supplie.name} : {supplie.description}</div>\n                            ))}</li>\n                        )\n                      } else { return null }\n                    }}\n                  />\n                </ul>\n               \n              </DialogContent>\n              <DialogActions>\n                <Button onClick={this.handleRequestClose} color=\"primary\">\n                  {<IntlMessages id=\"components.establishments.formadd.buttonCancel\" />}\n                </Button>\n              </DialogActions>\n            </Dialog>\n          </div>\n        )}\n\n      </RoleContext.Consumer>\n\n    )\n  }\n}\nTimeTable.contextType = RoleContext;\n\n\nTimeTable = DragDropContext(HTML5Backend)(TimeTable);\nexport default connect()(TimeTable)\n"]},"metadata":{},"sourceType":"module"}