{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Assiduity/routes/CallRegister/PlanningCalendar.js\";\nimport React from 'react';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport { RoleContext } from '../../../../../Context';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport BigCalendar from 'react-big-calendar';\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop';\nimport 'react-big-calendar/lib/addons/dragAndDrop/styles.css';\nimport moment from 'moment';\nimport Can from '../../../../../can';\nconst localizer = BigCalendar.momentLocalizer(moment);\nconst DragAndDropCalendar = withDragAndDrop(BigCalendar);\n\nclass PlanningCalendar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    const {\n      classes,\n      values\n    } = this.props;\n    let startHours = '';\n    let startMinutes = '';\n    let endHours = '';\n    let endMinutes = '';\n\n    if (this.props.startTime && this.props.endTime) {\n      const startTime = this.props.startTime.split(':');\n      const endTime = this.props.endTime.split(':');\n      startHours = startTime[0];\n      startMinutes = startTime[1];\n      endHours = endTime[0];\n      endMinutes = endTime[1];\n    } else {\n      startHours = '08';\n      startMinutes = '00';\n      endHours = '19';\n      endMinutes = '00';\n    }\n\n    const startDayTime = new Date();\n    const endDayTime = new Date();\n    let startHour = this.props.startTime.substr(0, 2);\n    let startMunite = this.props.startTime.substr(3, 2);\n    let endHour = this.props.endTime.substr(0, 2);\n    let endMunite = this.props.endTime.substr(3, 2);\n    let events = this.props.events ? this.props.events : [];\n    startDayTime.setHours(startHour);\n    startDayTime.setMinutes(startMunite);\n    endDayTime.setHours(endHour);\n    endDayTime.setMinutes(endMunite);\n    return /*#__PURE__*/React.createElement(RoleContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 7\n      }\n    }, ({\n      role\n    }) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"animated slideInUpTiny animation-duration-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-column bd-highlight mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex flex-row bd-highlight mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight col-md-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      id: \"itemClass\",\n      name: \"itemClass\",\n      select: true,\n      value: this.props.values.itemClass || '',\n      onChange: this.props.handleChangeClass('itemClass'),\n      SelectProps: {},\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `components.note.class`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 30\n        }\n      }),\n      InputProps: {\n        disableUnderline: true\n      },\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 21\n      }\n    }, classes.map(itemClass => {\n      let data = {\n        classId: itemClass.id,\n        classeName: itemClass.name\n      };\n      return /*#__PURE__*/React.createElement(MenuItem, {\n        key: itemClass.id,\n        value: JSON.stringify(data),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 27\n        }\n      }, data.classeName);\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex mt-5 mr-1\",\n      style: {\n        borderWidth: 'thin',\n        borderStyle: 'solid',\n        borderColor: '#979A9A',\n        height: '16px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight col-md-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      id: \"classLevel\",\n      name: \"classLevel\",\n      select: true,\n      value: this.props.values.typeCall,\n      onChange: this.props.handleChangeType('typeCall'),\n      SelectProps: {},\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `register.no.call`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 30\n        }\n      }),\n      InputProps: {\n        disableUnderline: true\n      },\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      key: 0,\n      value: 'all',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `userStuppDisplay.all`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(MenuItem, {\n      key: 1,\n      value: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `register.call.done`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(MenuItem, {\n      key: 2,\n      value: false,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: `register.call.not.done`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 25\n      }\n    })))), /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"call-register-filter:visit\",\n      yes: () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex mt-5 mr-1\",\n        style: {\n          borderWidth: 'thin',\n          borderStyle: 'solid',\n          borderColor: '#979A9A',\n          height: '16px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-2 bd-highlight col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        id: \"idProf\",\n        name: \"idProf\",\n        select: true,\n        value: values.profId,\n        onChange: this.props.handleChangeProf('profId'),\n        SelectProps: {},\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: `professor.call`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 36\n          }\n        }),\n        InputProps: {\n          disableUnderline: true\n        },\n        margin: \"normal\",\n        fullWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        key: 0,\n        value: 0,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: `userStuppDisplay.all`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 31\n        }\n      })), values.professors.map(option => /*#__PURE__*/React.createElement(MenuItem, {\n        key: option.fk_id_professor,\n        value: option.fk_id_professor,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 31\n        }\n      }, option.professor.profile.user.name + ' ' + option.professor.profile.user.surname))))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"p-2 bd-highlight\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(DragAndDropCalendar, {\n      localizer: localizer,\n      events: events,\n      defaultView: \"week\",\n      timeslots: 1,\n      min: startDayTime,\n      max: endDayTime,\n      eventPropGetter: this.eventStyleGetter,\n      resizableAccessor: () => false,\n      messages: {\n        month: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"timetable.month\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 28\n          }\n        }),\n        day: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"timetable.day\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 26\n          }\n        }),\n        today: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"timetable.today\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 28\n          }\n        }),\n        previous: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"appModule.back\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 31\n          }\n        }),\n        next: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"appModule.next\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 27\n          }\n        }),\n        agenda: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"timetable.agenda\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 29\n          }\n        }),\n        week: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"timetable.week\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 27\n          }\n        })\n      },\n      onSelectEvent: event => this.props.displayEventCallregister(event),\n      components: {\n        event: this.props.event,\n        toolbar: this.props.customToolbar\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 17\n      }\n    })))));\n  }\n\n  eventStyleGetter(event, start, end, isSelected) {\n    let diff = moment.utc(moment(event.end, 'DD/MM/YYYY HH:mm').diff(moment(event.start, 'DD/MM/YYYY HH:mm'))).format('HH:mm');\n    const mn = moment.duration(diff).asMinutes();\n    let height = mn * 1.3 * 0.33 + 'px';\n    var backgroundColor = event.subjectColor;\n    var style = {\n      backgroundColor: backgroundColor,\n      opacity: 0.8,\n      color: 'black',\n      border: '0px',\n      display: 'block',\n      paddingTop: height,\n      borderRadius: '0px'\n    };\n    return {\n      style: style\n    };\n  }\n\n}\n\nexport default PlanningCalendar;","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Assiduity/routes/CallRegister/PlanningCalendar.js"],"names":["React","IntlMessages","RoleContext","MenuItem","TextField","BigCalendar","withDragAndDrop","moment","Can","localizer","momentLocalizer","DragAndDropCalendar","PlanningCalendar","Component","constructor","props","state","render","classes","values","startHours","startMinutes","endHours","endMinutes","startTime","endTime","split","startDayTime","Date","endDayTime","startHour","substr","startMunite","endHour","endMunite","events","setHours","setMinutes","role","itemClass","handleChangeClass","disableUnderline","map","data","classId","id","classeName","name","JSON","stringify","borderWidth","borderStyle","borderColor","height","typeCall","handleChangeType","profId","handleChangeProf","professors","option","fk_id_professor","professor","profile","user","surname","eventStyleGetter","month","day","today","previous","next","agenda","week","event","displayEventCallregister","toolbar","customToolbar","start","end","isSelected","diff","utc","format","mn","duration","asMinutes","backgroundColor","subjectColor","style","opacity","color","border","display","paddingTop","borderRadius"],"mappings":"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","sourcesContent":["import React from 'react';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport { RoleContext } from '../../../../../Context';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport TextField from '@material-ui/core/TextField';\nimport BigCalendar from 'react-big-calendar';\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop';\nimport 'react-big-calendar/lib/addons/dragAndDrop/styles.css';\nimport moment from 'moment';\nimport Can from '../../../../../can';\n\nconst localizer = BigCalendar.momentLocalizer(moment);\nconst DragAndDropCalendar = withDragAndDrop(BigCalendar);\nclass PlanningCalendar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    const { classes, values } = this.props;\n    let startHours = '';\n    let startMinutes = '';\n    let endHours = '';\n    let endMinutes = '';\n    if (this.props.startTime && this.props.endTime) {\n      const startTime = this.props.startTime.split(':');\n      const endTime = this.props.endTime.split(':');\n      startHours = startTime[0];\n      startMinutes = startTime[1];\n      endHours = endTime[0];\n      endMinutes = endTime[1];\n    } else {\n      startHours = '08';\n      startMinutes = '00';\n      endHours = '19';\n      endMinutes = '00';\n    }\n\n    const startDayTime = new Date();\n    const endDayTime = new Date();\n    let startHour = this.props.startTime.substr(0, 2);\n    let startMunite = this.props.startTime.substr(3, 2);\n    let endHour = this.props.endTime.substr(0, 2);\n    let endMunite = this.props.endTime.substr(3, 2);\n    let events = this.props.events ? this.props.events : [];\n\n    startDayTime.setHours(startHour);\n    startDayTime.setMinutes(startMunite);\n    endDayTime.setHours(endHour);\n    endDayTime.setMinutes(endMunite);\n    return (\n      <RoleContext.Consumer>\n        {({ role }) => (\n          <div className=\"animated slideInUpTiny animation-duration-3\">\n            <div className=\"d-flex flex-column bd-highlight mb-3\">\n              <div className=\"p-2 bd-highlight\">\n                <div className=\"d-flex flex-row bd-highlight mb-3\">\n                  <div className=\"p-2 bd-highlight col-md-1\">\n                    <TextField\n                      id=\"itemClass\"\n                      name=\"itemClass\"\n                      select\n                      value={this.props.values.itemClass || ''}\n                      onChange={this.props.handleChangeClass('itemClass')}\n                      SelectProps={{}}\n                      label={<IntlMessages id={`components.note.class`} />}\n                      InputProps={{ disableUnderline: true }}\n                      margin=\"normal\"\n                      fullWidth\n                    >\n                      {classes.map((itemClass) => {\n                        let data = {\n                          classId: itemClass.id,\n                          classeName: itemClass.name,\n                        };\n\n                        return (\n                          <MenuItem key={itemClass.id} value={JSON.stringify(data)}>\n                            {data.classeName}\n                          </MenuItem>\n                        );\n                      })}\n                    </TextField>\n                  </div>\n\n                  <div\n                    className=\"d-flex mt-5 mr-1\"\n                    style={{\n                      borderWidth: 'thin',\n                      borderStyle: 'solid',\n                      borderColor: '#979A9A',\n                      height: '16px',\n                    }}\n                  ></div>\n\n                  <div className=\"p-2 bd-highlight col-md-1\">\n                    <TextField\n                      id=\"classLevel\"\n                      name=\"classLevel\"\n                      select\n                      value={this.props.values.typeCall}\n                      onChange={this.props.handleChangeType('typeCall')}\n                      SelectProps={{}}\n                      label={<IntlMessages id={`register.no.call`} />}\n                      InputProps={{ disableUnderline: true }}\n                      margin=\"normal\"\n                      fullWidth\n                    >\n                      <MenuItem key={0} value={'all'}>\n                        <IntlMessages id={`userStuppDisplay.all`} />\n                      </MenuItem>\n                      <MenuItem key={1} value={true}>\n                        <IntlMessages id={`register.call.done`} />\n                      </MenuItem>\n                      <MenuItem key={2} value={false}>\n                        <IntlMessages id={`register.call.not.done`} />\n                      </MenuItem>\n                    </TextField>\n                  </div>\n\n                  <Can\n                    role={role}\n                    perform=\"call-register-filter:visit\"\n                    yes={() => (\n                      <>\n                        <div\n                          className=\"d-flex mt-5 mr-1\"\n                          style={{\n                            borderWidth: 'thin',\n                            borderStyle: 'solid',\n                            borderColor: '#979A9A',\n                            height: '16px',\n                          }}\n                        ></div>\n                        <div className=\"p-2 bd-highlight col-md-2\">\n                          <TextField\n                            id=\"idProf\"\n                            name=\"idProf\"\n                            select\n                            value={values.profId}\n                            onChange={this.props.handleChangeProf('profId')}\n                            SelectProps={{}}\n                            label={<IntlMessages id={`professor.call`} />}\n                            InputProps={{ disableUnderline: true }}\n                            margin=\"normal\"\n                            fullWidth\n                          >\n                            <MenuItem key={0} value={0}>\n                              <IntlMessages id={`userStuppDisplay.all`} />\n                            </MenuItem>\n                            {values.professors.map((option) => (\n                              <MenuItem key={option.fk_id_professor} value={option.fk_id_professor}>\n                                {option.professor.profile.user.name +\n                                  ' ' +\n                                  option.professor.profile.user.surname}\n                              </MenuItem>\n                            ))}\n                          </TextField>\n                        </div>\n                      </>\n                    )}\n                  />\n                </div>\n              </div>\n\n              <div className=\"p-2 bd-highlight\">\n                <DragAndDropCalendar\n                  localizer={localizer}\n                  events={events}\n                  defaultView=\"week\"\n                  timeslots={1}\n                  min={startDayTime}\n                  max={endDayTime}\n                  eventPropGetter={this.eventStyleGetter}\n                  resizableAccessor={() => false}\n                  messages={{\n                    month: <IntlMessages id=\"timetable.month\" />,\n                    day: <IntlMessages id=\"timetable.day\" />,\n                    today: <IntlMessages id=\"timetable.today\" />,\n                    previous: <IntlMessages id=\"appModule.back\" />,\n                    next: <IntlMessages id=\"appModule.next\" />,\n                    agenda: <IntlMessages id=\"timetable.agenda\" />,\n                    week: <IntlMessages id=\"timetable.week\" />,\n                  }}\n                  onSelectEvent={(event) => this.props.displayEventCallregister(event)}\n                  components={{\n                    event: this.props.event,\n                    toolbar: this.props.customToolbar,\n                  }}\n                />\n              </div>\n            </div>\n          </div>\n        )}\n      </RoleContext.Consumer>\n    );\n  }\n\n  eventStyleGetter(event, start, end, isSelected) {\n    let diff = moment\n      .utc(moment(event.end, 'DD/MM/YYYY HH:mm').diff(moment(event.start, 'DD/MM/YYYY HH:mm')))\n      .format('HH:mm');\n    const mn = moment.duration(diff).asMinutes();\n    let height = mn * 1.3 * 0.33 + 'px';\n    var backgroundColor = event.subjectColor;\n    var style = {\n      backgroundColor: backgroundColor,\n      opacity: 0.8,\n      color: 'black',\n      border: '0px',\n      display: 'block',\n      paddingTop: height,\n      borderRadius: '0px',\n    };\n    return {\n      style: style,\n    };\n  }\n}\n\nexport default PlanningCalendar;\n"]},"metadata":{},"sourceType":"module"}