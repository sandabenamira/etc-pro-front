{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.getEventNodeFromPoint = getEventNodeFromPoint;\nexports.isEvent = isEvent;\nexports.objectsCollide = objectsCollide;\nexports.getBoundsForNode = getBoundsForNode;\nexports.default = void 0;\n\nvar _contains = _interopRequireDefault(require(\"dom-helpers/query/contains\"));\n\nvar _closest = _interopRequireDefault(require(\"dom-helpers/query/closest\"));\n\nvar _events = _interopRequireDefault(require(\"dom-helpers/events\"));\n\nfunction addEventListener(type, handler, target) {\n  if (target === void 0) {\n    target = document;\n  }\n\n  _events.default.on(target, type, handler, {\n    passive: false\n  });\n\n  return {\n    remove: function remove() {\n      _events.default.off(target, type, handler);\n    }\n  };\n}\n\nfunction isOverContainer(container, x, y) {\n  return !container || (0, _contains.default)(container, document.elementFromPoint(x, y));\n}\n\nfunction getEventNodeFromPoint(node, _ref) {\n  var clientX = _ref.clientX,\n      clientY = _ref.clientY;\n  var target = document.elementFromPoint(clientX, clientY);\n  return (0, _closest.default)(target, '.rbc-event', node);\n}\n\nfunction isEvent(node, bounds) {\n  return !!getEventNodeFromPoint(node, bounds);\n}\n\nfunction getEventCoordinates(e) {\n  var target = e;\n\n  if (e.touches && e.touches.length) {\n    target = e.touches[0];\n  }\n\n  return {\n    clientX: target.clientX,\n    clientY: target.clientY,\n    pageX: target.pageX,\n    pageY: target.pageY\n  };\n}\n\nvar clickTolerance = 5;\nvar clickInterval = 250;\n\nvar Selection = /*#__PURE__*/function () {\n  function Selection(node, _temp) {\n    var _ref2 = _temp === void 0 ? {} : _temp,\n        _ref2$global = _ref2.global,\n        global = _ref2$global === void 0 ? false : _ref2$global,\n        _ref2$longPressThresh = _ref2.longPressThreshold,\n        longPressThreshold = _ref2$longPressThresh === void 0 ? 250 : _ref2$longPressThresh;\n\n    this.container = node;\n    this.globalMouse = !node || global;\n    this.longPressThreshold = longPressThreshold;\n    this._listeners = Object.create(null);\n    this._handleInitialEvent = this._handleInitialEvent.bind(this);\n    this._handleMoveEvent = this._handleMoveEvent.bind(this);\n    this._handleTerminatingEvent = this._handleTerminatingEvent.bind(this);\n    this._keyListener = this._keyListener.bind(this);\n    this._dropFromOutsideListener = this._dropFromOutsideListener.bind(this); // Fixes an iOS 10 bug where scrolling could not be prevented on the window.\n    // https://github.com/metafizzy/flickity/issues/457#issuecomment-254501356\n\n    this._onTouchMoveWindowListener = addEventListener('touchmove', function () {}, window);\n    this._onKeyDownListener = addEventListener('keydown', this._keyListener);\n    this._onKeyUpListener = addEventListener('keyup', this._keyListener);\n    this._onDropFromOutsideListener = addEventListener('drop', this._dropFromOutsideListener);\n\n    this._addInitialEventListener();\n  }\n\n  var _proto = Selection.prototype;\n\n  _proto.on = function on(type, handler) {\n    var handlers = this._listeners[type] || (this._listeners[type] = []);\n    handlers.push(handler);\n    return {\n      remove: function remove() {\n        var idx = handlers.indexOf(handler);\n        if (idx !== -1) handlers.splice(idx, 1);\n      }\n    };\n  };\n\n  _proto.emit = function emit(type) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var result;\n    var handlers = this._listeners[type] || [];\n    handlers.forEach(function (fn) {\n      if (result === undefined) result = fn.apply(void 0, args);\n    });\n    return result;\n  };\n\n  _proto.teardown = function teardown() {\n    this.listeners = Object.create(null);\n    this._onTouchMoveWindowListener && this._onTouchMoveWindowListener.remove();\n    this._onInitialEventListener && this._onInitialEventListener.remove();\n    this._onEndListener && this._onEndListener.remove();\n    this._onEscListener && this._onEscListener.remove();\n    this._onMoveListener && this._onMoveListener.remove();\n    this._onKeyUpListener && this._onKeyUpListener.remove();\n    this._onKeyDownListener && this._onKeyDownListener.remove();\n  };\n\n  _proto.isSelected = function isSelected(node) {\n    var box = this._selectRect;\n    if (!box || !this.selecting) return false;\n    return objectsCollide(box, getBoundsForNode(node));\n  };\n\n  _proto.filter = function filter(items) {\n    var box = this._selectRect; //not selecting\n\n    if (!box || !this.selecting) return [];\n    return items.filter(this.isSelected, this);\n  } // Adds a listener that will call the handler only after the user has pressed on the screen\n  // without moving their finger for 250ms.\n  ;\n\n  _proto._addLongPressListener = function _addLongPressListener(handler, initialEvent) {\n    var _this = this;\n\n    var timer = null;\n    var touchMoveListener = null;\n    var touchEndListener = null;\n\n    var handleTouchStart = function handleTouchStart(initialEvent) {\n      timer = setTimeout(function () {\n        cleanup();\n        handler(initialEvent);\n      }, _this.longPressThreshold);\n      touchMoveListener = addEventListener('touchmove', function () {\n        return cleanup();\n      });\n      touchEndListener = addEventListener('touchend', function () {\n        return cleanup();\n      });\n    };\n\n    var touchStartListener = addEventListener('touchstart', handleTouchStart);\n\n    var cleanup = function cleanup() {\n      if (timer) {\n        clearTimeout(timer);\n      }\n\n      if (touchMoveListener) {\n        touchMoveListener.remove();\n      }\n\n      if (touchEndListener) {\n        touchEndListener.remove();\n      }\n\n      timer = null;\n      touchMoveListener = null;\n      touchEndListener = null;\n    };\n\n    if (initialEvent) {\n      handleTouchStart(initialEvent);\n    }\n\n    return {\n      remove: function remove() {\n        cleanup();\n        touchStartListener.remove();\n      }\n    };\n  } // Listen for mousedown and touchstart events. When one is received, disable the other and setup\n  // future event handling based on the type of event.\n  ;\n\n  _proto._addInitialEventListener = function _addInitialEventListener() {\n    var _this2 = this;\n\n    var mouseDownListener = addEventListener('mousedown', function (e) {\n      _this2._onInitialEventListener.remove();\n\n      _this2._handleInitialEvent(e);\n\n      _this2._onInitialEventListener = addEventListener('mousedown', _this2._handleInitialEvent);\n    });\n    var touchStartListener = addEventListener('touchstart', function (e) {\n      _this2._onInitialEventListener.remove();\n\n      _this2._onInitialEventListener = _this2._addLongPressListener(_this2._handleInitialEvent, e);\n    });\n    this._onInitialEventListener = {\n      remove: function remove() {\n        mouseDownListener.remove();\n        touchStartListener.remove();\n      }\n    };\n  };\n\n  _proto._dropFromOutsideListener = function _dropFromOutsideListener(e) {\n    var _getEventCoordinates = getEventCoordinates(e),\n        pageX = _getEventCoordinates.pageX,\n        pageY = _getEventCoordinates.pageY,\n        clientX = _getEventCoordinates.clientX,\n        clientY = _getEventCoordinates.clientY;\n\n    this.emit('dropFromOutside', {\n      x: pageX,\n      y: pageY,\n      clientX: clientX,\n      clientY: clientY\n    });\n    e.preventDefault();\n  };\n\n  _proto._handleInitialEvent = function _handleInitialEvent(e) {\n    var _getEventCoordinates2 = getEventCoordinates(e),\n        clientX = _getEventCoordinates2.clientX,\n        clientY = _getEventCoordinates2.clientY,\n        pageX = _getEventCoordinates2.pageX,\n        pageY = _getEventCoordinates2.pageY;\n\n    var node = this.container(),\n        collides,\n        offsetData; // Right clicks\n\n    if (e.which === 3 || e.button === 2 || !isOverContainer(node, clientX, clientY)) return;\n\n    if (!this.globalMouse && node && !(0, _contains.default)(node, e.target)) {\n      var _normalizeDistance = normalizeDistance(0),\n          top = _normalizeDistance.top,\n          left = _normalizeDistance.left,\n          bottom = _normalizeDistance.bottom,\n          right = _normalizeDistance.right;\n\n      offsetData = getBoundsForNode(node);\n      collides = objectsCollide({\n        top: offsetData.top - top,\n        left: offsetData.left - left,\n        bottom: offsetData.bottom + bottom,\n        right: offsetData.right + right\n      }, {\n        top: pageY,\n        left: pageX\n      });\n      if (!collides) return;\n    }\n\n    var result = this.emit('beforeSelect', this._initialEventData = {\n      isTouch: /^touch/.test(e.type),\n      x: pageX,\n      y: pageY,\n      clientX: clientX,\n      clientY: clientY\n    });\n    if (result === false) return;\n\n    switch (e.type) {\n      case 'mousedown':\n        this._onEndListener = addEventListener('mouseup', this._handleTerminatingEvent);\n        this._onEscListener = addEventListener('keydown', this._handleTerminatingEvent);\n        this._onMoveListener = addEventListener('mousemove', this._handleMoveEvent);\n        break;\n\n      case 'touchstart':\n        this._handleMoveEvent(e);\n\n        this._onEndListener = addEventListener('touchend', this._handleTerminatingEvent);\n        this._onMoveListener = addEventListener('touchmove', this._handleMoveEvent);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  _proto._handleTerminatingEvent = function _handleTerminatingEvent(e) {\n    var _getEventCoordinates3 = getEventCoordinates(e),\n        pageX = _getEventCoordinates3.pageX,\n        pageY = _getEventCoordinates3.pageY;\n\n    this.selecting = false;\n    this._onEndListener && this._onEndListener.remove();\n    this._onMoveListener && this._onMoveListener.remove();\n    if (!this._initialEventData) return;\n    var inRoot = !this.container || (0, _contains.default)(this.container(), e.target);\n    var bounds = this._selectRect;\n    var click = this.isClick(pageX, pageY);\n    this._initialEventData = null;\n\n    if (e.key === 'Escape') {\n      return this.emit('reset');\n    }\n\n    if (!inRoot) {\n      return this.emit('reset');\n    }\n\n    if (click && inRoot) {\n      return this._handleClickEvent(e);\n    } // User drag-clicked in the Selectable area\n\n\n    if (!click) return this.emit('select', bounds);\n  };\n\n  _proto._handleClickEvent = function _handleClickEvent(e) {\n    var _getEventCoordinates4 = getEventCoordinates(e),\n        pageX = _getEventCoordinates4.pageX,\n        pageY = _getEventCoordinates4.pageY,\n        clientX = _getEventCoordinates4.clientX,\n        clientY = _getEventCoordinates4.clientY;\n\n    var now = new Date().getTime();\n\n    if (this._lastClickData && now - this._lastClickData.timestamp < clickInterval) {\n      // Double click event\n      this._lastClickData = null;\n      return this.emit('doubleClick', {\n        x: pageX,\n        y: pageY,\n        clientX: clientX,\n        clientY: clientY\n      });\n    } // Click event\n\n\n    this._lastClickData = {\n      timestamp: now\n    };\n    return this.emit('click', {\n      x: pageX,\n      y: pageY,\n      clientX: clientX,\n      clientY: clientY\n    });\n  };\n\n  _proto._handleMoveEvent = function _handleMoveEvent(e) {\n    if (this._initialEventData === null) {\n      return;\n    }\n\n    var _this$_initialEventDa = this._initialEventData,\n        x = _this$_initialEventDa.x,\n        y = _this$_initialEventDa.y;\n\n    var _getEventCoordinates5 = getEventCoordinates(e),\n        pageX = _getEventCoordinates5.pageX,\n        pageY = _getEventCoordinates5.pageY;\n\n    var w = Math.abs(x - pageX);\n    var h = Math.abs(y - pageY);\n    var left = Math.min(pageX, x),\n        top = Math.min(pageY, y),\n        old = this.selecting; // Prevent emitting selectStart event until mouse is moved.\n    // in Chrome on Windows, mouseMove event may be fired just after mouseDown event.\n\n    if (this.isClick(pageX, pageY) && !old && !(w || h)) {\n      return;\n    }\n\n    this.selecting = true;\n    this._selectRect = {\n      top: top,\n      left: left,\n      x: pageX,\n      y: pageY,\n      right: left + w,\n      bottom: top + h\n    };\n\n    if (!old) {\n      this.emit('selectStart', this._initialEventData);\n    }\n\n    if (!this.isClick(pageX, pageY)) this.emit('selecting', this._selectRect);\n    e.preventDefault();\n  };\n\n  _proto._keyListener = function _keyListener(e) {\n    this.ctrl = e.metaKey || e.ctrlKey;\n  };\n\n  _proto.isClick = function isClick(pageX, pageY) {\n    var _this$_initialEventDa2 = this._initialEventData,\n        x = _this$_initialEventDa2.x,\n        y = _this$_initialEventDa2.y,\n        isTouch = _this$_initialEventDa2.isTouch;\n    return !isTouch && Math.abs(pageX - x) <= clickTolerance && Math.abs(pageY - y) <= clickTolerance;\n  };\n\n  return Selection;\n}();\n/**\n * Resolve the disance prop from either an Int or an Object\n * @return {Object}\n */\n\n\nfunction normalizeDistance(distance) {\n  if (distance === void 0) {\n    distance = 0;\n  }\n\n  if (typeof distance !== 'object') distance = {\n    top: distance,\n    left: distance,\n    right: distance,\n    bottom: distance\n  };\n  return distance;\n}\n/**\n * Given two objects containing \"top\", \"left\", \"offsetWidth\" and \"offsetHeight\"\n * properties, determine if they collide.\n * @param  {Object|HTMLElement} a\n * @param  {Object|HTMLElement} b\n * @return {bool}\n */\n\n\nfunction objectsCollide(nodeA, nodeB, tolerance) {\n  if (tolerance === void 0) {\n    tolerance = 0;\n  }\n\n  var _getBoundsForNode = getBoundsForNode(nodeA),\n      aTop = _getBoundsForNode.top,\n      aLeft = _getBoundsForNode.left,\n      _getBoundsForNode$rig = _getBoundsForNode.right,\n      aRight = _getBoundsForNode$rig === void 0 ? aLeft : _getBoundsForNode$rig,\n      _getBoundsForNode$bot = _getBoundsForNode.bottom,\n      aBottom = _getBoundsForNode$bot === void 0 ? aTop : _getBoundsForNode$bot;\n\n  var _getBoundsForNode2 = getBoundsForNode(nodeB),\n      bTop = _getBoundsForNode2.top,\n      bLeft = _getBoundsForNode2.left,\n      _getBoundsForNode2$ri = _getBoundsForNode2.right,\n      bRight = _getBoundsForNode2$ri === void 0 ? bLeft : _getBoundsForNode2$ri,\n      _getBoundsForNode2$bo = _getBoundsForNode2.bottom,\n      bBottom = _getBoundsForNode2$bo === void 0 ? bTop : _getBoundsForNode2$bo;\n\n  return !( // 'a' bottom doesn't touch 'b' top\n  aBottom - tolerance < bTop || // 'a' top doesn't touch 'b' bottom\n  aTop + tolerance > bBottom || // 'a' right doesn't touch 'b' left\n  aRight - tolerance < bLeft || // 'a' left doesn't touch 'b' right\n  aLeft + tolerance > bRight);\n}\n/**\n * Given a node, get everything needed to calculate its boundaries\n * @param  {HTMLElement} node\n * @return {Object}\n */\n\n\nfunction getBoundsForNode(node) {\n  if (!node.getBoundingClientRect) return node;\n  var rect = node.getBoundingClientRect(),\n      left = rect.left + pageOffset('left'),\n      top = rect.top + pageOffset('top');\n  return {\n    top: top,\n    left: left,\n    right: (node.offsetWidth || 0) + left,\n    bottom: (node.offsetHeight || 0) + top\n  };\n}\n\nfunction pageOffset(dir) {\n  if (dir === 'left') return window.pageXOffset || document.body.scrollLeft || 0;\n  if (dir === 'top') return window.pageYOffset || document.body.scrollTop || 0;\n}\n\nvar _default = Selection;\nexports.default = _default;","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/node_modules/react-big-calendar/lib/Selection.js"],"names":["_interopRequireDefault","require","exports","__esModule","getEventNodeFromPoint","isEvent","objectsCollide","getBoundsForNode","default","_contains","_closest","_events","addEventListener","type","handler","target","document","on","passive","remove","off","isOverContainer","container","x","y","elementFromPoint","node","_ref","clientX","clientY","bounds","getEventCoordinates","e","touches","length","pageX","pageY","clickTolerance","clickInterval","Selection","_temp","_ref2","_ref2$global","global","_ref2$longPressThresh","longPressThreshold","globalMouse","_listeners","Object","create","_handleInitialEvent","bind","_handleMoveEvent","_handleTerminatingEvent","_keyListener","_dropFromOutsideListener","_onTouchMoveWindowListener","window","_onKeyDownListener","_onKeyUpListener","_onDropFromOutsideListener","_addInitialEventListener","_proto","prototype","handlers","push","idx","indexOf","splice","emit","_len","arguments","args","Array","_key","result","forEach","fn","undefined","apply","teardown","listeners","_onInitialEventListener","_onEndListener","_onEscListener","_onMoveListener","isSelected","box","_selectRect","selecting","filter","items","_addLongPressListener","initialEvent","_this","timer","touchMoveListener","touchEndListener","handleTouchStart","setTimeout","cleanup","touchStartListener","clearTimeout","_this2","mouseDownListener","_getEventCoordinates","preventDefault","_getEventCoordinates2","collides","offsetData","which","button","_normalizeDistance","normalizeDistance","top","left","bottom","right","_initialEventData","isTouch","test","_getEventCoordinates3","inRoot","click","isClick","key","_handleClickEvent","_getEventCoordinates4","now","Date","getTime","_lastClickData","timestamp","_this$_initialEventDa","_getEventCoordinates5","w","Math","abs","h","min","old","ctrl","metaKey","ctrlKey","_this$_initialEventDa2","distance","nodeA","nodeB","tolerance","_getBoundsForNode","aTop","aLeft","_getBoundsForNode$rig","aRight","_getBoundsForNode$bot","aBottom","_getBoundsForNode2","bTop","bLeft","_getBoundsForNode2$ri","bRight","_getBoundsForNode2$bo","bBottom","getBoundingClientRect","rect","pageOffset","offsetWidth","offsetHeight","dir","pageXOffset","body","scrollLeft","pageYOffset","scrollTop","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.getEventNodeFromPoint = getEventNodeFromPoint;\nexports.isEvent = isEvent;\nexports.objectsCollide = objectsCollide;\nexports.getBoundsForNode = getBoundsForNode;\nexports.default = void 0;\n\nvar _contains = _interopRequireDefault(require(\"dom-helpers/query/contains\"));\n\nvar _closest = _interopRequireDefault(require(\"dom-helpers/query/closest\"));\n\nvar _events = _interopRequireDefault(require(\"dom-helpers/events\"));\n\nfunction addEventListener(type, handler, target) {\n  if (target === void 0) {\n    target = document;\n  }\n\n  _events.default.on(target, type, handler, {\n    passive: false\n  });\n\n  return {\n    remove: function remove() {\n      _events.default.off(target, type, handler);\n    }\n  };\n}\n\nfunction isOverContainer(container, x, y) {\n  return !container || (0, _contains.default)(container, document.elementFromPoint(x, y));\n}\n\nfunction getEventNodeFromPoint(node, _ref) {\n  var clientX = _ref.clientX,\n      clientY = _ref.clientY;\n  var target = document.elementFromPoint(clientX, clientY);\n  return (0, _closest.default)(target, '.rbc-event', node);\n}\n\nfunction isEvent(node, bounds) {\n  return !!getEventNodeFromPoint(node, bounds);\n}\n\nfunction getEventCoordinates(e) {\n  var target = e;\n\n  if (e.touches && e.touches.length) {\n    target = e.touches[0];\n  }\n\n  return {\n    clientX: target.clientX,\n    clientY: target.clientY,\n    pageX: target.pageX,\n    pageY: target.pageY\n  };\n}\n\nvar clickTolerance = 5;\nvar clickInterval = 250;\n\nvar Selection =\n/*#__PURE__*/\nfunction () {\n  function Selection(node, _temp) {\n    var _ref2 = _temp === void 0 ? {} : _temp,\n        _ref2$global = _ref2.global,\n        global = _ref2$global === void 0 ? false : _ref2$global,\n        _ref2$longPressThresh = _ref2.longPressThreshold,\n        longPressThreshold = _ref2$longPressThresh === void 0 ? 250 : _ref2$longPressThresh;\n\n    this.container = node;\n    this.globalMouse = !node || global;\n    this.longPressThreshold = longPressThreshold;\n    this._listeners = Object.create(null);\n    this._handleInitialEvent = this._handleInitialEvent.bind(this);\n    this._handleMoveEvent = this._handleMoveEvent.bind(this);\n    this._handleTerminatingEvent = this._handleTerminatingEvent.bind(this);\n    this._keyListener = this._keyListener.bind(this);\n    this._dropFromOutsideListener = this._dropFromOutsideListener.bind(this); // Fixes an iOS 10 bug where scrolling could not be prevented on the window.\n    // https://github.com/metafizzy/flickity/issues/457#issuecomment-254501356\n\n    this._onTouchMoveWindowListener = addEventListener('touchmove', function () {}, window);\n    this._onKeyDownListener = addEventListener('keydown', this._keyListener);\n    this._onKeyUpListener = addEventListener('keyup', this._keyListener);\n    this._onDropFromOutsideListener = addEventListener('drop', this._dropFromOutsideListener);\n\n    this._addInitialEventListener();\n  }\n\n  var _proto = Selection.prototype;\n\n  _proto.on = function on(type, handler) {\n    var handlers = this._listeners[type] || (this._listeners[type] = []);\n    handlers.push(handler);\n    return {\n      remove: function remove() {\n        var idx = handlers.indexOf(handler);\n        if (idx !== -1) handlers.splice(idx, 1);\n      }\n    };\n  };\n\n  _proto.emit = function emit(type) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    var result;\n    var handlers = this._listeners[type] || [];\n    handlers.forEach(function (fn) {\n      if (result === undefined) result = fn.apply(void 0, args);\n    });\n    return result;\n  };\n\n  _proto.teardown = function teardown() {\n    this.listeners = Object.create(null);\n    this._onTouchMoveWindowListener && this._onTouchMoveWindowListener.remove();\n    this._onInitialEventListener && this._onInitialEventListener.remove();\n    this._onEndListener && this._onEndListener.remove();\n    this._onEscListener && this._onEscListener.remove();\n    this._onMoveListener && this._onMoveListener.remove();\n    this._onKeyUpListener && this._onKeyUpListener.remove();\n    this._onKeyDownListener && this._onKeyDownListener.remove();\n  };\n\n  _proto.isSelected = function isSelected(node) {\n    var box = this._selectRect;\n    if (!box || !this.selecting) return false;\n    return objectsCollide(box, getBoundsForNode(node));\n  };\n\n  _proto.filter = function filter(items) {\n    var box = this._selectRect; //not selecting\n\n    if (!box || !this.selecting) return [];\n    return items.filter(this.isSelected, this);\n  } // Adds a listener that will call the handler only after the user has pressed on the screen\n  // without moving their finger for 250ms.\n  ;\n\n  _proto._addLongPressListener = function _addLongPressListener(handler, initialEvent) {\n    var _this = this;\n\n    var timer = null;\n    var touchMoveListener = null;\n    var touchEndListener = null;\n\n    var handleTouchStart = function handleTouchStart(initialEvent) {\n      timer = setTimeout(function () {\n        cleanup();\n        handler(initialEvent);\n      }, _this.longPressThreshold);\n      touchMoveListener = addEventListener('touchmove', function () {\n        return cleanup();\n      });\n      touchEndListener = addEventListener('touchend', function () {\n        return cleanup();\n      });\n    };\n\n    var touchStartListener = addEventListener('touchstart', handleTouchStart);\n\n    var cleanup = function cleanup() {\n      if (timer) {\n        clearTimeout(timer);\n      }\n\n      if (touchMoveListener) {\n        touchMoveListener.remove();\n      }\n\n      if (touchEndListener) {\n        touchEndListener.remove();\n      }\n\n      timer = null;\n      touchMoveListener = null;\n      touchEndListener = null;\n    };\n\n    if (initialEvent) {\n      handleTouchStart(initialEvent);\n    }\n\n    return {\n      remove: function remove() {\n        cleanup();\n        touchStartListener.remove();\n      }\n    };\n  } // Listen for mousedown and touchstart events. When one is received, disable the other and setup\n  // future event handling based on the type of event.\n  ;\n\n  _proto._addInitialEventListener = function _addInitialEventListener() {\n    var _this2 = this;\n\n    var mouseDownListener = addEventListener('mousedown', function (e) {\n      _this2._onInitialEventListener.remove();\n\n      _this2._handleInitialEvent(e);\n\n      _this2._onInitialEventListener = addEventListener('mousedown', _this2._handleInitialEvent);\n    });\n    var touchStartListener = addEventListener('touchstart', function (e) {\n      _this2._onInitialEventListener.remove();\n\n      _this2._onInitialEventListener = _this2._addLongPressListener(_this2._handleInitialEvent, e);\n    });\n    this._onInitialEventListener = {\n      remove: function remove() {\n        mouseDownListener.remove();\n        touchStartListener.remove();\n      }\n    };\n  };\n\n  _proto._dropFromOutsideListener = function _dropFromOutsideListener(e) {\n    var _getEventCoordinates = getEventCoordinates(e),\n        pageX = _getEventCoordinates.pageX,\n        pageY = _getEventCoordinates.pageY,\n        clientX = _getEventCoordinates.clientX,\n        clientY = _getEventCoordinates.clientY;\n\n    this.emit('dropFromOutside', {\n      x: pageX,\n      y: pageY,\n      clientX: clientX,\n      clientY: clientY\n    });\n    e.preventDefault();\n  };\n\n  _proto._handleInitialEvent = function _handleInitialEvent(e) {\n    var _getEventCoordinates2 = getEventCoordinates(e),\n        clientX = _getEventCoordinates2.clientX,\n        clientY = _getEventCoordinates2.clientY,\n        pageX = _getEventCoordinates2.pageX,\n        pageY = _getEventCoordinates2.pageY;\n\n    var node = this.container(),\n        collides,\n        offsetData; // Right clicks\n\n    if (e.which === 3 || e.button === 2 || !isOverContainer(node, clientX, clientY)) return;\n\n    if (!this.globalMouse && node && !(0, _contains.default)(node, e.target)) {\n      var _normalizeDistance = normalizeDistance(0),\n          top = _normalizeDistance.top,\n          left = _normalizeDistance.left,\n          bottom = _normalizeDistance.bottom,\n          right = _normalizeDistance.right;\n\n      offsetData = getBoundsForNode(node);\n      collides = objectsCollide({\n        top: offsetData.top - top,\n        left: offsetData.left - left,\n        bottom: offsetData.bottom + bottom,\n        right: offsetData.right + right\n      }, {\n        top: pageY,\n        left: pageX\n      });\n      if (!collides) return;\n    }\n\n    var result = this.emit('beforeSelect', this._initialEventData = {\n      isTouch: /^touch/.test(e.type),\n      x: pageX,\n      y: pageY,\n      clientX: clientX,\n      clientY: clientY\n    });\n    if (result === false) return;\n\n    switch (e.type) {\n      case 'mousedown':\n        this._onEndListener = addEventListener('mouseup', this._handleTerminatingEvent);\n        this._onEscListener = addEventListener('keydown', this._handleTerminatingEvent);\n        this._onMoveListener = addEventListener('mousemove', this._handleMoveEvent);\n        break;\n\n      case 'touchstart':\n        this._handleMoveEvent(e);\n\n        this._onEndListener = addEventListener('touchend', this._handleTerminatingEvent);\n        this._onMoveListener = addEventListener('touchmove', this._handleMoveEvent);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  _proto._handleTerminatingEvent = function _handleTerminatingEvent(e) {\n    var _getEventCoordinates3 = getEventCoordinates(e),\n        pageX = _getEventCoordinates3.pageX,\n        pageY = _getEventCoordinates3.pageY;\n\n    this.selecting = false;\n    this._onEndListener && this._onEndListener.remove();\n    this._onMoveListener && this._onMoveListener.remove();\n    if (!this._initialEventData) return;\n    var inRoot = !this.container || (0, _contains.default)(this.container(), e.target);\n    var bounds = this._selectRect;\n    var click = this.isClick(pageX, pageY);\n    this._initialEventData = null;\n\n    if (e.key === 'Escape') {\n      return this.emit('reset');\n    }\n\n    if (!inRoot) {\n      return this.emit('reset');\n    }\n\n    if (click && inRoot) {\n      return this._handleClickEvent(e);\n    } // User drag-clicked in the Selectable area\n\n\n    if (!click) return this.emit('select', bounds);\n  };\n\n  _proto._handleClickEvent = function _handleClickEvent(e) {\n    var _getEventCoordinates4 = getEventCoordinates(e),\n        pageX = _getEventCoordinates4.pageX,\n        pageY = _getEventCoordinates4.pageY,\n        clientX = _getEventCoordinates4.clientX,\n        clientY = _getEventCoordinates4.clientY;\n\n    var now = new Date().getTime();\n\n    if (this._lastClickData && now - this._lastClickData.timestamp < clickInterval) {\n      // Double click event\n      this._lastClickData = null;\n      return this.emit('doubleClick', {\n        x: pageX,\n        y: pageY,\n        clientX: clientX,\n        clientY: clientY\n      });\n    } // Click event\n\n\n    this._lastClickData = {\n      timestamp: now\n    };\n    return this.emit('click', {\n      x: pageX,\n      y: pageY,\n      clientX: clientX,\n      clientY: clientY\n    });\n  };\n\n  _proto._handleMoveEvent = function _handleMoveEvent(e) {\n    if (this._initialEventData === null) {\n      return;\n    }\n\n    var _this$_initialEventDa = this._initialEventData,\n        x = _this$_initialEventDa.x,\n        y = _this$_initialEventDa.y;\n\n    var _getEventCoordinates5 = getEventCoordinates(e),\n        pageX = _getEventCoordinates5.pageX,\n        pageY = _getEventCoordinates5.pageY;\n\n    var w = Math.abs(x - pageX);\n    var h = Math.abs(y - pageY);\n    var left = Math.min(pageX, x),\n        top = Math.min(pageY, y),\n        old = this.selecting; // Prevent emitting selectStart event until mouse is moved.\n    // in Chrome on Windows, mouseMove event may be fired just after mouseDown event.\n\n    if (this.isClick(pageX, pageY) && !old && !(w || h)) {\n      return;\n    }\n\n    this.selecting = true;\n    this._selectRect = {\n      top: top,\n      left: left,\n      x: pageX,\n      y: pageY,\n      right: left + w,\n      bottom: top + h\n    };\n\n    if (!old) {\n      this.emit('selectStart', this._initialEventData);\n    }\n\n    if (!this.isClick(pageX, pageY)) this.emit('selecting', this._selectRect);\n    e.preventDefault();\n  };\n\n  _proto._keyListener = function _keyListener(e) {\n    this.ctrl = e.metaKey || e.ctrlKey;\n  };\n\n  _proto.isClick = function isClick(pageX, pageY) {\n    var _this$_initialEventDa2 = this._initialEventData,\n        x = _this$_initialEventDa2.x,\n        y = _this$_initialEventDa2.y,\n        isTouch = _this$_initialEventDa2.isTouch;\n    return !isTouch && Math.abs(pageX - x) <= clickTolerance && Math.abs(pageY - y) <= clickTolerance;\n  };\n\n  return Selection;\n}();\n/**\n * Resolve the disance prop from either an Int or an Object\n * @return {Object}\n */\n\n\nfunction normalizeDistance(distance) {\n  if (distance === void 0) {\n    distance = 0;\n  }\n\n  if (typeof distance !== 'object') distance = {\n    top: distance,\n    left: distance,\n    right: distance,\n    bottom: distance\n  };\n  return distance;\n}\n/**\n * Given two objects containing \"top\", \"left\", \"offsetWidth\" and \"offsetHeight\"\n * properties, determine if they collide.\n * @param  {Object|HTMLElement} a\n * @param  {Object|HTMLElement} b\n * @return {bool}\n */\n\n\nfunction objectsCollide(nodeA, nodeB, tolerance) {\n  if (tolerance === void 0) {\n    tolerance = 0;\n  }\n\n  var _getBoundsForNode = getBoundsForNode(nodeA),\n      aTop = _getBoundsForNode.top,\n      aLeft = _getBoundsForNode.left,\n      _getBoundsForNode$rig = _getBoundsForNode.right,\n      aRight = _getBoundsForNode$rig === void 0 ? aLeft : _getBoundsForNode$rig,\n      _getBoundsForNode$bot = _getBoundsForNode.bottom,\n      aBottom = _getBoundsForNode$bot === void 0 ? aTop : _getBoundsForNode$bot;\n\n  var _getBoundsForNode2 = getBoundsForNode(nodeB),\n      bTop = _getBoundsForNode2.top,\n      bLeft = _getBoundsForNode2.left,\n      _getBoundsForNode2$ri = _getBoundsForNode2.right,\n      bRight = _getBoundsForNode2$ri === void 0 ? bLeft : _getBoundsForNode2$ri,\n      _getBoundsForNode2$bo = _getBoundsForNode2.bottom,\n      bBottom = _getBoundsForNode2$bo === void 0 ? bTop : _getBoundsForNode2$bo;\n\n  return !( // 'a' bottom doesn't touch 'b' top\n  aBottom - tolerance < bTop || // 'a' top doesn't touch 'b' bottom\n  aTop + tolerance > bBottom || // 'a' right doesn't touch 'b' left\n  aRight - tolerance < bLeft || // 'a' left doesn't touch 'b' right\n  aLeft + tolerance > bRight);\n}\n/**\n * Given a node, get everything needed to calculate its boundaries\n * @param  {HTMLElement} node\n * @return {Object}\n */\n\n\nfunction getBoundsForNode(node) {\n  if (!node.getBoundingClientRect) return node;\n  var rect = node.getBoundingClientRect(),\n      left = rect.left + pageOffset('left'),\n      top = rect.top + pageOffset('top');\n  return {\n    top: top,\n    left: left,\n    right: (node.offsetWidth || 0) + left,\n    bottom: (node.offsetHeight || 0) + top\n  };\n}\n\nfunction pageOffset(dir) {\n  if (dir === 'left') return window.pageXOffset || document.body.scrollLeft || 0;\n  if (dir === 'top') return window.pageYOffset || document.body.scrollTop || 0;\n}\n\nvar _default = Selection;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}