{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/LevelTest/Questions/Question.js\";\nimport React from \"react\";\nimport IntlMessages from \"../../../../util/IntlMessages\";\nimport CardBox from \"../../../../components/CardBox/index\";\nimport Can from \"../../../../can\";\nimport { RoleContext } from \"../../../../Context\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport TextField from \"@material-ui/core/TextField\";\nimport RemoveSharpIcon from \"@material-ui/icons/RemoveSharp\";\nimport { connect } from \"react-redux\";\nimport ArrowDownwardIcon from \"@material-ui/icons/ArrowDownward\";\nimport ArrowUpwardIcon from \"@material-ui/icons/ArrowUpward\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport _ from \"lodash\";\nimport QuestionsTable from \"./QuestionsTable\";\nimport { addQuestion } from \"../../../../actions/QuestionActions\";\nimport AddQuestion from \"./AddQuestion\";\n\nclass Questions extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const question_desc = this.state.question_description;\n      const question_subject = this.state.topic;\n      const subject_id = this.state.subject_id;\n      const level_id = this.state.level_id;\n      const id_profile_creator = this.props.userProfile.id;\n      const status = true;\n      const question = {\n        question_desc,\n        question_subject,\n        subject_id,\n        level_id,\n        id_profile_creator,\n        status\n      };\n      let choices = this.state.choices.map(element => ({\n        proposal: element.content,\n        propasal_status: element.id == this.state.choiceChecked,\n        status: true\n      }));\n      this.props.addQuestion(question, choices);\n      this.setState({\n        choiceChecked: 1,\n        level_id: \"\",\n        subject_id: \"\",\n        topic: \"\",\n        question_description: \"\",\n        choices: [{\n          id: 1,\n          add: false,\n          content: \"\"\n        }]\n      });\n      this.openQuestionModal();\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n\n      if (name == \"filter_level_id\") {\n        let questionFiltred = this.props.questions;\n\n        if (event.target.value != 0) {\n          questionFiltred = questionFiltred.filter(element => element.level_id == event.target.value);\n        }\n\n        this.setState({\n          filter_subject_id: \"\",\n          questionFiltred\n        });\n      } else if (name == \"level_id\") {\n        this.setState({\n          subject_id: \"\"\n        });\n      } else if (name == \"filter_subject_id\") {\n        let questionFiltred = this.props.questions;\n\n        if (event.target.value != 0) {\n          questionFiltred = questionFiltred.filter(element => element.subject_id == event.target.value && element.level_id == this.state.filter_level_id);\n        }\n\n        this.setState({\n          questionFiltred\n        });\n      }\n    };\n\n    this.handleChangeRadio = name => event => {\n      this.setState({\n        choiceChecked: parseInt(event.target.value, 10)\n      });\n    };\n\n    this.handleChangeChoice = idChoice => event => {\n      let choices = this.state.choices;\n\n      let index = _.findIndex(choices, {\n        id: idChoice\n      });\n\n      _.fill(choices, {\n        id: choices[index].id,\n        content: event.target.value,\n        add: choices[index].add\n      }, index, index + 1);\n\n      this.setState({\n        choices\n      });\n    };\n\n    this.deleteChoice = idChoice => {\n      let choiceLength = this.state.choices.length;\n      let i = 1;\n      let choices = [];\n      this.state.choices.map(el => {\n        if (el.id !== idChoice && i !== choiceLength - 1) {\n          choices.push({\n            id: i,\n            add: true,\n            content: el.content\n          });\n          i++;\n        }\n      });\n      choices.push({\n        id: choiceLength - 1,\n        add: false,\n        content: this.state.choices[choiceLength - 1].content\n      });\n      var choiceChecked = this.state.choiceChecked;\n\n      if (idChoice == choiceChecked) {\n        this.setState({\n          choiceChecked: 0\n        });\n      } else if (idChoice < choiceChecked) {\n        this.setState({\n          choiceChecked: choiceChecked - 1\n        });\n      }\n\n      this.setState({\n        choices\n      });\n    };\n\n    this.addChoice = () => {\n      let choices = [];\n      this.state.choices.map(el => {\n        choices.push({\n          id: el.id,\n          add: true,\n          content: el.content\n        });\n      });\n      choices.push({\n        id: choices[choices.length - 1].id + 1,\n        add: false,\n        content: \"\"\n      });\n      this.setState({\n        choices\n      });\n    };\n\n    this.state = {\n      open: false,\n      addQuestion: false,\n      alerte: false,\n      choices: [{\n        id: 1,\n        add: false,\n        content: \"\"\n      }],\n      addChoice: false,\n      choiceChecked: 1,\n      level_id: \"\",\n      filter_level_id: \"\",\n      subject_id: \"\",\n      filter_subject_id: \"\",\n      topic: \"\",\n      question_description: \"\",\n      questionFiltred: []\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.openQuestionModal = this.openQuestionModal.bind(this);\n    this.addChoice = this.addChoice.bind(this);\n    this.deleteChoice = this.deleteChoice.bind(this);\n    this.handleChangeChoice = this.handleChangeChoice.bind(this);\n    this.handleChangeRadio = this.handleChangeRadio.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentWillMount() {\n    this.setState({\n      questionFiltred: this.props.questions\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.questions !== this.props.questions) {\n      this.setState({\n        questionFiltred: this.props.questions\n      });\n    }\n  }\n\n  openAddModal() {\n    this.setState(previousState => ({\n      open: !previousState.open\n    }));\n  }\n\n  openQuestionModal() {\n    this.setState(previousState => ({\n      addQuestion: !previousState.addQuestion\n    }));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(RoleContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }\n    }, ({\n      role\n    }) => /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"add-test-level\",\n      yes: () => /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-start align-items-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"level.test.question\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 23\n        }\n      })), \"\\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(Fab, {\n        size: \"small\",\n        color: \"primary\",\n        \"aria-label\": \"Add\",\n        onClick: this.openAddModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 21\n        }\n      }, this.state.open ? /*#__PURE__*/React.createElement(ArrowUpwardIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 25\n        }\n      }) : /*#__PURE__*/React.createElement(ArrowDownwardIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 25\n        }\n      }))), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 19\n        }\n      }), this.state.open ? /*#__PURE__*/React.createElement(React.Fragment, null, \"\", /*#__PURE__*/React.createElement(CardBox, {\n        styleName: \"col-lg-12 text-primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-start align-items-center col-md-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"new.level.test.add.question\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 31\n        }\n      })), \"\\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(Fab, {\n        size: \"small\",\n        color: \"primary\",\n        \"aria-label\": \"Add\",\n        onClick: this.openQuestionModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 29\n        }\n      }, this.state.addQuestion ? /*#__PURE__*/React.createElement(RemoveSharpIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 33\n        }\n      }) : /*#__PURE__*/React.createElement(AddIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 33\n        }\n      }))), this.state.addQuestion ? /*#__PURE__*/React.createElement(AddQuestion, {\n        openQuestionModal: this.openQuestionModal,\n        values: this.state,\n        handleSubmit: this.handleSubmit,\n        handleChangeRadio: this.handleChangeRadio,\n        handleChange: this.handleChange,\n        profSubjectList: this.props.profSubjectList,\n        profLevels: this.props.profLevels,\n        classLevels: this.props.classLevels,\n        level_id: this.props.level_id,\n        deleteChoice: this.deleteChoice,\n        addChoice: this.addChoice,\n        handleChangeChoice: this.handleChangeChoice,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 29\n        }\n      }) : \"\", /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-12  d-flex justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-3 text-left \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        required: true,\n        select: true,\n        name: \"entree\",\n        id: \"entree\",\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"components.note.niveau\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 35\n          }\n        }),\n        onChange: this.handleChange(\"filter_level_id\"),\n        value: this.state.filter_level_id,\n        margin: \"normal\",\n        fullWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        key: \"0\",\n        value: \"0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"all.label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 35\n        }\n      })), this.props.classLevels.map(level => {\n        if (this.props.profLevels.indexOf(level.id) >= 0) {\n          return /*#__PURE__*/React.createElement(MenuItem, {\n            key: level.id,\n            value: level.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 39\n            }\n          }, level.name);\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-3 text-left \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        required: true,\n        select: true,\n        name: \"suite\",\n        id: \"filter_subject_id\",\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"components.note.subject\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 35\n          }\n        }),\n        onChange: this.handleChange(\"filter_subject_id\"),\n        value: this.state.filter_subject_id,\n        margin: \"normal\",\n        fullWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        key: \"0\",\n        value: \"0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 33\n        }\n      }, \"Toutes les Mati\\xE9res\"), this.props.profSubjectList.map(subject => {\n        if (subject.level_id == this.state.filter_level_id) {\n          return /*#__PURE__*/React.createElement(MenuItem, {\n            key: subject.id,\n            value: subject.id,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 39\n            }\n          }, this.props.settings.languageId == \"tunisia\" ? subject.name_AR : this.props.settings.languageId == \"french\" ? subject.name_FR : subject.name_EN);\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-12 p-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(QuestionsTable, {\n        questions: this.state.questionFiltred,\n        levels: this.props.classLevels,\n        profSubjectList: this.props.profSubjectList,\n        profLevels: this.props.profLevels,\n        classLevels: this.props.classLevels,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 29\n        }\n      }))))) : \"\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 13\n      }\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userProfile: state.auth.userProfile,\n    settings: state.settings.locale,\n    classLevels: state.ClassLevels.remoteLevels\n  };\n};\n\nexport default connect(mapStateToProps, {\n  addQuestion\n})(Questions);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/LevelTest/Questions/Question.js"],"names":["React","IntlMessages","CardBox","Can","RoleContext","Fab","AddIcon","TextField","RemoveSharpIcon","connect","ArrowDownwardIcon","ArrowUpwardIcon","MenuItem","_","QuestionsTable","addQuestion","AddQuestion","Questions","Component","constructor","props","handleSubmit","e","preventDefault","question_desc","state","question_description","question_subject","topic","subject_id","level_id","id_profile_creator","userProfile","id","status","question","choices","map","element","proposal","content","propasal_status","choiceChecked","setState","add","openQuestionModal","handleChange","name","event","target","value","questionFiltred","questions","filter","filter_subject_id","filter_level_id","handleChangeRadio","parseInt","handleChangeChoice","idChoice","index","findIndex","fill","deleteChoice","choiceLength","length","i","el","push","addChoice","open","alerte","openAddModal","bind","componentWillMount","componentDidUpdate","prevProps","prevState","previousState","render","role","profSubjectList","profLevels","classLevels","level","indexOf","subject","settings","languageId","name_AR","name_FR","name_EN","mapStateToProps","auth","locale","ClassLevels","remoteLevels"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport IntlMessages from \"../../../../util/IntlMessages\";\nimport CardBox from \"../../../../components/CardBox/index\";\nimport Can from \"../../../../can\";\nimport { RoleContext } from \"../../../../Context\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport TextField from \"@material-ui/core/TextField\";\nimport RemoveSharpIcon from \"@material-ui/icons/RemoveSharp\";\nimport { connect } from \"react-redux\";\nimport ArrowDownwardIcon from \"@material-ui/icons/ArrowDownward\";\nimport ArrowUpwardIcon from \"@material-ui/icons/ArrowUpward\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport _ from \"lodash\";\nimport QuestionsTable from \"./QuestionsTable\";\nimport { addQuestion } from \"../../../../actions/QuestionActions\";\nimport AddQuestion from \"./AddQuestion\";\n\nclass Questions extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      open: false,\n      addQuestion: false,\n      alerte: false,\n      choices: [{ id: 1, add: false, content: \"\" }],\n      addChoice: false,\n      choiceChecked: 1,\n      level_id: \"\",\n      filter_level_id: \"\",\n      subject_id: \"\",\n      filter_subject_id: \"\",\n      topic: \"\",\n      question_description: \"\",\n      questionFiltred: [],\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.openQuestionModal = this.openQuestionModal.bind(this);\n    this.addChoice = this.addChoice.bind(this);\n    this.deleteChoice = this.deleteChoice.bind(this);\n    this.handleChangeChoice = this.handleChangeChoice.bind(this);\n    this.handleChangeRadio = this.handleChangeRadio.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n  componentWillMount() {\n    this.setState({ questionFiltred: this.props.questions });\n  }\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.questions !== this.props.questions) {\n      this.setState({ questionFiltred: this.props.questions });\n    }\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const question_desc = this.state.question_description;\n    const question_subject = this.state.topic;\n    const subject_id = this.state.subject_id;\n    const level_id = this.state.level_id;\n    const id_profile_creator = this.props.userProfile.id;\n    const status = true;\n\n    const question = {\n      question_desc,\n      question_subject,\n      subject_id,\n      level_id,\n      id_profile_creator,\n      status,\n    };\n    let choices = this.state.choices.map((element) => ({\n      proposal: element.content,\n      propasal_status: element.id == this.state.choiceChecked,\n      status: true,\n    }));\n\n    this.props.addQuestion(question, choices);\n    this.setState({\n      choiceChecked: 1,\n      level_id: \"\",\n      subject_id: \"\",\n      topic: \"\",\n      question_description: \"\",\n      choices: [{ id: 1, add: false, content: \"\" }],\n    });\n    this.openQuestionModal();\n  };\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n    if (name == \"filter_level_id\") {\n      let questionFiltred = this.props.questions;\n      if (event.target.value != 0) {\n        questionFiltred = questionFiltred.filter(\n          (element) => element.level_id == event.target.value\n        );\n      }\n      this.setState({ filter_subject_id: \"\", questionFiltred });\n    } else if (name == \"level_id\") {\n      this.setState({ subject_id: \"\" });\n    } else if (name == \"filter_subject_id\") {\n      let questionFiltred = this.props.questions;\n\n      if (event.target.value != 0) {\n        questionFiltred = questionFiltred.filter(\n          (element) =>\n            element.subject_id == event.target.value &&\n            element.level_id == this.state.filter_level_id\n        );\n      }\n\n      this.setState({ questionFiltred });\n    }\n  };\n  openAddModal() {\n    this.setState((previousState) => ({\n      open: !previousState.open,\n    }));\n  }\n  openQuestionModal() {\n    this.setState((previousState) => ({\n      addQuestion: !previousState.addQuestion,\n    }));\n  }\n  handleChangeRadio = (name) => (event) => {\n    this.setState({\n      choiceChecked: parseInt(event.target.value, 10),\n    });\n  };\n  handleChangeChoice = (idChoice) => (event) => {\n    let choices = this.state.choices;\n    let index = _.findIndex(choices, { id: idChoice });\n    _.fill(\n      choices,\n      {\n        id: choices[index].id,\n\n        content: event.target.value,\n        add: choices[index].add,\n      },\n      index,\n      index + 1\n    );\n    this.setState({ choices });\n  };\n  deleteChoice = (idChoice) => {\n    let choiceLength = this.state.choices.length;\n    let i = 1;\n    let choices = [];\n    this.state.choices.map((el) => {\n      if (el.id !== idChoice && i !== choiceLength - 1) {\n        choices.push({ id: i, add: true, content: el.content });\n        i++;\n      }\n    });\n    choices.push({\n      id: choiceLength - 1,\n      add: false,\n      content: this.state.choices[choiceLength - 1].content,\n    });\n    var choiceChecked = this.state.choiceChecked;\n    if (idChoice == choiceChecked) {\n      this.setState({ choiceChecked: 0 });\n    } else if (idChoice < choiceChecked) {\n      this.setState({ choiceChecked: choiceChecked - 1 });\n    }\n    this.setState({ choices });\n  };\n  addChoice = () => {\n    let choices = [];\n    this.state.choices.map((el) => {\n      choices.push({ id: el.id, add: true, content: el.content });\n    });\n    choices.push({\n      id: choices[choices.length - 1].id + 1,\n      add: false,\n      content: \"\",\n    });\n\n    this.setState({ choices });\n  };\n\n  render() {\n    return (\n      <div className=\"col-lg-12\">\n        <RoleContext.Consumer>\n          {({ role }) => (\n            <Can\n              role={role}\n              perform=\"add-test-level\"\n              yes={() => (\n                <div>\n                  <div className=\"d-flex justify-content-start align-items-center\">\n                    <h1>\n                      <IntlMessages id=\"level.test.question\" />\n                    </h1>\n                    &nbsp;&nbsp;&nbsp;\n                    <Fab\n                      size=\"small\"\n                      color=\"primary\"\n                      aria-label=\"Add\"\n                      onClick={this.openAddModal}\n                    >\n                      {this.state.open ? (\n                        <ArrowUpwardIcon />\n                      ) : (\n                        <ArrowDownwardIcon />\n                      )}\n                    </Fab>\n                  </div>\n                  <br />\n                  {this.state.open ? (\n                    <>\n                      {\"\"}\n                      <CardBox styleName=\"col-lg-12 text-primary\">\n                        <div className=\"row\">\n                          <div className=\"d-flex justify-content-start align-items-center col-md-12\">\n                            <h2>\n                              <IntlMessages id=\"new.level.test.add.question\" />\n                            </h2>\n                            &nbsp;&nbsp;&nbsp;\n                            <Fab\n                              size=\"small\"\n                              color=\"primary\"\n                              aria-label=\"Add\"\n                              onClick={this.openQuestionModal}\n                            >\n                              {this.state.addQuestion ? (\n                                <RemoveSharpIcon />\n                              ) : (\n                                <AddIcon />\n                              )}\n                            </Fab>\n                          </div>\n                          {this.state.addQuestion ? (\n                            <AddQuestion\n                              openQuestionModal={this.openQuestionModal}\n                              values={this.state}\n                              handleSubmit={this.handleSubmit}\n                              handleChangeRadio={this.handleChangeRadio}\n                              handleChange={this.handleChange}\n                              profSubjectList={this.props.profSubjectList}\n                              profLevels={this.props.profLevels}\n                              classLevels={this.props.classLevels}\n                              level_id={this.props.level_id}\n                              deleteChoice={this.deleteChoice}\n                              addChoice={this.addChoice}\n                              handleChangeChoice={this.handleChangeChoice}\n                            />\n                          ) : (\n                            \"\"\n                          )}\n                          <div className=\"col-md-12  d-flex justify-content-center\">\n                            <div className=\"col-md-3 text-left \">\n                              <TextField\n                                required\n                                select\n                                name=\"entree\"\n                                id=\"entree\"\n                                label={\n                                  <IntlMessages id=\"components.note.niveau\" />\n                                }\n                                onChange={this.handleChange(\"filter_level_id\")}\n                                value={this.state.filter_level_id}\n                                margin=\"normal\"\n                                fullWidth\n                              >\n                                <MenuItem key=\"0\" value=\"0\">\n                                  <IntlMessages id=\"all.label\" />\n                                </MenuItem>\n                                {this.props.classLevels.map((level) => {\n                                  if (\n                                    this.props.profLevels.indexOf(level.id) >= 0\n                                  ) {\n                                    return (\n                                      <MenuItem key={level.id} value={level.id}>\n                                        {level.name}\n                                      </MenuItem>\n                                    );\n                                  }\n                                })}\n                              </TextField>\n                            </div>\n\n                            <div className=\"col-md-3 text-left \">\n                              <TextField\n                                required\n                                select\n                                name=\"suite\"\n                                id=\"filter_subject_id\"\n                                label={\n                                  <IntlMessages id=\"components.note.subject\" />\n                                }\n                                onChange={this.handleChange(\n                                  \"filter_subject_id\"\n                                )}\n                                value={this.state.filter_subject_id}\n                                margin=\"normal\"\n                                fullWidth\n                              >\n                                <MenuItem key=\"0\" value=\"0\">\n                                  Toutes les Matiéres\n                                </MenuItem>\n                                {this.props.profSubjectList.map((subject) => {\n                                  if (\n                                    subject.level_id ==\n                                    this.state.filter_level_id\n                                  ) {\n                                    return (\n                                      <MenuItem\n                                        key={subject.id}\n                                        value={subject.id}\n                                      >\n                                        {this.props.settings.languageId ==\n                                        \"tunisia\"\n                                          ? subject.name_AR\n                                          : this.props.settings.languageId ==\n                                            \"french\"\n                                          ? subject.name_FR\n                                          : subject.name_EN}\n                                      </MenuItem>\n                                    );\n                                  }\n                                })}\n                              </TextField>\n                            </div>\n                          </div>\n\n                          <div className=\"col-md-12 p-4\">\n                            <QuestionsTable\n                              questions={this.state.questionFiltred}\n                              levels={this.props.classLevels}\n                              profSubjectList={this.props.profSubjectList}\n                              profLevels={this.props.profLevels}\n                              classLevels={this.props.classLevels}\n                            ></QuestionsTable>\n                          </div>\n                        </div>\n                      </CardBox>\n                    </>\n                  ) : (\n                    \"\"\n                  )}\n                </div>\n              )}\n            />\n          )}\n        </RoleContext.Consumer>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    userProfile: state.auth.userProfile,\n    settings: state.settings.locale,\n    classLevels: state.ClassLevels.remoteLevels,\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  {\n    addQuestion,\n  }\n)(Questions);\n"]},"metadata":{},"sourceType":"module"}