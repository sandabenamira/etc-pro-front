{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/User/UserInformation/UserListItems.js\";\nimport React, { Component } from \"react\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../../../../config/config\";\nimport _ from \"lodash\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport IntlMessages from \"../../../../../../util/IntlMessages\";\nimport ResetPasswordModal from \"../UserInformation/ResetPasswordModal\";\nimport DeleteUserModal from \"../UserInformation/DeleteUserModal\";\nimport { connect } from \"react-redux\";\nimport { roleIdSuperAdmin } from \"../../../../../../config/config\";\nimport { roleIdAdmin } from \"../../../../../../config/config\";\nimport { roleIdProfessor } from \"../../../../../../config/config\";\nimport { roleIdParent } from \"../../../../../../config/config\";\nimport { roleIdStudent } from \"../../../../../../config/config\";\nimport { roleIdSupervisor } from \"../../../../../../config/config\";\nimport { roleIdDirector } from \"../../../../../../config/config\";\nimport { deleteStuppUser as deleteUser } from \"../../../../../../actions/stuppUserAction\";\nimport defaultAvatar from \"../../../../../../assets/images/default-Avatar.png\";\n\nclass componentName extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleDeleteUser = () => {\n      this.props.deleteUser(this.props.user.user.id);\n      this.setState({\n        isOpenDeleteUserModal: false\n      });\n    };\n\n    this.handleRequestDeleteUser = () => {\n      this.setState({\n        menuState: false,\n        isOpenDeleteUserModal: true\n      });\n    };\n\n    this.handleRequestCloseModal = () => {\n      this.setState({\n        isOpenResetModal: false,\n        isOpenDeleteUserModal: false\n      });\n    };\n\n    this.handleRequestResetPass = () => {\n      const params = {\n        email: this.props.user.user.email\n      };\n      axios.post(`${baseUrl.baseUrl}/users/reset-user-password`, params, {\n        headers: {\n          \"content-type\": \"application/json\"\n        }\n      }).then(response => {});\n      this.setState({\n        isOpenResetModal: false\n      });\n    };\n\n    this.onOptionMenuSelect = event => {\n      this.setState({\n        menuState: true,\n        anchorEl: event.currentTarget,\n        itemId: event.currentTarget.value\n      });\n    };\n\n    this.handleRequestClose = () => {\n      this.setState({\n        menuState: false\n      });\n    };\n\n    this.handleRequestResetPassword = () => {\n      this.setState({\n        menuState: false,\n        isOpenResetModal: true\n      });\n    };\n\n    this.state = {\n      uri: \"\",\n      menuState: false,\n      itemId: 0,\n      anchorEl: undefined,\n      isOpenResetModal: false,\n      isOpenDeleteUserModal: false\n    };\n    this.handleRequestClose = this.handleRequestClose.bind(this);\n    this.handleRequestCloseModal = this.handleRequestCloseModal.bind(this);\n    this.handleRequestResetPass = this.handleRequestResetPass.bind(this);\n    this.handleRequestDeleteUser = this.handleRequestDeleteUser.bind(this);\n    this.handleDeleteUser = this.handleDeleteUser.bind(this);\n  }\n\n  UNSAFE_componentWillMount() {\n    console.log('user', this.props.user);\n    console.log('photo', this.props.user.user.photo);\n\n    if (this.props.user.user.photo != null) {\n      axios.get(`${baseUrl.baseUrl}/containers/checkFileExist/${this.props.establishmentName}?access_token=${localStorage.token}`).then(response => {\n        let fileList = _.isEmpty(response.data.checkFile) ? null : response.data.checkFile.filter(item => item.name === this.props.user.user.photo);\n        _.isEmpty(fileList) ? this.setState({\n          uri: null\n        }) : this.setState({\n          uri: `${baseUrl.baseUrl}/containers/` + this.props.establishmentName + \"/download/\" + fileList[0].name + `?access_token=${localStorage.token}`\n        });\n      });\n    }\n  }\n\n  getNameRole(id) {\n    if (this.props.settings.languageId === \"tunisia\") {\n      return id === roleIdSuperAdmin ? \"superadmin\" : id === roleIdAdmin ? \"مشرف\" : id === roleIdProfessor ? \"أستاذ\" : id === roleIdParent ? \"الولي\" : id === roleIdStudent ? \"تلميذ\" : id === roleIdDirector ? \"مشرف اول\" : id === roleIdDirector ? \"مدير\" : \"\";\n    } else if (this.props.settings.languageId === \"english\") {\n      return id === roleIdSuperAdmin ? \"Superadmin\" : id === roleIdAdmin ? \"Admin\" : id === roleIdProfessor ? \"Professor\" : id === roleIdParent ? \"Parent\" : id === roleIdStudent ? \"Student\" : id === roleIdSupervisor ? \"Superviseur\" : id === roleIdDirector ? \"Director\" : \"\";\n    } else {\n      return id === roleIdSuperAdmin ? \"superadmin\" : id === roleIdAdmin ? \"Administrateur\" : id === roleIdProfessor ? \"Professeur\" : id === roleIdParent ? \"Parent\" : id === roleIdStudent ? \"Élève\" : id === roleIdSupervisor ? \"Superviseur\" : id === roleIdDirector ? \"Directeur\" : \"\";\n    }\n  }\n\n  render() {\n    const {\n      handleRequestResetPassword\n    } = this.props;\n    return /*#__PURE__*/React.createElement(TableRow, {\n      key: this.props.user.user.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }\n    }, this.state.uri ? /*#__PURE__*/React.createElement(Avatar, {\n      align: \"left\",\n      className: \"size-90\",\n      alt: \"...\",\n      src: this.state.uri,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }\n    }) : /*#__PURE__*/React.createElement(Avatar, {\n      align: \"left\",\n      className: \"size-90\",\n      alt: \"...\",\n      src: defaultAvatar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }\n    }, this.props.user.user.id), this.props.settings.languageId == \"tunisia\" ? /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }\n    }, this.props.user.user.name_ar) : /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }, this.props.user.user.name), this.props.settings.languageId == \"tunisia\" ? /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }\n    }, this.props.user.user.surname_ar) : /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 11\n      }\n    }, this.props.user.user.surname), (() => {\n      if (this.props.roleActivate) {\n        return /*#__PURE__*/React.createElement(TableCell, {\n          align: \"left\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 15\n          }\n        }, this.getNameRole(this.props.user.role_id));\n      }\n    })(), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }\n    }, this.props.user.user.email), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }\n    }, \"+\", this.props.user.user.phone), /*#__PURE__*/React.createElement(TableCell, {\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      onClick: this.onOptionMenuSelect.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-more-vert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(Menu, {\n      id: \"long-menu\",\n      anchorEl: this.state.anchorEl,\n      open: this.state.menuState,\n      onClose: this.handleRequestClose.bind(this),\n      MenuListProps: {\n        style: {\n          width: 230,\n          paddingTop: 0,\n          paddingBottom: 0\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: e => {\n        this.setState({\n          menuState: false\n        });\n        this.props.editUser(this.props.user.user.id);\n      },\n      value: this.props.user.user.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"button.modify\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 16\n      }\n    })), /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: this.handleRequestResetPassword,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"button.reset.password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 16\n      }\n    })), /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: this.handleRequestDeleteUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"button.delete\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 16\n      }\n    })))), /*#__PURE__*/React.createElement(ResetPasswordModal, {\n      isopen: this.state.isOpenResetModal,\n      handleRequestCloseModal: this.handleRequestCloseModal,\n      handleRequestResetPass: this.handleRequestResetPass,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(DeleteUserModal, {\n      isopen: this.state.isOpenDeleteUserModal,\n      handleRequestCloseModal: this.handleRequestCloseModal,\n      handleDeleteUser: this.handleDeleteUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    settings: state.settings.locale\n  };\n}\n\nexport default connect(mapStateToProps, {\n  deleteUser\n})(componentName);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/User/UserInformation/UserListItems.js"],"names":["React","Component","TableCell","TableRow","Avatar","IconButton","axios","baseUrl","_","Menu","MenuItem","IntlMessages","ResetPasswordModal","DeleteUserModal","connect","roleIdSuperAdmin","roleIdAdmin","roleIdProfessor","roleIdParent","roleIdStudent","roleIdSupervisor","roleIdDirector","deleteStuppUser","deleteUser","defaultAvatar","componentName","constructor","props","handleDeleteUser","user","id","setState","isOpenDeleteUserModal","handleRequestDeleteUser","menuState","handleRequestCloseModal","isOpenResetModal","handleRequestResetPass","params","email","post","headers","then","response","onOptionMenuSelect","event","anchorEl","currentTarget","itemId","value","handleRequestClose","handleRequestResetPassword","state","uri","undefined","bind","UNSAFE_componentWillMount","console","log","photo","get","establishmentName","localStorage","token","fileList","isEmpty","data","checkFile","filter","item","name","getNameRole","settings","languageId","render","name_ar","surname_ar","surname","roleActivate","role_id","phone","style","width","paddingTop","paddingBottom","e","editUser","mapStateToProps","locale"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../../../../config/config\";\nimport _ from \"lodash\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport IntlMessages from \"../../../../../../util/IntlMessages\";\nimport ResetPasswordModal from \"../UserInformation/ResetPasswordModal\";\nimport DeleteUserModal from \"../UserInformation/DeleteUserModal\";\nimport { connect } from \"react-redux\";\nimport { roleIdSuperAdmin } from \"../../../../../../config/config\";\nimport { roleIdAdmin } from \"../../../../../../config/config\";\nimport { roleIdProfessor } from \"../../../../../../config/config\";\nimport { roleIdParent } from \"../../../../../../config/config\";\nimport { roleIdStudent } from \"../../../../../../config/config\";\nimport { roleIdSupervisor } from \"../../../../../../config/config\";\nimport { roleIdDirector } from \"../../../../../../config/config\";\nimport { deleteStuppUser as deleteUser } from \"../../../../../../actions/stuppUserAction\";\nimport defaultAvatar from \"../../../../../../assets/images/default-Avatar.png\";\nclass componentName extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      uri: \"\",\n      menuState: false,\n      itemId: 0,\n      anchorEl: undefined,\n      isOpenResetModal: false,\n      isOpenDeleteUserModal: false,\n    };\n    this.handleRequestClose = this.handleRequestClose.bind(this);\n    this.handleRequestCloseModal = this.handleRequestCloseModal.bind(this);\n    this.handleRequestResetPass = this.handleRequestResetPass.bind(this);\n    this.handleRequestDeleteUser = this.handleRequestDeleteUser.bind(this);\n    this.handleDeleteUser = this.handleDeleteUser.bind(this);\n  }\n  handleDeleteUser = () => {\n    this.props.deleteUser(this.props.user.user.id);\n    this.setState({ isOpenDeleteUserModal: false });\n  };\n  handleRequestDeleteUser = () => {\n    this.setState({ menuState: false, isOpenDeleteUserModal: true });\n  };\n\n  handleRequestCloseModal = () => {\n    this.setState({ isOpenResetModal: false, isOpenDeleteUserModal: false });\n  };\n\n  handleRequestResetPass = () => {\n    const params = {\n      email: this.props.user.user.email,\n    };\n\n    axios\n      .post(`${baseUrl.baseUrl}/users/reset-user-password`, params, {\n        headers: { \"content-type\": \"application/json\" },\n      })\n      .then((response) => {});\n    this.setState({ isOpenResetModal: false });\n  };\n\n  onOptionMenuSelect = (event) => {\n    this.setState({\n      menuState: true,\n      anchorEl: event.currentTarget,\n      itemId: event.currentTarget.value,\n    });\n  };\n  handleRequestClose = () => {\n    this.setState({ menuState: false });\n  };\n\n  UNSAFE_componentWillMount() {\n    console.log('user', this.props.user);\n    console.log('photo', this.props.user.user.photo);\n    if (this.props.user.user.photo != null) {\n      axios\n        .get(\n          `${baseUrl.baseUrl}/containers/checkFileExist/${this.props.establishmentName}?access_token=${localStorage.token}`\n        )\n        .then((response) => {\n          let fileList = _.isEmpty(response.data.checkFile)\n            ? null\n            : response.data.checkFile.filter(\n                (item) => item.name === this.props.user.user.photo\n              );\n          _.isEmpty(fileList)\n            ? this.setState({ uri: null })\n            : this.setState({\n                uri:\n                  `${baseUrl.baseUrl}/containers/` +\n                  this.props.establishmentName +\n                  \"/download/\" +\n                  fileList[0].name +\n                  `?access_token=${localStorage.token}`,\n              });\n        });\n    }\n  }\n\n  getNameRole(id) {\n    if (this.props.settings.languageId === \"tunisia\") {\n      return id === roleIdSuperAdmin\n        ? \"superadmin\"\n        : id === roleIdAdmin\n        ? \"مشرف\"\n        : id === roleIdProfessor\n        ? \"أستاذ\"\n        : id === roleIdParent\n        ? \"الولي\"\n        : id === roleIdStudent\n        ? \"تلميذ\"\n        : id === roleIdDirector\n        ? \"مشرف اول\"\n        : id === roleIdDirector\n        ? \"مدير\"\n        : \"\";\n    } else if (this.props.settings.languageId === \"english\") {\n      return id === roleIdSuperAdmin\n        ? \"Superadmin\"\n        : id === roleIdAdmin\n        ? \"Admin\"\n        : id === roleIdProfessor\n        ? \"Professor\"\n        : id === roleIdParent\n        ? \"Parent\"\n        : id === roleIdStudent\n        ? \"Student\"\n        : id === roleIdSupervisor\n        ? \"Superviseur\"\n        : id === roleIdDirector\n        ? \"Director\"\n        : \"\";\n    } else {\n      return id === roleIdSuperAdmin\n        ? \"superadmin\"\n        : id === roleIdAdmin\n        ? \"Administrateur\"\n        : id === roleIdProfessor\n        ? \"Professeur\"\n        : id === roleIdParent\n        ? \"Parent\"\n        : id === roleIdStudent\n        ? \"Élève\"\n        : id === roleIdSupervisor\n        ? \"Superviseur\"\n        : id === roleIdDirector\n        ? \"Directeur\"\n        : \"\";\n    }\n  }\n\n  handleRequestResetPassword = () => {\n    this.setState({ menuState: false, isOpenResetModal: true });\n  };\n\n  render() {\n    const { handleRequestResetPassword } = this.props;\n    return (\n      <TableRow key={this.props.user.user.id}>\n        <TableCell align=\"left\">\n          {this.state.uri ? (\n            <Avatar\n              align=\"left\"\n              className=\"size-90\"\n              alt=\"...\"\n              src={this.state.uri}\n            />\n          ) : (\n            <Avatar\n              align=\"left\"\n              className=\"size-90\"\n              alt=\"...\"\n              src={defaultAvatar}\n            />\n          )}\n        </TableCell>\n        <TableCell align=\"left\">{this.props.user.user.id}</TableCell>\n        {this.props.settings.languageId == \"tunisia\" ? (\n          <TableCell align=\"left\">{this.props.user.user.name_ar}</TableCell>\n        ) : (\n          <TableCell align=\"left\">{this.props.user.user.name}</TableCell>\n        )}\n\n        {this.props.settings.languageId == \"tunisia\" ? (\n          <TableCell align=\"left\">{this.props.user.user.surname_ar}</TableCell>\n        ) : (\n          <TableCell align=\"left\">{this.props.user.user.surname}</TableCell>\n        )}\n\n        {(() => {\n          if (this.props.roleActivate) {\n            return (\n              <TableCell align=\"left\">\n                {this.getNameRole(this.props.user.role_id)}\n              </TableCell>\n            );\n          }\n        })()}\n\n        <TableCell align=\"left\">{this.props.user.user.email}</TableCell>\n        <TableCell align=\"left\">+{this.props.user.user.phone}</TableCell>\n        <TableCell align=\"right\">\n          <IconButton onClick={this.onOptionMenuSelect.bind(this)}>\n            <i className=\"zmdi zmdi-more-vert\" />\n          </IconButton>\n          <Menu\n            id=\"long-menu\"\n            anchorEl={this.state.anchorEl}\n            open={this.state.menuState}\n            onClose={this.handleRequestClose.bind(this)}\n            MenuListProps={{\n              style: {\n                width: 230,\n                paddingTop: 0,\n                paddingBottom: 0,\n              },\n            }}\n          >\n            <MenuItem\n              onClick={(e) => {\n                this.setState({ menuState: false });\n\n                this.props.editUser(this.props.user.user.id);\n              }}\n              value={this.props.user.user.id}\n            >\n              {<IntlMessages id=\"button.modify\" />}\n            </MenuItem>\n            <MenuItem onClick={this.handleRequestResetPassword}>\n              {<IntlMessages id=\"button.reset.password\" />}\n            </MenuItem>\n            <MenuItem onClick={this.handleRequestDeleteUser}>\n              {<IntlMessages id=\"button.delete\" />}\n            </MenuItem>\n          </Menu>\n        </TableCell>\n        <ResetPasswordModal\n          isopen={this.state.isOpenResetModal}\n          handleRequestCloseModal={this.handleRequestCloseModal}\n          handleRequestResetPass={this.handleRequestResetPass}\n        />\n        <DeleteUserModal\n          isopen={this.state.isOpenDeleteUserModal}\n          handleRequestCloseModal={this.handleRequestCloseModal}\n          handleDeleteUser={this.handleDeleteUser}\n        />\n      </TableRow>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    settings: state.settings.locale,\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  {\n    deleteUser,\n  }\n)(componentName);\n"]},"metadata":{},"sourceType":"module"}