{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/UsersManagement/User.js\";\nimport React, { Component } from \"react\";\nimport AddUser from \"./AddUser\";\nimport ContainerHeader from \"../../../../../components/ContainerHeader/index\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport Input from \"@material-ui/icons/Input\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport UserList from \"./UsersList\";\nimport EditUser from \"./EditUser\";\nimport { connect } from \"react-redux\";\nimport { fetchAllUsers } from \"../../../../../actions/stuppUserAction\";\nimport { getAllUsersByEstablishmentId } from \"../../../../../actions/stuppUserAction\";\nimport { UncontrolledAlert } from \"reactstrap\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../../../config/config\";\nimport { getClassesByEstablishmentId, getClasses } from \"../../../../../actions/classeAction\";\nimport { roleIdProfessor, roleIdStudent } from \"../../../../../config/config\";\nimport Can from \"../../../../../can\";\nimport { RoleContext } from \"../../../../../Context\";\nimport { getEstablishment } from \"../../../../../actions/establishmentAction\";\nimport { getNameRole } from \"../../../../../actions/countriesAction\";\nimport { fetchClassesSubjects } from \"../../../../../actions/subjectAction\";\n\nclass User extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangeEstablishment = name => event => {\n      this.setState({\n        [name]: event.target.value,\n        role_id: \"\",\n        class_id: \"\"\n      });\n    };\n\n    this.handleChangeClass = name => event => {\n      if (this.state.role_id === roleIdStudent) {\n        var listStudent = [];\n\n        if (this.state.establishment_id) {\n          listStudent = this.state.usersList.filter(element => element.role_id === roleIdStudent && element.students[0].class_id == event.target.value && element.establishment_id === this.state.establishment_id);\n        } else {\n          listStudent = this.state.usersList.filter(element => element.role_id === roleIdStudent && element.students[0].class_id == event.target.value);\n        }\n\n        this.setState({\n          studentListByClass: listStudent,\n          [name]: event.target.value\n        });\n      } else if (this.state.role_id === roleIdProfessor) {\n        axios.get(`${baseUrl.baseUrl}/classes_professors?access_token=${localStorage.token}`).then(res => {\n          var final = [];\n          var listprofessor = [];\n\n          if (this.state.establishment_id) {\n            listprofessor = this.state.usersList.filter(element => element.role_id === roleIdProfessor && element.establishment_id === this.state.establishment_id);\n          } else {\n            listprofessor = this.state.usersList.filter(element => element.role_id === roleIdProfessor);\n          }\n\n          listprofessor.forEach(professor => res.data.forEach(classProfessor => {\n            if (professor.professors[0].id === classProfessor.professor_id && classProfessor.class_id === event.target.value) {\n              final.push(professor);\n            }\n          }));\n          this.setState({\n            [name]: event.target.value,\n            studentListByClass: final\n          });\n        });\n      }\n    };\n\n    this.handleChangeRole = name => event => {\n      let userFiltred;\n      let userFiltredRole;\n\n      if (event.target.value === \"0\") {\n        this.setState({\n          roleActivate: true\n        });\n      } else {\n        this.setState({\n          roleActivate: false\n        });\n      }\n\n      if (this.state.establishment_id) {\n        if (event.target.value === roleIdStudent || event.target.value === roleIdProfessor) {\n          let classeFiltred = this.props.classes.filter(element => element.establishment_id === this.state.establishment_id);\n          this.setState({\n            enableClassFilter: false,\n            classes: classeFiltred\n          });\n        } else {\n          this.setState({\n            enableClassFilter: true\n          });\n        }\n\n        if (event.target.value == 0) {\n          userFiltred = this.state.usersList.filter(element => element.establishment_id == this.state.establishment_id);\n        } else {\n          userFiltred = this.state.usersList.filter(element => element.role_id == event.target.value && element.establishment_id == this.state.establishment_id);\n        }\n\n        this.setState({\n          [name]: event.target.value,\n          studentListByClass: userFiltred,\n          class_id: \"\"\n        });\n      } else {\n        if (event.target.value === roleIdStudent) {\n          userFiltredRole = this.state.usersList.filter(element => element.role_id == event.target.value);\n          this.setState({\n            studentListByClass: userFiltredRole,\n            [name]: event.target.value,\n            class_id: \"\",\n            enableClassFilter: false\n          });\n        } else if (event.target.value === roleIdProfessor) {\n          userFiltredRole = this.state.usersList.filter(element => element.role_id == event.target.value);\n          this.setState({\n            studentListByClass: userFiltredRole,\n            enableClassFilter: false,\n            [name]: event.target.value,\n            class_id: \"\"\n          });\n        } else {\n          userFiltredRole = this.state.usersList.filter(element => element.role_id == event.target.value);\n          this.setState({\n            [name]: event.target.value,\n            enableClassFilter: true,\n            steps: event.target.value,\n            studentListByClass: userFiltredRole,\n            class_id: \"\"\n          });\n        }\n      }\n    };\n\n    this.state = {\n      open: false,\n      edit: false,\n      editAlert: false,\n      roleList: [],\n      role_id: \"\",\n      class_id: \"\",\n      classes: [],\n      enableClassFilter: true,\n      studentListByClass: [],\n      professorListByClass: [],\n      usersList: [],\n      establishment_id: \"\",\n      establishments: [],\n      openModalImport: false,\n      roleActivate: true,\n      establishmentName: \"\"\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.cancelModal = this.cancelModal.bind(this);\n    this.editUser = this.editUser.bind(this);\n    this.editAlert = this.editAlert.bind(this);\n    this.handleChangeRole = this.handleChangeRole.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleChangeEstablishment = this.handleChangeEstablishment.bind(this);\n    this.openModalImportExcel = this.openModalImportExcel.bind(this);\n    this.handleCancelImport = this.handleCancelImport.bind(this);\n  }\n\n  handleCancelImport() {\n    this.setState({\n      openModalImport: false\n    });\n  }\n\n  openAddModal() {\n    this.setState({\n      open: true\n    });\n  }\n\n  openModalImportExcel() {\n    this.setState({\n      openModalImport: true\n    });\n  }\n\n  editUser(id) {\n    let user = this.props.users.find(function (element) {\n      return element.user.id === id;\n    });\n    this.setState({\n      user: user,\n      edit: true\n    });\n  }\n\n  cancelModal() {\n    this.setState({\n      open: false,\n      edit: false\n    });\n  }\n\n  editAlert() {\n    this.setState({\n      edit: false,\n      editAlert: true\n    });\n    setTimeout(function () {\n      this.setState({\n        editAlert: true\n      });\n    }.bind(this), 1000);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.users !== this.props.users) {\n      this.setState({\n        usersList: this.props.users,\n        role_id: \"\",\n        class_id: \"\"\n      });\n    }\n\n    if (prevProps.classes !== this.props.classes) {\n      this.setState({\n        classes: this.props.classes\n      });\n    }\n\n    if (prevProps.establishments !== this.props.establishments) {\n      this.setState({\n        establishments: this.props.establishments\n      });\n    }\n  }\n\n  UNSAFE_componentWillMount() {\n    if (this.props.userProfile.role_id === 1) {\n      this.props.fetchAllUsers();\n      this.props.getEstablishment();\n      this.props.getClasses();\n      axios.get(`${baseUrl.baseUrl}/roles?access_token=${localStorage.token}`).then(res => {\n        this.setState({\n          roleList: res.data\n        });\n      });\n    } else {\n      this.props.fetchClassesSubjects(this.props.userProfile.establishment_id, this.props.userProfile.school_year_id);\n      this.props.getClassesByEstablishmentId(this.props.userProfile.establishment_id);\n      this.props.getAllUsersByEstablishmentId(this.props.userProfile.establishment_id);\n      axios.get(`${baseUrl.baseUrl}/roles?access_token=${localStorage.token}`).then(res => {\n        let data = res.data;\n        const roleList = data.filter(element => element.id !== 1);\n        this.setState({\n          roleList\n        });\n      });\n    }\n\n    axios.get(`${baseUrl.baseUrl}/establishments/` + this.props.userProfile.establishment_id + `?access_token=${localStorage.token}`).then(res => {\n      const establishmentName = res.data.name;\n      this.setState({\n        establishmentName\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ContainerHeader, {\n      match: this.props.match,\n      title: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"pages.stuppUserPage\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 18\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 9\n      }\n    }), this.props.successStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 13\n      }\n    }, \" \", this.props.message, \" \")) : \"\", this.props.errorStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-danger bg-danger text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 13\n      }\n    }, \" \", this.props.message)) : \"\", this.props.warningStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-warning bg-warning text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 13\n      }\n    }, \" \", this.props.message)) : \"\", this.state.editAlert ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"edit.user.message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 16\n      }\n    }))) : \"\", /*#__PURE__*/React.createElement(RoleContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }\n    }, ({\n      role\n    }) => /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"user-filter:visit\",\n      yes: () => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-12  d-flex justify-content-between\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Can, {\n        role: role,\n        perform: \"user-filter-establishment:visit\",\n        yes: () => /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-md-2 text-left\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(TextField, {\n          className: \"mt-0\",\n          variant: \"outlined\",\n          required: true,\n          name: \"establishment_id\",\n          id: \"establishment_id\",\n          select: true,\n          label: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"components.student.formadd.establishment\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 29\n            }\n          }),\n          value: this.state.establishment_id,\n          onChange: this.handleChangeEstablishment(\"establishment_id\"),\n          SelectProps: {},\n          margin: \"normal\",\n          fullWidth: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 25\n          }\n        }, this.state.establishments.map(establishment => /*#__PURE__*/React.createElement(MenuItem, {\n          key: establishment.id,\n          value: establishment.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 29\n          }\n        }, this.props.settings == \"tunisia\" ? establishment.ar_name : establishment.name)))),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-4 text-left \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        className: \"mt-0\",\n        variant: \"outlined\",\n        required: true,\n        name: \"role_id\",\n        id: \"role_id\",\n        select: true,\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.formadd.role\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 30\n          }\n        }),\n        value: this.state.role_id,\n        onChange: this.handleChangeRole(\"role_id\"),\n        SelectProps: {},\n        margin: \"normal\",\n        fullWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(MenuItem, {\n        key: \"0\",\n        value: \"0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"all.user\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 25\n        }\n      })), this.state.roleList.map(role => /*#__PURE__*/React.createElement(MenuItem, {\n        key: role.id,\n        value: role.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 25\n        }\n      }, getNameRole(role.id, this.props.settings))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-4 text-left \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        disabled: this.state.enableClassFilter,\n        className: \"mt-0\",\n        variant: \"outlined\",\n        required: true,\n        name: \"class_id\",\n        id: \"class_id\",\n        select: true,\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"ticket.name.class\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 30\n          }\n        }),\n        value: this.state.class_id,\n        onChange: this.handleChangeClass(\"class_id\"),\n        SelectProps: {},\n        margin: \"normal\",\n        fullWidth: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 21\n        }\n      }, this.state.classes.map(classe => /*#__PURE__*/React.createElement(MenuItem, {\n        key: classe.id,\n        value: classe.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 25\n        }\n      }, classe.name)))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-2 text-right \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Fab, {\n        size: \"small\",\n        color: \"primary\",\n        \"aria-label\": \"Add\",\n        onClick: this.openAddModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(AddIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 23\n        }\n      })), \"\\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(Fab, {\n        size: \"small\",\n        color: \"primary\",\n        onClick: this.openModalImportExcel,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 23\n        }\n      })))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 text-right \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }\n    }, this.props.users ? /*#__PURE__*/React.createElement(UserList, {\n      role_id: this.state.role_id,\n      users: this.props.users,\n      role: this.props.userProfile.role_id,\n      editUser: this.editUser,\n      studentListByClass: this.state.studentListByClass,\n      establishment_id: this.state.establishment_id,\n      roleActivate: this.state.roleActivate,\n      establishmentName: this.state.establishmentName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 459,\n        columnNumber: 13\n      }\n    }) : \"\"), /*#__PURE__*/React.createElement(AddUser, {\n      open: this.state.open,\n      cancel: this.cancelModal,\n      openModalImport: this.state.openModalImport,\n      cancelModalImport: this.handleCancelImport,\n      classesSubjects: this.props.classesSubjects,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 474,\n        columnNumber: 9\n      }\n    }), this.state.edit ? /*#__PURE__*/React.createElement(EditUser, {\n      edit: this.state.edit,\n      user: this.state.user,\n      cancel: this.cancelModal,\n      editAlert: this.editAlert,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 11\n      }\n    }) : \"\");\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    users: state.stuppUsers.remoteStuppUsers,\n    userProfile: state.auth.userProfile,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    classes: state.classes,\n    establishments: state.establishment.remoteEstablishments,\n    settings: state.settings.locale.languageId,\n    warningStatus: state.alert.warning,\n    classesSubjects: state.subject.classesSubjects\n  };\n}\n\nexport default connect(mapStateToProps, {\n  fetchAllUsers,\n  getAllUsersByEstablishmentId,\n  getClassesByEstablishmentId,\n  getEstablishment,\n  getClasses,\n  fetchClassesSubjects\n})(User);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/UsersManagement/User.js"],"names":["React","Component","AddUser","ContainerHeader","IntlMessages","Input","Fab","AddIcon","UserList","EditUser","connect","fetchAllUsers","getAllUsersByEstablishmentId","UncontrolledAlert","TextField","MenuItem","axios","baseUrl","getClassesByEstablishmentId","getClasses","roleIdProfessor","roleIdStudent","Can","RoleContext","getEstablishment","getNameRole","fetchClassesSubjects","User","constructor","props","handleChangeEstablishment","name","event","setState","target","value","role_id","class_id","handleChangeClass","state","listStudent","establishment_id","usersList","filter","element","students","studentListByClass","get","localStorage","token","then","res","final","listprofessor","forEach","professor","data","classProfessor","professors","id","professor_id","push","handleChangeRole","userFiltred","userFiltredRole","roleActivate","classeFiltred","classes","enableClassFilter","steps","open","edit","editAlert","roleList","professorListByClass","establishments","openModalImport","establishmentName","openAddModal","bind","cancelModal","editUser","openModalImportExcel","handleCancelImport","user","users","find","setTimeout","componentDidUpdate","prevProps","prevState","UNSAFE_componentWillMount","userProfile","school_year_id","render","match","successStatus","message","errorStatus","warningStatus","role","map","establishment","settings","ar_name","classe","classesSubjects","mapStateToProps","stuppUsers","remoteStuppUsers","auth","alert","success","error","remoteEstablishments","locale","languageId","warning","subject"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport AddUser from \"./AddUser\";\nimport ContainerHeader from \"../../../../../components/ContainerHeader/index\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport Input from \"@material-ui/icons/Input\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport UserList from \"./UsersList\";\nimport EditUser from \"./EditUser\";\nimport { connect } from \"react-redux\";\nimport { fetchAllUsers } from \"../../../../../actions/stuppUserAction\";\nimport { getAllUsersByEstablishmentId } from \"../../../../../actions/stuppUserAction\";\nimport { UncontrolledAlert } from \"reactstrap\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../../../config/config\";\nimport {\n  getClassesByEstablishmentId,\n  getClasses,\n} from \"../../../../../actions/classeAction\";\nimport { roleIdProfessor, roleIdStudent } from \"../../../../../config/config\";\nimport Can from \"../../../../../can\";\nimport { RoleContext } from \"../../../../../Context\";\nimport { getEstablishment } from \"../../../../../actions/establishmentAction\";\nimport { getNameRole } from \"../../../../../actions/countriesAction\";\nimport { fetchClassesSubjects } from \"../../../../../actions/subjectAction\";\n\nclass User extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      open: false,\n      edit: false,\n      editAlert: false,\n      roleList: [],\n      role_id: \"\",\n      class_id: \"\",\n      classes: [],\n      enableClassFilter: true,\n      studentListByClass: [],\n      professorListByClass: [],\n      usersList: [],\n      establishment_id: \"\",\n      establishments: [],\n      openModalImport: false,\n      roleActivate: true,\n      establishmentName: \"\",\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.cancelModal = this.cancelModal.bind(this);\n    this.editUser = this.editUser.bind(this);\n    this.editAlert = this.editAlert.bind(this);\n    this.handleChangeRole = this.handleChangeRole.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleChangeEstablishment = this.handleChangeEstablishment.bind(this);\n    this.openModalImportExcel = this.openModalImportExcel.bind(this);\n    this.handleCancelImport = this.handleCancelImport.bind(this);\n  }\n\n  handleCancelImport() {\n    this.setState({ openModalImport: false });\n  }\n\n  handleChangeEstablishment = (name) => (event) => {\n    this.setState({ [name]: event.target.value, role_id: \"\", class_id: \"\" });\n  };\n\n  handleChangeClass = (name) => (event) => {\n    if (this.state.role_id === roleIdStudent) {\n      var listStudent = [];\n      if (this.state.establishment_id) {\n        listStudent = this.state.usersList.filter(\n          (element) =>\n            element.role_id === roleIdStudent &&\n            element.students[0].class_id == event.target.value &&\n            element.establishment_id === this.state.establishment_id\n        );\n      } else {\n        listStudent = this.state.usersList.filter(\n          (element) =>\n            element.role_id === roleIdStudent &&\n            element.students[0].class_id == event.target.value\n        );\n      }\n      this.setState({\n        studentListByClass: listStudent,\n        [name]: event.target.value,\n      });\n    } else if (this.state.role_id === roleIdProfessor) {\n      axios\n        .get(\n          `${baseUrl.baseUrl}/classes_professors?access_token=${localStorage.token}`\n        )\n        .then((res) => {\n          var final = [];\n          var listprofessor = [];\n          if (this.state.establishment_id) {\n            listprofessor = this.state.usersList.filter(\n              (element) =>\n                element.role_id === roleIdProfessor &&\n                element.establishment_id === this.state.establishment_id\n            );\n          } else {\n            listprofessor = this.state.usersList.filter(\n              (element) => element.role_id === roleIdProfessor\n            );\n          }\n          listprofessor.forEach((professor) =>\n            res.data.forEach((classProfessor) => {\n              if (\n                professor.professors[0].id === classProfessor.professor_id &&\n                classProfessor.class_id === event.target.value\n              ) {\n                final.push(professor);\n              }\n            })\n          );\n          this.setState({\n            [name]: event.target.value,\n            studentListByClass: final,\n          });\n        });\n    }\n  };\n  handleChangeRole = (name) => (event) => {\n    let userFiltred;\n    let userFiltredRole;\n    if (event.target.value === \"0\") {\n      this.setState({ roleActivate: true });\n    } else {\n      this.setState({ roleActivate: false });\n    }\n    if (this.state.establishment_id) {\n      if (\n        event.target.value === roleIdStudent ||\n        event.target.value === roleIdProfessor\n      ) {\n        let classeFiltred = this.props.classes.filter(\n          (element) => element.establishment_id === this.state.establishment_id\n        );\n        this.setState({ enableClassFilter: false, classes: classeFiltred });\n      } else {\n        this.setState({ enableClassFilter: true });\n      }\n      if (event.target.value == 0) {\n        userFiltred = this.state.usersList.filter(\n          (element) => element.establishment_id == this.state.establishment_id\n        );\n      } else {\n        userFiltred = this.state.usersList.filter(\n          (element) =>\n            element.role_id == event.target.value &&\n            element.establishment_id == this.state.establishment_id\n        );\n      }\n\n      this.setState({\n        [name]: event.target.value,\n        studentListByClass: userFiltred,\n        class_id: \"\",\n      });\n    } else {\n      if (event.target.value === roleIdStudent) {\n        userFiltredRole = this.state.usersList.filter(\n          (element) => element.role_id == event.target.value\n        );\n        this.setState({\n          studentListByClass: userFiltredRole,\n          [name]: event.target.value,\n          class_id: \"\",\n          enableClassFilter: false,\n        });\n      } else if (event.target.value === roleIdProfessor) {\n        userFiltredRole = this.state.usersList.filter(\n          (element) => element.role_id == event.target.value\n        );\n        this.setState({\n          studentListByClass: userFiltredRole,\n          enableClassFilter: false,\n          [name]: event.target.value,\n          class_id: \"\",\n        });\n      } else {\n        userFiltredRole = this.state.usersList.filter(\n          (element) => element.role_id == event.target.value\n        );\n        this.setState({\n          [name]: event.target.value,\n          enableClassFilter: true,\n          steps: event.target.value,\n          studentListByClass: userFiltredRole,\n          class_id: \"\",\n        });\n      }\n    }\n  };\n\n  openAddModal() {\n    this.setState({\n      open: true,\n    });\n  }\n\n  openModalImportExcel() {\n    this.setState({\n      openModalImport: true,\n    });\n  }\n\n  editUser(id) {\n    let user = this.props.users.find(function(element) {\n      return element.user.id === id;\n    });\n    this.setState({ user: user, edit: true });\n  }\n  cancelModal() {\n    this.setState({ open: false, edit: false });\n  }\n  editAlert() {\n    this.setState({ edit: false, editAlert: true });\n    setTimeout(\n      function() {\n        this.setState({ editAlert: true });\n      }.bind(this),\n      1000\n    );\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.users !== this.props.users) {\n      this.setState({\n        usersList: this.props.users,\n        role_id: \"\",\n        class_id: \"\",\n      });\n    }\n    if (prevProps.classes !== this.props.classes) {\n      this.setState({\n        classes: this.props.classes,\n      });\n    }\n    if (prevProps.establishments !== this.props.establishments) {\n      this.setState({\n        establishments: this.props.establishments,\n      });\n    }\n  }\n  UNSAFE_componentWillMount() {\n    if (this.props.userProfile.role_id === 1) {\n      this.props.fetchAllUsers();\n      this.props.getEstablishment();\n      this.props.getClasses();\n      axios\n        .get(`${baseUrl.baseUrl}/roles?access_token=${localStorage.token}`)\n        .then((res) => {\n          this.setState({ roleList: res.data });\n        });\n    } else {\n      this.props.fetchClassesSubjects(\n        this.props.userProfile.establishment_id,\n        this.props.userProfile.school_year_id\n      );\n      this.props.getClassesByEstablishmentId(\n        this.props.userProfile.establishment_id\n      );\n      this.props.getAllUsersByEstablishmentId(\n        this.props.userProfile.establishment_id\n      );\n      axios\n        .get(`${baseUrl.baseUrl}/roles?access_token=${localStorage.token}`)\n        .then((res) => {\n          let data = res.data;\n          const roleList = data.filter((element) => element.id !== 1);\n          this.setState({ roleList });\n        });\n    }\n    axios\n      .get(\n        `${baseUrl.baseUrl}/establishments/` +\n          this.props.userProfile.establishment_id +\n          `?access_token=${localStorage.token}`\n      )\n      .then((res) => {\n        const establishmentName = res.data.name;\n\n        this.setState({ establishmentName });\n      });\n  }\n\n  render() {\n    return (\n      <div>\n        <ContainerHeader\n          match={this.props.match}\n          title={<IntlMessages id=\"pages.stuppUserPage\" />}\n        />\n        {this.props.successStatus ? (\n          <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n            <span className=\"icon-addon alert-addon\">\n              <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n            </span>\n            <span className=\"d-inline-block\"> {this.props.message} </span>\n          </UncontrolledAlert>\n        ) : (\n          \"\"\n        )}\n        {this.props.errorStatus ? (\n          <UncontrolledAlert className=\"alert-addon-card bg-danger bg-danger text-white shadow-lg\">\n            <span className=\"icon-addon alert-addon\">\n              <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n            </span>\n            <span className=\"d-inline-block\"> {this.props.message}</span>\n          </UncontrolledAlert>\n        ) : (\n          \"\"\n        )}\n        {this.props.warningStatus ? (\n          <UncontrolledAlert className=\"alert-addon-card bg-warning bg-warning text-white shadow-lg\">\n            <span className=\"icon-addon alert-addon\">\n              <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n            </span>\n            <span className=\"d-inline-block\"> {this.props.message}</span>\n          </UncontrolledAlert>\n        ) : (\n          \"\"\n        )}\n\n        {this.state.editAlert ? (\n          <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n            <span className=\"icon-addon alert-addon\">\n              <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n            </span>\n            <span className=\"d-inline-block\">\n              {<IntlMessages id=\"edit.user.message\" />}\n            </span>\n          </UncontrolledAlert>\n        ) : (\n          \"\"\n        )}\n        <RoleContext.Consumer>\n          {({ role }) => (\n            <Can\n              role={role}\n              perform=\"user-filter:visit\"\n              yes={() => (\n                <div className=\"col-md-12  d-flex justify-content-between\">\n                  <Can\n                    role={role}\n                    perform=\"user-filter-establishment:visit\"\n                    yes={() => (\n                      <div className=\"col-md-2 text-left\">\n                        <TextField\n                          className=\"mt-0\"\n                          variant=\"outlined\"\n                          required\n                          name=\"establishment_id\"\n                          id=\"establishment_id\"\n                          select\n                          label={\n                            <IntlMessages id=\"components.student.formadd.establishment\" />\n                          }\n                          value={this.state.establishment_id}\n                          onChange={this.handleChangeEstablishment(\n                            \"establishment_id\"\n                          )}\n                          SelectProps={{}}\n                          margin=\"normal\"\n                          fullWidth\n                        >\n                          {this.state.establishments.map((establishment) => (\n                            <MenuItem\n                              key={establishment.id}\n                              value={establishment.id}\n                            >\n                              {this.props.settings == \"tunisia\"\n                                ? establishment.ar_name\n                                : establishment.name}\n                            </MenuItem>\n                          ))}\n                        </TextField>\n                      </div>\n                    )}\n                  />\n                  <div className=\"col-md-4 text-left \">\n                    <TextField\n                      className=\"mt-0\"\n                      variant=\"outlined\"\n                      required\n                      name=\"role_id\"\n                      id=\"role_id\"\n                      select\n                      label={<IntlMessages id=\"stuppUser.formadd.role\" />}\n                      value={this.state.role_id}\n                      onChange={this.handleChangeRole(\"role_id\")}\n                      SelectProps={{}}\n                      margin=\"normal\"\n                      fullWidth\n                    >\n                      <MenuItem key=\"0\" value=\"0\">\n                        <IntlMessages id=\"all.user\" />\n                      </MenuItem>\n                      {this.state.roleList.map((role) => (\n                        <MenuItem key={role.id} value={role.id}>\n                          {getNameRole(role.id, this.props.settings)}\n                        </MenuItem>\n                      ))}\n                    </TextField>\n                  </div>\n                  <div className=\"col-md-4 text-left \">\n                    <TextField\n                      disabled={this.state.enableClassFilter}\n                      className=\"mt-0\"\n                      variant=\"outlined\"\n                      required\n                      name=\"class_id\"\n                      id=\"class_id\"\n                      select\n                      label={<IntlMessages id=\"ticket.name.class\" />}\n                      value={this.state.class_id}\n                      onChange={this.handleChangeClass(\"class_id\")}\n                      SelectProps={{}}\n                      margin=\"normal\"\n                      fullWidth\n                    >\n                      {this.state.classes.map((classe) => (\n                        <MenuItem key={classe.id} value={classe.id}>\n                          {classe.name}\n                        </MenuItem>\n                      ))}\n                    </TextField>\n                  </div>\n                  <div className=\"col-md-2 text-right \">\n                    <Fab\n                      size=\"small\"\n                      color=\"primary\"\n                      aria-label=\"Add\"\n                      onClick={this.openAddModal}\n                    >\n                      <AddIcon />\n                    </Fab>\n                    &nbsp;&nbsp;&nbsp;\n                    <Fab\n                      size=\"small\"\n                      color=\"primary\"\n                      onClick={this.openModalImportExcel}\n                    >\n                      <Input />\n                    </Fab>\n                  </div>\n                </div>\n              )}\n            />\n          )}\n        </RoleContext.Consumer>\n        <div className=\"col-md-12 text-right \">\n          {this.props.users ? (\n            <UserList\n              role_id={this.state.role_id}\n              users={this.props.users}\n              role={this.props.userProfile.role_id}\n              editUser={this.editUser}\n              studentListByClass={this.state.studentListByClass}\n              establishment_id={this.state.establishment_id}\n              roleActivate={this.state.roleActivate}\n              establishmentName={this.state.establishmentName}\n            />\n          ) : (\n            \"\"\n          )}\n        </div>\n\n        <AddUser\n          open={this.state.open}\n          cancel={this.cancelModal}\n          openModalImport={this.state.openModalImport}\n          cancelModalImport={this.handleCancelImport}\n          classesSubjects={this.props.classesSubjects}\n        />\n        {this.state.edit ? (\n          <EditUser\n            edit={this.state.edit}\n            user={this.state.user}\n            cancel={this.cancelModal}\n            editAlert={this.editAlert}\n          />\n        ) : (\n          \"\"\n        )}\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    users: state.stuppUsers.remoteStuppUsers,\n    userProfile: state.auth.userProfile,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    classes: state.classes,\n    establishments: state.establishment.remoteEstablishments,\n    settings: state.settings.locale.languageId,\n    warningStatus: state.alert.warning,\n    classesSubjects: state.subject.classesSubjects,\n  };\n}\nexport default connect(mapStateToProps, {\n  fetchAllUsers,\n  getAllUsersByEstablishmentId,\n  getClassesByEstablishmentId,\n  getEstablishment,\n  getClasses,\n  fetchClassesSubjects,\n})(User);\n"]},"metadata":{},"sourceType":"module"}