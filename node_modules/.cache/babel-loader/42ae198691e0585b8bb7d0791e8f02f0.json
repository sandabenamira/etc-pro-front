{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Home/admin/ModalEstablishmentList.js\";\nimport React, { Component } from \"react\";\nimport IntlMessages from \"../../../../util/IntlMessages\";\nimport Auxiliary from \"../../../../util/Auxiliary\";\nimport { Modal, ModalBody, ModalHeader } from \"reactstrap\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport { UncontrolledAlert } from \"reactstrap\";\nimport { connect } from \"react-redux\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport { object } from \"prop-types\";\nimport { getThemeColor, getAppLanguage, initCalendar } from \"../../../../actions/Setting\";\nimport { userSignInSuccess, hideModalSelectEstablishment } from \"../../../../actions/Auth\";\nimport _ from \"lodash\";\nimport { getSubjectModules } from \"../../../../actions/SubjectModuleAction\";\nimport { getClassSettings } from \"../../../../actions/ClassSettingsAction\";\nimport { getSection } from \"../../../../actions/SectionsAction\";\nimport { getLevel } from \"../../../../actions/LevelAction\";\nimport { getSubjectSetting } from \"../../../../actions/subjectAction\";\n\nclass ModalEstablishmentList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.state = {\n      establishment: \"\"\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit() {\n    localStorage.setItem(\"establishment_id\", this.state.establishment.establishment_id);\n    this.props.dispatch({\n      type: \"GET_ESTABLISHMENT_MODULE\",\n      payload: this.state.establishment.establishment.establishmentModule\n    });\n\n    if (!_.isEmpty(this.state.establishment.establishment.licence)) {\n      localStorage.setItem(\"school_year_id\", this.state.establishment.establishment.licence[0].schoolYear.id);\n      localStorage.setItem(\"school_year_name\", this.state.establishment.establishment.licence[0].schoolYear.name);\n      const userProfile = Object.assign({}, this.props.profile, {\n        establishment_id: this.state.establishment.establishment_id,\n        school_year_id: this.state.establishment.establishment.licence[0].schoolYear.id,\n        school_year_name: this.state.establishment.establishment.licence[0].schoolYear.name\n      });\n      this.props.dispatch({\n        type: \"GET_USER_PROFILE\",\n        payload: userProfile\n      });\n      this.props.dispatch(getSubjectModules(this.state.establishment.establishment_id, this.state.establishment.establishment.licence[0].schoolYear.id));\n      this.props.dispatch(getClassSettings(this.state.establishment.establishment_id, this.state.establishment.establishment.licence[0].schoolYear.id));\n      this.props.dispatch(getSubjectModules(this.state.establishment.establishment_id, this.state.establishment.establishment.licence[0].schoolYear.id));\n      this.props.dispatch(getSection(this.state.establishment.establishment_id, this.state.establishment.establishment.licence[0].schoolYear.id));\n      this.props.dispatch(getLevel(this.state.establishment.establishment_id, this.state.establishment.establishment.licence[0].schoolYear.id));\n      this.props.dispatch(getSubjectSetting(this.state.establishment.establishment_id, this.state.establishment.establishment.licence[0].schoolYear.id));\n    } else {\n      localStorage.setItem(\"school_year_id\", null);\n      localStorage.setItem(\"school_year_name\", \"\");\n      const userProfile = Object.assign({}, this.props.profile, {\n        establishment_id: this.state.establishment.establishment_id,\n        school_year_id: null,\n        school_year_name: \"\"\n      });\n      this.props.dispatch({\n        type: \"GET_USER_PROFILE\",\n        payload: userProfile\n      });\n    }\n\n    this.props.dispatch(hideModalSelectEstablishment());\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Auxiliary, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Modal, {\n      isOpen: this.props.multiple,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      toggle: this.props.handleCancel,\n      className: \"modal-box-header bg-primary text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"select.establishment.admin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 14\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(ModalBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      autoComplete: \"off\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      required: true,\n      name: \"establishment\",\n      id: \"establishment\",\n      select: true,\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.student.formadd.establishment\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 25\n        }\n      }),\n      value: this.state.establishment,\n      onChange: this.handleChange(\"establishment\") // onClick={this.getEstabType}\n      ,\n      SelectProps: {},\n      margin: \"normal\",\n      fullWidth: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 21\n      }\n    }, this.props.profile.establishments.map(establishment => /*#__PURE__*/React.createElement(MenuItem, {\n      key: establishment.id,\n      value: establishment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 27\n      }\n    }, establishment.establishment.name)))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12 text-left \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      className: \"jr-btn bg-indigo text-white \",\n      disabled: this.state.establishment === \"\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"button.save.registreAppel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 20\n      }\n    })))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    multiple: state.auth.multiple,\n    profile: state.auth.profile\n  };\n};\n\nexport default connect(mapStateToProps)(ModalEstablishmentList);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Home/admin/ModalEstablishmentList.js"],"names":["React","Component","IntlMessages","Auxiliary","Modal","ModalBody","ModalHeader","TextField","Button","UncontrolledAlert","connect","MenuItem","object","getThemeColor","getAppLanguage","initCalendar","userSignInSuccess","hideModalSelectEstablishment","_","getSubjectModules","getClassSettings","getSection","getLevel","getSubjectSetting","ModalEstablishmentList","constructor","props","handleChange","name","event","setState","target","value","state","establishment","bind","handleSubmit","localStorage","setItem","establishment_id","dispatch","type","payload","establishmentModule","isEmpty","licence","schoolYear","id","userProfile","Object","assign","profile","school_year_id","school_year_name","render","multiple","handleCancel","establishments","map","mapStateToProps","auth"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport IntlMessages from \"../../../../util/IntlMessages\";\nimport Auxiliary from \"../../../../util/Auxiliary\";\nimport { Modal, ModalBody, ModalHeader } from \"reactstrap\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport { UncontrolledAlert } from \"reactstrap\";\nimport { connect } from \"react-redux\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport { object } from \"prop-types\";\nimport {\n  getThemeColor,\n  getAppLanguage,\n  initCalendar,\n} from \"../../../../actions/Setting\";\nimport {\n  userSignInSuccess,\n  hideModalSelectEstablishment,\n} from \"../../../../actions/Auth\";\nimport _ from \"lodash\";\nimport { getSubjectModules } from \"../../../../actions/SubjectModuleAction\";\nimport { getClassSettings } from \"../../../../actions/ClassSettingsAction\";\nimport { getSection } from \"../../../../actions/SectionsAction\";\nimport { getLevel } from \"../../../../actions/LevelAction\";\nimport { getSubjectSetting } from \"../../../../actions/subjectAction\";\nclass ModalEstablishmentList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      establishment: \"\",\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n  handleChange = (name) => (event) => {\n    this.setState({\n      [name]: event.target.value,\n    });\n  };\n  handleSubmit() {\n    localStorage.setItem(\n      \"establishment_id\",\n      this.state.establishment.establishment_id\n    );\n\n    this.props.dispatch({\n      type: \"GET_ESTABLISHMENT_MODULE\",\n      payload: this.state.establishment.establishment.establishmentModule,\n    });\n    if (!_.isEmpty(this.state.establishment.establishment.licence)) {\n      localStorage.setItem(\n        \"school_year_id\",\n        this.state.establishment.establishment.licence[0].schoolYear.id\n      );\n      localStorage.setItem(\n        \"school_year_name\",\n        this.state.establishment.establishment.licence[0].schoolYear.name\n      );\n      const userProfile = Object.assign({}, this.props.profile, {\n        establishment_id: this.state.establishment.establishment_id,\n        school_year_id: this.state.establishment.establishment.licence[0]\n          .schoolYear.id,\n        school_year_name: this.state.establishment.establishment.licence[0]\n          .schoolYear.name,\n      });\n\n      this.props.dispatch({ type: \"GET_USER_PROFILE\", payload: userProfile });\n\n      this.props.dispatch(\n        getSubjectModules(\n          this.state.establishment.establishment_id,\n          this.state.establishment.establishment.licence[0].schoolYear.id\n        )\n      );\n      this.props.dispatch(\n        getClassSettings(\n          this.state.establishment.establishment_id,\n          this.state.establishment.establishment.licence[0].schoolYear.id\n        )\n      );\n      this.props.dispatch(\n        getSubjectModules(\n          this.state.establishment.establishment_id,\n          this.state.establishment.establishment.licence[0].schoolYear.id\n        )\n      );\n      this.props.dispatch(\n        getSection(\n          this.state.establishment.establishment_id,\n          this.state.establishment.establishment.licence[0].schoolYear.id\n        )\n      );\n      this.props.dispatch(\n        getLevel(\n          this.state.establishment.establishment_id,\n          this.state.establishment.establishment.licence[0].schoolYear.id\n        )\n      );\n      this.props.dispatch(\n        getSubjectSetting(\n          this.state.establishment.establishment_id,\n          this.state.establishment.establishment.licence[0].schoolYear.id\n        )\n      );\n    } else {\n      localStorage.setItem(\"school_year_id\", null);\n      localStorage.setItem(\"school_year_name\", \"\");\n      const userProfile = Object.assign({}, this.props.profile, {\n        establishment_id: this.state.establishment.establishment_id,\n        school_year_id: null,\n        school_year_name: \"\",\n      });\n      this.props.dispatch({ type: \"GET_USER_PROFILE\", payload: userProfile });\n    }\n\n    this.props.dispatch(hideModalSelectEstablishment());\n  }\n\n  render() {\n    return (\n      <Auxiliary>\n        <Modal isOpen={this.props.multiple}>\n          <ModalHeader\n            toggle={this.props.handleCancel}\n            className=\"modal-box-header bg-primary text-white\"\n          >\n            {<IntlMessages id=\"select.establishment.admin\" />}\n          </ModalHeader>\n          <br />\n          {/* {this.props.values.succedAlert === true ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\">\n\n                {<IntlMessages id=\"reset.password.success.alert\" />}\n              </span>\n            </UncontrolledAlert>\n          ) : \"\"}\n          {this.props.values.errorAlert === true ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-danger bg-danger text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\">\n                {<IntlMessages id=\"reset.password.failed.alert\" />}\n \n              </span>\n            </UncontrolledAlert>\n\n          ) : \"\"} */}\n          <ModalBody>\n            <form autoComplete=\"off\">\n              <div className=\"row\">\n                <div className=\"col-md-12\">\n                  <div className=\"form-group\">\n                    <TextField\n                      required\n                      name=\"establishment\"\n                      id=\"establishment\"\n                      select\n                      label={\n                        <IntlMessages id=\"components.student.formadd.establishment\" />\n                      }\n                      value={this.state.establishment}\n                      onChange={this.handleChange(\"establishment\")}\n                      // onClick={this.getEstabType}\n                      SelectProps={{}}\n                      margin=\"normal\"\n                      fullWidth\n                    >\n                      {this.props.profile.establishments.map(\n                        (establishment) => (\n                          <MenuItem\n                            key={establishment.id}\n                            value={establishment}\n                          >\n                            {establishment.establishment.name}\n                          </MenuItem>\n                        )\n                      )}\n                    </TextField>\n                  </div>\n                </div>\n              </div>\n              <div className=\"col-md-12 text-left \">\n                <br />\n                <br />\n                <Button\n                  variant=\"contained\"\n                  className=\"jr-btn bg-indigo text-white \"\n                  disabled={this.state.establishment === \"\"}\n                  onClick={this.handleSubmit}\n                >\n                  {<IntlMessages id=\"button.save.registreAppel\" />}\n                </Button>\n              </div>\n            </form>\n          </ModalBody>\n        </Modal>\n      </Auxiliary>\n    );\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    multiple: state.auth.multiple,\n    profile: state.auth.profile,\n  };\n};\n\nexport default connect(mapStateToProps)(ModalEstablishmentList);\n"]},"metadata":{},"sourceType":"module"}