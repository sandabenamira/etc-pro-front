{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Community/routes/Complaint/AddComplaint.js\";\nimport React from 'react';\nimport { Modal, ModalHeader } from 'reactstrap';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport baseUrl from '../../../../../config/config';\nimport axios from 'axios';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport * as moment from 'moment';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport { connect } from 'react-redux';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from 'react-select';\nimport _ from 'lodash';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\n\nclass AddComplaint extends React.Component {\n  constructor() {\n    super();\n    this._isMounted = false;\n\n    this.onDrop = e => {\n      let file = e.target.files[0];\n      this.setState({\n        Reclam_File: file,\n        inputText: file.name\n      });\n    };\n\n    this.state = {\n      subject: '',\n      receiver_id: '',\n      receiverID: 0,\n      message: '',\n      professorsList: [],\n      professorsListNew: [],\n      date_hour_mail: '2019-07-18T13:07:42.438Z',\n      sender_id: '',\n      usersData: [],\n      inputText: '',\n      Reclam_File: null,\n      subject_Specifique: ''\n    };\n    this.onDrop = this.onDrop.bind(this);\n  }\n\n  render() {\n    const typesSubjects = ['transport', 'cantine', 'maltraitance', 'niveau educatif', 'autre'];\n    const {\n      onClose,\n      values,\n      handleChange\n    } = this.props;\n    console.log(values, 'valuuuues');\n    const {\n      receiver_id,\n      receiverID,\n      subject,\n      message,\n      sender_id,\n      date_hour_mail,\n      Reclam_File,\n      subject_Specifique\n    } = this.state;\n\n    if (this.props.receiverID !== undefined && this.state.usersData.length > 0) {\n      var nameReciver = this.state.usersData.find(element => element.id == this.props.receiverID);\n    }\n\n    return /*#__PURE__*/React.createElement(Modal, {\n      className: \"modal-box modal-box-mail\",\n      toggle: onClose,\n      isOpen: this.props.open,\n      style: {\n        zIndex: 2600\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      className: \"modal-box-header bg-primary text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"Reclam.r\\xE9diger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(IconButton, {\n      className: \"text-white\",\n      onClick: onClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CloseIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-box-content d-flex flex-column\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Autocomplete, {\n      name: \"receiver_id\",\n      id: \"receiver_id\",\n      disableClearable: true,\n      value: this.props.receiverID === undefined ? this.state.usersData[_.findIndex(this.state.usersData, {\n        id: receiverID\n      })] : this.state.usersData[_.findIndex(this.state.usersData, {\n        id: this.props.receiverID\n      })],\n      options: this.props.receiverID === undefined ? this.state.usersData : [],\n      onChange: (event, newValue) => {\n        this.setState({\n          receiverID: newValue.id\n        });\n      },\n      getOptionLabel: option => option.label,\n      renderInput: params => /*#__PURE__*/React.createElement(TextField, Object.assign({}, params, {\n        label: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"reciver.message\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 47\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      required: true,\n      id: \"subject\",\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"subject.message\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 20\n        }\n      }),\n      onChange: handleChange('subject'),\n      select: true,\n      value: values.subject,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }\n    }, this.props.subjectReply === '' ? typesSubjects.map((type, index) => /*#__PURE__*/React.createElement(MenuItem, {\n      key: index,\n      value: type,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, type)) : /*#__PURE__*/React.createElement(MenuItem, {\n      value: subject,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 15\n      }\n    }, subject)), /*#__PURE__*/React.createElement(TextField, {\n      id: \"required\",\n      label: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"message\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 20\n        }\n      }),\n      onChange: handleChange('message'),\n      value: message ? message : '',\n      multiline: true,\n      rowsMax: \"4\",\n      margin: \"normal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"modal-box-footer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      htmlFor: \"name-multiple\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }\n    }, \"vous pouvez ajouter des pi\\xE9ces jointes\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"files\",\n      className: \"btn\",\n      style: {\n        cursor: 'pointer',\n        color: 'white',\n        fontWeight: 'bold',\n        backgroundColor: '#4B58B9',\n        borderRadius: '4rem'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"Choisir un fichier\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 22\n      }\n    }))), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }\n    }, this.state.inputText), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"files\",\n      type: \"file\",\n      style: {\n        visibility: 'hidden'\n      },\n      onChange: e => this.onDrop(e),\n      accept: \"application/pdf,image/*\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      align: \"right\",\n      className: \"col-sm-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      disabled: receiverID == '' || subject == '' || receiverID == '' || subject == 'autre' && subject_Specifique === '',\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: () => {\n        let reclamSubject = '';\n\n        if (subject === 'autre' && subject_Specifique !== '') {\n          reclamSubject = subject_Specifique;\n        } else {\n          reclamSubject = subject;\n        } // onClose();\n        // onMailSend({\n        //   sender_id: sender_id,\n        //   receiver_id: receiverID,\n        //   subject: reclamSubject,\n        //   message: message,\n        //   date_hour_mail: date_hour_mail,\n        //   read: false,\n        //   starred: false,\n        //   important: false,\n        //   hasAttachments: false,\n        //   folder: 1,\n        //   selected: false,\n        //   labels: [],\n        //   establishmentId: this.props.userProfile.establishment_id,\n        //   file: Reclam_File,\n        // });\n\n\n        this.setState({\n          subject: '',\n          receiver_id: '',\n          message: '',\n          professorsList: [],\n          professorsListNew: [],\n          date_hour_mail: '2019-07-18T13:07:42.438Z',\n          Reclam_File: null,\n          subject_Specifique: '',\n          receiverID: ''\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-mail-send mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"button.send.message\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 16\n      }\n    })))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userProfile: state.auth.userProfile\n  };\n};\n\nexport default connect(mapStateToProps)(AddComplaint);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Community/routes/Complaint/AddComplaint.js"],"names":["React","Modal","ModalHeader","TextField","Button","IconButton","CloseIcon","baseUrl","axios","MenuItem","moment","IntlMessages","connect","InputLabel","Select","_","Autocomplete","AddComplaint","Component","constructor","_isMounted","onDrop","e","file","target","files","setState","Reclam_File","inputText","name","state","subject","receiver_id","receiverID","message","professorsList","professorsListNew","date_hour_mail","sender_id","usersData","subject_Specifique","bind","render","typesSubjects","onClose","values","handleChange","props","console","log","undefined","length","nameReciver","find","element","id","open","zIndex","findIndex","event","newValue","option","label","params","subjectReply","map","type","index","cursor","color","fontWeight","backgroundColor","borderRadius","visibility","reclamSubject","mapStateToProps","userProfile","auth"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Modal, ModalHeader } from 'reactstrap';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport baseUrl from '../../../../../config/config';\nimport axios from 'axios';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport * as moment from 'moment';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport { connect } from 'react-redux';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from 'react-select';\nimport _ from 'lodash';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\n\nclass AddComplaint extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      subject: '',\n      receiver_id: '',\n      receiverID: 0,\n      message: '',\n      professorsList: [],\n      professorsListNew: [],\n      date_hour_mail: '2019-07-18T13:07:42.438Z',\n      sender_id: '',\n      usersData: [],\n      inputText: '',\n      Reclam_File: null,\n      subject_Specifique: '',\n    };\n\n    this.onDrop = this.onDrop.bind(this);\n  }\n  _isMounted = false;\n\n  onDrop = (e) => {\n    let file = e.target.files[0];\n    this.setState({ Reclam_File: file, inputText: file.name });\n  };\n  render() {\n    const typesSubjects = ['transport', 'cantine', 'maltraitance', 'niveau educatif', 'autre'];\n    const { onClose, values, handleChange } = this.props;\n    console.log(values, 'valuuuues');\n    const {\n      receiver_id,\n      receiverID,\n      subject,\n      message,\n      sender_id,\n      date_hour_mail,\n      Reclam_File,\n      subject_Specifique,\n    } = this.state;\n\n    if (this.props.receiverID !== undefined && this.state.usersData.length > 0) {\n      var nameReciver = this.state.usersData.find((element) => element.id == this.props.receiverID);\n    }\n\n    return (\n      <Modal\n        className=\"modal-box modal-box-mail\"\n        toggle={onClose}\n        isOpen={this.props.open}\n        style={{ zIndex: 2600 }}\n      >\n        <ModalHeader className=\"modal-box-header bg-primary text-white\">\n          <IntlMessages id=\"Reclam.rédiger\" />\n          <IconButton className=\"text-white\" onClick={onClose}>\n            <CloseIcon />\n          </IconButton>\n        </ModalHeader>\n        <div className=\"modal-box-content d-flex flex-column\">\n          <div>\n            <Autocomplete\n              name=\"receiver_id\"\n              id=\"receiver_id\"\n              disableClearable\n              value={\n                this.props.receiverID === undefined\n                  ? this.state.usersData[\n                      _.findIndex(this.state.usersData, {\n                        id: receiverID,\n                      })\n                    ]\n                  : this.state.usersData[\n                      _.findIndex(this.state.usersData, {\n                        id: this.props.receiverID,\n                      })\n                    ]\n              }\n              options={this.props.receiverID === undefined ? this.state.usersData : []}\n              onChange={(event, newValue) => {\n                this.setState({ receiverID: newValue.id });\n              }}\n              getOptionLabel={(option) => option.label}\n              renderInput={(params) => (\n                <TextField {...params} label={<IntlMessages id=\"reciver.message\" />} />\n              )}\n            />\n          </div>\n          <br></br>\n          <TextField\n            required\n            id=\"subject\"\n            label={<IntlMessages id=\"subject.message\" />}\n            onChange={handleChange('subject')}\n            select\n            value={values.subject }\n          >\n            {this.props.subjectReply === '' ? (\n              typesSubjects.map((type, index) => (\n                <MenuItem key={index} value={type}>\n                  {type}\n                </MenuItem>\n              ))\n            ) : (\n              <MenuItem value={subject}>{subject}</MenuItem>\n            )}\n          </TextField>\n          {/* {subject === 'autre' ? (\n            <TextField\n              id=\"subject\"\n              label={<IntlMessages id=\"subject.specifiq.subject\" />}\n              onChange={(event) =>\n                this.setState({\n                  subject_Specifique: event.target.value,\n                })\n              }\n              variant=\"outlined\"\n              value={subject_Specifique ? subject_Specifique : ''}\n              multiline\n              rowsMax=\"4\"\n              margin=\"normal\"\n            />\n          ) : (\n            ''\n          )} */}\n\n          <TextField\n            id=\"required\"\n            label={<IntlMessages id=\"message\" />}\n            onChange={handleChange('message')}\n            value={message ? message : ''}\n            multiline\n            rowsMax=\"4\"\n            margin=\"normal\"\n          />\n        </div>\n\n        <div className=\"modal-box-footer\">\n          <InputLabel htmlFor=\"name-multiple\">vous pouvez ajouter des piéces jointes</InputLabel>\n          <br />\n          <label\n            htmlFor=\"files\"\n            className=\"btn\"\n            style={{\n              cursor: 'pointer',\n              color: 'white',\n              fontWeight: 'bold',\n              backgroundColor: '#4B58B9',\n              borderRadius: '4rem',\n            }}\n          >\n            <strong>{<IntlMessages id=\"Choisir un fichier\" />}</strong>\n          </label>\n          <label>{this.state.inputText}</label>\n          <input\n            id=\"files\"\n            type=\"file\"\n            style={{ visibility: 'hidden' }}\n            onChange={(e) => this.onDrop(e)}\n            accept=\"application/pdf,image/*\"\n          />\n          <br />\n          <br />\n          <div align=\"right\" className=\"col-sm-12\">\n            <Button\n              disabled={\n                receiverID == '' ||\n                subject == '' ||\n                receiverID == '' ||\n                (subject == 'autre' && subject_Specifique === '')\n              }\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => {\n                let reclamSubject = '';\n                if (subject === 'autre' && subject_Specifique !== '') {\n                  reclamSubject = subject_Specifique;\n                } else {\n                  reclamSubject = subject;\n                }\n                // onClose();\n                // onMailSend({\n                //   sender_id: sender_id,\n                //   receiver_id: receiverID,\n                //   subject: reclamSubject,\n                //   message: message,\n                //   date_hour_mail: date_hour_mail,\n                //   read: false,\n                //   starred: false,\n                //   important: false,\n                //   hasAttachments: false,\n                //   folder: 1,\n                //   selected: false,\n                //   labels: [],\n                //   establishmentId: this.props.userProfile.establishment_id,\n                //   file: Reclam_File,\n                // });\n                this.setState({\n                  subject: '',\n                  receiver_id: '',\n                  message: '',\n                  professorsList: [],\n                  professorsListNew: [],\n                  date_hour_mail: '2019-07-18T13:07:42.438Z',\n                  Reclam_File: null,\n\n                  subject_Specifique: '',\n                  receiverID: '',\n                });\n              }}\n            >\n              <i className=\"zmdi zmdi-mail-send mr-2\" />\n              {<IntlMessages id=\"button.send.message\" />}\n            </Button>\n          </div>\n        </div>\n      </Modal>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    userProfile: state.auth.userProfile,\n  };\n};\n\nexport default connect(mapStateToProps)(AddComplaint);\n"]},"metadata":{},"sourceType":"module"}