{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Community/routes/Complaint/ComplaintTableCell.js\";\nimport React from \"react\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport axios from \"axios\";\nimport ComplaintChoiceMenu from \"./ComplaintChoiceMenu\";\nimport baseUrl from \"../../../config/config\";\nimport { connect } from \"react-redux\";\nimport IntlMessages from \"../../../util/IntlMessages\";\nimport { roleIdSuperAdmin } from \"../../../config/config\";\nimport { roleIdAdmin } from \"../../../config/config\";\nimport { roleIdProfessor } from \"../../../config/config\";\nimport { roleIdParent } from \"../../../config/config\";\nimport { roleIdStudent } from \"../../../config/config\";\nimport { roleIdSupervisor } from \"../../../config/config\";\nimport { roleIdDirector } from \"../../../config/config\";\nvar options = {\n  weekday: \"long\",\n  year: \"numeric\",\n  month: \"short\",\n  day: \"numeric\"\n};\n\nvar dateFormat = require(\"dateformat\");\n\nclass ComplaintTableCell extends React.Component {\n  constructor() {\n    super();\n\n    this.onOptionMenuSelect = event => {\n      this.setState({\n        menuState: true,\n        anchorEl: event.currentTarget\n      });\n    };\n\n    this.handleRequestClose = () => {\n      this.setState({\n        menuState: false\n      });\n    };\n\n    this._isMounted = false;\n    this.state = {\n      anchorEl: undefined,\n      menuState: false,\n      receiverInfo: \"\",\n      receiverProfile: \"\"\n    };\n  }\n\n  componentWillMount() {\n    this._isMounted = true;\n    axios.get(`${baseUrl.baseUrl}/profiles/` + this.props.data.receiver_id + `/user?access_token=${localStorage.token}`).then(res => {\n      if (this._isMounted) {\n        const receiverInfo = res.data;\n        this.setState({\n          receiverInfo\n        });\n      }\n    });\n    axios.get(`${baseUrl.baseUrl}/profiles/` + this.props.data.receiver_id + `?access_token=${localStorage.token}`).then(res => {\n      if (this._isMounted) {\n        const receiverProfile = res.data;\n        this.setState({\n          receiverProfile\n        });\n      }\n    });\n  }\n\n  getNameRole(id) {\n    if (this.props.settings.languageId === \"tunisia\") {\n      return id === roleIdSuperAdmin ? \"superadmin\" : id === roleIdAdmin ? \"مشرف\" : id === roleIdProfessor ? \"أستاذ\" : id === roleIdParent ? \"الولي\" : id === roleIdStudent ? \"تلميذ\" : id === roleIdDirector ? \"مشرف اول\" : id === roleIdDirector ? \"مدير\" : \"\";\n    } else if (this.props.settings.languageId === \"english\") {\n      return id === roleIdSuperAdmin ? \"Superadmin\" : id === roleIdAdmin ? \"Admin\" : id === roleIdProfessor ? \"Professor\" : id === roleIdParent ? \"Parent\" : id === roleIdStudent ? \"Student\" : id === roleIdSupervisor ? \"Superviseur\" : id === roleIdDirector ? \"Director\" : \"\";\n    } else {\n      return id === roleIdSuperAdmin ? \"superadmin\" : id === roleIdAdmin ? \"Administrateur\" : id === roleIdProfessor ? \"Professeur\" : id === roleIdParent ? \"Parent\" : id === roleIdStudent ? \"Élève\" : id === roleIdSupervisor ? \"Superviseur\" : id === roleIdDirector ? \"Directeur\" : \"\";\n    }\n  }\n\n  render() {\n    const {\n      anchorEl,\n      menuState\n    } = this.state;\n    const {\n      id,\n      subject,\n      date_hour_reclamation,\n      status_complaint\n    } = this.props.data;\n    const nameSender = this.props.data.profile.user.name + \" \" + this.props.data.profile.user.surname;\n    const nameReceiver = this.state.receiverInfo.name + \" \" + this.state.receiverInfo.surname;\n    const nameSender_AR = this.props.data.profile.user.surname_ar + \" \" + this.props.data.profile.user.name_ar;\n    const nameReceiver_AR = this.state.receiverInfo.surname_ar + \" \" + this.state.receiverInfo.name_ar;\n    const RoleSender = this.getNameRole(this.props.data.profile.role_id);\n    const RoleReceiver = this.getNameRole(this.state.receiverProfile.role_id);\n    const statusStyle = status_complaint.includes(\"non traitée\") ? \"text-white bg-danger\" : status_complaint.includes(\"en cours\") ? \"bg-amber\" : \"text-white bg-success\";\n    const statusComplaint = status_complaint.includes(\"non traitée\") ? /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"Reclam.non.trait\\xE9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 7\n      }\n    }) : status_complaint.includes(\"en cours\") ? /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"Reclam.encours\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 7\n      }\n    }) : /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"Reclam.Trait\\xE9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 7\n      }\n    });\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      tabIndex: -1,\n      key: id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-profile d-flex flex-row align-items-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Avatar, {\n      align: \"left\",\n      className: \"size-50\",\n      alt: \"...\",\n      src: \"https://pngimage.net/wp-content/uploads/2018/05/admin-avatar-png-1.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"user-detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, this.props.type === \"Reçues\" ? this.props.settings.languageId == \"tunisia\" && nameSender_AR != \"null null\" ? /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"user-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 19\n      }\n    }, nameSender_AR) : /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"user-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 19\n      }\n    }, nameSender) : this.props.settings.languageId == \"tunisia\" && nameReceiver_AR != \"null null\" ? /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"user-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 17\n      }\n    }, nameReceiver_AR) : /*#__PURE__*/React.createElement(\"h5\", {\n      className: \"user-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 17\n      }\n    }, nameReceiver)))), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }\n    }, subject), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 9\n      }\n    }, this.props.type === \"Reçues\" ? RoleSender : RoleReceiver), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }\n    }, this.props.settings.languageId === \"tunisia\" ? new Date(date_hour_reclamation).toLocaleDateString(\"ar-TN\", options) : this.props.settings.languageId === \"english\" ? new Date(date_hour_reclamation).toLocaleDateString(\"en-US\", options) : new Date(date_hour_reclamation).toLocaleDateString(\"fr-FR\", options)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }\n    }, this.props.type === \"Reçues\" ? localStorage.roles_id == roleIdAdmin ? /*#__PURE__*/React.createElement(\"div\", {\n      className: ` badge text-uppercase ${statusStyle}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 15\n      }\n    }, statusComplaint) : \"\" : localStorage.roles_id != roleIdAdmin ? /*#__PURE__*/React.createElement(\"div\", {\n      className: ` badge text-uppercase ${statusStyle}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 13\n      }\n    }, statusComplaint) : \"\"), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      onClick: this.onOptionMenuSelect.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-more-vert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(ComplaintChoiceMenu, {\n      data: this.props.data,\n      type: this.props.type,\n      menuState: menuState,\n      anchorEl: anchorEl,\n      handleRequestClose: this.handleRequestClose.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    settings: state.settings.locale\n  };\n};\n\nexport default connect(mapStateToProps)(ComplaintTableCell);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Community/routes/Complaint/ComplaintTableCell.js"],"names":["React","Avatar","IconButton","axios","ComplaintChoiceMenu","baseUrl","connect","IntlMessages","roleIdSuperAdmin","roleIdAdmin","roleIdProfessor","roleIdParent","roleIdStudent","roleIdSupervisor","roleIdDirector","options","weekday","year","month","day","dateFormat","require","ComplaintTableCell","Component","constructor","onOptionMenuSelect","event","setState","menuState","anchorEl","currentTarget","handleRequestClose","_isMounted","state","undefined","receiverInfo","receiverProfile","componentWillMount","get","props","data","receiver_id","localStorage","token","then","res","getNameRole","id","settings","languageId","render","subject","date_hour_reclamation","status_complaint","nameSender","profile","user","name","surname","nameReceiver","nameSender_AR","surname_ar","name_ar","nameReceiver_AR","RoleSender","role_id","RoleReceiver","statusStyle","includes","statusComplaint","type","Date","toLocaleDateString","roles_id","bind","mapStateToProps","locale"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport axios from \"axios\";\r\nimport ComplaintChoiceMenu from \"./ComplaintChoiceMenu\";\r\nimport baseUrl from \"../../../config/config\";\r\nimport { connect } from \"react-redux\";\r\nimport IntlMessages from \"../../../util/IntlMessages\";\r\nimport { roleIdSuperAdmin } from \"../../../config/config\";\r\nimport { roleIdAdmin } from \"../../../config/config\";\r\nimport { roleIdProfessor } from \"../../../config/config\";\r\nimport { roleIdParent } from \"../../../config/config\";\r\nimport { roleIdStudent } from \"../../../config/config\";\r\nimport { roleIdSupervisor } from \"../../../config/config\";\r\nimport { roleIdDirector } from \"../../../config/config\";\r\nvar options = {\r\n  weekday: \"long\",\r\n  year: \"numeric\",\r\n  month: \"short\",\r\n  day: \"numeric\",\r\n};\r\nvar dateFormat = require(\"dateformat\");\r\n\r\nclass ComplaintTableCell extends React.Component {\r\n  onOptionMenuSelect = (event) => {\r\n    this.setState({ menuState: true, anchorEl: event.currentTarget });\r\n  };\r\n  handleRequestClose = () => {\r\n    this.setState({ menuState: false });\r\n  };\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      anchorEl: undefined,\r\n      menuState: false,\r\n      receiverInfo: \"\",\r\n      receiverProfile: \"\",\r\n    };\r\n  }\r\n  _isMounted = false;\r\n\r\n  componentWillMount() {\r\n    this._isMounted = true;\r\n\r\n    axios\r\n      .get(\r\n        `${baseUrl.baseUrl}/profiles/` +\r\n          this.props.data.receiver_id +\r\n          `/user?access_token=${localStorage.token}`\r\n      )\r\n      .then((res) => {\r\n        if (this._isMounted) {\r\n          const receiverInfo = res.data;\r\n          this.setState({ receiverInfo });\r\n        }\r\n      });\r\n\r\n    axios\r\n      .get(\r\n        `${baseUrl.baseUrl}/profiles/` +\r\n          this.props.data.receiver_id +\r\n          `?access_token=${localStorage.token}`\r\n      )\r\n      .then((res) => {\r\n        if (this._isMounted) {\r\n          const receiverProfile = res.data;\r\n          this.setState({ receiverProfile });\r\n        }\r\n      });\r\n  }\r\n  getNameRole(id) {\r\n    if (this.props.settings.languageId === \"tunisia\") {\r\n      return id === roleIdSuperAdmin\r\n        ? \"superadmin\"\r\n        : id === roleIdAdmin\r\n        ? \"مشرف\"\r\n        : id === roleIdProfessor\r\n        ? \"أستاذ\"\r\n        : id === roleIdParent\r\n        ? \"الولي\"\r\n        : id === roleIdStudent\r\n        ? \"تلميذ\"\r\n        : id === roleIdDirector\r\n        ? \"مشرف اول\"\r\n        : id === roleIdDirector\r\n        ? \"مدير\"\r\n        : \"\";\r\n    } else if (this.props.settings.languageId === \"english\") {\r\n      return id === roleIdSuperAdmin\r\n        ? \"Superadmin\"\r\n        : id === roleIdAdmin\r\n        ? \"Admin\"\r\n        : id === roleIdProfessor\r\n        ? \"Professor\"\r\n        : id === roleIdParent\r\n        ? \"Parent\"\r\n        : id === roleIdStudent\r\n        ? \"Student\"\r\n        : id === roleIdSupervisor\r\n        ? \"Superviseur\"\r\n        : id === roleIdDirector\r\n        ? \"Director\"\r\n        : \"\";\r\n    } else {\r\n      return id === roleIdSuperAdmin\r\n        ? \"superadmin\"\r\n        : id === roleIdAdmin\r\n        ? \"Administrateur\"\r\n        : id === roleIdProfessor\r\n        ? \"Professeur\"\r\n        : id === roleIdParent\r\n        ? \"Parent\"\r\n        : id === roleIdStudent\r\n        ? \"Élève\"\r\n        : id === roleIdSupervisor\r\n        ? \"Superviseur\"\r\n        : id === roleIdDirector\r\n        ? \"Directeur\"\r\n        : \"\";\r\n    }\r\n  }\r\n  render() {\r\n    const { anchorEl, menuState } = this.state;\r\n    const {\r\n      id,\r\n      subject,\r\n\r\n      date_hour_reclamation,\r\n      status_complaint,\r\n    } = this.props.data;\r\n    const nameSender =\r\n      this.props.data.profile.user.name +\r\n      \" \" +\r\n      this.props.data.profile.user.surname;\r\n\r\n    const nameReceiver =\r\n      this.state.receiverInfo.name + \" \" + this.state.receiverInfo.surname;\r\n    const nameSender_AR =\r\n      this.props.data.profile.user.surname_ar +\r\n      \" \" +\r\n      this.props.data.profile.user.name_ar;\r\n    const nameReceiver_AR =\r\n      this.state.receiverInfo.surname_ar +\r\n      \" \" +\r\n      this.state.receiverInfo.name_ar;\r\n    const RoleSender = this.getNameRole(this.props.data.profile.role_id);\r\n    const RoleReceiver = this.getNameRole(this.state.receiverProfile.role_id);\r\n\r\n    const statusStyle = status_complaint.includes(\"non traitée\")\r\n      ? \"text-white bg-danger\"\r\n      : status_complaint.includes(\"en cours\")\r\n      ? \"bg-amber\"\r\n      : \"text-white bg-success\";\r\n    const statusComplaint = status_complaint.includes(\"non traitée\") ? (\r\n      <IntlMessages id=\"Reclam.non.traité\" />\r\n    ) : status_complaint.includes(\"en cours\") ? (\r\n      <IntlMessages id=\"Reclam.encours\" />\r\n    ) : (\r\n      <IntlMessages id=\"Reclam.Traité\" />\r\n    );\r\n    return (\r\n      <tr tabIndex={-1} key={id}>\r\n        <td>\r\n          <div className=\"user-profile d-flex flex-row align-items-center\">\r\n            <Avatar\r\n              align=\"left\"\r\n              className=\"size-50\"\r\n              alt=\"...\"\r\n              src=\"https://pngimage.net/wp-content/uploads/2018/05/admin-avatar-png-1.png\"\r\n            />\r\n            <div className=\"user-detail\">\r\n              {this.props.type === \"Reçues\" ? (\r\n                this.props.settings.languageId == \"tunisia\" &&\r\n                nameSender_AR != \"null null\" ? (\r\n                  <h5 className=\"user-name\">{nameSender_AR}</h5>\r\n                ) : (\r\n                  <h5 className=\"user-name\">{nameSender}</h5>\r\n                )\r\n              ) : this.props.settings.languageId == \"tunisia\" &&\r\n                nameReceiver_AR != \"null null\" ? (\r\n                <h5 className=\"user-name\">{nameReceiver_AR}</h5>\r\n              ) : (\r\n                <h5 className=\"user-name\">{nameReceiver}</h5>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </td>\r\n        <td>{subject}</td>\r\n        <td>{this.props.type === \"Reçues\" ? RoleSender : RoleReceiver}</td>\r\n        <td>\r\n          {/* {dateFormat(date_hour_reclamation, \"dddd, mmmm dS, yyyy, HH:MM\")} */}\r\n          {this.props.settings.languageId === \"tunisia\"\r\n            ? new Date(date_hour_reclamation).toLocaleDateString(\r\n                \"ar-TN\",\r\n                options\r\n              )\r\n            : this.props.settings.languageId === \"english\"\r\n            ? new Date(date_hour_reclamation).toLocaleDateString(\r\n                \"en-US\",\r\n                options\r\n              )\r\n            : new Date(date_hour_reclamation).toLocaleDateString(\r\n                \"fr-FR\",\r\n                options\r\n              )}\r\n        </td>\r\n        <td>\r\n          {this.props.type === \"Reçues\" ? (\r\n            localStorage.roles_id == roleIdAdmin ? (\r\n              <div className={` badge text-uppercase ${statusStyle}`}>\r\n                {statusComplaint}\r\n              </div>\r\n            ) : (\r\n              \"\"\r\n            )\r\n          ) : localStorage.roles_id != roleIdAdmin ? (\r\n            <div className={` badge text-uppercase ${statusStyle}`}>\r\n              {statusComplaint}\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n\r\n          {/* {this.props.type === \"Reçues\" ? (\r\n            \"\"\r\n          ) : (\r\n            <div className={` badge text-uppercase ${statusStyle}`}>\r\n              {statusComplaint}\r\n            </div>\r\n          )} */}\r\n        </td>\r\n        {/* <td className=\"status-cell text-right\">\r\n          <div className={` badge text-uppercase ${statusStyle}`}>\r\n            {statusComplaint}\r\n          </div>\r\n        </td> */}\r\n        <td className=\"text-right\">\r\n          <IconButton onClick={this.onOptionMenuSelect.bind(this)}>\r\n            <i className=\"zmdi zmdi-more-vert\" />\r\n          </IconButton>\r\n          <ComplaintChoiceMenu\r\n            data={this.props.data}\r\n            type={this.props.type}\r\n            menuState={menuState}\r\n            anchorEl={anchorEl}\r\n            handleRequestClose={this.handleRequestClose.bind(this)}\r\n          />\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n}\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    settings: state.settings.locale,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ComplaintTableCell);\r\n"]},"metadata":{},"sourceType":"module"}