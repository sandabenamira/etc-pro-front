{"ast":null,"code":"import { classService } from \"../_services/class.service\";\nimport _ from \"lodash\";\nimport baseUrl from \"../config/config\";\nimport axios from \"axios\";\nimport { SHOW_ERROR_MESSAGE, HIDE_ERROR_MESSAGE, HIDE_SUCCESS_MESSAGE, SHOW_SUCCESS_MESSAGE, FETECHED_ALL_ROOMS, FETECHED_ALL_ROOMS_BY_ESTABLISHMENET_ID, ADD_ROOM, EDIT_ROOM, DELETE_ROOM } from \"../constants/ActionTypes\";\nexport const getRooms = () => {\n  return dispatch => {\n    let apiEndpoint = `/rooms?access_token=${localStorage.token}`;\n    classService.get(apiEndpoint).then(response => {\n      dispatch({\n        type: FETECHED_ALL_ROOMS,\n        payload: response.data\n      });\n    }).catch(err => {});\n  };\n};\nexport function getRoomsByEstablshment(establishmentId, schoolYearId) {\n  return dispatch => {\n    let apiEndpoint = `/rooms?access_token=${localStorage.token}&filter[where][and][0][establishment_id]= ${establishmentId}&filter[where][and][1][fk_id_school_year]=` + schoolYearId;\n    classService.get(apiEndpoint).then(response => {\n      const Room_list = response.data;\n      const Rooms_list = Room_list.filter(element => element.status);\n      dispatch({\n        type: FETECHED_ALL_ROOMS_BY_ESTABLISHMENET_ID,\n        payload: Rooms_list\n      });\n    }).catch(error => {});\n  };\n}\nexport function addRoom(classroomData) {\n  return dispatch => {\n    let apiEndpoint = `/rooms?access_token=${localStorage.token}`;\n    classService.post(apiEndpoint, classroomData).then(response => {\n      if (response.data) {\n        dispatch({\n          type: ADD_ROOM,\n          payload: response.data\n        });\n        dispatch({\n          type: SHOW_ERROR_MESSAGE,\n          payload: \"Une erreur est survenue lors de la création merci d'essayer à nouveau\"\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_ERROR_MESSAGE\n          });\n        }, 4000);\n      } else {\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: \"La création est effectuée avec succès\"\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_SUCCESS_MESSAGE\n          });\n        }, 4000);\n      }\n    });\n  };\n}\nexport function editRoom(classroomData) {\n  return dispatch => {\n    let apiEndpoint = `/rooms/` + classroomData.id + `?access_token=${localStorage.token}`;\n    classService.put(apiEndpoint, classroomData).then(response => {\n      if (response) {\n        dispatch({\n          type: EDIT_ROOM,\n          payload: response.data\n        });\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: \"La modification est effectuée avec succès\"\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_SUCCESS_MESSAGE\n          });\n        }, 4000);\n      } else {\n        dispatch({\n          type: SHOW_ERROR_MESSAGE,\n          payload: \"Une erreur est survenue lors de la modification merci d'essayer à nouveau\"\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_ERROR_MESSAGE\n          });\n        }, 4000);\n      }\n    });\n  };\n}\nexport function deleteRoom(itemId) {\n  return dispatch => {\n    axios.patch(`${baseUrl.baseUrl}/rooms/` + itemId + `?access_token=${localStorage.token}`, {\n      status: false\n    }).then(response => {\n      dispatch({\n        type: DELETE_ROOM,\n        payload: response.data\n      });\n      dispatch({\n        type: SHOW_SUCCESS_MESSAGE,\n        payload: \"L'archivage  est effectuée avec succès\"\n      });\n      setTimeout(() => {\n        dispatch({\n          type: HIDE_SUCCESS_MESSAGE\n        });\n      }, 4000);\n    }).catch(function (error) {\n      dispatch({\n        type: SHOW_ERROR_MESSAGE,\n        payload: \"Une erreur est survenue lors de l'archivage merci d'essayer à nouveau\"\n      });\n      setTimeout(() => {\n        dispatch({\n          type: HIDE_ERROR_MESSAGE\n        });\n      }, 4000);\n    });\n  };\n}","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/actions/roomAction.js"],"names":["classService","_","baseUrl","axios","SHOW_ERROR_MESSAGE","HIDE_ERROR_MESSAGE","HIDE_SUCCESS_MESSAGE","SHOW_SUCCESS_MESSAGE","FETECHED_ALL_ROOMS","FETECHED_ALL_ROOMS_BY_ESTABLISHMENET_ID","ADD_ROOM","EDIT_ROOM","DELETE_ROOM","getRooms","dispatch","apiEndpoint","localStorage","token","get","then","response","type","payload","data","catch","err","getRoomsByEstablshment","establishmentId","schoolYearId","Room_list","Rooms_list","filter","element","status","error","addRoom","classroomData","post","setTimeout","editRoom","id","put","deleteRoom","itemId","patch"],"mappings":"AAAA,SAASA,YAAT,QAA6B,4BAA7B;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SACEC,kBADF,EAEEC,kBAFF,EAGEC,oBAHF,EAIEC,oBAJF,EAKEC,kBALF,EAMEC,uCANF,EAOEC,QAPF,EAQEC,SARF,EASEC,WATF,QAUO,0BAVP;AAWA,OAAO,MAAMC,QAAQ,GAAG,MAAM;AAC5B,SAAQC,QAAD,IAAc;AACnB,QAAIC,WAAW,GAAI,uBAAsBC,YAAY,CAACC,KAAM,EAA5D;AACAjB,IAAAA,YAAY,CACTkB,GADH,CACOH,WADP,EAEGI,IAFH,CAESC,QAAD,IAAc;AAClBN,MAAAA,QAAQ,CAAC;AACPO,QAAAA,IAAI,EAAEb,kBADC;AAEPc,QAAAA,OAAO,EAAEF,QAAQ,CAACG;AAFX,OAAD,CAAR;AAID,KAPH,EAQGC,KARH,CAQUC,GAAD,IAAS,CAAE,CARpB;AASD,GAXD;AAYD,CAbM;AAeP,OAAO,SAASC,sBAAT,CAAgCC,eAAhC,EAAiDC,YAAjD,EAA+D;AACpE,SAAQd,QAAD,IAAc;AACnB,QAAIC,WAAW,GACZ,uBAAsBC,YAAY,CAACC,KAAM,6CAA4CU,eAAgB,4CAAtG,GACAC,YAFF;AAGA5B,IAAAA,YAAY,CACTkB,GADH,CACOH,WADP,EAEGI,IAFH,CAESC,QAAD,IAAc;AAClB,YAAMS,SAAS,GAAGT,QAAQ,CAACG,IAA3B;AACA,YAAMO,UAAU,GAAGD,SAAS,CAACE,MAAV,CAAkBC,OAAD,IAAaA,OAAO,CAACC,MAAtC,CAAnB;AACAnB,MAAAA,QAAQ,CAAC;AACPO,QAAAA,IAAI,EAAEZ,uCADC;AAEPa,QAAAA,OAAO,EAAEQ;AAFF,OAAD,CAAR;AAIA,KATJ,EAUGN,KAVH,CAUUU,KAAD,IAAW,CAAE,CAVtB;AAWD,GAfD;AAgBD;AACD,OAAO,SAASC,OAAT,CAAiBC,aAAjB,EAAgC;AACrC,SAAQtB,QAAD,IAAc;AACnB,QAAIC,WAAW,GAAI,uBAAsBC,YAAY,CAACC,KAAM,EAA5D;AACAjB,IAAAA,YAAY,CAACqC,IAAb,CAAkBtB,WAAlB,EAA+BqB,aAA/B,EAA8CjB,IAA9C,CAAoDC,QAAD,IAAc;AAC/D,UAAIA,QAAQ,CAACG,IAAb,EAAmB;AACjBT,QAAAA,QAAQ,CAAC;AACHO,UAAAA,IAAI,EAAEX,QADH;AAEHY,UAAAA,OAAO,EAAEF,QAAQ,CAACG;AAFf,SAAD,CAAR;AAIAT,QAAAA,QAAQ,CAAC;AACPO,UAAAA,IAAI,EAAEjB,kBADC;AAEPkB,UAAAA,OAAO,EACL;AAHK,SAAD,CAAR;AAKAgB,QAAAA,UAAU,CAAC,MAAM;AACfxB,UAAAA,QAAQ,CAAC;AAAEO,YAAAA,IAAI,EAAEhB;AAAR,WAAD,CAAR;AACD,SAFS,EAEP,IAFO,CAAV;AAGD,OAbD,MAaO;AACJS,QAAAA,QAAQ,CAAC;AACRO,UAAAA,IAAI,EAAEd,oBADE;AAERe,UAAAA,OAAO,EAAE;AAFD,SAAD,CAAR;AAIDgB,QAAAA,UAAU,CAAC,MAAM;AACfxB,UAAAA,QAAQ,CAAC;AAAEO,YAAAA,IAAI,EAAEf;AAAR,WAAD,CAAR;AACD,SAFS,EAEP,IAFO,CAAV;AAGD;AACF,KAvBD;AAwBC,GA1BH;AA2BD;AACD,OAAO,SAASiC,QAAT,CAAkBH,aAAlB,EAAiC;AACtC,SAAQtB,QAAD,IAAc;AACnB,QAAIC,WAAW,GAAG,SAAD,GAAYqB,aAAa,CAACI,EAA1B,GAAgC,iBAAgBxB,YAAY,CAACC,KAAM,EAApF;AACAjB,IAAAA,YAAY,CAACyC,GAAb,CAAiB1B,WAAjB,EAA8BqB,aAA9B,EAA6CjB,IAA7C,CAAmDC,QAAD,IAAc;AAC9D,UAAGA,QAAH,EAAY;AACVN,QAAAA,QAAQ,CAAC;AACPO,UAAAA,IAAI,EAAEV,SADC;AAEPW,UAAAA,OAAO,EAAEF,QAAQ,CAACG;AAFX,SAAD,CAAR;AAIAT,QAAAA,QAAQ,CAAC;AACPO,UAAAA,IAAI,EAAEd,oBADC;AAEPe,UAAAA,OAAO,EAAE;AAFF,SAAD,CAAR;AAIAgB,QAAAA,UAAU,CAAC,MAAM;AACfxB,UAAAA,QAAQ,CAAC;AAAEO,YAAAA,IAAI,EAAEf;AAAR,WAAD,CAAR;AACD,SAFS,EAEP,IAFO,CAAV;AAGD,OAZD,MAaM;AACFQ,QAAAA,QAAQ,CAAC;AACPO,UAAAA,IAAI,EAAEjB,kBADC;AAEPkB,UAAAA,OAAO,EACL;AAHK,SAAD,CAAR;AAKAgB,QAAAA,UAAU,CAAC,MAAM;AACfxB,UAAAA,QAAQ,CAAC;AAAEO,YAAAA,IAAI,EAAEhB;AAAR,WAAD,CAAR;AACD,SAFS,EAEP,IAFO,CAAV;AAGD;AACJ,KAxBD;AAyBD,GA3BD;AA4BD;AAED,OAAO,SAASqC,UAAT,CAAoBC,MAApB,EAA4B;AACjC,SAAQ7B,QAAD,IAAc;AACnBX,IAAAA,KAAK,CACFyC,KADH,CAEK,GAAE1C,OAAO,CAACA,OAAQ,SAAnB,GACEyC,MADF,GAEG,iBAAgB3B,YAAY,CAACC,KAAM,EAJ1C,EAKI;AACEgB,MAAAA,MAAM,EAAE;AADV,KALJ,EASGd,IATH,CASSC,QAAD,IAAc;AAClBN,MAAAA,QAAQ,CAAC;AACPO,QAAAA,IAAI,EAAET,WADC;AAEPU,QAAAA,OAAO,EAAEF,QAAQ,CAACG;AAFX,OAAD,CAAR;AAIAT,MAAAA,QAAQ,CAAC;AACPO,QAAAA,IAAI,EAAEd,oBADC;AAEPe,QAAAA,OAAO,EAAE;AAFF,OAAD,CAAR;AAIAgB,MAAAA,UAAU,CAAC,MAAM;AACfxB,QAAAA,QAAQ,CAAC;AAAEO,UAAAA,IAAI,EAAEf;AAAR,SAAD,CAAR;AACD,OAFS,EAEP,IAFO,CAAV;AAGD,KArBH,EAsBGkB,KAtBH,CAsBS,UAASU,KAAT,EAAgB;AACrBpB,MAAAA,QAAQ,CAAC;AACPO,QAAAA,IAAI,EAAEjB,kBADC;AAEPkB,QAAAA,OAAO,EACL;AAHK,OAAD,CAAR;AAKAgB,MAAAA,UAAU,CAAC,MAAM;AACfxB,QAAAA,QAAQ,CAAC;AAAEO,UAAAA,IAAI,EAAEhB;AAAR,SAAD,CAAR;AACD,OAFS,EAEP,IAFO,CAAV;AAGA,KA/BJ;AAgCD,GAjCD;AAkCD","sourcesContent":["import { classService } from \"../_services/class.service\";\nimport _ from \"lodash\";\nimport baseUrl from \"../config/config\";\nimport axios from \"axios\";\nimport {\n  SHOW_ERROR_MESSAGE,\n  HIDE_ERROR_MESSAGE,\n  HIDE_SUCCESS_MESSAGE,\n  SHOW_SUCCESS_MESSAGE,\n  FETECHED_ALL_ROOMS,\n  FETECHED_ALL_ROOMS_BY_ESTABLISHMENET_ID,\n  ADD_ROOM,\n  EDIT_ROOM,\n  DELETE_ROOM\n} from \"../constants/ActionTypes\";\nexport const getRooms = () => {\n  return (dispatch) => {\n    let apiEndpoint = `/rooms?access_token=${localStorage.token}`;\n    classService\n      .get(apiEndpoint)\n      .then((response) => {\n        dispatch({\n          type: FETECHED_ALL_ROOMS,\n          payload: response.data,\n        });\n      })\n      .catch((err) => {});\n  };\n};\n\nexport function getRoomsByEstablshment(establishmentId, schoolYearId) {\n  return (dispatch) => {\n    let apiEndpoint =\n      `/rooms?access_token=${localStorage.token}&filter[where][and][0][establishment_id]= ${establishmentId}&filter[where][and][1][fk_id_school_year]=` +\n      schoolYearId;\n    classService\n      .get(apiEndpoint)\n      .then((response) => {\n        const Room_list = response.data;\n        const Rooms_list = Room_list.filter((element) => element.status);\n        dispatch({\n          type: FETECHED_ALL_ROOMS_BY_ESTABLISHMENET_ID,\n          payload: Rooms_list,\n        });\n       })\n      .catch((error) => {});\n  };\n}\nexport function addRoom(classroomData) {\n  return (dispatch) => {\n    let apiEndpoint = `/rooms?access_token=${localStorage.token}`;\n    classService.post(apiEndpoint, classroomData).then((response) => {\n      if (response.data) {\n        dispatch({\n              type: ADD_ROOM,\n              payload: response.data,\n            });\n        dispatch({\n          type: SHOW_ERROR_MESSAGE,\n          payload:\n            \"Une erreur est survenue lors de la création merci d'essayer à nouveau\",\n        });\n        setTimeout(() => {\n          dispatch({ type: HIDE_ERROR_MESSAGE });\n        }, 4000);\n      } else {\n         dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: \"La création est effectuée avec succès\",\n        });\n        setTimeout(() => {\n          dispatch({ type: HIDE_SUCCESS_MESSAGE });\n        }, 4000);\n      }\n    })\n    };\n}\nexport function editRoom(classroomData) {\n  return (dispatch) => {\n    let apiEndpoint =`/rooms/` + classroomData.id + `?access_token=${localStorage.token}`;\n    classService.put(apiEndpoint, classroomData).then((response) => {\n      if(response){\n        dispatch({\n          type: EDIT_ROOM,\n          payload: response.data,\n        });\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: \"La modification est effectuée avec succès\",\n        });\n        setTimeout(() => {\n          dispatch({ type: HIDE_SUCCESS_MESSAGE });\n        }, 4000);\n      }\n       else {\n          dispatch({\n            type: SHOW_ERROR_MESSAGE,\n            payload:\n              \"Une erreur est survenue lors de la modification merci d'essayer à nouveau\",\n          });\n          setTimeout(() => {\n            dispatch({ type: HIDE_ERROR_MESSAGE });\n          }, 4000);\n        } \n    });\n  };\n}\n\nexport function deleteRoom(itemId) {\n  return (dispatch) => {\n    axios\n      .patch(\n        `${baseUrl.baseUrl}/rooms/` +\n          itemId +\n          `?access_token=${localStorage.token}`,\n        {\n          status: false,\n        }\n      )\n      .then((response) => {\n        dispatch({\n          type: DELETE_ROOM,\n          payload: response.data,\n        });\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: \"L'archivage  est effectuée avec succès\",\n        });\n        setTimeout(() => {\n          dispatch({ type: HIDE_SUCCESS_MESSAGE });\n        }, 4000);\n      })\n      .catch(function(error) {\n        dispatch({\n          type: SHOW_ERROR_MESSAGE,\n          payload:\n            \"Une erreur est survenue lors de l'archivage merci d'essayer à nouveau\",\n        });\n        setTimeout(() => {\n          dispatch({ type: HIDE_ERROR_MESSAGE });\n        }, 4000);\n       });\n  };\n}\n"]},"metadata":{},"sourceType":"module"}