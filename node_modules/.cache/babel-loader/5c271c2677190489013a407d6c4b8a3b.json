{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Assiduity/routes/CallRegister/Registre.js\";\nimport React from 'react';\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PlanningCalendar from './PlanningCalendar';\nimport { getEventCallRegisterForAdmin, getEventCallRegisterForProf } from '../../../../../actions/planningActions';\nimport { ButtonGroup } from 'reactstrap';\nimport Button from '@material-ui/core/Button';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport moment from 'moment';\nimport { roleIdProfessor, roleIdAdmin } from '../../../../../config/config';\nimport { classService } from '../../../../../_services/class.service';\nimport _ from 'lodash';\nimport { Redirect } from 'react-router-dom';\nimport { getStudentsCallRegister } from '../../../../../actions/studentAction';\nimport ContainerHeader from '../../../../../components/ContainerHeader';\nimport { UncontrolledAlert } from 'reactstrap';\nimport SweetAlert from 'react-bootstrap-sweetalert';\nvar options = {\n  month: 'long'\n};\n\nclass Registre extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onConfirm = () => {\n      this.setState({\n        isOpen: false\n      });\n    };\n\n    this.displayEventCallregister = event => {\n      let curentDate = moment()._d;\n\n      let checkDate = moment(event.start).isAfter(curentDate);\n\n      if (!checkDate) {\n        this.props.dispatch(getStudentsCallRegister(event.classId, this.props.userProfile.school_year_id));\n        this.setState({\n          isRedirect: true,\n          eventId: event.id,\n          classId: event.classId,\n          startDate: event.start\n        });\n      } else {\n        this.setState({\n          isOpen: true\n        });\n      }\n    };\n\n    this.handleChangeProf = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n\n      if (event.target.value !== 0) {\n        if (this.state.typeCall == 'all') {\n          let events = this.props.events.filter(element => element.profId === event.target.value && element.classId === this.state.classIdFilter);\n          this.setState({\n            events\n          });\n        } else {\n          let events = this.props.events.filter(element => element.profId === event.target.value && element.classId === this.state.classIdFilter && element.tagCallRegister === this.state.typeCall);\n          this.setState({\n            events\n          });\n        }\n      } else {\n        if (this.state.typeCall == 'all') {\n          let events = this.props.events.filter(element => element.classId === this.state.classIdFilter);\n          this.setState({\n            events\n          });\n        } else {\n          let events = this.props.events.filter(element => element.classId === this.state.classIdFilter && element.tagCallRegister === this.state.typeCall);\n          this.setState({\n            events\n          });\n        }\n      }\n    };\n\n    this.handleChangeClass = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n      let obj = JSON.parse(event.target.value);\n      this.setState({\n        classeName: obj.classeName,\n        classIdFilter: obj.classId\n      });\n\n      if (this.props.userProfile.role_id === roleIdAdmin) {\n        let apiEndpoint = `/assignment_class_subjects?access_token=${localStorage.token}&filter[where][fk_id_class_v4]=${obj.classId}&filter[include][course][professor][profile][user]`;\n        classService.get(apiEndpoint).then(res => {\n          let courses = [];\n          res.data.forEach(element => {\n            courses.push(element.course);\n          });\n\n          let newCoursesList = _.flatten(courses);\n\n          let profFiltredByID = _.uniqBy(newCoursesList, 'fk_id_professor');\n\n          this.setState({\n            professors: profFiltredByID,\n            profId: '',\n            typeCall: 'all'\n          });\n        });\n        this.props.dispatch(getEventCallRegisterForAdmin(this.props.userProfile.establishment_id, this.props.userProfile.school_year_id, obj.classId));\n      } else if (this.props.userProfile.role_id === roleIdProfessor) {\n        if (this.state.typeCall == 'all') {\n          if (obj.classId === 0) {\n            this.setState({\n              events: this.props.events\n            });\n          } else {\n            let events = this.props.events.filter(element => element.classId === obj.classId);\n            this.setState({\n              events: events\n            });\n          }\n        } else {\n          if (obj.classId === 0) {\n            let events = this.props.events.filter(element => element.tagCallRegister === this.state.typeCall);\n            this.setState({\n              events\n            });\n          } else {\n            let events = this.props.events.filter(element => element.classId === obj.classId && element.tagCallRegister === this.state.typeCall);\n            this.setState({\n              events: events\n            });\n          }\n        }\n      }\n    };\n\n    this.handleChangeType = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n\n      if (this.props.userProfile.role_id === roleIdAdmin) {\n        if (this.state.classIdFilter == 0) {\n          if (event.target.value == 'all') {\n            this.setState({\n              events: this.props.events\n            });\n          } else {\n            let events = this.props.events.filter(element => element.tagCallRegister === event.target.value);\n            this.setState({\n              events: events\n            });\n          }\n        } else {\n          if (this.state.profId == '') {\n            if (event.target.value == 'all') {\n              let events = this.props.events.filter(element => element.classId == this.state.classIdFilter);\n              this.setState({\n                events\n              });\n            } else {\n              let events = this.props.events.filter(element => element.tagCallRegister === event.target.value && element.classId == this.state.classIdFilter);\n              this.setState({\n                events: events\n              });\n            }\n          } else {\n            if (event.target.value == 'all') {\n              let events = this.props.events.filter(element => element.classId == this.state.classIdFilter && element.profId === this.state.profId);\n              this.setState({\n                events\n              });\n            } else {\n              let events = this.props.events.filter(element => element.tagCallRegister === event.target.value && element.classId == this.state.classIdFilter && element.profId === this.state.profId);\n              this.setState({\n                events: events\n              });\n            }\n          }\n        }\n      } else if (this.props.userProfile.role_id === roleIdProfessor) {\n        if (this.state.classIdFilter == 0) {\n          if (event.target.value == 'all') {\n            this.setState({\n              events: this.props.events\n            });\n          } else {\n            let events = this.props.events.filter(element => element.tagCallRegister === event.target.value);\n            this.setState({\n              events: events\n            });\n          }\n        } else {\n          if (event.target.value == 'all') {\n            let events = this.props.events.filter(element => element.classId == this.state.classIdFilter);\n            this.setState({\n              events\n            });\n          } else {\n            let events = this.props.events.filter(element => element.tagCallRegister === event.target.value && element.classId == this.state.classIdFilter);\n            this.setState({\n              events: events\n            });\n          }\n        }\n      }\n    };\n\n    this.customToolbar = toolbar => {\n      var currentDate = moment(toolbar.date);\n      var weekStart = currentDate.clone().startOf('week');\n      var weekEnd = currentDate.clone().endOf('week');\n\n      const goToDayView = () => {\n        // toolbar.onView('day');\n        // this.handleView('day')\n        const now = new Date();\n        toolbar.date.setMonth(now.getMonth());\n        toolbar.date.setYear(now.getFullYear());\n        toolbar.onNavigate('current');\n      };\n\n      const goToWeekView = () => {\n        toolbar.onView('week');\n        this.handleView('week');\n      };\n\n      const goToMonthView = () => {\n        toolbar.onView('month');\n        this.handleView('month');\n      };\n\n      const goToCurrent = () => {\n        toolbar.onNavigate('TODAY');\n      };\n\n      const goToBack = () => {\n        toolbar.onNavigate('PREV');\n      };\n\n      const goToNext = () => {\n        toolbar.onNavigate('NEXT');\n      };\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex flex-row bd-highlight mb-3 d-flex justify-content-center flex-wrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-4 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        className: \"ml-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 11\n        }\n      }, \" \", this.state.classeName)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-4 bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ButtonGroup, {\n        vertical: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 484,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: this.state.status === 'day' ? ' jr-btn active' : 'jr-btn',\n        onClick: goToCurrent,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"label-filter-off\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.day\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(Button, {\n        className: this.state.status === 'week' ? ' jr-btn active' : 'jr-btn',\n        onClick: goToWeekView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"label-filter-off\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 15\n        }\n      }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.week\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(Button, {\n        className: this.state.status === 'month' ? 'jr-btn active' : 'jr-btn',\n        onClick: goToMonthView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"label-filter-off\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 506,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.month\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 17\n        }\n      }))))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"p-4 row bd-highlight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-chevron-left zmdi-hc-2x mr-3\",\n        style: {\n          color: '#0000CD'\n        },\n        onClick: goToBack,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 11\n        }\n      }), this.props.settings === 'tunisia' ? /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          color: '#0000CD'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 13\n        }\n      }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.week\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 15\n        }\n      }), \" \", moment(toolbar.date).weeks(), \":\", ' ', moment(weekStart).format('DD'), \" - \", moment(weekEnd).format('DD') - 1, ' ', new Date(weekStart).toLocaleDateString('ar-TN', options)) : this.props.settings === 'french' ? /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          color: '#0000CD'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 527,\n          columnNumber: 13\n        }\n      }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.week\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 15\n        }\n      }), \" \", moment(toolbar.date).weeks(), \":\", ' ', moment(weekStart).format('DD'), \" - \", moment(weekEnd).format('DD') - 1, ' ', moment(weekStart).format('MMMM')) : /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          color: '#0000CD'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 13\n        }\n      }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"timetable.week\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 15\n        }\n      }), \" \", moment(toolbar.date).weeks(), \":\", ' ', moment(weekStart).format('DD'), \" - \", moment(weekEnd).format('DD') - 1, ' ', new Date(weekStart).toLocaleDateString('en-US', options)), /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-chevron-right zmdi-hc-2x ml-3\",\n        style: {\n          color: '#0000CD'\n        },\n        onClick: goToNext,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 11\n        }\n      })));\n    };\n\n    this.state = {\n      itemClass: '',\n      classeName: '',\n      status: 'week',\n      classes: [],\n      isRedirect: false,\n      eventId: null,\n      classId: null,\n      startDate: '',\n      typeCall: 'all',\n      classIdFilter: 0,\n      isOpen: false,\n      professors: [],\n      profId: ''\n    };\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleView = this.handleView.bind(this);\n    this.customToolbar = this.customToolbar.bind(this);\n    this.event = this.event.bind(this);\n    this.displayEventCallregister = this.displayEventCallregister.bind(this);\n    this.handleChangeType = this.handleChangeType.bind(this);\n    this.handleChangeProf = this.handleChangeProf.bind(this);\n  }\n\n  handleView(view) {\n    this.setState({\n      status: view\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.events !== this.props.events) {\n      this.setState({\n        events: this.props.events\n      });\n    }\n\n    if (prevProps.classes !== this.props.classes) {\n      if (this.props.userProfile.role_id === roleIdAdmin) {\n        this.setState({\n          classes: this.props.classes\n        });\n      } else if (this.props.userProfile.role_id === roleIdProfessor) {\n        let apiEndpoint = `/professors?access_token=${localStorage.token}&filter[where][profile_id]=${this.props.userProfile.id}&filter[include][course][assignmentClassSubject]=class&filter[include][course][assignmentClassSubject]=subject`;\n        classService.get(apiEndpoint).then(res => {\n          let data = _.map(res.data, 'course');\n\n          let classes = [];\n          const allClass = {\n            id: 0,\n            name: 'Tous'\n          };\n          classes.push(allClass);\n          data[0].forEach(element => {\n            if (element.assignmentClassSubject.class.fk_id_school_year === this.props.userProfile.school_year_id) {\n              classes.push(element.assignmentClassSubject.class);\n            }\n          });\n\n          let uniqClasses = _.uniqBy(classes, 'id');\n\n          this.setState({\n            classes: uniqClasses\n          });\n        });\n      }\n    }\n  }\n\n  UNSAFE_componentWillMount() {\n    console.log(this.props.match, 'this.props.match UNSAFE_componentWillMount UNSAFE_componentWillMount');\n\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      this.props.dispatch(getEventCallRegisterForProf(this.props.userProfile.establishment_id, this.props.userProfile.school_year_id, this.props.userProfile.id));\n      let apiEndpoint = `/professors?access_token=${localStorage.token}&filter[where][profile_id]=${this.props.userProfile.id}&filter[include][course][assignmentClassSubject]=class&filter[include][course][assignmentClassSubject]=subject`;\n      classService.get(apiEndpoint).then(res => {\n        let data = _.map(res.data, 'course');\n\n        let classes = [];\n        const allClass = {\n          id: 0,\n          name: 'Tous'\n        };\n        classes.push(allClass);\n        data[0].forEach(element => {\n          if (element.assignmentClassSubject.class.fk_id_school_year === this.props.userProfile.school_year_id) {\n            classes.push(element.assignmentClassSubject.class);\n          }\n        });\n\n        let uniqClasses = _.uniqBy(classes, 'id');\n\n        this.setState({\n          classes: uniqClasses\n        });\n      });\n    } else if (this.props.userProfile.role_id === roleIdAdmin) {\n      this.setState({\n        classes: this.props.classes\n      });\n    }\n  }\n\n  event({\n    event\n  }) {\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: 'Popover-' + event.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }\n      }, event.eventType === 'lesson' ? /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontFamily: 'Roboto',\n          fontSize: '17px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 15\n        }\n      }, ' ', /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 17\n        }\n      }, event.subjectName), \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 44\n        }\n      }), \" \", event.roomName, ' ', event.tagCallRegister ? /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'green',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 19\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'red',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 19\n        }\n      }), ' ') : event.eventType === 'exam' ? /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontFamily: 'Roboto',\n          fontSize: '17px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 15\n        }\n      }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.note.exam\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 17\n        }\n      }), \" \", /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 60\n        }\n      }, event.subjectName), \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 87\n        }\n      }), ' ', event.roomName, ' ', event.tagCallRegister ? /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'green',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 19\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'red',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 19\n        }\n      }), ' ') : ''));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: 'Popover-' + event.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }\n      }, event.eventType === 'lesson' ? /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          fontFamily: 'Roboto',\n          fontSize: '17px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 15\n        }\n      }, ' ', /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 17\n        }\n      }, event.subjectName), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 17\n        }\n      }), ' ', event.profGender === 'Féminin' ? /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 19\n        }\n      }, \"Mme. \", event.profName, \" \", event.profSurname, \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 63\n        }\n      }), \" \", event.roomName, ' ', event.tagCallRegister ? /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'green',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 23\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'red',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 23\n        }\n      }), ' ') : /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 19\n        }\n      }, \"M. \", event.profName, \" \", event.profSurname, \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 61\n        }\n      }), \" \", event.roomName, ' ', event.tagCallRegister ? /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'green',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 386,\n          columnNumber: 23\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'red',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 23\n        }\n      }), ' '), ' ') : event.eventType === 'exam' ? /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          fontFamily: 'Roboto',\n          fontSize: '17px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 15\n        }\n      }, ' ', /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.note.exam\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 17\n        }\n      }), \": \", /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 61\n        }\n      }, event.subjectName), \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 88\n        }\n      }), event.profGender === 'Féminin' ? /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 19\n        }\n      }, \"Mme. \", event.profName, \" \", event.profSurname, \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 63\n        }\n      }), \" \", event.roomName, ' ', event.tagCallRegister ? /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'green',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 23\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'red',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 23\n        }\n      }), ' ') : /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 19\n        }\n      }, \"M. \", event.profName, \" \", event.profSurname, \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 61\n        }\n      }), \" \", event.roomName, ' ', event.tagCallRegister ? /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'green',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 23\n        }\n      }) : /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-circle zmdi-hc-lg \",\n        style: {\n          color: 'red',\n          float: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 23\n        }\n      }), ' ')) : ''));\n    }\n  }\n\n  render() {\n    if (this.state.isRedirect == true) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: `/app/assiduity/DetailsCallRegister/${this.state.eventId}/${this.state.classId}/${this.state.startDate}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 9\n        }\n      });\n    } else {\n      console.log(this.props.match.params == {}, 'this.props.match register');\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"app-wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ContainerHeader, {\n        title: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"call_register\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 563,\n            columnNumber: 35\n          }\n        }),\n        match: this.props.match,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 11\n        }\n      }), this.props.successStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n        className: \"alert-addon-card bg-success bg-success text-white shadow-lg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-addon alert-addon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 566,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 567,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"d-inline-block\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 569,\n          columnNumber: 15\n        }\n      }, \" \", this.props.message, \" \")) : '', this.props.errorStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n        className: \"alert-addon-card bg-danger bg-danger text-white shadow-lg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"icon-addon alert-addon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"d-inline-block\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 15\n        }\n      }, \" \", this.props.message, \" \")) : '', /*#__PURE__*/React.createElement(PlanningCalendar, {\n        classes: this.state.classes,\n        handleChangeProf: this.handleChangeProf,\n        handleChangeClass: this.handleChangeClass,\n        handleChangeType: this.handleChangeType,\n        events: this.state.events,\n        endTime: this.props.endTime,\n        startTime: this.props.startTime,\n        values: this.state,\n        handleView: this.handleView,\n        customToolbar: this.customToolbar,\n        event: this.event,\n        displayEventCallregister: this.displayEventCallregister,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(SweetAlert, {\n        show: this.state.isOpen,\n        title: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"alert.call.register\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 20\n          }\n        }),\n        onConfirm: this.onConfirm,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 11\n        }\n      }));\n    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userProfile: state.auth.userProfile,\n    classes: state.ClassSettingsReducer.classSettings,\n    startTime: state.settings.startTime,\n    endTime: state.settings.endTime,\n    events: state.planning.callRegisterEvents,\n    settings: state.settings.locale.languageId,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message\n  };\n};\n\nexport default connect(mapStateToProps)(Registre);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Assiduity/routes/CallRegister/Registre.js"],"names":["React","Component","connect","PlanningCalendar","getEventCallRegisterForAdmin","getEventCallRegisterForProf","ButtonGroup","Button","IntlMessages","moment","roleIdProfessor","roleIdAdmin","classService","_","Redirect","getStudentsCallRegister","ContainerHeader","UncontrolledAlert","SweetAlert","options","month","Registre","constructor","props","onConfirm","setState","isOpen","displayEventCallregister","event","curentDate","_d","checkDate","start","isAfter","dispatch","classId","userProfile","school_year_id","isRedirect","eventId","id","startDate","handleChangeProf","name","target","value","state","typeCall","events","filter","element","profId","classIdFilter","tagCallRegister","handleChangeClass","obj","JSON","parse","classeName","role_id","apiEndpoint","localStorage","token","get","then","res","courses","data","forEach","push","course","newCoursesList","flatten","profFiltredByID","uniqBy","professors","establishment_id","handleChangeType","customToolbar","toolbar","currentDate","date","weekStart","clone","startOf","weekEnd","endOf","goToDayView","now","Date","setMonth","getMonth","setYear","getFullYear","onNavigate","goToWeekView","onView","handleView","goToMonthView","goToCurrent","goToBack","goToNext","status","color","settings","weeks","format","toLocaleDateString","itemClass","classes","bind","view","componentDidUpdate","prevProps","map","allClass","assignmentClassSubject","class","fk_id_school_year","uniqClasses","UNSAFE_componentWillMount","console","log","match","eventType","fontFamily","fontSize","subjectName","roomName","float","profGender","profName","profSurname","render","params","successStatus","message","errorStatus","endTime","startTime","mapStateToProps","auth","ClassSettingsReducer","classSettings","planning","callRegisterEvents","locale","languageId","alert","success","error"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PlanningCalendar from './PlanningCalendar';\nimport {\n  getEventCallRegisterForAdmin,\n  getEventCallRegisterForProf,\n} from '../../../../../actions/planningActions';\nimport { ButtonGroup } from 'reactstrap';\nimport Button from '@material-ui/core/Button';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport moment from 'moment';\nimport { roleIdProfessor, roleIdAdmin } from '../../../../../config/config';\nimport { classService } from '../../../../../_services/class.service';\nimport _ from 'lodash';\nimport { Redirect } from 'react-router-dom';\nimport { getStudentsCallRegister } from '../../../../../actions/studentAction';\nimport ContainerHeader from '../../../../../components/ContainerHeader';\nimport { UncontrolledAlert } from 'reactstrap';\nimport SweetAlert from 'react-bootstrap-sweetalert';\nvar options = {\n  month: 'long',\n};\n\nclass Registre extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      itemClass: '',\n      classeName: '',\n      status: 'week',\n      classes: [],\n      isRedirect: false,\n      eventId: null,\n      classId: null,\n      startDate: '',\n      typeCall: 'all',\n      classIdFilter: 0,\n      isOpen: false,\n      professors: [],\n      profId: '',\n    };\n\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleView = this.handleView.bind(this);\n    this.customToolbar = this.customToolbar.bind(this);\n    this.event = this.event.bind(this);\n    this.displayEventCallregister = this.displayEventCallregister.bind(this);\n    this.handleChangeType = this.handleChangeType.bind(this);\n    this.handleChangeProf = this.handleChangeProf.bind(this);\n  }\n  onConfirm = () => {\n    this.setState({\n      isOpen: false,\n    });\n  };\n  displayEventCallregister = (event) => {\n    let curentDate = moment()._d;\n    let checkDate = moment(event.start).isAfter(curentDate);\n    if (!checkDate) {\n      this.props.dispatch(\n        getStudentsCallRegister(event.classId, this.props.userProfile.school_year_id)\n      );\n      this.setState({\n        isRedirect: true,\n        eventId: event.id,\n        classId: event.classId,\n        startDate: event.start,\n      });\n    } else {\n      this.setState({ isOpen: true });\n    }\n  };\n  handleView(view) {\n    this.setState({ status: view });\n  }\n  handleChangeProf = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n\n    if (event.target.value !== 0) {\n      if (this.state.typeCall == 'all') {\n        let events = this.props.events.filter(\n          (element) =>\n            element.profId === event.target.value && element.classId === this.state.classIdFilter\n        );\n        this.setState({ events });\n      } else {\n        let events = this.props.events.filter(\n          (element) =>\n            element.profId === event.target.value &&\n            element.classId === this.state.classIdFilter &&\n            element.tagCallRegister === this.state.typeCall\n        );\n        this.setState({ events });\n      }\n    } else {\n      if (this.state.typeCall == 'all') {\n        let events = this.props.events.filter(\n          (element) => element.classId === this.state.classIdFilter\n        );\n        this.setState({ events });\n      } else {\n        let events = this.props.events.filter(\n          (element) =>\n            element.classId === this.state.classIdFilter &&\n            element.tagCallRegister === this.state.typeCall\n        );\n        this.setState({ events });\n      }\n    }\n  };\n  handleChangeClass = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n\n    let obj = JSON.parse(event.target.value);\n    this.setState({\n      classeName: obj.classeName,\n      classIdFilter: obj.classId,\n    });\n\n    if (this.props.userProfile.role_id === roleIdAdmin) {\n      let apiEndpoint = `/assignment_class_subjects?access_token=${localStorage.token}&filter[where][fk_id_class_v4]=${obj.classId}&filter[include][course][professor][profile][user]`;\n      classService.get(apiEndpoint).then((res) => {\n        let courses = [];\n        res.data.forEach((element) => {\n          courses.push(element.course);\n        });\n        let newCoursesList = _.flatten(courses);\n        let profFiltredByID = _.uniqBy(newCoursesList, 'fk_id_professor');\n\n        this.setState({ professors: profFiltredByID, profId: '', typeCall: 'all' });\n      });\n\n      this.props.dispatch(\n        getEventCallRegisterForAdmin(\n          this.props.userProfile.establishment_id,\n          this.props.userProfile.school_year_id,\n          obj.classId\n        )\n      );\n    } else if (this.props.userProfile.role_id === roleIdProfessor) {\n      if (this.state.typeCall == 'all') {\n        if (obj.classId === 0) {\n          this.setState({ events: this.props.events });\n        } else {\n          let events = this.props.events.filter((element) => element.classId === obj.classId);\n          this.setState({ events: events });\n        }\n      } else {\n        if (obj.classId === 0) {\n          let events = this.props.events.filter(\n            (element) => element.tagCallRegister === this.state.typeCall\n          );\n          this.setState({ events });\n        } else {\n          let events = this.props.events.filter(\n            (element) =>\n              element.classId === obj.classId && element.tagCallRegister === this.state.typeCall\n          );\n          this.setState({ events: events });\n        }\n      }\n    }\n  };\n  handleChangeType = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n    if (this.props.userProfile.role_id === roleIdAdmin) {\n      if (this.state.classIdFilter == 0) {\n        if (event.target.value == 'all') {\n          this.setState({ events: this.props.events });\n        } else {\n          let events = this.props.events.filter(\n            (element) => element.tagCallRegister === event.target.value\n          );\n          this.setState({ events: events });\n        }\n      } else {\n        if (this.state.profId == '') {\n          if (event.target.value == 'all') {\n            let events = this.props.events.filter(\n              (element) => element.classId == this.state.classIdFilter\n            );\n\n            this.setState({ events });\n          } else {\n            let events = this.props.events.filter(\n              (element) =>\n                element.tagCallRegister === event.target.value &&\n                element.classId == this.state.classIdFilter\n            );\n\n            this.setState({ events: events });\n          }\n        } else {\n          if (event.target.value == 'all') {\n            let events = this.props.events.filter(\n              (element) =>\n                element.classId == this.state.classIdFilter && element.profId === this.state.profId\n            );\n\n            this.setState({ events });\n          } else {\n            let events = this.props.events.filter(\n              (element) =>\n                element.tagCallRegister === event.target.value &&\n                element.classId == this.state.classIdFilter &&\n                element.profId === this.state.profId\n            );\n\n            this.setState({ events: events });\n          }\n        }\n      }\n    } else if (this.props.userProfile.role_id === roleIdProfessor) {\n      if (this.state.classIdFilter == 0) {\n        if (event.target.value == 'all') {\n          this.setState({ events: this.props.events });\n        } else {\n          let events = this.props.events.filter(\n            (element) => element.tagCallRegister === event.target.value\n          );\n          this.setState({ events: events });\n        }\n      } else {\n        if (event.target.value == 'all') {\n          let events = this.props.events.filter(\n            (element) => element.classId == this.state.classIdFilter\n          );\n\n          this.setState({ events });\n        } else {\n          let events = this.props.events.filter(\n            (element) =>\n              element.tagCallRegister === event.target.value &&\n              element.classId == this.state.classIdFilter\n          );\n\n          this.setState({ events: events });\n        }\n      }\n    }\n  };\n  componentDidUpdate(prevProps) {\n    if (prevProps.events !== this.props.events) {\n      this.setState({ events: this.props.events });\n    }\n    if (prevProps.classes !== this.props.classes) {\n      if (this.props.userProfile.role_id === roleIdAdmin) {\n        this.setState({ classes: this.props.classes });\n      } else if(this.props.userProfile.role_id === roleIdProfessor) {\n        let apiEndpoint = `/professors?access_token=${localStorage.token}&filter[where][profile_id]=${this.props.userProfile.id}&filter[include][course][assignmentClassSubject]=class&filter[include][course][assignmentClassSubject]=subject`;\n        classService.get(apiEndpoint).then((res) => {\n          let data = _.map(res.data, 'course');\n          let classes = [];\n          const allClass = {\n            id: 0,\n            name: 'Tous',\n          };\n\n          classes.push(allClass);\n          data[0].forEach((element) => {\n            if (\n              element.assignmentClassSubject.class.fk_id_school_year ===\n              this.props.userProfile.school_year_id\n            ) {\n              classes.push(element.assignmentClassSubject.class);\n            }\n          });\n          let uniqClasses = _.uniqBy(classes, 'id');\n          this.setState({ classes: uniqClasses });\n        });\n      }\n    }\n  }\n\n  UNSAFE_componentWillMount() {\n    console.log(this.props.match,'this.props.match UNSAFE_componentWillMount UNSAFE_componentWillMount');\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      this.props.dispatch(\n        getEventCallRegisterForProf(\n          this.props.userProfile.establishment_id,\n          this.props.userProfile.school_year_id,\n          this.props.userProfile.id\n        )\n      );\n\n      let apiEndpoint = `/professors?access_token=${localStorage.token}&filter[where][profile_id]=${this.props.userProfile.id}&filter[include][course][assignmentClassSubject]=class&filter[include][course][assignmentClassSubject]=subject`;\n      classService.get(apiEndpoint).then((res) => {\n        let data = _.map(res.data, 'course');\n        let classes = [];\n        const allClass = {\n          id: 0,\n          name: 'Tous',\n        };\n\n        classes.push(allClass);\n        data[0].forEach((element) => {\n          if (\n            element.assignmentClassSubject.class.fk_id_school_year ===\n            this.props.userProfile.school_year_id\n          ) {\n            classes.push(element.assignmentClassSubject.class);\n          }\n        });\n        let uniqClasses = _.uniqBy(classes, 'id');\n        this.setState({ classes: uniqClasses });\n      });\n    } else if (this.props.userProfile.role_id === roleIdAdmin) {\n      this.setState({ classes: this.props.classes });\n       \n    }\n  }\n  event({ event }) {\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      return (\n        <div id={'Popover-' + event.id}>\n          <span>\n            {event.eventType === 'lesson' ? (\n              <p style={{ fontFamily: 'Roboto', fontSize: '17px' }}>\n                {' '}\n                <b>{event.subjectName}</b> <br /> {event.roomName}{' '}\n                {event.tagCallRegister ? (\n                  <i\n                    className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                    style={{ color: 'green', float: 'right' }}\n                  ></i>\n                ) : (\n                  <i\n                    className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                    style={{ color: 'red', float: 'right' }}\n                  ></i>\n                )}{' '}\n              </p>\n            ) : event.eventType === 'exam' ? (\n              <p style={{ fontFamily: 'Roboto', fontSize: '17px' }}>\n                {' '}\n                <IntlMessages id=\"components.note.exam\" /> <b>{event.subjectName}</b> <br />{' '}\n                {event.roomName}{' '}\n                {event.tagCallRegister ? (\n                  <i\n                    className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                    style={{ color: 'green', float: 'right' }}\n                  ></i>\n                ) : (\n                  <i\n                    className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                    style={{ color: 'red', float: 'right' }}\n                  ></i>\n                )}{' '}\n              </p>\n            ) : (\n              ''\n            )}\n          </span>\n        </div>\n      );\n    } else {\n      return (\n        <div id={'Popover-' + event.id}>\n          <span>\n            {event.eventType === 'lesson' ? (\n              <div style={{ fontFamily: 'Roboto', fontSize: '17px' }}>\n                {' '}\n                <b>{event.subjectName}</b>\n                <br />{' '}\n                {event.profGender === 'Féminin' ? (\n                  <p>\n                    Mme. {event.profName} {event.profSurname} <br /> {event.roomName}{' '}\n                    {event.tagCallRegister ? (\n                      <i\n                        className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                        style={{ color: 'green', float: 'right' }}\n                      ></i>\n                    ) : (\n                      <i\n                        className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                        style={{ color: 'red', float: 'right' }}\n                      ></i>\n                    )}{' '}\n                  </p>\n                ) : (\n                  <p>\n                    M. {event.profName} {event.profSurname} <br /> {event.roomName}{' '}\n                    {event.tagCallRegister ? (\n                      <i\n                        className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                        style={{ color: 'green', float: 'right' }}\n                      ></i>\n                    ) : (\n                      <i\n                        className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                        style={{ color: 'red', float: 'right' }}\n                      ></i>\n                    )}{' '}\n                  </p>\n                )}{' '}\n              </div>\n            ) : event.eventType === 'exam' ? (\n              <p style={{ fontFamily: 'Roboto', fontSize: '17px' }}>\n                {' '}\n                <IntlMessages id=\"components.note.exam\" />: <b>{event.subjectName}</b> <br />\n                {event.profGender === 'Féminin' ? (\n                  <p>\n                    Mme. {event.profName} {event.profSurname} <br /> {event.roomName}{' '}\n                    {event.tagCallRegister ? (\n                      <i\n                        className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                        style={{ color: 'green', float: 'right' }}\n                      ></i>\n                    ) : (\n                      <i\n                        className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                        style={{ color: 'red', float: 'right' }}\n                      ></i>\n                    )}{' '}\n                  </p>\n                ) : (\n                  <p>\n                    M. {event.profName} {event.profSurname} <br /> {event.roomName}{' '}\n                    {event.tagCallRegister ? (\n                      <i\n                        className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                        style={{ color: 'green', float: 'right' }}\n                      ></i>\n                    ) : (\n                      <i\n                        className=\"zmdi zmdi-circle zmdi-hc-lg \"\n                        style={{ color: 'red', float: 'right' }}\n                      ></i>\n                    )}{' '}\n                  </p>\n                )}\n              </p>\n            ) : (\n              ''\n            )}\n          </span>\n        </div>\n      );\n    }\n  }\n\n  customToolbar = (toolbar) => {\n    var currentDate = moment(toolbar.date);\n    var weekStart = currentDate.clone().startOf('week');\n    var weekEnd = currentDate.clone().endOf('week');\n\n    const goToDayView = () => {\n      // toolbar.onView('day');\n      // this.handleView('day')\n\n      const now = new Date();\n      toolbar.date.setMonth(now.getMonth());\n      toolbar.date.setYear(now.getFullYear());\n      toolbar.onNavigate('current');\n    };\n\n    const goToWeekView = () => {\n      toolbar.onView('week');\n      this.handleView('week');\n    };\n\n    const goToMonthView = () => {\n      toolbar.onView('month');\n      this.handleView('month');\n    };\n\n    const goToCurrent = () => {\n      toolbar.onNavigate('TODAY');\n    };\n    const goToBack = () => {\n      toolbar.onNavigate('PREV');\n    };\n    const goToNext = () => {\n      toolbar.onNavigate('NEXT');\n    };\n    return (\n      <div className=\"d-flex flex-row bd-highlight mb-3 d-flex justify-content-center flex-wrap\">\n        <div className=\"p-4 bd-highlight\">\n          <h3 className=\"ml-5\"> {this.state.classeName}</h3>\n        </div>\n        <div className=\"p-4 bd-highlight\">\n          <ButtonGroup vertical={false}>\n            <Button\n              className={this.state.status === 'day' ? ' jr-btn active' : 'jr-btn'}\n              onClick={goToCurrent}\n            >\n              <span className=\"label-filter-off\">\n                <IntlMessages id=\"timetable.day\" />\n              </span>\n            </Button>\n            <Button\n              className={this.state.status === 'week' ? ' jr-btn active' : 'jr-btn'}\n              onClick={goToWeekView}\n            >\n              <span className=\"label-filter-off\">\n                {' '}\n                <IntlMessages id=\"timetable.week\" />\n              </span>\n            </Button>\n            <Button\n              className={this.state.status === 'month' ? 'jr-btn active' : 'jr-btn'}\n              onClick={goToMonthView}\n            >\n              <span className=\"label-filter-off\">\n                <IntlMessages id=\"timetable.month\" />\n              </span>\n            </Button>\n          </ButtonGroup>\n        </div>\n\n        <div className=\"p-4 row bd-highlight\">\n          <i\n            className=\"zmdi zmdi-chevron-left zmdi-hc-2x mr-3\"\n            style={{ color: '#0000CD' }}\n            onClick={goToBack}\n          ></i>\n          {this.props.settings === 'tunisia' ? (\n            <span style={{ color: '#0000CD' }}>\n              {' '}\n              <IntlMessages id=\"timetable.week\" /> {moment(toolbar.date).weeks()}:{' '}\n              {moment(weekStart).format('DD')} - {moment(weekEnd).format('DD') - 1}{' '}\n              {new Date(weekStart).toLocaleDateString('ar-TN', options)}\n            </span>\n          ) : this.props.settings === 'french' ? (\n            <span style={{ color: '#0000CD' }}>\n              {' '}\n              <IntlMessages id=\"timetable.week\" /> {moment(toolbar.date).weeks()}:{' '}\n              {moment(weekStart).format('DD')} - {moment(weekEnd).format('DD') - 1}{' '}\n              {moment(weekStart).format('MMMM')}\n            </span>\n          ) : (\n            <span style={{ color: '#0000CD' }}>\n              {' '}\n              <IntlMessages id=\"timetable.week\" /> {moment(toolbar.date).weeks()}:{' '}\n              {moment(weekStart).format('DD')} - {moment(weekEnd).format('DD') - 1}{' '}\n              {new Date(weekStart).toLocaleDateString('en-US', options)}\n            </span>\n          )}\n\n          <i\n            className=\"zmdi zmdi-chevron-right zmdi-hc-2x ml-3\"\n            style={{ color: '#0000CD' }}\n            onClick={goToNext}\n          ></i>\n        </div>\n      </div>\n    );\n  };\n\n  render() {\n     if (this.state.isRedirect == true) {\n      return (\n        <Redirect\n          to={`/app/assiduity/DetailsCallRegister/${this.state.eventId}/${this.state.classId}/${this.state.startDate}`}\n        />\n      );\n    } else {\n      console.log(this.props.match.params == {},'this.props.match register');\n      return (\n        <div className=\"app-wrapper\">\n          <ContainerHeader title={<IntlMessages id=\"call_register\" />} match={this.props.match} />\n          {this.props.successStatus ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\"> {this.props.message} </span>\n            </UncontrolledAlert>\n          ) : (\n            ''\n          )}\n          {this.props.errorStatus ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-danger bg-danger text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\"> {this.props.message} </span>\n            </UncontrolledAlert>\n          ) : (\n            ''\n          )}\n          <PlanningCalendar\n            classes={this.state.classes}\n            handleChangeProf={this.handleChangeProf}\n            handleChangeClass={this.handleChangeClass}\n            handleChangeType={this.handleChangeType}\n            events={this.state.events}\n            endTime={this.props.endTime}\n            startTime={this.props.startTime}\n            values={this.state}\n            handleView={this.handleView}\n            customToolbar={this.customToolbar}\n            event={this.event}\n            displayEventCallregister={this.displayEventCallregister}\n          />\n\n          <SweetAlert\n            show={this.state.isOpen}\n            title={<IntlMessages id=\"alert.call.register\" />}\n            onConfirm={this.onConfirm}\n          ></SweetAlert>\n        </div>\n      );\n    }\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    userProfile: state.auth.userProfile,\n    classes: state.ClassSettingsReducer.classSettings,\n    startTime: state.settings.startTime,\n    endTime: state.settings.endTime,\n    events: state.planning.callRegisterEvents,\n    settings: state.settings.locale.languageId,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n  };\n};\nexport default connect(mapStateToProps)(Registre);\n"]},"metadata":{},"sourceType":"module"}