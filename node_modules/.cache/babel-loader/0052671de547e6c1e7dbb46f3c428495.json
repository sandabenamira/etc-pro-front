{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/Service/ServiceList.js\";\nimport React from 'react';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport CardBox from '../../../../../components/CardBox';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport EditService from './EditService';\nimport Can from '../../../../../can';\nimport { RoleContext } from '../../../../../Context';\nimport { element } from 'prop-types';\n\nclass ServiceList extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onOptionMenuSelect = event => {\n      this.setState({\n        menuState: true,\n        anchorEl: event.currentTarget,\n        itemId: event.currentTarget.value\n      });\n    };\n\n    this.handleRequestClose = () => {\n      this.setState({\n        menuState: false\n      });\n    };\n\n    this.state = {\n      anchorEl: undefined,\n      menuState: false,\n      itemId: 0,\n      modifModal: false,\n      serviceItem: [],\n      roleIdAdmin: 2\n    };\n    this.handleEdit = this.handleEdit.bind(this);\n    this.handleRequestDelete = this.handleRequestDelete.bind(this);\n    this.cancelModal = this.cancelModal.bind(this);\n  }\n\n  cancelModal() {\n    this.setState({\n      modifModal: false\n    });\n  }\n\n  handleEdit(e) {\n    e.preventDefault();\n    const serviceItem = this.props.servicesList.find(element => element.id === parseInt(this.state.itemId));\n    this.setState({\n      menuState: false,\n      serviceItem: serviceItem,\n      modifModal: true\n    });\n  }\n\n  handleRequestDelete(e) {\n    e.preventDefault();\n    this.props.requestDeleteService(this.state.itemId);\n    this.setState({\n      menuState: false\n    });\n  }\n\n  render() {\n    const {\n      anchorEl,\n      menuState\n    } = this.state;\n    const {\n      servicesList\n    } = this.props;\n    var Services = [];\n\n    if (this.props.profile.role_id === this.state.roleIdAdmin) {\n      Services = this.props.servicesList.filter(element => element.establishment_id === this.props.profile.establishment_id);\n    } else {\n      Services = servicesList;\n    }\n\n    return /*#__PURE__*/React.createElement(RoleContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 7\n      }\n    }, ({\n      role\n    }) => /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"service-filter:visit\",\n      yes: () => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row mb-md-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 15\n        }\n      }, this.state.modifModal ? /*#__PURE__*/React.createElement(EditService, {\n        cancelModal: this.cancelModal,\n        serviceItem: this.state.serviceItem,\n        establishmentsList: this.props.establishmentsList,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 19\n        }\n      }) : '', /*#__PURE__*/React.createElement(CardBox, {\n        styleName: \"col-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"table-responsive-material\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Table, {\n        className: \"default-table table-unbordered table table-sm table-hover\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(TableHead, {\n        className: \"th-border-b\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(TableRow, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Can, {\n        role: role,\n        perform: \"service-filter-establishment:visit\",\n        yes: () => /*#__PURE__*/React.createElement(TableCell, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 31\n          }\n        }, /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"components.student.formadd.establishment\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 35\n          }\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.establishments.formadd.name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 31\n        }\n      })), /*#__PURE__*/React.createElement(TableCell, {\n        align: \"right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"service.price\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 30\n        }\n      })), /*#__PURE__*/React.createElement(TableCell, {\n        align: \"right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"service.currency\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 30\n        }\n      })), /*#__PURE__*/React.createElement(TableCell, {\n        align: \"right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"service.price_ttc\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 30\n        }\n      })), /*#__PURE__*/React.createElement(TableCell, {\n        align: \"right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 27\n        }\n      }, \"TVA\"), /*#__PURE__*/React.createElement(TableCell, {\n        align: \"right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.note.student.comment\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 31\n        }\n      })), /*#__PURE__*/React.createElement(TableCell, {\n        align: \"right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"stuppUser.action\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 29\n        }\n      })))), /*#__PURE__*/React.createElement(TableBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 23\n        }\n      }, Services.map((serviceItem, index) => {\n        return /*#__PURE__*/React.createElement(TableRow, {\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(Can, {\n          role: role,\n          perform: \"service-filter-establishment:visit\",\n          yes: () => this.props.establishmentsList.map((establishment, index) => {\n            if (establishment.id === serviceItem.establishment_id) {\n              return /*#__PURE__*/React.createElement(TableCell, {\n                key: index,\n                __self: this,\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 43\n                }\n              }, establishment.name);\n            } else {\n              return null;\n            }\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 31\n          }\n        }), /*#__PURE__*/React.createElement(TableCell, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 31\n          }\n        }, serviceItem.name), /*#__PURE__*/React.createElement(TableCell, {\n          align: \"right\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 31\n          }\n        }, serviceItem.price), /*#__PURE__*/React.createElement(TableCell, {\n          align: \"right\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 31\n          }\n        }, serviceItem.currency), /*#__PURE__*/React.createElement(TableCell, {\n          align: \"right\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 31\n          }\n        }, serviceItem.price_ttc), /*#__PURE__*/React.createElement(TableCell, {\n          align: \"right\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 31\n          }\n        }, serviceItem.tva), /*#__PURE__*/React.createElement(TableCell, {\n          align: \"right\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 31\n          }\n        }, serviceItem.payment_periodicity), /*#__PURE__*/React.createElement(TableCell, {\n          align: \"right\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 31\n          }\n        }, serviceItem.note), /*#__PURE__*/React.createElement(TableCell, {\n          align: \"right\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 31\n          }\n        }, /*#__PURE__*/React.createElement(IconButton, {\n          onClick: this.onOptionMenuSelect.bind(this),\n          value: serviceItem.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"zmdi zmdi-more-vert\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 35\n          }\n        })), /*#__PURE__*/React.createElement(Menu, {\n          id: \"long-menu\",\n          anchorEl: anchorEl,\n          open: menuState,\n          onClose: this.handleRequestClose.bind(this),\n          MenuListProps: {\n            style: {\n              width: 150,\n              paddingTop: 0,\n              paddingBottom: 0\n            }\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(MenuItem, {\n          onClick: this.handleEdit,\n          value: serviceItem.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 35\n          }\n        }, /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"button.modify\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 38\n          }\n        })), /*#__PURE__*/React.createElement(MenuItem, {\n          onClick: this.handleRequestDelete,\n          value: serviceItem.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 35\n          }\n        }, /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"button.delete\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 38\n          }\n        })))));\n      })))))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }\n    }));\n  }\n\n}\n\nexport default ServiceList;","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/Service/ServiceList.js"],"names":["React","IntlMessages","Table","TableBody","TableRow","TableCell","TableHead","CardBox","IconButton","Menu","MenuItem","EditService","Can","RoleContext","element","ServiceList","Component","constructor","props","onOptionMenuSelect","event","setState","menuState","anchorEl","currentTarget","itemId","value","handleRequestClose","state","undefined","modifModal","serviceItem","roleIdAdmin","handleEdit","bind","handleRequestDelete","cancelModal","e","preventDefault","servicesList","find","id","parseInt","requestDeleteService","render","Services","profile","role_id","filter","establishment_id","role","establishmentsList","map","index","establishment","name","price","currency","price_ttc","tva","payment_periodicity","note","style","width","paddingTop","paddingBottom"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,kCAAzB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,OAAP,MAAoB,mCAApB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,GAAP,MAAgB,oBAAhB;AACA,SAASC,WAAT,QAA4B,wBAA5B;AACA,SAASC,OAAT,QAAwB,YAAxB;;AAEA,MAAMC,WAAN,SAA0Bf,KAAK,CAACgB,SAAhC,CAA0C;AACxCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SA8BnBC,kBA9BmB,GA8BGC,KAAD,IAAW;AAC9B,WAAKC,QAAL,CAAc;AACZC,QAAAA,SAAS,EAAE,IADC;AAEZC,QAAAA,QAAQ,EAAEH,KAAK,CAACI,aAFJ;AAGZC,QAAAA,MAAM,EAAEL,KAAK,CAACI,aAAN,CAAoBE;AAHhB,OAAd;AAKD,KApCkB;;AAAA,SAsCnBC,kBAtCmB,GAsCE,MAAM;AACzB,WAAKN,QAAL,CAAc;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAd;AACD,KAxCkB;;AAEjB,SAAKM,KAAL,GAAa;AACXL,MAAAA,QAAQ,EAAEM,SADC;AAEXP,MAAAA,SAAS,EAAE,KAFA;AAGXG,MAAAA,MAAM,EAAE,CAHG;AAIXK,MAAAA,UAAU,EAAE,KAJD;AAKXC,MAAAA,WAAW,EAAE,EALF;AAMXC,MAAAA,WAAW,EAAE;AANF,KAAb;AAQA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBC,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKC,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBD,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKE,WAAL,GAAmB,KAAKA,WAAL,CAAiBF,IAAjB,CAAsB,IAAtB,CAAnB;AACD;;AACDE,EAAAA,WAAW,GAAG;AACZ,SAAKf,QAAL,CAAc;AAAES,MAAAA,UAAU,EAAE;AAAd,KAAd;AACD;;AAEDG,EAAAA,UAAU,CAACI,CAAD,EAAI;AACZA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAMP,WAAW,GAAG,KAAKb,KAAL,CAAWqB,YAAX,CAAwBC,IAAxB,CACjB1B,OAAD,IAAaA,OAAO,CAAC2B,EAAR,KAAeC,QAAQ,CAAC,KAAKd,KAAL,CAAWH,MAAZ,CADlB,CAApB;AAGA,SAAKJ,QAAL,CAAc;AACZC,MAAAA,SAAS,EAAE,KADC;AAEZS,MAAAA,WAAW,EAAEA,WAFD;AAGZD,MAAAA,UAAU,EAAE;AAHA,KAAd;AAKD;;AAcDK,EAAAA,mBAAmB,CAACE,CAAD,EAAI;AACrBA,IAAAA,CAAC,CAACC,cAAF;AACA,SAAKpB,KAAL,CAAWyB,oBAAX,CAAgC,KAAKf,KAAL,CAAWH,MAA3C;AACA,SAAKJ,QAAL,CAAc;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAAd;AACD;;AAEDsB,EAAAA,MAAM,GAAG;AACP,UAAM;AAAErB,MAAAA,QAAF;AAAYD,MAAAA;AAAZ,QAA0B,KAAKM,KAArC;AACA,UAAM;AAAEW,MAAAA;AAAF,QAAmB,KAAKrB,KAA9B;AACA,QAAI2B,QAAQ,GAAG,EAAf;;AACA,QAAI,KAAK3B,KAAL,CAAW4B,OAAX,CAAmBC,OAAnB,KAA+B,KAAKnB,KAAL,CAAWI,WAA9C,EAA2D;AACzDa,MAAAA,QAAQ,GAAG,KAAK3B,KAAL,CAAWqB,YAAX,CAAwBS,MAAxB,CACRlC,OAAD,IACEA,OAAO,CAACmC,gBAAR,KAA6B,KAAK/B,KAAL,CAAW4B,OAAX,CAAmBG,gBAFzC,CAAX;AAID,KALD,MAKO;AACLJ,MAAAA,QAAQ,GAAGN,YAAX;AACD;;AACD,wBACE,oBAAC,WAAD,CAAa,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,CAAC;AAAEW,MAAAA;AAAF,KAAD,kBACC,oBAAC,GAAD;AACE,MAAA,IAAI,EAAEA,IADR;AAEE,MAAA,OAAO,EAAC,sBAFV;AAGE,MAAA,GAAG,EAAE,mBACH;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KAAKtB,KAAL,CAAWE,UAAX,gBACC,oBAAC,WAAD;AACE,QAAA,WAAW,EAAE,KAAKM,WADpB;AAEE,QAAA,WAAW,EAAE,KAAKR,KAAL,CAAWG,WAF1B;AAGE,QAAA,kBAAkB,EAAE,KAAKb,KAAL,CAAWiC,kBAHjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,GAOG,EARN,eAUE,oBAAC,OAAD;AAAS,QAAA,SAAS,EAAC,QAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAK,QAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,KAAD;AAAO,QAAA,SAAS,EAAC,2DAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAC,aAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,GAAD;AACE,QAAA,IAAI,EAAED,IADR;AAEE,QAAA,OAAO,EAAC,oCAFV;AAGE,QAAA,GAAG,EAAE,mBACH,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAEI,oBAAC,YAAD;AAAc,UAAA,EAAE,EAAC,0CAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ,CAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,eAYE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEI,oBAAC,YAAD;AAAc,QAAA,EAAE,EAAC,wCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CAZF,eAiBE,oBAAC,SAAD;AAAW,QAAA,KAAK,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACG,oBAAC,YAAD;AAAc,QAAA,EAAE,EAAC,eAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADH,CAjBF,eAoBE,oBAAC,SAAD;AAAW,QAAA,KAAK,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACG,oBAAC,YAAD;AAAc,QAAA,EAAE,EAAC,kBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADH,CApBF,eAuBE,oBAAC,SAAD;AAAW,QAAA,KAAK,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACG,oBAAC,YAAD;AAAc,QAAA,EAAE,EAAC,mBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADH,CAvBF,eA0BE,oBAAC,SAAD;AAAW,QAAA,KAAK,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG,KADH,CA1BF,eA6BE,oBAAC,SAAD;AAAW,QAAA,KAAK,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEI,oBAAC,YAAD;AAAc,QAAA,EAAE,EAAC,iCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,CA7BF,eAkCE,oBAAC,SAAD;AAAW,QAAA,KAAK,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,YAAD;AAAc,QAAA,EAAE,EAAC,kBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAlCF,CADF,CADF,eAyCE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGL,QAAQ,CAACO,GAAT,CAAa,CAACrB,WAAD,EAAcsB,KAAd,KAAwB;AACpC,4BACE,oBAAC,QAAD;AAAU,UAAA,GAAG,EAAEA,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,GAAD;AACE,UAAA,IAAI,EAAEH,IADR;AAEE,UAAA,OAAO,EAAC,oCAFV;AAGE,UAAA,GAAG,EAAE,MACH,KAAKhC,KAAL,CAAWiC,kBAAX,CAA8BC,GAA9B,CACE,CAACE,aAAD,EAAgBD,KAAhB,KAA0B;AACxB,gBACEC,aAAa,CAACb,EAAd,KACAV,WAAW,CAACkB,gBAFd,EAGE;AACA,kCACE,oBAAC,SAAD;AAAW,gBAAA,GAAG,EAAEI,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACGC,aAAa,CAACC,IADjB,CADF;AAKD,aATD,MASO;AACL,qBAAO,IAAP;AACD;AACF,WAdH,CAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,eAuBE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAYxB,WAAW,CAACwB,IAAxB,CAvBF,eAwBE,oBAAC,SAAD;AAAW,UAAA,KAAK,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGxB,WAAW,CAACyB,KADf,CAxBF,eA2BE,oBAAC,SAAD;AAAW,UAAA,KAAK,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGzB,WAAW,CAAC0B,QADf,CA3BF,eA8BE,oBAAC,SAAD;AAAW,UAAA,KAAK,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG1B,WAAW,CAAC2B,SADf,CA9BF,eAiCE,oBAAC,SAAD;AAAW,UAAA,KAAK,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG3B,WAAW,CAAC4B,GADf,CAjCF,eAoCE,oBAAC,SAAD;AAAW,UAAA,KAAK,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG5B,WAAW,CAAC6B,mBADf,CApCF,eAwCE,oBAAC,SAAD;AAAW,UAAA,KAAK,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACG7B,WAAW,CAAC8B,IADf,CAxCF,eA2CE,oBAAC,SAAD;AAAW,UAAA,KAAK,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE,oBAAC,UAAD;AACE,UAAA,OAAO,EAAE,KAAK1C,kBAAL,CAAwBe,IAAxB,CAA6B,IAA7B,CADX;AAEE,UAAA,KAAK,EAAEH,WAAW,CAACU,EAFrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAIE;AAAG,UAAA,SAAS,EAAC,qBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAJF,CADF,eAOE,oBAAC,IAAD;AACE,UAAA,EAAE,EAAC,WADL;AAEE,UAAA,QAAQ,EAAElB,QAFZ;AAGE,UAAA,IAAI,EAAED,SAHR;AAIE,UAAA,OAAO,EAAE,KAAKK,kBAAL,CAAwBO,IAAxB,CAA6B,IAA7B,CAJX;AAKE,UAAA,aAAa,EAAE;AACb4B,YAAAA,KAAK,EAAE;AACLC,cAAAA,KAAK,EAAE,GADF;AAELC,cAAAA,UAAU,EAAE,CAFP;AAGLC,cAAAA,aAAa,EAAE;AAHV;AADM,WALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAaE,oBAAC,QAAD;AACE,UAAA,OAAO,EAAE,KAAKhC,UADhB;AAEE,UAAA,KAAK,EAAEF,WAAW,CAACU,EAFrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAIG,oBAAC,YAAD;AAAc,UAAA,EAAE,EAAC,eAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAJH,CAbF,eAmBE,oBAAC,QAAD;AACE,UAAA,OAAO,EAAE,KAAKN,mBADhB;AAEE,UAAA,KAAK,EAAEJ,WAAW,CAACU,EAFrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAIG,oBAAC,YAAD;AAAc,UAAA,EAAE,EAAC,eAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAJH,CAnBF,CAPF,CA3CF,CADF;AAgFD,OAjFA,CADH,CAzCF,CADF,CADF,CAVF,CAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CADF;AAyJD;;AAtNuC;;AAyN1C,eAAe1B,WAAf","sourcesContent":["import React from 'react';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport CardBox from '../../../../../components/CardBox';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport EditService from './EditService';\nimport Can from '../../../../../can';\nimport { RoleContext } from '../../../../../Context';\nimport { element } from 'prop-types';\n\nclass ServiceList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      anchorEl: undefined,\n      menuState: false,\n      itemId: 0,\n      modifModal: false,\n      serviceItem: [],\n      roleIdAdmin: 2,\n    };\n    this.handleEdit = this.handleEdit.bind(this);\n    this.handleRequestDelete = this.handleRequestDelete.bind(this);\n    this.cancelModal = this.cancelModal.bind(this);\n  }\n  cancelModal() {\n    this.setState({ modifModal: false });\n  }\n\n  handleEdit(e) {\n    e.preventDefault();\n    const serviceItem = this.props.servicesList.find(\n      (element) => element.id === parseInt(this.state.itemId)\n    );\n    this.setState({\n      menuState: false,\n      serviceItem: serviceItem,\n      modifModal: true,\n    });\n  }\n\n  onOptionMenuSelect = (event) => {\n    this.setState({\n      menuState: true,\n      anchorEl: event.currentTarget,\n      itemId: event.currentTarget.value,\n    });\n  };\n\n  handleRequestClose = () => {\n    this.setState({ menuState: false });\n  };\n\n  handleRequestDelete(e) {\n    e.preventDefault();\n    this.props.requestDeleteService(this.state.itemId);\n    this.setState({ menuState: false });\n  }\n\n  render() {\n    const { anchorEl, menuState } = this.state;\n    const { servicesList } = this.props;\n    var Services = [];\n    if (this.props.profile.role_id === this.state.roleIdAdmin) {\n      Services = this.props.servicesList.filter(\n        (element) =>\n          element.establishment_id === this.props.profile.establishment_id\n      );\n    } else {\n      Services = servicesList;\n    }\n    return (\n      <RoleContext.Consumer>\n        {({ role }) => (\n          <Can\n            role={role}\n            perform=\"service-filter:visit\"\n            yes={() => (\n              <div className=\"row mb-md-3\">\n                {this.state.modifModal ? (\n                  <EditService\n                    cancelModal={this.cancelModal}\n                    serviceItem={this.state.serviceItem}\n                    establishmentsList={this.props.establishmentsList}\n                  />\n                ) : (\n                    ''\n                  )}\n                <CardBox styleName=\"col-12\">\n                  <div className=\"table-responsive-material\">\n                    <Table className=\"default-table table-unbordered table table-sm table-hover\">\n                      <TableHead className=\"th-border-b\">\n                        <TableRow>\n                          <Can\n                            role={role}\n                            perform=\"service-filter-establishment:visit\"\n                            yes={() => (\n                              <TableCell>\n                                {\n                                  <IntlMessages id=\"components.student.formadd.establishment\" />\n                                }\n                              </TableCell>\n                            )}\n                          />\n                          <TableCell>\n                            {\n                              <IntlMessages id=\"components.establishments.formadd.name\" />\n                            }\n                          </TableCell>\n                          <TableCell align=\"right\">\n                            {<IntlMessages id=\"service.price\" />}\n                          </TableCell>\n                          <TableCell align=\"right\">\n                            {<IntlMessages id=\"service.currency\" />}\n                          </TableCell>\n                          <TableCell align=\"right\">\n                            {<IntlMessages id=\"service.price_ttc\" />}\n                          </TableCell>\n                          <TableCell align=\"right\">\n                            {\"TVA\"}\n                          </TableCell>\n                          <TableCell align=\"right\">\n                            {\n                              <IntlMessages id=\"components.note.student.comment\" />\n                            }\n                          </TableCell>\n                          <TableCell align=\"right\">\n                            <IntlMessages id=\"stuppUser.action\" />\n                          </TableCell>\n                        </TableRow>\n                      </TableHead>\n                      <TableBody>\n                        {Services.map((serviceItem, index) => {\n                          return (\n                            <TableRow key={index}>\n                              <Can\n                                role={role}\n                                perform=\"service-filter-establishment:visit\"\n                                yes={() =>\n                                  this.props.establishmentsList.map(\n                                    (establishment, index) => {\n                                      if (\n                                        establishment.id ===\n                                        serviceItem.establishment_id\n                                      ) {\n                                        return (\n                                          <TableCell key={index}>\n                                            {establishment.name}\n                                          </TableCell>\n                                        );\n                                      } else {\n                                        return null;\n                                      }\n                                    }\n                                  )\n                                }\n                              />\n                              <TableCell>{serviceItem.name}</TableCell>\n                              <TableCell align=\"right\">\n                                {serviceItem.price}\n                              </TableCell>\n                              <TableCell align=\"right\">\n                                {serviceItem.currency}\n                              </TableCell>\n                              <TableCell align=\"right\">\n                                {serviceItem.price_ttc}\n                              </TableCell>\n                              <TableCell align=\"right\">\n                                {serviceItem.tva}\n                              </TableCell>\n                              <TableCell align=\"right\">\n                                {serviceItem.payment_periodicity}\n                              </TableCell>\n\n                              <TableCell align=\"right\">\n                                {serviceItem.note}\n                              </TableCell>\n                              <TableCell align=\"right\">\n                                <IconButton\n                                  onClick={this.onOptionMenuSelect.bind(this)}\n                                  value={serviceItem.id}\n                                >\n                                  <i className=\"zmdi zmdi-more-vert\" />\n                                </IconButton>\n                                <Menu\n                                  id=\"long-menu\"\n                                  anchorEl={anchorEl}\n                                  open={menuState}\n                                  onClose={this.handleRequestClose.bind(this)}\n                                  MenuListProps={{\n                                    style: {\n                                      width: 150,\n                                      paddingTop: 0,\n                                      paddingBottom: 0,\n                                    },\n                                  }}\n                                >\n                                  <MenuItem\n                                    onClick={this.handleEdit}\n                                    value={serviceItem.id}\n                                  >\n                                    {<IntlMessages id=\"button.modify\" />}\n                                  </MenuItem>\n                                  <MenuItem\n                                    onClick={this.handleRequestDelete}\n                                    value={serviceItem.id}\n                                  >\n                                    {<IntlMessages id=\"button.delete\" />}\n                                  </MenuItem>\n                                </Menu>\n                              </TableCell>\n                            </TableRow>\n                          );\n                        })}\n                      </TableBody>\n                    </Table>\n                  </div>\n                </CardBox>\n              </div>\n            )}\n          />\n        )}\n      </RoleContext.Consumer>\n    );\n  }\n}\n\nexport default ServiceList;\n"]},"metadata":{},"sourceType":"module"}