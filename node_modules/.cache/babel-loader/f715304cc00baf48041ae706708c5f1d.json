{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/containers/App.js\";\nimport React, { Component } from 'react';\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\nimport MomentUtils from '@date-io/moment';\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { IntlProvider } from 'react-intl';\nimport '../assets/vendors/style';\nimport greenTheme from './themes/greenTheme';\nimport indigoTheme from './themes/indigoTheme';\nimport cyanTheme from './themes/cyanTheme';\nimport orangeTheme from './themes/orangeTheme';\nimport amberTheme from './themes/amberTheme';\nimport pinkTheme from './themes/pinkTheme';\nimport blueTheme from './themes/blueTheme';\nimport purpleTheme from './themes/purpleTheme';\nimport darkTheme from './themes/darkTheme';\nimport AppLocale from '../lngProvider';\nimport { getUserProfile } from '../actions/Auth';\nimport { RoleContext } from '../Context';\nimport languageData from '../components/LanguageSwitcher/data';\nimport IntlMessages from '../util/IntlMessages';\nimport { roleIdAdmin } from '..//config/config';\nimport cst from '../config/config';\nimport axios from 'axios';\nimport '@material-ui/core/TextField';\nimport { AMBER, BLUE, CYAN, DARK_AMBER, DARK_BLUE, DARK_CYAN, DARK_DEEP_ORANGE, DARK_DEEP_PURPLE, DARK_GREEN, DARK_INDIGO, DARK_PINK, DEEP_ORANGE, DEEP_PURPLE, GREEN, INDIGO, PINK } from '../constants/ThemeColors';\nimport MainApp from '../app/index';\nimport SignIn from './SignIn';\nimport SignUp from './SignUp';\nimport { setInitUrl } from '../actions/Auth';\nimport RTL from '../util/RTL';\nimport asyncComponent from '../util/asyncComponent';\nimport { classService } from '../_services';\nimport { getEstablishmentsModules } from '../actions/Auth';\nimport { getClassesByEstablishmentId } from '../actions/classeAction';\n\nconst RestrictedRoute = ({\n  component: Component,\n  authUser,\n  ...rest\n}) => /*#__PURE__*/React.createElement(Route, Object.assign({}, rest, {\n  render: props => authUser ? /*#__PURE__*/React.createElement(Component, Object.assign({}, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  })) : /*#__PURE__*/React.createElement(Redirect, {\n    to: {\n      pathname: '/signin',\n      state: {\n        from: props.location\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }),\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 3\n  }\n}));\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: {\n        role: 'visitor'\n      },\n      accessToken: ''\n    };\n  }\n\n  componentWillMount() {\n    axios.get(`${cst.baseUrl}/establishments/${localStorage.establishment_id}?access_token=${localStorage.token}&filter[include][licence][licenceModule][module]=suBmodule` // `${cst.baseUrl}/establishments/${localStorage.establishment_id}?access_token=${localStorage.token}&filter[include][licence][licenceModule]=module`\n    ).then(res => {\n      this.props.getEstablishmentsModules(res.data.licence[0].licenceModule);\n    }).catch(error => {});\n    window.__MUI_USE_NEXT_TYPOGRAPHY_VARIANTS__ = true;\n\n    if (this.props.initURL === '') {\n      this.props.setInitUrl(this.props.history.location.pathname);\n    }\n  }\n\n  componentDidUpdate(previous) {\n    if (this.props.userProfile === previous.userProfile) {\n      this.props.getClassesByEstablishmentId(this.props.userProfile.establishment_id);\n    }\n\n    if (this.props.themeColor !== previous.themeColor) {\n      document.body.classList.add(this.props.themeColor);\n    }\n  }\n\n  getColorTheme(themeColor, applyTheme) {\n    switch (themeColor) {\n      case INDIGO:\n        {\n          applyTheme = createMuiTheme(indigoTheme);\n          break;\n        }\n\n      case CYAN:\n        {\n          applyTheme = createMuiTheme(cyanTheme);\n          break;\n        }\n\n      case AMBER:\n        {\n          applyTheme = createMuiTheme(amberTheme);\n          break;\n        }\n\n      case DEEP_ORANGE:\n        {\n          applyTheme = createMuiTheme(orangeTheme);\n          break;\n        }\n\n      case PINK:\n        {\n          applyTheme = createMuiTheme(pinkTheme);\n          break;\n        }\n\n      case BLUE:\n        {\n          applyTheme = createMuiTheme(blueTheme);\n          break;\n        }\n\n      case DEEP_PURPLE:\n        {\n          applyTheme = createMuiTheme(purpleTheme);\n          break;\n        }\n\n      case GREEN:\n        {\n          applyTheme = createMuiTheme(greenTheme);\n          break;\n        }\n\n      case DARK_INDIGO:\n        {\n          applyTheme = createMuiTheme(indigoTheme);\n          break;\n        }\n\n      case DARK_CYAN:\n        {\n          applyTheme = createMuiTheme(cyanTheme);\n          break;\n        }\n\n      case DARK_AMBER:\n        {\n          applyTheme = createMuiTheme(amberTheme);\n          break;\n        }\n\n      case DARK_DEEP_ORANGE:\n        {\n          applyTheme = createMuiTheme(orangeTheme);\n          break;\n        }\n\n      case DARK_PINK:\n        {\n          applyTheme = createMuiTheme(pinkTheme);\n          break;\n        }\n\n      case DARK_BLUE:\n        {\n          applyTheme = createMuiTheme(blueTheme);\n          break;\n        }\n\n      case DARK_DEEP_PURPLE:\n        {\n          applyTheme = createMuiTheme(purpleTheme);\n          break;\n        }\n\n      case DARK_GREEN:\n        {\n          applyTheme = createMuiTheme(greenTheme);\n          break;\n        }\n\n      default:\n        createMuiTheme(indigoTheme);\n    }\n\n    return applyTheme;\n  }\n\n  render() {\n    const {\n      match,\n      location,\n      locale,\n      authUser,\n      initURL,\n      isDirectionRTL,\n      isDarkTheme,\n      themeColor,\n      userProfile\n    } = this.props;\n    let applyTheme = createMuiTheme(indigoTheme);\n\n    if (isDarkTheme) {\n      document.body.classList.add('dark-theme');\n      applyTheme = createMuiTheme(darkTheme);\n    } else {\n      applyTheme = this.getColorTheme(themeColor, applyTheme);\n    }\n\n    if (location.pathname === '/') {\n      if (authUser === null) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: '/signin',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 16\n          }\n        });\n      } else if (initURL === '' || initURL === '/' || initURL === '/signin') {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: '/app/home',\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 16\n          }\n        });\n      } else {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: initURL,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 16\n          }\n        });\n      }\n    }\n\n    if (localStorage.appLang === 'tunisia' || isDirectionRTL) {\n      applyTheme.direction = 'rtl';\n      document.body.classList.add('rtl');\n    } else {\n      document.body.classList.remove('rtl');\n      applyTheme.direction = 'ltr';\n    }\n\n    let currentAppLocale = {};\n\n    if (locale.languageId) {\n      currentAppLocale = AppLocale[locale.locale];\n    } else {\n      var appLang = localStorage.getItem(appLang);\n      let data = getLanguage(localStorage.appLang);\n      currentAppLocale = AppLocale[data.locale];\n    }\n\n    const role = this.props.userProfile.role_id === 1 ? 'superadmin' : this.props.userProfile.role_id === 2 ? 'admin' : this.props.userProfile.role_id === 3 ? 'professor' : this.props.userProfile.role_id === 4 ? 'parent' : this.props.userProfile.role_id === 5 ? 'student' : this.props.userProfile.role_id === 6 ? 'supervisor' : this.props.userProfile.role_id === 7 ? 'director' : '';\n    const contextValue = {\n      role: role,\n      roleId: this.props.userProfile.role_id // store all the user details\n\n    };\n    return /*#__PURE__*/React.createElement(RoleContext.Provider, {\n      value: contextValue,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(MuiThemeProvider, {\n      theme: applyTheme,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(MuiPickersUtilsProvider, {\n      utils: MomentUtils,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IntlProvider, {\n      locale: currentAppLocale.locale,\n      messages: currentAppLocale.messages,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(RTL, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Switch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(RestrictedRoute, {\n      path: `${match.url}app`,\n      authUser: authUser,\n      component: MainApp,\n      themeColor: themeColor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/signin\",\n      component: SignIn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"/signup\",\n      component: SignUp,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      component: asyncComponent(() => import('../components/Error404')),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 21\n      }\n    }))))))));\n  }\n\n}\n\nconst mapStateToProps = ({\n  settings,\n  auth,\n  establishment\n}) => {\n  const {\n    themeColor,\n    sideNavColor,\n    darkTheme,\n    locale,\n    isDirectionRTL\n  } = settings;\n  const {\n    authUser,\n    initURL,\n    userProfile\n  } = auth;\n  const {\n    estabModule\n  } = establishment;\n  return {\n    themeColor,\n    sideNavColor,\n    isDarkTheme: darkTheme,\n    locale,\n    isDirectionRTL,\n    authUser,\n    initURL,\n    userProfile,\n    estabModule\n  };\n};\n\nfunction getLanguage(appLang) {\n  switch (appLang) {\n    case 'french':\n      return {\n        languageId: 'french',\n        locale: 'fr',\n        name: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"languageData.french\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 15\n          }\n        }),\n        icon: 'fr'\n      };\n\n    case 'english':\n      return {\n        languageId: 'english',\n        locale: 'en',\n        name: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"languageData.english\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 15\n          }\n        }),\n        icon: 'us'\n      };\n\n    case 'tunisia':\n      return {\n        languageId: 'tunisia',\n        locale: 'ar',\n        name: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"languageData.arabic\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 15\n          }\n        }),\n        icon: 'tn'\n      };\n\n    default:\n      return {\n        languageId: 'french',\n        locale: 'fr',\n        name: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"languageData.french\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 15\n          }\n        }),\n        icon: 'fr'\n      };\n  }\n}\n\nexport default connect(mapStateToProps, {\n  setInitUrl,\n  getUserProfile,\n  getEstablishmentsModules,\n  getClassesByEstablishmentId\n})(App);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/containers/App.js"],"names":["React","Component","createMuiTheme","MuiThemeProvider","MomentUtils","MuiPickersUtilsProvider","Redirect","Route","Switch","connect","IntlProvider","greenTheme","indigoTheme","cyanTheme","orangeTheme","amberTheme","pinkTheme","blueTheme","purpleTheme","darkTheme","AppLocale","getUserProfile","RoleContext","languageData","IntlMessages","roleIdAdmin","cst","axios","AMBER","BLUE","CYAN","DARK_AMBER","DARK_BLUE","DARK_CYAN","DARK_DEEP_ORANGE","DARK_DEEP_PURPLE","DARK_GREEN","DARK_INDIGO","DARK_PINK","DEEP_ORANGE","DEEP_PURPLE","GREEN","INDIGO","PINK","MainApp","SignIn","SignUp","setInitUrl","RTL","asyncComponent","classService","getEstablishmentsModules","getClassesByEstablishmentId","RestrictedRoute","component","authUser","rest","props","pathname","state","from","location","App","user","role","accessToken","componentWillMount","get","baseUrl","localStorage","establishment_id","token","then","res","data","licence","licenceModule","catch","error","window","__MUI_USE_NEXT_TYPOGRAPHY_VARIANTS__","initURL","history","componentDidUpdate","previous","userProfile","themeColor","document","body","classList","add","getColorTheme","applyTheme","render","match","locale","isDirectionRTL","isDarkTheme","appLang","direction","remove","currentAppLocale","languageId","getItem","getLanguage","role_id","contextValue","roleId","messages","url","mapStateToProps","settings","auth","establishment","sideNavColor","estabModule","name","icon"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,cAAT,EAAyBC,gBAAzB,QAAiD,0BAAjD;AACA,OAAOC,WAAP,MAAwB,iBAAxB;AACA,SAASC,uBAAT,QAAwC,sBAAxC;AACA,SAASC,QAAT,EAAmBC,KAAnB,EAA0BC,MAA1B,QAAwC,kBAAxC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,YAAT,QAA6B,YAA7B;AACA,OAAO,yBAAP;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,OAAOC,WAAP,MAAwB,sBAAxB;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,OAAOC,SAAP,MAAsB,gBAAtB;AACA,SAASC,cAAT,QAA+B,iBAA/B;AACA,SAASC,WAAT,QAA4B,YAA5B;AACA,OAAOC,YAAP,MAAyB,qCAAzB;AACA,OAAOC,YAAP,MAAyB,sBAAzB;AACA,SAASC,WAAT,QAA4B,mBAA5B;AACA,OAAOC,GAAP,MAAgB,kBAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,6BAAP;AACA,SACEC,KADF,EAEEC,IAFF,EAGEC,IAHF,EAIEC,UAJF,EAKEC,SALF,EAMEC,SANF,EAOEC,gBAPF,EAQEC,gBARF,EASEC,UATF,EAUEC,WAVF,EAWEC,SAXF,EAYEC,WAZF,EAaEC,WAbF,EAcEC,KAdF,EAeEC,MAfF,EAgBEC,IAhBF,QAiBO,0BAjBP;AAmBA,OAAOC,OAAP,MAAoB,cAApB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,UAAT,QAA2B,iBAA3B;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,cAAP,MAA2B,wBAA3B;AACA,SAASC,YAAT,QAA6B,cAA7B;AACA,SAASC,wBAAT,QAAyC,iBAAzC;AACA,SAASC,2BAAT,QAA4C,yBAA5C;;AAEA,MAAMC,eAAe,GAAG,CAAC;AAAEC,EAAAA,SAAS,EAAErD,SAAb;AAAwBsD,EAAAA,QAAxB;AAAkC,KAAGC;AAArC,CAAD,kBACtB,oBAAC,KAAD,oBACMA,IADN;AAEE,EAAA,MAAM,EAAGC,KAAD,IACNF,QAAQ,gBACN,oBAAC,SAAD,oBAAeE,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KADM,gBAGN,oBAAC,QAAD;AACE,IAAA,EAAE,EAAE;AACFC,MAAAA,QAAQ,EAAE,SADR;AAEFC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,IAAI,EAAEH,KAAK,CAACI;AAAd;AAFL,KADN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GADF;;AAkBA,MAAMC,GAAN,SAAkB7D,SAAlB,CAA4B;AAAA;AAAA;AAAA,SAC1B0D,KAD0B,GAClB;AACNI,MAAAA,IAAI,EAAE;AACJC,QAAAA,IAAI,EAAE;AADF,OADA;AAINC,MAAAA,WAAW,EAAE;AAJP,KADkB;AAAA;;AAQ1BC,EAAAA,kBAAkB,GAAG;AACnBvC,IAAAA,KAAK,CACFwC,GADH,CAEK,GAAEzC,GAAG,CAAC0C,OAAQ,mBAAkBC,YAAY,CAACC,gBAAiB,iBAAgBD,YAAY,CAACE,KAAM,4DAFtG,CAGI;AAHJ,MAKGC,IALH,CAKSC,GAAD,IAAS;AACb,WAAKhB,KAAL,CAAWN,wBAAX,CAAoCsB,GAAG,CAACC,IAAJ,CAASC,OAAT,CAAiB,CAAjB,EAAoBC,aAAxD;AACD,KAPH,EAQGC,KARH,CAQUC,KAAD,IAAW,CAAE,CARtB;AASAC,IAAAA,MAAM,CAACC,oCAAP,GAA8C,IAA9C;;AACA,QAAI,KAAKvB,KAAL,CAAWwB,OAAX,KAAuB,EAA3B,EAA+B;AAC7B,WAAKxB,KAAL,CAAWV,UAAX,CAAsB,KAAKU,KAAL,CAAWyB,OAAX,CAAmBrB,QAAnB,CAA4BH,QAAlD;AACD;AACF;;AAEDyB,EAAAA,kBAAkB,CAACC,QAAD,EAAW;AAC3B,QAAI,KAAK3B,KAAL,CAAW4B,WAAX,KAA2BD,QAAQ,CAACC,WAAxC,EAAqD;AACnD,WAAK5B,KAAL,CAAWL,2BAAX,CAAuC,KAAKK,KAAL,CAAW4B,WAAX,CAAuBf,gBAA9D;AACD;;AAED,QAAI,KAAKb,KAAL,CAAW6B,UAAX,KAA0BF,QAAQ,CAACE,UAAvC,EAAmD;AACjDC,MAAAA,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B,KAAKjC,KAAL,CAAW6B,UAAvC;AACD;AACF;;AAEDK,EAAAA,aAAa,CAACL,UAAD,EAAaM,UAAb,EAAyB;AACpC,YAAQN,UAAR;AACE,WAAK5C,MAAL;AAAa;AACXkD,UAAAA,UAAU,GAAG1F,cAAc,CAACU,WAAD,CAA3B;AACA;AACD;;AACD,WAAKkB,IAAL;AAAW;AACT8D,UAAAA,UAAU,GAAG1F,cAAc,CAACW,SAAD,CAA3B;AACA;AACD;;AACD,WAAKe,KAAL;AAAY;AACVgE,UAAAA,UAAU,GAAG1F,cAAc,CAACa,UAAD,CAA3B;AACA;AACD;;AACD,WAAKwB,WAAL;AAAkB;AAChBqD,UAAAA,UAAU,GAAG1F,cAAc,CAACY,WAAD,CAA3B;AACA;AACD;;AACD,WAAK6B,IAAL;AAAW;AACTiD,UAAAA,UAAU,GAAG1F,cAAc,CAACc,SAAD,CAA3B;AACA;AACD;;AACD,WAAKa,IAAL;AAAW;AACT+D,UAAAA,UAAU,GAAG1F,cAAc,CAACe,SAAD,CAA3B;AACA;AACD;;AACD,WAAKuB,WAAL;AAAkB;AAChBoD,UAAAA,UAAU,GAAG1F,cAAc,CAACgB,WAAD,CAA3B;AACA;AACD;;AACD,WAAKuB,KAAL;AAAY;AACVmD,UAAAA,UAAU,GAAG1F,cAAc,CAACS,UAAD,CAA3B;AACA;AACD;;AACD,WAAK0B,WAAL;AAAkB;AAChBuD,UAAAA,UAAU,GAAG1F,cAAc,CAACU,WAAD,CAA3B;AACA;AACD;;AACD,WAAKqB,SAAL;AAAgB;AACd2D,UAAAA,UAAU,GAAG1F,cAAc,CAACW,SAAD,CAA3B;AACA;AACD;;AACD,WAAKkB,UAAL;AAAiB;AACf6D,UAAAA,UAAU,GAAG1F,cAAc,CAACa,UAAD,CAA3B;AACA;AACD;;AACD,WAAKmB,gBAAL;AAAuB;AACrB0D,UAAAA,UAAU,GAAG1F,cAAc,CAACY,WAAD,CAA3B;AACA;AACD;;AACD,WAAKwB,SAAL;AAAgB;AACdsD,UAAAA,UAAU,GAAG1F,cAAc,CAACc,SAAD,CAA3B;AACA;AACD;;AACD,WAAKgB,SAAL;AAAgB;AACd4D,UAAAA,UAAU,GAAG1F,cAAc,CAACe,SAAD,CAA3B;AACA;AACD;;AACD,WAAKkB,gBAAL;AAAuB;AACrByD,UAAAA,UAAU,GAAG1F,cAAc,CAACgB,WAAD,CAA3B;AACA;AACD;;AACD,WAAKkB,UAAL;AAAiB;AACfwD,UAAAA,UAAU,GAAG1F,cAAc,CAACS,UAAD,CAA3B;AACA;AACD;;AACD;AACET,QAAAA,cAAc,CAACU,WAAD,CAAd;AAlEJ;;AAoEA,WAAOgF,UAAP;AACD;;AAEDC,EAAAA,MAAM,GAAG;AACP,UAAM;AACJC,MAAAA,KADI;AAEJjC,MAAAA,QAFI;AAGJkC,MAAAA,MAHI;AAIJxC,MAAAA,QAJI;AAKJ0B,MAAAA,OALI;AAMJe,MAAAA,cANI;AAOJC,MAAAA,WAPI;AAQJX,MAAAA,UARI;AASJD,MAAAA;AATI,QAUF,KAAK5B,KAVT;AAYA,QAAImC,UAAU,GAAG1F,cAAc,CAACU,WAAD,CAA/B;;AACA,QAAIqF,WAAJ,EAAiB;AACfV,MAAAA,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B,YAA5B;AACAE,MAAAA,UAAU,GAAG1F,cAAc,CAACiB,SAAD,CAA3B;AACD,KAHD,MAGO;AACLyE,MAAAA,UAAU,GAAG,KAAKD,aAAL,CAAmBL,UAAnB,EAA+BM,UAA/B,CAAb;AACD;;AAED,QAAI/B,QAAQ,CAACH,QAAT,KAAsB,GAA1B,EAA+B;AAC7B,UAAIH,QAAQ,KAAK,IAAjB,EAAuB;AACrB,4BAAO,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAE,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,OAFD,MAEO,IAAI0B,OAAO,KAAK,EAAZ,IAAkBA,OAAO,KAAK,GAA9B,IAAqCA,OAAO,KAAK,SAArD,EAAgE;AACrE,4BAAO,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAE,WAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD,OAFM,MAEA;AACL,4BAAO,oBAAC,QAAD;AAAU,UAAA,EAAE,EAAEA,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;AACF;;AAED,QAAIZ,YAAY,CAAC6B,OAAb,KAAyB,SAAzB,IAAsCF,cAA1C,EAA0D;AACxDJ,MAAAA,UAAU,CAACO,SAAX,GAAuB,KAAvB;AACAZ,MAAAA,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B,KAA5B;AACD,KAHD,MAGO;AACLH,MAAAA,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBW,MAAxB,CAA+B,KAA/B;AACAR,MAAAA,UAAU,CAACO,SAAX,GAAuB,KAAvB;AACD;;AAED,QAAIE,gBAAgB,GAAG,EAAvB;;AACA,QAAIN,MAAM,CAACO,UAAX,EAAuB;AACrBD,MAAAA,gBAAgB,GAAGjF,SAAS,CAAC2E,MAAM,CAACA,MAAR,CAA5B;AACD,KAFD,MAEO;AACL,UAAIG,OAAO,GAAG7B,YAAY,CAACkC,OAAb,CAAqBL,OAArB,CAAd;AACA,UAAIxB,IAAI,GAAG8B,WAAW,CAACnC,YAAY,CAAC6B,OAAd,CAAtB;AACAG,MAAAA,gBAAgB,GAAGjF,SAAS,CAACsD,IAAI,CAACqB,MAAN,CAA5B;AACD;;AACD,UAAM/B,IAAI,GACR,KAAKP,KAAL,CAAW4B,WAAX,CAAuBoB,OAAvB,KAAmC,CAAnC,GACI,YADJ,GAEI,KAAKhD,KAAL,CAAW4B,WAAX,CAAuBoB,OAAvB,KAAmC,CAAnC,GACA,OADA,GAEA,KAAKhD,KAAL,CAAW4B,WAAX,CAAuBoB,OAAvB,KAAmC,CAAnC,GACA,WADA,GAEA,KAAKhD,KAAL,CAAW4B,WAAX,CAAuBoB,OAAvB,KAAmC,CAAnC,GACA,QADA,GAEA,KAAKhD,KAAL,CAAW4B,WAAX,CAAuBoB,OAAvB,KAAmC,CAAnC,GACA,SADA,GAEA,KAAKhD,KAAL,CAAW4B,WAAX,CAAuBoB,OAAvB,KAAmC,CAAnC,GACA,YADA,GAEA,KAAKhD,KAAL,CAAW4B,WAAX,CAAuBoB,OAAvB,KAAmC,CAAnC,GACA,UADA,GAEA,EAfN;AAiBA,UAAMC,YAAY,GAAG;AACnB1C,MAAAA,IAAI,EAAEA,IADa;AAEnB2C,MAAAA,MAAM,EAAE,KAAKlD,KAAL,CAAW4B,WAAX,CAAuBoB,OAFZ,CAGnB;;AAHmB,KAArB;AAMA,wBACE,oBAAC,WAAD,CAAa,QAAb;AAAsB,MAAA,KAAK,EAAEC,YAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,gBAAD;AAAkB,MAAA,KAAK,EAAEd,UAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,uBAAD;AAAyB,MAAA,KAAK,EAAExF,WAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,YAAD;AAAc,MAAA,MAAM,EAAEiG,gBAAgB,CAACN,MAAvC;AAA+C,MAAA,QAAQ,EAAEM,gBAAgB,CAACO,QAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,eAAD;AACE,MAAA,IAAI,EAAG,GAAEd,KAAK,CAACe,GAAI,KADrB;AAEE,MAAA,QAAQ,EAAEtD,QAFZ;AAGE,MAAA,SAAS,EAAEX,OAHb;AAIE,MAAA,UAAU,EAAE0C,UAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAOE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,SAAZ;AAAsB,MAAA,SAAS,EAAEzC,MAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPF,eAQE,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,SAAZ;AAAsB,MAAA,SAAS,EAAEC,MAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARF,eASE,oBAAC,KAAD;AAAO,MAAA,SAAS,EAAEG,cAAc,CAAC,MAAM,OAAO,wBAAP,CAAP,CAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATF,CADF,CADF,CADF,CADF,CADF,CADF,CADF;AAyBD;;AAzMyB;;AA4M5B,MAAM6D,eAAe,GAAG,CAAC;AAAEC,EAAAA,QAAF;AAAYC,EAAAA,IAAZ;AAAkBC,EAAAA;AAAlB,CAAD,KAAuC;AAC7D,QAAM;AAAE3B,IAAAA,UAAF;AAAc4B,IAAAA,YAAd;AAA4B/F,IAAAA,SAA5B;AAAuC4E,IAAAA,MAAvC;AAA+CC,IAAAA;AAA/C,MAAkEe,QAAxE;AACA,QAAM;AAAExD,IAAAA,QAAF;AAAY0B,IAAAA,OAAZ;AAAqBI,IAAAA;AAArB,MAAqC2B,IAA3C;AACA,QAAM;AAAEG,IAAAA;AAAF,MAAkBF,aAAxB;AAEA,SAAO;AACL3B,IAAAA,UADK;AAEL4B,IAAAA,YAFK;AAGLjB,IAAAA,WAAW,EAAE9E,SAHR;AAIL4E,IAAAA,MAJK;AAKLC,IAAAA,cALK;AAMLzC,IAAAA,QANK;AAOL0B,IAAAA,OAPK;AAQLI,IAAAA,WARK;AASL8B,IAAAA;AATK,GAAP;AAWD,CAhBD;;AAkBA,SAASX,WAAT,CAAqBN,OAArB,EAA8B;AAC5B,UAAQA,OAAR;AACE,SAAK,QAAL;AACE,aAAO;AACLI,QAAAA,UAAU,EAAE,QADP;AAELP,QAAAA,MAAM,EAAE,IAFH;AAGLqB,QAAAA,IAAI,eAAE,oBAAC,YAAD;AAAc,UAAA,EAAE,EAAC,qBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHD;AAILC,QAAAA,IAAI,EAAE;AAJD,OAAP;;AAMF,SAAK,SAAL;AACE,aAAO;AACLf,QAAAA,UAAU,EAAE,SADP;AAELP,QAAAA,MAAM,EAAE,IAFH;AAGLqB,QAAAA,IAAI,eAAE,oBAAC,YAAD;AAAc,UAAA,EAAE,EAAC,sBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHD;AAILC,QAAAA,IAAI,EAAE;AAJD,OAAP;;AAMF,SAAK,SAAL;AACE,aAAO;AACLf,QAAAA,UAAU,EAAE,SADP;AAELP,QAAAA,MAAM,EAAE,IAFH;AAGLqB,QAAAA,IAAI,eAAE,oBAAC,YAAD;AAAc,UAAA,EAAE,EAAC,qBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHD;AAILC,QAAAA,IAAI,EAAE;AAJD,OAAP;;AAMF;AACE,aAAO;AACLf,QAAAA,UAAU,EAAE,QADP;AAELP,QAAAA,MAAM,EAAE,IAFH;AAGLqB,QAAAA,IAAI,eAAE,oBAAC,YAAD;AAAc,UAAA,EAAE,EAAC,qBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAHD;AAILC,QAAAA,IAAI,EAAE;AAJD,OAAP;AAvBJ;AA8BD;;AACD,eAAe5G,OAAO,CAACqG,eAAD,EAAkB;AACtC/D,EAAAA,UADsC;AAEtC1B,EAAAA,cAFsC;AAGtC8B,EAAAA,wBAHsC;AAItCC,EAAAA;AAJsC,CAAlB,CAAP,CAKZU,GALY,CAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\r\nimport MomentUtils from '@date-io/moment';\r\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport { Redirect, Route, Switch } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { IntlProvider } from 'react-intl';\r\nimport '../assets/vendors/style';\r\nimport greenTheme from './themes/greenTheme';\r\nimport indigoTheme from './themes/indigoTheme';\r\nimport cyanTheme from './themes/cyanTheme';\r\nimport orangeTheme from './themes/orangeTheme';\r\nimport amberTheme from './themes/amberTheme';\r\nimport pinkTheme from './themes/pinkTheme';\r\nimport blueTheme from './themes/blueTheme';\r\nimport purpleTheme from './themes/purpleTheme';\r\nimport darkTheme from './themes/darkTheme';\r\nimport AppLocale from '../lngProvider';\r\nimport { getUserProfile } from '../actions/Auth';\r\nimport { RoleContext } from '../Context';\r\nimport languageData from '../components/LanguageSwitcher/data';\r\nimport IntlMessages from '../util/IntlMessages';\r\nimport { roleIdAdmin } from '..//config/config';\r\nimport cst from '../config/config';\r\nimport axios from 'axios';\r\n\r\nimport '@material-ui/core/TextField';\r\nimport {\r\n  AMBER,\r\n  BLUE,\r\n  CYAN,\r\n  DARK_AMBER,\r\n  DARK_BLUE,\r\n  DARK_CYAN,\r\n  DARK_DEEP_ORANGE,\r\n  DARK_DEEP_PURPLE,\r\n  DARK_GREEN,\r\n  DARK_INDIGO,\r\n  DARK_PINK,\r\n  DEEP_ORANGE,\r\n  DEEP_PURPLE,\r\n  GREEN,\r\n  INDIGO,\r\n  PINK,\r\n} from '../constants/ThemeColors';\r\n\r\nimport MainApp from '../app/index';\r\nimport SignIn from './SignIn';\r\nimport SignUp from './SignUp';\r\nimport { setInitUrl } from '../actions/Auth';\r\nimport RTL from '../util/RTL';\r\nimport asyncComponent from '../util/asyncComponent';\r\nimport { classService } from '../_services';\r\nimport { getEstablishmentsModules } from '../actions/Auth';\r\nimport { getClassesByEstablishmentId } from '../actions/classeAction';\r\n\r\nconst RestrictedRoute = ({ component: Component, authUser, ...rest }) => (\r\n  <Route\r\n    {...rest}\r\n    render={(props) =>\r\n      authUser ? (\r\n        <Component {...props} />\r\n      ) : (\r\n        <Redirect\r\n          to={{\r\n            pathname: '/signin',\r\n            state: { from: props.location },\r\n          }}\r\n        />\r\n      )\r\n    }\r\n  />\r\n);\r\n\r\nclass App extends Component {\r\n  state = {\r\n    user: {\r\n      role: 'visitor',\r\n    },\r\n    accessToken: '',\r\n  };\r\n\r\n  componentWillMount() {\r\n    axios\r\n      .get(\r\n        `${cst.baseUrl}/establishments/${localStorage.establishment_id}?access_token=${localStorage.token}&filter[include][licence][licenceModule][module]=suBmodule`\r\n        // `${cst.baseUrl}/establishments/${localStorage.establishment_id}?access_token=${localStorage.token}&filter[include][licence][licenceModule]=module`\r\n      )\r\n      .then((res) => {\r\n        this.props.getEstablishmentsModules(res.data.licence[0].licenceModule);\r\n      })\r\n      .catch((error) => {});\r\n    window.__MUI_USE_NEXT_TYPOGRAPHY_VARIANTS__ = true;\r\n    if (this.props.initURL === '') {\r\n      this.props.setInitUrl(this.props.history.location.pathname);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(previous) {\r\n    if (this.props.userProfile === previous.userProfile) {\r\n      this.props.getClassesByEstablishmentId(this.props.userProfile.establishment_id);\r\n    }\r\n\r\n    if (this.props.themeColor !== previous.themeColor) {\r\n      document.body.classList.add(this.props.themeColor);\r\n    }\r\n  }\r\n\r\n  getColorTheme(themeColor, applyTheme) {\r\n    switch (themeColor) {\r\n      case INDIGO: {\r\n        applyTheme = createMuiTheme(indigoTheme);\r\n        break;\r\n      }\r\n      case CYAN: {\r\n        applyTheme = createMuiTheme(cyanTheme);\r\n        break;\r\n      }\r\n      case AMBER: {\r\n        applyTheme = createMuiTheme(amberTheme);\r\n        break;\r\n      }\r\n      case DEEP_ORANGE: {\r\n        applyTheme = createMuiTheme(orangeTheme);\r\n        break;\r\n      }\r\n      case PINK: {\r\n        applyTheme = createMuiTheme(pinkTheme);\r\n        break;\r\n      }\r\n      case BLUE: {\r\n        applyTheme = createMuiTheme(blueTheme);\r\n        break;\r\n      }\r\n      case DEEP_PURPLE: {\r\n        applyTheme = createMuiTheme(purpleTheme);\r\n        break;\r\n      }\r\n      case GREEN: {\r\n        applyTheme = createMuiTheme(greenTheme);\r\n        break;\r\n      }\r\n      case DARK_INDIGO: {\r\n        applyTheme = createMuiTheme(indigoTheme);\r\n        break;\r\n      }\r\n      case DARK_CYAN: {\r\n        applyTheme = createMuiTheme(cyanTheme);\r\n        break;\r\n      }\r\n      case DARK_AMBER: {\r\n        applyTheme = createMuiTheme(amberTheme);\r\n        break;\r\n      }\r\n      case DARK_DEEP_ORANGE: {\r\n        applyTheme = createMuiTheme(orangeTheme);\r\n        break;\r\n      }\r\n      case DARK_PINK: {\r\n        applyTheme = createMuiTheme(pinkTheme);\r\n        break;\r\n      }\r\n      case DARK_BLUE: {\r\n        applyTheme = createMuiTheme(blueTheme);\r\n        break;\r\n      }\r\n      case DARK_DEEP_PURPLE: {\r\n        applyTheme = createMuiTheme(purpleTheme);\r\n        break;\r\n      }\r\n      case DARK_GREEN: {\r\n        applyTheme = createMuiTheme(greenTheme);\r\n        break;\r\n      }\r\n      default:\r\n        createMuiTheme(indigoTheme);\r\n    }\r\n    return applyTheme;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      match,\r\n      location,\r\n      locale,\r\n      authUser,\r\n      initURL,\r\n      isDirectionRTL,\r\n      isDarkTheme,\r\n      themeColor,\r\n      userProfile,\r\n    } = this.props;\r\n\r\n    let applyTheme = createMuiTheme(indigoTheme);\r\n    if (isDarkTheme) {\r\n      document.body.classList.add('dark-theme');\r\n      applyTheme = createMuiTheme(darkTheme);\r\n    } else {\r\n      applyTheme = this.getColorTheme(themeColor, applyTheme);\r\n    }\r\n\r\n    if (location.pathname === '/') {\r\n      if (authUser === null) {\r\n        return <Redirect to={'/signin'} />;\r\n      } else if (initURL === '' || initURL === '/' || initURL === '/signin') {\r\n        return <Redirect to={'/app/home'} />;\r\n      } else {\r\n        return <Redirect to={initURL} />;\r\n      }\r\n    }\r\n\r\n    if (localStorage.appLang === 'tunisia' || isDirectionRTL) {\r\n      applyTheme.direction = 'rtl';\r\n      document.body.classList.add('rtl');\r\n    } else {\r\n      document.body.classList.remove('rtl');\r\n      applyTheme.direction = 'ltr';\r\n    }\r\n\r\n    let currentAppLocale = {};\r\n    if (locale.languageId) {\r\n      currentAppLocale = AppLocale[locale.locale];\r\n    } else {\r\n      var appLang = localStorage.getItem(appLang);\r\n      let data = getLanguage(localStorage.appLang);\r\n      currentAppLocale = AppLocale[data.locale];\r\n    }\r\n    const role =\r\n      this.props.userProfile.role_id === 1\r\n        ? 'superadmin'\r\n        : this.props.userProfile.role_id === 2\r\n        ? 'admin'\r\n        : this.props.userProfile.role_id === 3\r\n        ? 'professor'\r\n        : this.props.userProfile.role_id === 4\r\n        ? 'parent'\r\n        : this.props.userProfile.role_id === 5\r\n        ? 'student'\r\n        : this.props.userProfile.role_id === 6\r\n        ? 'supervisor'\r\n        : this.props.userProfile.role_id === 7\r\n        ? 'director'\r\n        : '';\r\n\r\n    const contextValue = {\r\n      role: role,\r\n      roleId: this.props.userProfile.role_id,\r\n      // store all the user details\r\n    };\r\n\r\n    return (\r\n      <RoleContext.Provider value={contextValue}>\r\n        <MuiThemeProvider theme={applyTheme}>\r\n          <MuiPickersUtilsProvider utils={MomentUtils}>\r\n            <IntlProvider locale={currentAppLocale.locale} messages={currentAppLocale.messages}>\r\n              <RTL>\r\n                <div className=\"app-main\">\r\n                  <Switch>\r\n                    <RestrictedRoute\r\n                      path={`${match.url}app`}\r\n                      authUser={authUser}\r\n                      component={MainApp}\r\n                      themeColor={themeColor}\r\n                    />\r\n                    <Route path=\"/signin\" component={SignIn} />\r\n                    <Route path=\"/signup\" component={SignUp} />\r\n                    <Route component={asyncComponent(() => import('../components/Error404'))} />\r\n                  </Switch>\r\n                </div>\r\n              </RTL>\r\n            </IntlProvider>\r\n          </MuiPickersUtilsProvider>\r\n        </MuiThemeProvider>\r\n      </RoleContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ settings, auth, establishment }) => {\r\n  const { themeColor, sideNavColor, darkTheme, locale, isDirectionRTL } = settings;\r\n  const { authUser, initURL, userProfile } = auth;\r\n  const { estabModule } = establishment;\r\n\r\n  return {\r\n    themeColor,\r\n    sideNavColor,\r\n    isDarkTheme: darkTheme,\r\n    locale,\r\n    isDirectionRTL,\r\n    authUser,\r\n    initURL,\r\n    userProfile,\r\n    estabModule,\r\n  };\r\n};\r\n\r\nfunction getLanguage(appLang) {\r\n  switch (appLang) {\r\n    case 'french':\r\n      return {\r\n        languageId: 'french',\r\n        locale: 'fr',\r\n        name: <IntlMessages id=\"languageData.french\" />,\r\n        icon: 'fr',\r\n      };\r\n    case 'english':\r\n      return {\r\n        languageId: 'english',\r\n        locale: 'en',\r\n        name: <IntlMessages id=\"languageData.english\" />,\r\n        icon: 'us',\r\n      };\r\n    case 'tunisia':\r\n      return {\r\n        languageId: 'tunisia',\r\n        locale: 'ar',\r\n        name: <IntlMessages id=\"languageData.arabic\" />,\r\n        icon: 'tn',\r\n      };\r\n    default:\r\n      return {\r\n        languageId: 'french',\r\n        locale: 'fr',\r\n        name: <IntlMessages id=\"languageData.french\" />,\r\n        icon: 'fr',\r\n      };\r\n  }\r\n}\r\nexport default connect(mapStateToProps, {\r\n  setInitUrl,\r\n  getUserProfile,\r\n  getEstablishmentsModules,\r\n  getClassesByEstablishmentId,\r\n})(App);\r\n"]},"metadata":{},"sourceType":"module"}