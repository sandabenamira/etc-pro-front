{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/PermissionSetting/PermissionSetting.js\";\nimport React, { Component } from 'react';\nimport PermissionList from './PermissionList';\nimport { getEducationType } from '../../../../../actions/estabTypeAction';\nimport { connect } from 'react-redux';\nimport { getPermissionSetting } from '../../../../../actions/PermissionAction';\nimport { UncontrolledAlert } from 'reactstrap';\nimport _ from 'lodash';\nimport SweetAlert from 'react-bootstrap-sweetalert';\nimport IntlMessages from '../../../../../util/IntlMessages';\nexport class PermissionSetting extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n      console.log(event.target.value, 'event.target.value ');\n\n      if (name == 'moduleId') {\n        if (event.target.value > 0) {\n          let moduleChecked = _.find(this.props.estabModule, {\n            fk_id_module: event.target.value\n          });\n\n          this.setState({\n            subModuleList: moduleChecked.module.suBmodule\n          });\n        } else {\n          this.setState({\n            subModuleList: [],\n            subModuleId: '',\n            listPermissions: this.props.permissionSetting\n          });\n        }\n      } else {\n        let listPermissions = this.props.permissionSetting.filter(element => element.subModuleId == event.target.value);\n        this.setState({\n          listPermissions\n        });\n      }\n    };\n\n    this.state = {\n      moduleId: '',\n      subModuleList: [],\n      subModuleId: '',\n      listPermissions: []\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.dispatch(getPermissionSetting(this.props.userProfile.establishment_id));\n    this.setState({\n      listPermissions: this.props.permissionSetting\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.permissionSetting !== this.props.permissionSetting) {\n      this.setState({\n        listPermissions: this.props.permissionSetting\n      });\n    }\n  }\n\n  render() {\n    console.log(this.props.permissionSetting, 'permissionSetting');\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 7\n      }\n    }, this.props.successStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, \" \", this.props.message, \" \")) : '', this.props.errorStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-danger bg-danger text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 15\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }\n    }, \" \", this.props.message, \" \")) : '', /*#__PURE__*/React.createElement(PermissionList, {\n      listPermissions: this.state.listPermissions,\n      estabModule: this.props.estabModule,\n      handleChange: this.handleChange,\n      values: this.state,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }));\n  }\n\n} // const mapStateToProps = (state) => {\n//   return {\n//     userProfile: state.auth.userProfile,\n//     successStatus: state.alert.success,\n//     errorStatus: state.alert.error,\n//     message: state.alert.message,\n//     estabModule: state.establishment.estabModule,\n//     settings: state.settings.locale,\n//     permissionSetting: state.PermissionReducer.permissionSetting,\n//   };\n// };\n// export default connect(mapStateToProps)(PermissionSetting);\n\nfunction mapStateToProps(state) {\n  return {\n    userProfile: state.auth.userProfile,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    estabModule: state.establishment.estabModule,\n    settings: state.settings.locale,\n    permissionSetting: state.PermissionReducer.permissionSetting\n  };\n}\n\nexport default connect(mapStateToProps)(PermissionSetting);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/PermissionSetting/PermissionSetting.js"],"names":["React","Component","PermissionList","getEducationType","connect","getPermissionSetting","UncontrolledAlert","_","SweetAlert","IntlMessages","PermissionSetting","constructor","props","handleChange","name","event","setState","target","value","console","log","moduleChecked","find","estabModule","fk_id_module","subModuleList","module","suBmodule","subModuleId","listPermissions","permissionSetting","filter","element","state","moduleId","bind","componentDidMount","dispatch","userProfile","establishment_id","componentDidUpdate","prevProps","render","successStatus","message","errorStatus","mapStateToProps","auth","alert","success","error","establishment","settings","locale","PermissionReducer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport  PermissionList  from './PermissionList';\nimport { getEducationType } from '../../../../../actions/estabTypeAction';\nimport { connect } from 'react-redux';\nimport { getPermissionSetting } from '../../../../../actions/PermissionAction';\nimport { UncontrolledAlert } from 'reactstrap';\nimport _ from 'lodash';\nimport SweetAlert from 'react-bootstrap-sweetalert';\nimport IntlMessages from '../../../../../util/IntlMessages';\n\nexport class PermissionSetting extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      moduleId: '',\n      subModuleList: [],\n      subModuleId: '',\n      listPermissions: [],\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n  componentDidMount() {\n    this.props.dispatch(getPermissionSetting(this.props.userProfile.establishment_id));\n    this.setState({ listPermissions: this.props.permissionSetting });\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.permissionSetting !== this.props.permissionSetting) {\n      this.setState({ listPermissions: this.props.permissionSetting });\n    }\n  }\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n    console.log(event.target.value ,'event.target.value ');\n    if (name == 'moduleId') {\n      if (event.target.value > 0) {\n        let moduleChecked = _.find(this.props.estabModule, { fk_id_module: event.target.value });\n         this.setState({ subModuleList: moduleChecked.module.suBmodule });\n      } else {\n        this.setState({ subModuleList: [], subModuleId: '',listPermissions:this.props.permissionSetting });\n      }\n    } else {\n      let listPermissions = this.props.permissionSetting.filter(\n        (element) => element.subModuleId == event.target.value\n      );\n      this.setState({ listPermissions });\n    }\n  };\n  render() {\n    console.log(this.props.permissionSetting, 'permissionSetting');\n    return (\n      <div>\n        {this.props.successStatus ? (\n          <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n            <span className=\"icon-addon alert-addon\">\n              <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n            </span>\n            <span className=\"d-inline-block\"> {this.props.message} </span>\n          </UncontrolledAlert>\n        ) : (\n          ''\n        )}\n        {this.props.errorStatus ? (\n          <UncontrolledAlert className=\"alert-addon-card bg-danger bg-danger text-white shadow-lg\">\n            <span className=\"icon-addon alert-addon\">\n              <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n            </span>\n            <span className=\"d-inline-block\"> {this.props.message} </span>\n          </UncontrolledAlert>\n        ) : (\n          ''\n        )}\n        <PermissionList\n          listPermissions={this.state.listPermissions}\n          estabModule={this.props.estabModule}\n          handleChange={this.handleChange}\n          values={this.state}\n        />\n      </div>\n    );\n  }\n}\n\n// const mapStateToProps = (state) => {\n//   return {\n//     userProfile: state.auth.userProfile,\n//     successStatus: state.alert.success,\n//     errorStatus: state.alert.error,\n//     message: state.alert.message,\n//     estabModule: state.establishment.estabModule,\n//     settings: state.settings.locale,\n//     permissionSetting: state.PermissionReducer.permissionSetting,\n//   };\n// };\n\n// export default connect(mapStateToProps)(PermissionSetting);\nfunction mapStateToProps(state) {\n  return {\n    userProfile: state.auth.userProfile,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    estabModule: state.establishment.estabModule,\n    settings: state.settings.locale,\n    permissionSetting: state.PermissionReducer.permissionSetting,  };\n}\n\nexport default connect(mapStateToProps)(PermissionSetting);"]},"metadata":{},"sourceType":"module"}