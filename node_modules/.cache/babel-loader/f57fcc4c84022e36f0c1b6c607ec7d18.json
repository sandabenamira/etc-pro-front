{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/User/AddUser.js\";\nimport React, { Component } from \"react\";\nimport { Modal, ModalBody, ModalHeader } from \"reactstrap\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport Button from \"@material-ui/core/Button\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CommonInformation from \"./UserInformation/CommonInformation\";\nimport RoleInformation from \"./UserInformation/RoleInformation\";\nimport SpecificInformation from \"./UserInformation/SpecificInformation\";\nimport ParentInformation from \"./UserInformation/ParentInformation\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../../../config/config\";\nimport { connect } from \"react-redux\";\nimport { getEstablishment } from \"../../../../../actions/establishmentAction\";\nimport { getServices } from \"../../../../../actions/ServiceAction\";\nimport { getUserProfile } from \"../../../../../actions/Auth\";\nimport { getAllUsers, addNewUser } from \"../../../../../actions/stuppUserAction\";\nimport { getSections } from \"../../../../../actions/sectionAction\";\nimport { getLevels } from \"../../../../../actions/classLevelAction\";\nimport { getClassesByEstablishmentId } from \"../../../../../actions/classeAction\";\nimport { getServicesByEstablishmentId } from \"../../../../../actions/ServiceAction\";\nimport { successHandling, uploadExcel, uploadUserPhoto, successAddUserHandling, uploadAdminPhoto, uploadProfAndStudentPhoto } from \"../../../../../actions/stuppUserAction\";\nimport { getSectionFromLevel } from \"../../../../../actions/sectionAction\";\nimport { classService } from \"../../../../../_services/class.service\";\nimport { roleIdSuperAdmin, roleIdAdmin, roleIdProfessor, roleIdStudent, roleIdDirector } from \"../../../../../config/config\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Can from \"../../../../../can\";\nimport { RoleContext } from \"../../../../../Context\";\nimport { getSectionsByLevel } from \"../../../../../actions/SectionsAction\";\nimport moment from \"moment\";\nimport { parsePhoneNumberFromString } from \"libphonenumber-js\";\nimport _ from \"lodash\";\nlet timeout;\n\nclass AddUser extends Component {\n  constructor(props) {\n    super(props);\n\n    this.addNewTrustedParentForm = () => {\n      this.setState({\n        trustedPerson: !this.state.trustedPerson,\n        newParent: false\n      });\n    };\n\n    this.handleChangePhone = value => {\n      this.setState({\n        phone: value\n      });\n    };\n\n    this.handleChangeParentPhone = value => {\n      this.setState({\n        phoneParent: value\n      });\n    };\n\n    this.addNewParentFormulaire = () => {\n      this.setState({\n        newParent: !this.state.newParent,\n        trustedPerson: false\n      });\n    };\n\n    this.addNewParent = () => {\n      var parent = {\n        nameParent: this.state.nameParent,\n        surnameParent: this.state.surnameParent,\n        genderParent: this.state.genderParent,\n        date_of_birthParent: this.state.date_of_birthParent,\n        addressParent: this.state.addressParent,\n        phoneParent: this.state.phoneParent,\n        statusParent: true,\n        cinParent: this.state.cinParent,\n        zip_codeParent: this.state.zip_codeParent,\n        realmParent: this.state.nameParent,\n        passwordParent: \" \",\n        usernameParent: this.state.nameParent + \".\" + this.state.surnameParent,\n        emailParent: this.state.emailParent,\n        parentStudentphoto: this.state.parentStudentphoto,\n        emailVerifiedParent: false,\n        parentStudentphoto: this.state.parentStudentphoto,\n        arabicSurnameParent: this.state.arabicSurnameParent,\n        arabicNameparent: this.state.arabicNameparent\n      };\n\n      if (this.state.trustedPerson) {\n        this.state.trustedPersonList.push(parent);\n      } else {\n        this.state.newParentsList.push(parent);\n      }\n\n      this.setState({\n        nameParent: \"\",\n        surnameParent: \"\",\n        genderParent: \"\",\n        date_of_birthParent: \"\",\n        addressParent: \"\",\n        phoneParent: \"\",\n        statusParent: true,\n        cinParent: \"\",\n        zip_codeParent: \"\",\n        realmParent: \"\",\n        passwordParent: \" \",\n        usernameParent: \"\",\n        emailParent: \"\",\n        emailVerifiedParent: false,\n        parentStudentphoto: null,\n        inputTextParent: \"\",\n        newParent: false,\n        trustedPerson: false,\n        arabicSurnameParent: \"\",\n        arabicNameparent: \"\"\n      });\n    };\n\n    this.addNewSubject = index => {\n      this.setState(prevState => ({\n        listOfSubjects: [...prevState.listOfSubjects, {\n          id: index,\n          level_id: 0,\n          section_id: 0,\n          subject_id: 0,\n          sectionDisabled: true\n        }]\n      }));\n    };\n\n    this.handleChangestudentLevel = name => event => {\n      this.setState({\n        [name]: event.target.value,\n        section_id: null\n      });\n      var sectionsByLevel = getSectionsByLevel(this.props.sections, event.target.value);\n\n      if (typeof sectionsByLevel == \"undefined\" || sectionsByLevel.length == 0) {\n        var studentClassesByLevel = this.props.classeSettings.filter(classe => classe.fk_id_level_v3 === event.target.value && classe.status);\n        this.setState({\n          Disable_studentsection: true,\n          studentClassesByLevelSectionID: studentClassesByLevel\n        });\n      } else {\n        this.setState({\n          Disable_studentsection: false,\n          studentsectionByLevels: sectionsByLevel\n        });\n      }\n    };\n\n    this.handleChangestudentSection = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n      const levelId = this.state.level_id;\n      const sectionId = event.target.value;\n      var studentClassesByLevel = this.props.classeSettings.filter(classe => classe.fk_id_level_v3 === event.target.value && classe.status);\n      var studentfiltredClasses = this.props.classeSettings.filter(classe => classe.fk_id_level_v3 === levelId && classe.fk_id_section_v3 === sectionId && classe.status);\n      this.setState({\n        studentClassesByLevelSectionID: studentfiltredClasses\n      });\n    };\n\n    this.handleChangeService = name => event => {\n      this.setState({\n        serviceId: event.target.value\n      });\n    };\n\n    this.handleChangeSelectParent = name => event => {\n      this.setState({\n        affectedParents: event.target.value\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleChangeDate = date => {\n      this.setState({\n        date_of_birth: date\n      });\n    };\n\n    this.handleChangeDateParent = date => {\n      this.setState({\n        date_of_birthParent: date\n      });\n    };\n\n    this.handleChangeRole = name => event => {\n      this.setState({\n        [name]: event.target.value,\n        steps: event.target.value\n      });\n    };\n\n    this.handleChangeClass = name => event => {\n      if (this.props.userProfile.role_id === roleIdAdmin) {\n        this.setState({\n          establishment_id: this.props.userProfile.establishment_id\n        });\n      }\n\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleChangeEstablishment = name => event => {\n      var type_establish = this.state.establishmentList.find(element => element.id === event.target.value);\n      this.setState({\n        [name]: event.target.value\n      });\n      this.setState({\n        estabType: type_establish.estab_type_id,\n        establishment_id: event.target.value\n      });\n      this.props.getClassesByEstablishmentId(event.target.value);\n      this.props.getServicesByEstablishmentId(event.target.value);\n      axios.get(`${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[where][and][0][establishment_id]=` + event.target.value + `&filter[where][and][1][role_id]=` + 4).then(res => {\n        const allEstablishmentParents = res.data.map(element => element.user);\n        this.setState({\n          allParentList: allEstablishmentParents\n        });\n      });\n    };\n\n    this.handleChangeLevel = event => {\n      event.target.value > 10 ? this.setState({\n        level_id: event.target.value,\n        sectionDisabled: false\n      }) : this.setState({\n        level_id: event.target.value,\n        sectionDisabled: true\n      });\n      let subjectListFiltered = [];\n      this.setState({\n        subjectListFiltered\n      });\n    };\n\n    this.handleChangeSection = name => event => {\n      let subjectListFiltered = [];\n      this.setState({\n        [name]: event.target.value,\n        subjectListFiltered\n      });\n    };\n\n    this.onDropUserParent = e => {\n      let file = e.target.files[0];\n      this.setState({\n        parentStudentphoto: file,\n        inputTextParent: file.name\n      });\n    };\n\n    this.onDrop = e => {\n      let file = e.target.files[0];\n      this.setState({\n        userPhotos: file,\n        inputText: file.name\n      });\n    };\n\n    this.handleNext = () => {\n      const {\n        activeStep\n      } = this.state;\n      var establishment_Name = \"\";\n      var establishment_Name_From_Id = \"\";\n\n      if (activeStep === 0) {\n        this.setState({\n          activeStep: activeStep + 1\n        });\n      }\n\n      if (activeStep === 1) {\n        if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n          establishment_Name_From_Id = this.state.establishmentList.filter(establishment => establishment.id === this.state.establishment_id);\n          establishment_Name = establishment_Name_From_Id[0].name;\n        } else {\n          establishment_Name_From_Id = this.state.establishmentList.filter(establishment => establishment.id == this.props.userProfile.establishment_id);\n          establishment_Name = establishment_Name_From_Id[0].name;\n        }\n\n        let data = {\n          name: this.state.name,\n          password: Math.random().toString(36).slice(2),\n          surname: this.state.surname,\n          gender: this.state.gender,\n          date_of_birth: this.state.date_of_birth,\n          address: this.state.address,\n          phone: this.state.phone,\n          status: true,\n          cin: this.state.cin,\n          realm: this.state.name,\n          zip_code: this.state.zip_code,\n          username: this.state.name + \".\" + this.state.surname,\n          email: this.state.email.toLowerCase(),\n          role_id: this.state.role_id,\n          Arabname: this.state.Arabname,\n          Arabsurname: this.state.Arabsurname,\n          photo: this.state.userPhotos,\n          establishment_id: this.props.userProfile.establishment_id,\n          role_id: this.state.role_id,\n          establishment_Name: establishment_Name\n        };\n        let apiEndpoint = `/users/create-user?access_token=${localStorage.token}`;\n        classService.post(apiEndpoint, data).then(response => {\n          if (response.status === 200) {\n            let newUser = {};\n\n            if (this.state.userPhotos) {\n              const fileExtension = this.state.userPhotos.name.replace(/^.*\\./, \"\");\n              const fileName = \"user\" + response.data.user[0].id + \".\" + fileExtension;\n\n              const userData = _.omit(_.head(response.data.user), [\"photo\"]);\n\n              newUser = { ..._.last(response.data.user),\n                user: { ...userData,\n                  photo: fileName\n                }\n              };\n              this.props.uploadProfAndStudentPhoto(response.data.user[0].id, data, fileName);\n            } else {\n              newUser = { ..._.last(response.data.user),\n                user: _.head(response.data.user)\n              };\n            }\n\n            this.setState({\n              activeStep: activeStep + 1,\n              profileId: response.data.user[1].id,\n              newUser\n            });\n          }\n        }).catch(err => {\n          this.setState({\n            communFailedAlert: true\n          });\n          timeout = setTimeout(() => this.setState({\n            communFailedAlert: false\n          }), 1000);\n        });\n      } else if (activeStep === 2 && this.state.role_id === roleIdStudent) {\n        var classID = this.state.class_id === 0 ? null : this.state.class_id;\n        let studentInformation = {\n          level_id: this.state.level_id,\n          section_id: this.state.section_id,\n          class_id: classID,\n          profile_id: this.state.profileId,\n          establishment_id: this.props.userProfile.establishment_id\n        };\n        let apiEndpoint = `/students/save-student-specific?access_token=${localStorage.token}`;\n        classService.post(apiEndpoint, studentInformation).then(response => {\n          if (response.status === 200) {\n            let studentData = { ...response.data.student\n            };\n            this.setState({\n              studentId: response.data.student.id,\n              communsuccessAlert: true,\n              studentData\n            });\n            timeout = setTimeout(() => this.setState({\n              activeStep: activeStep + 1,\n              communsuccessAlert: false\n            }), 3000);\n          }\n        }).catch(err => {\n          this.setState({\n            communFailedAlert: true\n          });\n          timeout = setTimeout(() => this.setState({\n            communFailedAlert: false\n          }), 1000);\n        });\n      }\n    };\n\n    this.handleBack = () => {\n      const {\n        activeStep\n      } = this.state;\n      this.setState({\n        activeStep: activeStep - 1\n      });\n    };\n\n    this.handleReset = () => {\n      this.setState({\n        activeStep: 0\n      });\n    };\n\n    this.isValidphoneNumber = number => {\n      const tel = parsePhoneNumberFromString(number);\n      let res = false;\n\n      if (tel) {\n        res = tel.isValid();\n      }\n\n      return res;\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      var etablishmentID = null;\n      var establishment_Name_From_Id = \"\";\n      var establishment_Name = \"\";\n\n      if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n        establishment_Name_From_Id = this.state.establishmentList.filter(establishment => establishment.id === this.state.establishment_id);\n        establishment_Name = establishment_Name_From_Id[0].name;\n      } else {\n        establishment_Name_From_Id = this.state.establishmentList.filter(establishment => establishment.id == this.props.userProfile.establishment_id);\n        establishment_Name = establishment_Name_From_Id[0].name;\n      }\n\n      if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n        etablishmentID = this.state.establishment_id;\n      } else {\n        etablishmentID = this.props.userProfile.establishment_id;\n      }\n\n      if (this.state.role_id === roleIdProfessor) {\n        let data = {\n          profile_id: this.state.profileId,\n          date_start_contract: this.state.date_start_contract,\n          date_end_contract: this.state.date_end_contract,\n          listOfSubjects: this.state.listOfSubjects\n        };\n        let apiEndpoint = `/professors/create-professor?access_token=${localStorage.token}`;\n        classService.post(apiEndpoint, data).then(response => {\n          if (response.status === 200) {\n            let profData = { ...this.state.newUser,\n              professors: [{ ...response.data.professor\n              }],\n              students: [],\n              parents: []\n            };\n            this.props.addNewUser(profData);\n            this.props.successAddUserHandling();\n            this.handleCancel();\n            this.props.cancel();\n          }\n        }).catch(err => {\n          this.setState({\n            communFailedAlert: true\n          });\n          timeout = setTimeout(() => this.setState({\n            communFailedAlert: false\n          }), 1000);\n        });\n      } else if (this.state.role_id === roleIdStudent) {\n        let studentParents = {\n          newParentsList: this.state.newParentsList,\n          affectedParents: this.state.affectedParents,\n          trustedPersonList: this.state.trustedPersonList,\n          studentId: this.state.studentId,\n          etablishmentID: etablishmentID\n        };\n        let apiEndpoint = `/students/add-parents?access_token=${localStorage.token}`;\n        classService.post(apiEndpoint, studentParents).then(response => {\n          if (response.status === 200) {\n            let student = { ...this.state.newUser,\n              students: [{ ...this.state.studentData\n              }],\n              professors: [],\n              parents: []\n            };\n            this.props.addNewUser(student);\n            this.props.successAddUserHandling();\n            this.handleCancel();\n            this.props.cancel();\n          }\n        }).catch(err => {\n          this.setState({\n            communFailedAlert: true\n          });\n          timeout = setTimeout(() => this.setState({\n            communFailedAlert: false\n          }), 1000);\n        });\n      } else {\n        let data = {\n          name: this.state.name,\n          password: Math.random().toString(36).slice(2),\n          surname: this.state.surname,\n          gender: this.state.gender,\n          date_of_birth: this.state.date_of_birth,\n          address: this.state.address,\n          phone: this.state.phone,\n          status: true,\n          cin: this.state.cin,\n          realm: this.state.name,\n          zip_code: this.state.zip_code,\n          username: this.state.name + \".\" + this.state.surname,\n          email: this.state.email.toLowerCase(),\n          role_id: this.state.role_id,\n          Arabname: this.state.Arabname,\n          Arabsurname: this.state.Arabsurname,\n          photo: this.state.userPhotos,\n          photoName: this.state.userPhotos,\n          establishment_id: establishment_Name_From_Id[0].id,\n          role_id: this.state.role_id,\n          establishment_Name: establishment_Name\n        };\n        let apiEndpoint = `/users/create-user?access_token=${localStorage.token}`;\n        classService.post(apiEndpoint, data).then(response => {\n          if (response.status === 200) {\n            if (this.state.userPhotos) {\n              let newUser = { ..._.last(response.data.user),\n                professors: [],\n                students: [],\n                parents: []\n              };\n              this.props.uploadAdminPhoto(response.data.user[0].id, data, newUser);\n            } else {\n              let newUser = { ..._.last(response.data.user),\n                user: _.head(response.data.user),\n                professors: [],\n                students: [],\n                parents: []\n              };\n              this.props.addNewUser(newUser);\n            }\n\n            this.props.successAddUserHandling();\n            this.handleCancel();\n            this.props.cancel();\n          }\n        }).catch(err => {});\n      }\n    };\n\n    this.onChangeHandler = event => {\n      this.setState({\n        selectedFile: event.target.files[0]\n      });\n    };\n\n    this.onClickHandler = () => {\n      if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n        this.props.uploadExcel(this.state.selectedFile, this.state.establishment_id);\n      } else {\n        this.props.uploadExcel(this.state.selectedFile, this.props.userProfile.establishment_id);\n      }\n\n      this.props.cancelModalImport();\n    };\n\n    this.state = {\n      selectedFile: null,\n      //components Common information\n      name: \"\",\n      surname: \"\",\n      Arabname: \"\",\n      Arabsurname: \"\",\n      gender: \"\",\n      //date_of_birth: \"\",\n      email: \"\",\n      phone: \"\",\n      cin: \"\",\n      address: \"\",\n      zip_code: \"\",\n      status: true,\n      activeStep: 0,\n      inputText: \"\",\n      userPhotos: null,\n      emailVerified: false,\n      steps: 1,\n      date_of_birth: moment().year() - 6 + \"-01-01\",\n      //components role information\n      userId: \"\",\n      establishment_id: 0,\n      role_id: \"\",\n      //components specific information\n      date_start_contract: \"\",\n      Disable_studentsection: true,\n      date_end_contract: \"\",\n      listOfSubjects: [],\n      serviceFilteredByEstablishment: [],\n      studentClassesByLevelSectionID: [],\n      studentsectionByLevels: [],\n      class_id: 0,\n      //components Parent information\n      newParent: false,\n      trustedPerson: false,\n      newParentsList: [],\n      allParentList: [],\n      affectedParents: [],\n      trustedPersonList: [],\n      nameParent: \"\",\n      surnameParent: \"\",\n      genderParent: \"\",\n      date_of_birthParent: moment().year() - 18 + \"-01-01\",\n      addressParent: \"\",\n      phoneParent: \"\",\n      statusParent: true,\n      cinParent: \"\",\n      zip_codeParent: \"\",\n      usernameParent: \"\",\n      emailParent: \"\",\n      inputTextParent: \"\",\n      arabicSurnameParent: \"\",\n      arabicNameparent: \"\",\n      parentStudentphoto: null,\n      emailVerifiedParent: false,\n      countrie_locale: \"\",\n      listOfSubjects: [{\n        id: 0,\n        level_id: 0,\n        section_id: 0,\n        subject_id: 0,\n        sectionDisabled: true\n      }],\n      establishmentList: [],\n      classeList: [],\n      classListFiltered: [],\n      estabType: 0,\n      serviceId: [],\n      profileId: \"\",\n      studentId: \"\",\n      communsuccessAlert: false,\n      communFailedAlert: false,\n      establishment_Name: \"\",\n      newUser: {},\n      studentData: {},\n      section_id: \"\"\n    };\n    this.getStepContent = this.getStepContent.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangePhone = this.handleChangePhone.bind(this);\n    this.handleChangeParentPhone = this.handleChangeParentPhone.bind(this);\n    this.handleChangeRole = this.handleChangeRole.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleChangeLevel = this.handleChangeLevel.bind(this);\n    this.handleChangeSection = this.handleChangeSection.bind(this);\n    this.handleChangeListSubjects = this.handleChangeListSubjects.bind(this);\n    this.handleChangeService = this.handleChangeService.bind(this);\n    this.handleChangeEstablishment = this.handleChangeEstablishment.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n    this.onDropUserParent = this.onDropUserParent.bind(this);\n    this.addNewSubject = this.addNewSubject.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.addNewParentFormulaire = this.addNewParentFormulaire.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleReset = this.handleReset.bind(this);\n    this.getSteps = this.getSteps.bind(this);\n    this.handleChangestudentLevel = this.handleChangestudentLevel.bind(this);\n    this.handleChangestudentSection = this.handleChangestudentSection.bind(this);\n    this.handleChangeDate = this.handleChangeDate.bind(this);\n    this.handleChangeDateParent = this.handleChangeDateParent.bind(this);\n    this.addNewTrustedParentForm = this.addNewTrustedParentForm.bind(this);\n    this.handleCancelImport = this.handleCancelImport.bind(this);\n  }\n\n  handleChangeListSubjects(event, name, index) {\n    if (name === \"level_id\") {\n      const newList = this.state.listOfSubjects.map(listobject => {\n        if (listobject.id === index) {\n          listobject.section_id = 0;\n          return listobject;\n        }\n\n        return listobject;\n      });\n      this.setState({\n        listOfSubjects: newList\n      });\n    }\n\n    let newListSubjects = this.state.listOfSubjects.map(objSubject => name === \"level_id\" && event.target.value > 10 && objSubject.id === index ? { ...objSubject,\n      [name]: event.target.value,\n      sectionDisabled: false,\n      section_id: 0\n    } : objSubject.id === index ? { ...objSubject,\n      [name]: event.target.value,\n      sectionDisabled: true\n    } : objSubject);\n    this.setState({\n      listOfSubjects: newListSubjects\n    });\n  }\n\n  getStepContent(stepIndex, roleList, establishmentList, values, handleChange, handleBlur, touched, errors) {\n    switch (this.state.activeStep) {\n      case 0:\n        return /*#__PURE__*/React.createElement(CommonInformation, {\n          values: this.state,\n          handleChange: this.handleChange,\n          onDrop: this.onDrop,\n          handleChangeDate: this.handleChangeDate,\n          handleChangePhone: this.handleChangePhone,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 558,\n            columnNumber: 11\n          }\n        });\n\n      case 1:\n        return /*#__PURE__*/React.createElement(RoleInformation, {\n          values: this.state,\n          handleChangeRole: this.handleChangeRole,\n          handleChangeEstablishment: this.handleChangeEstablishment,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 568,\n            columnNumber: 11\n          }\n        });\n\n      case 2:\n        return /*#__PURE__*/React.createElement(SpecificInformation, {\n          classSections: this.props.classSections,\n          classLevels: this.props.classLevels,\n          levels: this.props.levels,\n          sections: this.props.sections,\n          values: this.state,\n          handleChange: this.handleChange,\n          handleChangeClass: this.handleChangeClass,\n          handleChangeService: this.handleChangeService,\n          handleChangeClass: this.handleChangeClass,\n          handleChangeListSubjects: this.handleChangeListSubjects,\n          addNewSubject: this.addNewSubject,\n          handleChangestudentLevel: this.handleChangestudentLevel,\n          handleChangestudentSection: this.handleChangestudentSection,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 11\n          }\n        });\n\n      case 3:\n        return /*#__PURE__*/React.createElement(ParentInformation, {\n          values: this.state,\n          handleChange: this.handleChange,\n          onDropUserParent: this.onDropUserParent,\n          addNewParent: this.addNewParent,\n          addNewParentFormulaire: this.addNewParentFormulaire,\n          handleChangeSelectParent: this.handleChangeSelectParent,\n          validateZipCode: this.validateZipCode,\n          handleChangeDateParent: this.handleChangeDateParent,\n          handleChangeParentPhone: this.handleChangeParentPhone,\n          trustedPerson: this.state.trustedPerson,\n          addNewTrustedParentForm: this.addNewTrustedParentForm,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 11\n          }\n        });\n\n      default:\n        return \"Uknown stepIndex\";\n    }\n  }\n\n  getSteps() {\n    switch (this.state.steps) {\n      case 0:\n      case 1:\n      case 2:\n      case 4:\n      case 6:\n      case 7:\n        return [/*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.accountInfo\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 622,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.role\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 11\n          }\n        })];\n\n      case 3:\n        return [/*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.accountInfo\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.role\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 629,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.specInfo\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 630,\n            columnNumber: 11\n          }\n        })];\n\n      case 5:\n        return [/*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.accountInfo\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 635,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.role\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 636,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.specInfo\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"stuppUser.steps.parentInfoOfStudent\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 638,\n            columnNumber: 11\n          }\n        })];\n\n      default:\n        return \"Uknown stepIndex\";\n    }\n  }\n\n  Validation_Steps(steps) {\n    // this methode is to able and disable next and finish button when we insert any user (created by bechir)\n    if (this.state.activeStep === 0) {\n      if (this.state.countrie_locale === \"ar\") {\n        if (this.state.name.length !== 0 && this.state.surname.length !== 0 && this.isemail(this.state.email) === true && this.state.email.length !== 0 && this.state.Arabname.length !== 0 && this.state.Arabsurname.length !== 0 && this.isValidphoneNumber(this.state.phone) === true) return true;else return false;\n      } else {\n        if (this.state.name.length !== 0 && this.state.surname.length !== 0 && this.isemail(this.state.email) === true && this.state.email.length !== 0 && this.isValidphoneNumber(this.state.phone) === true) return true;else return false;\n      }\n    }\n\n    if (this.state.activeStep === 1 && this.props.userProfile.role_id === roleIdSuperAdmin) {\n      if (this.state.role_id !== 0 && this.state.establishment_id !== 0) return true;else return false;\n    }\n\n    if (this.state.activeStep === 2 && this.state.role_id === 5) {\n      if (this.state.level_id === undefined) return false;else return true;\n    }\n\n    if (this.state.activeStep === 2 && this.state.role_id === roleIdProfessor) {\n      if (this.state.listOfSubjects.length === 1 && this.state.listOfSubjects[0].subject_id === 0) {\n        return false;\n      } else return true;\n    } else if (this.state.activeStep === 3 && this.state.role_id === roleIdStudent) {\n      if (this.state.newParentsList.length === 0 && this.state.affectedParents.length === 0) return false;else return true;\n    }\n\n    if (this.state.activeStep === 1 && (this.props.userProfile.role_id === roleIdAdmin || this.props.userProfile.role_id === roleIdDirector)) {\n      if (this.state.role_id == 0) return false;else return true;\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      steps: this.props.userProfile.role_id\n    });\n    this.props.getSections();\n    this.props.getLevels();\n\n    if (this.props.userProfile.role_id === roleIdAdmin || this.props.userProfile.role_id === roleIdDirector) {\n      axios.get(`${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[where][and][0][establishment_id]=` + this.props.userProfile.establishment_id + `&filter[where][and][1][role_id]=` + 4).then(res => {\n        const allEstablishmentParents = res.data.map(element => element.user);\n        this.setState({\n          allParentList: allEstablishmentParents\n        });\n      });\n      this.props.getClassesByEstablishmentId(this.props.userProfile.establishment_id, this.props.userProfile.school_year_id);\n      this.props.getServicesByEstablishmentId(this.props.userProfile.establishment_id);\n      axios.get(`${baseUrl.baseUrl}/establishments/` + this.props.userProfile.establishment_id + `?access_token=${localStorage.token}`).then(res => {\n        this.setState({\n          estabType: res.data.estab_type_id\n        });\n        axios.get(`${baseUrl.baseUrl}/countries/` + res.data.countries_id + `?access_token=${localStorage.token}`).then(res => {\n          this.setState({\n            countrie_locale: res.data.locale\n          });\n        });\n      });\n      axios.get(`${baseUrl.baseUrl}/roles?access_token=${localStorage.token}`).then(res => {\n        let data = res.data;\n        const roleList = data.filter(element => element.id !== 1);\n        this.setState({\n          roleList\n        });\n      });\n    } else {\n      axios.get(`${baseUrl.baseUrl}/roles?access_token=${localStorage.token}`).then(res => {\n        const roleList = res.data;\n        this.setState({\n          roleList\n        });\n      });\n    }\n\n    axios.get(`${baseUrl.baseUrl}/establishments?access_token=${localStorage.token}`).then(res => {\n      const establishmentList = res.data.filter(element => element.status);\n      this.setState({\n        establishmentList\n      });\n    });\n    axios.get(`${baseUrl.baseUrl}/subjects?access_token=${localStorage.token}`).then(res => {\n      const subjectList = res.data;\n      this.setState({\n        subjectList\n      });\n    });\n  }\n\n  handleCancelImport() {\n    this.props.cancelModalImport();\n  }\n\n  handleCancel() {\n    this.setState({\n      activeStep: 0,\n      previewVisible: false,\n      name: \"\",\n      surname: \"\",\n      gender: \"\",\n      date_of_birth: moment().year() - 6 + \"-01-01\",\n      address: \"\",\n      phone: \"\",\n      zip_code: \"\",\n      status: true,\n      cin: \"\",\n      realm: \"\",\n      password: \"\",\n      username: \"\",\n      email: \"\",\n      emailVerified: false,\n      nameParent: \"\",\n      surnameParent: \"\",\n      genderParent: \"\",\n      date_of_birthParent: moment().year() - 18 + \"-01-01\",\n      addressParent: \"\",\n      phoneParent: \"\",\n      statusParent: true,\n      cinParent: \"\",\n      zip_codeParent: \"\",\n      realmParent: \"\",\n      passwordParent: \"\",\n      usernameParent: \"\",\n      emailParent: \"\",\n      emailVerifiedParent: false,\n      date_start_contract: \"\",\n      date_end_contract: \"\",\n      establishment_id: 0,\n      role_id: 0,\n      subject_id: \"\",\n      class_id: 0,\n      serviceId: [],\n      userPhotos: null,\n      parentStudentphoto: null,\n      Arabname: \"\",\n      Arabsurname: \"\",\n      affectedParents: [],\n      newParentsList: []\n    }); // this.props.close();\n  }\n\n  isemail(value) {\n    if (value.length > 0) return /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@(([[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(value);else return true;\n  }\n\n  render() {\n    const steps = this.getSteps() ? this.getSteps() : 0;\n    const {\n      activeStep,\n      roleList,\n      establishmentList\n    } = this.state;\n    console.log(\"this.props.classeSettings\", this.props.classeSettings);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1047,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Modal, {\n      isOpen: this.props.open,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1048,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      toggle: this.props.cancel,\n      className: \"modal-box-header bg-primary text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1049,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"pages.stuppUserPage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1053,\n        columnNumber: 14\n      }\n    })), /*#__PURE__*/React.createElement(ModalBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1055,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"container\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1056,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1057,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1058,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Stepper, {\n      activeStep: activeStep,\n      alternativeLabel: true,\n      className: \"horizontal-stepper-linear\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1059,\n        columnNumber: 19\n      }\n    }, steps.map((label, index) => {\n      return /*#__PURE__*/React.createElement(Step, {\n        key: label,\n        className: `horizontal-stepper ${index === activeStep ? \"active\" : \"\"}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1066,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(StepLabel, {\n        className: \"stepperlabel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1072,\n          columnNumber: 27\n        }\n      }, label));\n    }))), this.state.activeStep === steps.length ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1081,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      className: \"my-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1082,\n        columnNumber: 21\n      }\n    }, \"All steps completed - you\\\"re finished\"), /*#__PURE__*/React.createElement(Button, {\n      onClick: this.handleReset,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1085,\n        columnNumber: 21\n      }\n    }, \"Reset\")) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"w-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1088,\n        columnNumber: 19\n      }\n    }, this.getStepContent(activeStep, roleList), /*#__PURE__*/React.createElement(Button, {\n      disabled: activeStep === 0,\n      onClick: this.handleBack,\n      className: \"mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1090,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"stuppUser.button.back\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1095,\n        columnNumber: 24\n      }\n    })), activeStep === steps.length - 1 ? /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      type: \"submit\",\n      disabled: this.Validation_Steps(steps) ? false : true,\n      className: \"jr-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1099,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"stuppUser.button.finish\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1106,\n        columnNumber: 26\n      }\n    })) : /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: this.handleNext,\n      disabled: this.Validation_Steps(steps) ? false : true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1109,\n        columnNumber: 23\n      }\n    }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"stuppUser.button.Next\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1116,\n        columnNumber: 26\n      }\n    }))))))), /*#__PURE__*/React.createElement(Modal, {\n      isOpen: this.props.openModalImport,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1126,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      toggle: this.handleCancelImport,\n      className: \"modal-box-header bg-primary text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1127,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"pages.stuppUserPage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1131,\n        columnNumber: 14\n      }\n    })), /*#__PURE__*/React.createElement(ModalBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1133,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"container\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1134,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(RoleContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1135,\n        columnNumber: 15\n      }\n    }, ({\n      role\n    }) => /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"user-import-excel:visit\",\n      yes: () => /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1141,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Can, {\n        role: role,\n        perform: \"user-import-excel-filter-establishment:visit\",\n        yes: () => /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-sm-6\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1146,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(TextField, {\n          required: true,\n          id: \"establishment\",\n          select: true,\n          label: /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"components.student.formadd.establishment\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 1152,\n              columnNumber: 35\n            }\n          }),\n          value: this.state.establishment_id,\n          onChange: this.handleChange(\"establishment_id\"),\n          SelectProps: {},\n          margin: \"normal\",\n          fullWidth: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1147,\n            columnNumber: 31\n          }\n        }, establishmentList.map(establishment => /*#__PURE__*/React.createElement(MenuItem, {\n          key: establishment.id,\n          value: establishment.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1161,\n            columnNumber: 35\n          }\n        }, establishment.name)))),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1142,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-12 text-center \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1172,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1173,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1174,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        name: \"file\",\n        onChange: this.onChangeHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1175,\n          columnNumber: 27\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-12 text-left \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1181,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1182,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1183,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        className: \"jr-btn bg-indigo text-white \",\n        onClick: this.onClickHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1184,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.establishments.formadd.buttonAdd\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1190,\n          columnNumber: 31\n        }\n      })), /*#__PURE__*/React.createElement(Button, {\n        variant: \"contained\",\n        className: \"jr-btn bg-grey text-white \",\n        onClick: this.handleCancelImport,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1193,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.establishments.formadd.buttonCancel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1199,\n          columnNumber: 31\n        }\n      })))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1137,\n        columnNumber: 19\n      }\n    }))))));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    establishments: state.establishment.remoteEstablishments,\n    services: state.service.remoteServices,\n    userProfile: state.auth.userProfile,\n    users: state.stuppUsers.remoteStuppUsers,\n    classLevels: state.ClassLevels.remoteLevels,\n    classSections: state.classSections.remoteSections,\n    classes: state.classes,\n    levels: state.levelsReducer.levels,\n    sections: state.SectionsReducer.Section,\n    classeSettings: state.ClassSettingsReducer.classSettings\n  };\n}\n\nexport default connect(mapStateToProps, {\n  successHandling,\n  getAllUsers,\n  getServices,\n  getEstablishment,\n  getUserProfile,\n  getLevels,\n  getSections,\n  getClassesByEstablishmentId,\n  getServicesByEstablishmentId,\n  uploadExcel,\n  uploadUserPhoto,\n  addNewUser,\n  successAddUserHandling,\n  uploadAdminPhoto,\n  uploadProfAndStudentPhoto\n})(AddUser);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/User/AddUser.js"],"names":["React","Component","Modal","ModalBody","ModalHeader","IntlMessages","Button","Stepper","Step","StepLabel","Typography","CommonInformation","RoleInformation","SpecificInformation","ParentInformation","axios","baseUrl","connect","getEstablishment","getServices","getUserProfile","getAllUsers","addNewUser","getSections","getLevels","getClassesByEstablishmentId","getServicesByEstablishmentId","successHandling","uploadExcel","uploadUserPhoto","successAddUserHandling","uploadAdminPhoto","uploadProfAndStudentPhoto","getSectionFromLevel","classService","roleIdSuperAdmin","roleIdAdmin","roleIdProfessor","roleIdStudent","roleIdDirector","TextField","MenuItem","Can","RoleContext","getSectionsByLevel","moment","parsePhoneNumberFromString","_","timeout","AddUser","constructor","props","addNewTrustedParentForm","setState","trustedPerson","state","newParent","handleChangePhone","value","phone","handleChangeParentPhone","phoneParent","addNewParentFormulaire","addNewParent","parent","nameParent","surnameParent","genderParent","date_of_birthParent","addressParent","statusParent","cinParent","zip_codeParent","realmParent","passwordParent","usernameParent","emailParent","parentStudentphoto","emailVerifiedParent","arabicSurnameParent","arabicNameparent","trustedPersonList","push","newParentsList","inputTextParent","addNewSubject","index","prevState","listOfSubjects","id","level_id","section_id","subject_id","sectionDisabled","handleChangestudentLevel","name","event","target","sectionsByLevel","sections","length","studentClassesByLevel","classeSettings","filter","classe","fk_id_level_v3","status","Disable_studentsection","studentClassesByLevelSectionID","studentsectionByLevels","handleChangestudentSection","levelId","sectionId","studentfiltredClasses","fk_id_section_v3","handleChangeService","serviceId","handleChangeSelectParent","affectedParents","handleChange","handleChangeDate","date","date_of_birth","handleChangeDateParent","handleChangeRole","steps","handleChangeClass","userProfile","role_id","establishment_id","handleChangeEstablishment","type_establish","establishmentList","find","element","estabType","estab_type_id","get","localStorage","token","then","res","allEstablishmentParents","data","map","user","allParentList","handleChangeLevel","subjectListFiltered","handleChangeSection","onDropUserParent","e","file","files","onDrop","userPhotos","inputText","handleNext","activeStep","establishment_Name","establishment_Name_From_Id","establishment","password","Math","random","toString","slice","surname","gender","address","cin","realm","zip_code","username","email","toLowerCase","Arabname","Arabsurname","photo","apiEndpoint","post","response","newUser","fileExtension","replace","fileName","userData","omit","head","last","profileId","catch","err","communFailedAlert","setTimeout","classID","class_id","studentInformation","profile_id","studentData","student","studentId","communsuccessAlert","handleBack","handleReset","isValidphoneNumber","number","tel","isValid","handleSubmit","preventDefault","etablishmentID","date_start_contract","date_end_contract","profData","professors","professor","students","parents","handleCancel","cancel","studentParents","photoName","onChangeHandler","selectedFile","onClickHandler","cancelModalImport","emailVerified","year","userId","serviceFilteredByEstablishment","countrie_locale","classeList","classListFiltered","getStepContent","bind","handleChangeListSubjects","getSteps","handleCancelImport","newList","listobject","newListSubjects","objSubject","stepIndex","roleList","values","handleBlur","touched","errors","classSections","classLevels","levels","validateZipCode","Validation_Steps","isemail","undefined","componentDidMount","school_year_id","countries_id","locale","subjectList","previewVisible","test","render","console","log","open","label","openModalImport","role","mapStateToProps","establishments","remoteEstablishments","services","service","remoteServices","auth","users","stuppUsers","remoteStuppUsers","ClassLevels","remoteLevels","remoteSections","classes","levelsReducer","SectionsReducer","Section","ClassSettingsReducer","classSettings"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Modal, ModalBody, ModalHeader } from \"reactstrap\";\nimport IntlMessages from \"../../../../../util/IntlMessages\";\nimport Button from \"@material-ui/core/Button\";\nimport Stepper from \"@material-ui/core/Stepper\";\nimport Step from \"@material-ui/core/Step\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CommonInformation from \"./UserInformation/CommonInformation\";\nimport RoleInformation from \"./UserInformation/RoleInformation\";\nimport SpecificInformation from \"./UserInformation/SpecificInformation\";\nimport ParentInformation from \"./UserInformation/ParentInformation\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../../../config/config\";\nimport { connect } from \"react-redux\";\nimport { getEstablishment } from \"../../../../../actions/establishmentAction\";\nimport { getServices } from \"../../../../../actions/ServiceAction\";\nimport { getUserProfile } from \"../../../../../actions/Auth\";\nimport {\n  getAllUsers,\n  addNewUser,\n} from \"../../../../../actions/stuppUserAction\";\nimport { getSections } from \"../../../../../actions/sectionAction\";\nimport { getLevels } from \"../../../../../actions/classLevelAction\";\nimport { getClassesByEstablishmentId } from \"../../../../../actions/classeAction\";\nimport { getServicesByEstablishmentId } from \"../../../../../actions/ServiceAction\";\nimport {\n  successHandling,\n  uploadExcel,\n  uploadUserPhoto,\n  successAddUserHandling,\n  uploadAdminPhoto,\n  uploadProfAndStudentPhoto,\n} from \"../../../../../actions/stuppUserAction\";\nimport { getSectionFromLevel } from \"../../../../../actions/sectionAction\";\nimport { classService } from \"../../../../../_services/class.service\";\nimport {\n  roleIdSuperAdmin,\n  roleIdAdmin,\n  roleIdProfessor,\n  roleIdStudent,\n  roleIdDirector,\n} from \"../../../../../config/config\";\nimport TextField from \"@material-ui/core/TextField\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Can from \"../../../../../can\";\nimport { RoleContext } from \"../../../../../Context\";\nimport { getSectionsByLevel } from \"../../../../../actions/SectionsAction\";\nimport moment from \"moment\";\nimport { parsePhoneNumberFromString } from \"libphonenumber-js\";\nimport _ from \"lodash\";\n\nlet timeout;\nclass AddUser extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      selectedFile: null,\n      //components Common information\n      name: \"\",\n      surname: \"\",\n      Arabname: \"\",\n      Arabsurname: \"\",\n      gender: \"\",\n      //date_of_birth: \"\",\n      email: \"\",\n      phone: \"\",\n      cin: \"\",\n      address: \"\",\n      zip_code: \"\",\n      status: true,\n      activeStep: 0,\n      inputText: \"\",\n      userPhotos: null,\n      emailVerified: false,\n      steps: 1,\n      date_of_birth: moment().year() - 6 + \"-01-01\",\n\n      //components role information\n      userId: \"\",\n      establishment_id: 0,\n      role_id: \"\",\n      //components specific information\n      date_start_contract: \"\",\n      Disable_studentsection: true,\n      date_end_contract: \"\",\n      listOfSubjects: [],\n      serviceFilteredByEstablishment: [],\n      studentClassesByLevelSectionID: [],\n      studentsectionByLevels: [],\n      class_id: 0,\n      //components Parent information\n      newParent: false,\n      trustedPerson: false,\n      newParentsList: [],\n      allParentList: [],\n      affectedParents: [],\n      trustedPersonList: [],\n\n      nameParent: \"\",\n      surnameParent: \"\",\n      genderParent: \"\",\n      date_of_birthParent: moment().year() - 18 + \"-01-01\",\n      addressParent: \"\",\n      phoneParent: \"\",\n      statusParent: true,\n      cinParent: \"\",\n      zip_codeParent: \"\",\n      usernameParent: \"\",\n      emailParent: \"\",\n      inputTextParent: \"\",\n      arabicSurnameParent: \"\",\n      arabicNameparent: \"\",\n      parentStudentphoto: null,\n      emailVerifiedParent: false,\n      countrie_locale: \"\",\n      listOfSubjects: [\n        {\n          id: 0,\n          level_id: 0,\n          section_id: 0,\n          subject_id: 0,\n          sectionDisabled: true,\n        },\n      ],\n      establishmentList: [],\n      classeList: [],\n      classListFiltered: [],\n      estabType: 0,\n      serviceId: [],\n      profileId: \"\",\n      studentId: \"\",\n      communsuccessAlert: false,\n      communFailedAlert: false,\n      establishment_Name: \"\",\n      newUser: {},\n      studentData: {},\n      section_id: \"\",\n    };\n    this.getStepContent = this.getStepContent.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangePhone = this.handleChangePhone.bind(this);\n    this.handleChangeParentPhone = this.handleChangeParentPhone.bind(this);\n    this.handleChangeRole = this.handleChangeRole.bind(this);\n    this.handleChangeClass = this.handleChangeClass.bind(this);\n    this.handleChangeLevel = this.handleChangeLevel.bind(this);\n    this.handleChangeSection = this.handleChangeSection.bind(this);\n    this.handleChangeListSubjects = this.handleChangeListSubjects.bind(this);\n    this.handleChangeService = this.handleChangeService.bind(this);\n    this.handleChangeEstablishment = this.handleChangeEstablishment.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n    this.onDropUserParent = this.onDropUserParent.bind(this);\n    this.addNewSubject = this.addNewSubject.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.addNewParentFormulaire = this.addNewParentFormulaire.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleReset = this.handleReset.bind(this);\n    this.getSteps = this.getSteps.bind(this);\n    this.handleChangestudentLevel = this.handleChangestudentLevel.bind(this);\n    this.handleChangestudentSection = this.handleChangestudentSection.bind(\n      this\n    );\n    this.handleChangeDate = this.handleChangeDate.bind(this);\n    this.handleChangeDateParent = this.handleChangeDateParent.bind(this);\n    this.addNewTrustedParentForm = this.addNewTrustedParentForm.bind(this);\n    this.handleCancelImport = this.handleCancelImport.bind(this);\n  }\n  addNewTrustedParentForm = () => {\n    this.setState({\n      trustedPerson: !this.state.trustedPerson,\n      newParent: false,\n    });\n  };\n  handleChangePhone = (value) => {\n    this.setState({ phone: value });\n  };\n  handleChangeParentPhone = (value) => {\n    this.setState({ phoneParent: value });\n  };\n  addNewParentFormulaire = () => {\n    this.setState({ newParent: !this.state.newParent, trustedPerson: false });\n  };\n  addNewParent = () => {\n    var parent = {\n      nameParent: this.state.nameParent,\n      surnameParent: this.state.surnameParent,\n      genderParent: this.state.genderParent,\n      date_of_birthParent: this.state.date_of_birthParent,\n      addressParent: this.state.addressParent,\n      phoneParent: this.state.phoneParent,\n      statusParent: true,\n      cinParent: this.state.cinParent,\n      zip_codeParent: this.state.zip_codeParent,\n      realmParent: this.state.nameParent,\n      passwordParent: \" \",\n      usernameParent: this.state.nameParent + \".\" + this.state.surnameParent,\n      emailParent: this.state.emailParent,\n      parentStudentphoto: this.state.parentStudentphoto,\n      emailVerifiedParent: false,\n      parentStudentphoto: this.state.parentStudentphoto,\n      arabicSurnameParent: this.state.arabicSurnameParent,\n      arabicNameparent: this.state.arabicNameparent,\n    };\n    if (this.state.trustedPerson) {\n      this.state.trustedPersonList.push(parent);\n    } else {\n      this.state.newParentsList.push(parent);\n    }\n\n    this.setState({\n      nameParent: \"\",\n      surnameParent: \"\",\n      genderParent: \"\",\n      date_of_birthParent: \"\",\n      addressParent: \"\",\n      phoneParent: \"\",\n      statusParent: true,\n      cinParent: \"\",\n      zip_codeParent: \"\",\n      realmParent: \"\",\n      passwordParent: \" \",\n      usernameParent: \"\",\n      emailParent: \"\",\n      emailVerifiedParent: false,\n      parentStudentphoto: null,\n      inputTextParent: \"\",\n      newParent: false,\n      trustedPerson: false,\n      arabicSurnameParent: \"\",\n      arabicNameparent: \"\",\n    });\n  };\n\n  addNewSubject = (index) => {\n    this.setState((prevState) => ({\n      listOfSubjects: [\n        ...prevState.listOfSubjects,\n        {\n          id: index,\n          level_id: 0,\n          section_id: 0,\n          subject_id: 0,\n          sectionDisabled: true,\n        },\n      ],\n    }));\n  };\n  handleChangeListSubjects(event, name, index) {\n    if (name === \"level_id\") {\n      const newList = this.state.listOfSubjects.map((listobject) => {\n        if (listobject.id === index) {\n          listobject.section_id = 0;\n          return listobject;\n        }\n        return listobject;\n      });\n      this.setState({\n        listOfSubjects: newList,\n      });\n    }\n    let newListSubjects = this.state.listOfSubjects.map((objSubject) =>\n      name === \"level_id\" && event.target.value > 10 && objSubject.id === index\n        ? {\n            ...objSubject,\n            [name]: event.target.value,\n            sectionDisabled: false,\n            section_id: 0,\n          }\n        : objSubject.id === index\n        ? { ...objSubject, [name]: event.target.value, sectionDisabled: true }\n        : objSubject\n    );\n    this.setState({ listOfSubjects: newListSubjects });\n  }\n\n  handleChangestudentLevel = (name) => (event) => {\n    this.setState({ [name]: event.target.value, section_id: null });\n    var sectionsByLevel = getSectionsByLevel(\n      this.props.sections,\n      event.target.value\n    );\n    if (typeof sectionsByLevel == \"undefined\" || sectionsByLevel.length == 0) {\n      var studentClassesByLevel = this.props.classeSettings.filter(\n        (classe) =>\n          classe.fk_id_level_v3 === event.target.value && classe.status\n      );\n      this.setState({\n        Disable_studentsection: true,\n        studentClassesByLevelSectionID: studentClassesByLevel,\n      });\n    } else {\n      this.setState({\n        Disable_studentsection: false,\n        studentsectionByLevels: sectionsByLevel,\n      });\n    }\n  };\n\n  handleChangestudentSection = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n    const levelId = this.state.level_id;\n    const sectionId = event.target.value;\n\n    var studentClassesByLevel = this.props.classeSettings.filter(\n      (classe) => classe.fk_id_level_v3 === event.target.value && classe.status\n    );\n    var studentfiltredClasses = this.props.classeSettings.filter(\n      (classe) =>\n        classe.fk_id_level_v3 === levelId &&\n        classe.fk_id_section_v3 === sectionId &&\n        classe.status\n    );\n    this.setState({ studentClassesByLevelSectionID: studentfiltredClasses });\n  };\n\n  handleChangeService = (name) => (event) => {\n    this.setState({ serviceId: event.target.value });\n  };\n\n  handleChangeSelectParent = (name) => (event) => {\n    this.setState({ affectedParents: event.target.value });\n  };\n\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n\n  handleChangeDate = (date) => {\n    this.setState({ date_of_birth: date });\n  };\n\n  handleChangeDateParent = (date) => {\n    this.setState({ date_of_birthParent: date });\n  };\n\n  handleChangeRole = (name) => (event) => {\n    this.setState({ [name]: event.target.value, steps: event.target.value });\n  };\n\n  handleChangeClass = (name) => (event) => {\n    if (this.props.userProfile.role_id === roleIdAdmin) {\n      this.setState({\n        establishment_id: this.props.userProfile.establishment_id,\n      });\n    }\n    this.setState({ [name]: event.target.value });\n  };\n\n  handleChangeEstablishment = (name) => (event) => {\n    var type_establish = this.state.establishmentList.find(\n      (element) => element.id === event.target.value\n    );\n    this.setState({ [name]: event.target.value });\n    this.setState({\n      estabType: type_establish.estab_type_id,\n      establishment_id: event.target.value,\n    });\n    this.props.getClassesByEstablishmentId(event.target.value);\n    this.props.getServicesByEstablishmentId(event.target.value);\n\n    axios\n      .get(\n        `${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[where][and][0][establishment_id]=` +\n          event.target.value +\n          `&filter[where][and][1][role_id]=` +\n          4\n      )\n      .then((res) => {\n        const allEstablishmentParents = res.data.map((element) => element.user);\n        this.setState({\n          allParentList: allEstablishmentParents,\n        });\n      });\n  };\n\n  handleChangeLevel = (event) => {\n    event.target.value > 10\n      ? this.setState({ level_id: event.target.value, sectionDisabled: false })\n      : this.setState({ level_id: event.target.value, sectionDisabled: true });\n    let subjectListFiltered = [];\n    this.setState({ subjectListFiltered });\n  };\n\n  handleChangeSection = (name) => (event) => {\n    let subjectListFiltered = [];\n    this.setState({ [name]: event.target.value, subjectListFiltered });\n  };\n\n  onDropUserParent = (e) => {\n    let file = e.target.files[0];\n    this.setState({ parentStudentphoto: file, inputTextParent: file.name });\n  };\n\n  onDrop = (e) => {\n    let file = e.target.files[0];\n    this.setState({ userPhotos: file, inputText: file.name });\n  };\n\n  handleNext = () => {\n    const { activeStep } = this.state;\n    var establishment_Name = \"\";\n    var establishment_Name_From_Id = \"\";\n    if (activeStep === 0) {\n      this.setState({ activeStep: activeStep + 1 });\n    }\n    if (activeStep === 1) {\n      if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n        establishment_Name_From_Id = this.state.establishmentList.filter(\n          (establishment) => establishment.id === this.state.establishment_id\n        );\n        establishment_Name = establishment_Name_From_Id[0].name;\n      } else {\n        establishment_Name_From_Id = this.state.establishmentList.filter(\n          (establishment) =>\n            establishment.id == this.props.userProfile.establishment_id\n        );\n        establishment_Name = establishment_Name_From_Id[0].name;\n      }\n      let data = {\n        name: this.state.name,\n        password: Math.random()\n          .toString(36)\n          .slice(2),\n        surname: this.state.surname,\n        gender: this.state.gender,\n        date_of_birth: this.state.date_of_birth,\n        address: this.state.address,\n        phone: this.state.phone,\n        status: true,\n        cin: this.state.cin,\n        realm: this.state.name,\n        zip_code: this.state.zip_code,\n        username: this.state.name + \".\" + this.state.surname,\n        email: this.state.email.toLowerCase(),\n        role_id: this.state.role_id,\n        Arabname: this.state.Arabname,\n        Arabsurname: this.state.Arabsurname,\n        photo: this.state.userPhotos,\n        establishment_id: this.props.userProfile.establishment_id,\n        role_id: this.state.role_id,\n        establishment_Name: establishment_Name,\n      };\n\n      let apiEndpoint = `/users/create-user?access_token=${localStorage.token}`;\n      classService\n        .post(apiEndpoint, data)\n        .then((response) => {\n          if (response.status === 200) {\n            let newUser = {};\n            if (this.state.userPhotos) {\n              const fileExtension = this.state.userPhotos.name.replace(\n                /^.*\\./,\n                \"\"\n              );\n              const fileName =\n                \"user\" + response.data.user[0].id + \".\" + fileExtension;\n              const userData = _.omit(_.head(response.data.user), [\"photo\"]);\n              newUser = {\n                ..._.last(response.data.user),\n                user: {\n                  ...userData,\n                  photo: fileName,\n                },\n              };\n\n              this.props.uploadProfAndStudentPhoto(\n                response.data.user[0].id,\n                data,\n                fileName\n              );\n            } else {\n              newUser = {\n                ..._.last(response.data.user),\n                user: _.head(response.data.user),\n              };\n            }\n            this.setState({\n              activeStep: activeStep + 1,\n              profileId: response.data.user[1].id,\n              newUser,\n            });\n          }\n        })\n        .catch((err) => {\n          this.setState({ communFailedAlert: true });\n          timeout = setTimeout(\n            () => this.setState({ communFailedAlert: false }),\n            1000\n          );\n        });\n    } else if (activeStep === 2 && this.state.role_id === roleIdStudent) {\n      var classID = this.state.class_id === 0 ? null : this.state.class_id;\n\n      let studentInformation = {\n        level_id: this.state.level_id,\n        section_id: this.state.section_id,\n        class_id: classID,\n        profile_id: this.state.profileId,\n        establishment_id: this.props.userProfile.establishment_id,\n      };\n      let apiEndpoint = `/students/save-student-specific?access_token=${localStorage.token}`;\n      classService\n        .post(apiEndpoint, studentInformation)\n        .then((response) => {\n          if (response.status === 200) {\n            let studentData = {\n              ...response.data.student,\n            };\n\n            this.setState({\n              studentId: response.data.student.id,\n              communsuccessAlert: true,\n              studentData,\n            });\n            timeout = setTimeout(\n              () =>\n                this.setState({\n                  activeStep: activeStep + 1,\n                  communsuccessAlert: false,\n                }),\n              3000\n            );\n          }\n        })\n        .catch((err) => {\n          this.setState({ communFailedAlert: true });\n          timeout = setTimeout(\n            () => this.setState({ communFailedAlert: false }),\n            1000\n          );\n        });\n    }\n  };\n\n  handleBack = () => {\n    const { activeStep } = this.state;\n    this.setState({ activeStep: activeStep - 1 });\n  };\n\n  handleReset = () => {\n    this.setState({ activeStep: 0 });\n  };\n\n  getStepContent(\n    stepIndex,\n    roleList,\n    establishmentList,\n    values,\n    handleChange,\n    handleBlur,\n    touched,\n    errors\n  ) {\n    switch (this.state.activeStep) {\n      case 0:\n        return (\n          <CommonInformation\n            values={this.state}\n            handleChange={this.handleChange}\n            onDrop={this.onDrop}\n            handleChangeDate={this.handleChangeDate}\n            handleChangePhone={this.handleChangePhone}\n          />\n        );\n      case 1:\n        return (\n          <RoleInformation\n            values={this.state}\n            handleChangeRole={this.handleChangeRole}\n            handleChangeEstablishment={this.handleChangeEstablishment}\n          />\n        );\n\n      case 2:\n        return (\n          <SpecificInformation\n            classSections={this.props.classSections}\n            classLevels={this.props.classLevels}\n            levels={this.props.levels}\n            sections={this.props.sections}\n            values={this.state}\n            handleChange={this.handleChange}\n            handleChangeClass={this.handleChangeClass}\n            handleChangeService={this.handleChangeService}\n            handleChangeClass={this.handleChangeClass}\n            handleChangeListSubjects={this.handleChangeListSubjects}\n            addNewSubject={this.addNewSubject}\n            handleChangestudentLevel={this.handleChangestudentLevel}\n            handleChangestudentSection={this.handleChangestudentSection}\n          />\n        );\n      case 3:\n        return (\n          <ParentInformation\n            values={this.state}\n            handleChange={this.handleChange}\n            onDropUserParent={this.onDropUserParent}\n            addNewParent={this.addNewParent}\n            addNewParentFormulaire={this.addNewParentFormulaire}\n            handleChangeSelectParent={this.handleChangeSelectParent}\n            validateZipCode={this.validateZipCode}\n            handleChangeDateParent={this.handleChangeDateParent}\n            handleChangeParentPhone={this.handleChangeParentPhone}\n            trustedPerson={this.state.trustedPerson}\n            addNewTrustedParentForm={this.addNewTrustedParentForm}\n          />\n        );\n      default:\n        return \"Uknown stepIndex\";\n    }\n  }\n  getSteps() {\n    switch (this.state.steps) {\n      case 0:\n      case 1:\n      case 2:\n      case 4:\n      case 6:\n      case 7:\n        return [\n          <IntlMessages id=\"stuppUser.steps.accountInfo\" />,\n          <IntlMessages id=\"stuppUser.steps.role\" />,\n        ];\n\n      case 3:\n        return [\n          <IntlMessages id=\"stuppUser.steps.accountInfo\" />,\n          <IntlMessages id=\"stuppUser.steps.role\" />,\n          <IntlMessages id=\"stuppUser.steps.specInfo\" />,\n        ];\n\n      case 5:\n        return [\n          <IntlMessages id=\"stuppUser.steps.accountInfo\" />,\n          <IntlMessages id=\"stuppUser.steps.role\" />,\n          <IntlMessages id=\"stuppUser.steps.specInfo\" />,\n          <IntlMessages id=\"stuppUser.steps.parentInfoOfStudent\" />,\n        ];\n\n      default:\n        return \"Uknown stepIndex\";\n    }\n  }\n  isValidphoneNumber = (number) => {\n    const tel = parsePhoneNumberFromString(number);\n    let res = false;\n    if (tel) {\n      res = tel.isValid();\n    }\n    return res;\n  };\n\n  Validation_Steps(steps) {\n    // this methode is to able and disable next and finish button when we insert any user (created by bechir)\n    if (this.state.activeStep === 0) {\n      if (this.state.countrie_locale === \"ar\") {\n        if (\n          this.state.name.length !== 0 &&\n          this.state.surname.length !== 0 &&\n          this.isemail(this.state.email) === true &&\n          this.state.email.length !== 0 &&\n          this.state.Arabname.length !== 0 &&\n          this.state.Arabsurname.length !== 0 &&\n          this.isValidphoneNumber(this.state.phone) === true\n        )\n          return true;\n        else return false;\n      } else {\n        if (\n          this.state.name.length !== 0 &&\n          this.state.surname.length !== 0 &&\n          this.isemail(this.state.email) === true &&\n          this.state.email.length !== 0 &&\n          this.isValidphoneNumber(this.state.phone) === true\n        )\n          return true;\n        else return false;\n      }\n    }\n    if (\n      this.state.activeStep === 1 &&\n      this.props.userProfile.role_id === roleIdSuperAdmin\n    ) {\n      if (this.state.role_id !== 0 && this.state.establishment_id !== 0)\n        return true;\n      else return false;\n    }\n\n    if (this.state.activeStep === 2 && this.state.role_id === 5) {\n      if (this.state.level_id === undefined) return false;\n      else return true;\n    }\n    if (this.state.activeStep === 2 && this.state.role_id === roleIdProfessor) {\n      if (\n        this.state.listOfSubjects.length === 1 &&\n        this.state.listOfSubjects[0].subject_id === 0\n      ) {\n        return false;\n      } else return true;\n    } else if (\n      this.state.activeStep === 3 &&\n      this.state.role_id === roleIdStudent\n    ) {\n      if (\n        this.state.newParentsList.length === 0 &&\n        this.state.affectedParents.length === 0\n      )\n        return false;\n      else return true;\n    }\n\n    if (\n      this.state.activeStep === 1 &&\n      (this.props.userProfile.role_id === roleIdAdmin ||\n        this.props.userProfile.role_id === roleIdDirector)\n    ) {\n      if (this.state.role_id == 0) return false;\n      else return true;\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      steps: this.props.userProfile.role_id,\n    });\n    this.props.getSections();\n    this.props.getLevels();\n    if (\n      this.props.userProfile.role_id === roleIdAdmin ||\n      this.props.userProfile.role_id === roleIdDirector\n    ) {\n      axios\n        .get(\n          `${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[where][and][0][establishment_id]=` +\n            this.props.userProfile.establishment_id +\n            `&filter[where][and][1][role_id]=` +\n            4\n        )\n        .then((res) => {\n          const allEstablishmentParents = res.data.map(\n            (element) => element.user\n          );\n          this.setState({\n            allParentList: allEstablishmentParents,\n          });\n        });\n\n      this.props.getClassesByEstablishmentId(\n        this.props.userProfile.establishment_id,\n        this.props.userProfile.school_year_id\n      );\n      this.props.getServicesByEstablishmentId(\n        this.props.userProfile.establishment_id\n      );\n\n      axios\n        .get(\n          `${baseUrl.baseUrl}/establishments/` +\n            this.props.userProfile.establishment_id +\n            `?access_token=${localStorage.token}`\n        )\n        .then((res) => {\n          this.setState({\n            estabType: res.data.estab_type_id,\n          });\n          axios\n            .get(\n              `${baseUrl.baseUrl}/countries/` +\n                res.data.countries_id +\n                `?access_token=${localStorage.token}`\n            )\n            .then((res) => {\n              this.setState({ countrie_locale: res.data.locale });\n            });\n        });\n\n      axios\n        .get(`${baseUrl.baseUrl}/roles?access_token=${localStorage.token}`)\n        .then((res) => {\n          let data = res.data;\n          const roleList = data.filter((element) => element.id !== 1);\n          this.setState({ roleList });\n        });\n    } else {\n      axios\n        .get(`${baseUrl.baseUrl}/roles?access_token=${localStorage.token}`)\n        .then((res) => {\n          const roleList = res.data;\n          this.setState({ roleList });\n        });\n    }\n\n    axios\n      .get(\n        `${baseUrl.baseUrl}/establishments?access_token=${localStorage.token}`\n      )\n      .then((res) => {\n        const establishmentList = res.data.filter((element) => element.status);\n        this.setState({ establishmentList });\n      });\n    axios\n      .get(`${baseUrl.baseUrl}/subjects?access_token=${localStorage.token}`)\n      .then((res) => {\n        const subjectList = res.data;\n        this.setState({ subjectList });\n      });\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    var etablishmentID = null;\n\n    var establishment_Name_From_Id = \"\";\n    var establishment_Name = \"\";\n    if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n      establishment_Name_From_Id = this.state.establishmentList.filter(\n        (establishment) => establishment.id === this.state.establishment_id\n      );\n      establishment_Name = establishment_Name_From_Id[0].name;\n    } else {\n      establishment_Name_From_Id = this.state.establishmentList.filter(\n        (establishment) =>\n          establishment.id == this.props.userProfile.establishment_id\n      );\n      establishment_Name = establishment_Name_From_Id[0].name;\n    }\n\n    if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n      etablishmentID = this.state.establishment_id;\n    } else {\n      etablishmentID = this.props.userProfile.establishment_id;\n    }\n    if (this.state.role_id === roleIdProfessor) {\n      let data = {\n        profile_id: this.state.profileId,\n        date_start_contract: this.state.date_start_contract,\n        date_end_contract: this.state.date_end_contract,\n        listOfSubjects: this.state.listOfSubjects,\n      };\n      let apiEndpoint = `/professors/create-professor?access_token=${localStorage.token}`;\n      classService\n        .post(apiEndpoint, data)\n        .then((response) => {\n          if (response.status === 200) {\n            let profData = {\n              ...this.state.newUser,\n              professors: [{ ...response.data.professor }],\n              students: [],\n              parents: [],\n            };\n            this.props.addNewUser(profData);\n            this.props.successAddUserHandling();\n            this.handleCancel();\n            this.props.cancel();\n          }\n        })\n        .catch((err) => {\n          this.setState({ communFailedAlert: true });\n          timeout = setTimeout(\n            () => this.setState({ communFailedAlert: false }),\n            1000\n          );\n        });\n    } else if (this.state.role_id === roleIdStudent) {\n      let studentParents = {\n        newParentsList: this.state.newParentsList,\n        affectedParents: this.state.affectedParents,\n        trustedPersonList: this.state.trustedPersonList,\n        studentId: this.state.studentId,\n        etablishmentID: etablishmentID,\n      };\n      let apiEndpoint = `/students/add-parents?access_token=${localStorage.token}`;\n      classService\n        .post(apiEndpoint, studentParents)\n        .then((response) => {\n          if (response.status === 200) {\n            let student = {\n              ...this.state.newUser,\n              students: [{ ...this.state.studentData }],\n              professors: [],\n              parents: [],\n            };\n            this.props.addNewUser(student);\n            this.props.successAddUserHandling();\n            this.handleCancel();\n            this.props.cancel();\n          }\n        })\n        .catch((err) => {\n          this.setState({ communFailedAlert: true });\n          timeout = setTimeout(\n            () => this.setState({ communFailedAlert: false }),\n            1000\n          );\n        });\n    } else {\n      let data = {\n        name: this.state.name,\n        password: Math.random()\n          .toString(36)\n          .slice(2),\n        surname: this.state.surname,\n        gender: this.state.gender,\n        date_of_birth: this.state.date_of_birth,\n        address: this.state.address,\n        phone: this.state.phone,\n        status: true,\n        cin: this.state.cin,\n        realm: this.state.name,\n        zip_code: this.state.zip_code,\n\n        username: this.state.name + \".\" + this.state.surname,\n        email: this.state.email.toLowerCase(),\n\n        role_id: this.state.role_id,\n\n        Arabname: this.state.Arabname,\n        Arabsurname: this.state.Arabsurname,\n        photo: this.state.userPhotos,\n        photoName: this.state.userPhotos,\n        establishment_id: establishment_Name_From_Id[0].id,\n        role_id: this.state.role_id,\n        establishment_Name: establishment_Name,\n      };\n\n      let apiEndpoint = `/users/create-user?access_token=${localStorage.token}`;\n      classService\n        .post(apiEndpoint, data)\n        .then((response) => {\n          if (response.status === 200) {\n            if (this.state.userPhotos) {\n              let newUser = {\n                ..._.last(response.data.user),\n                professors: [],\n                students: [],\n                parents: [],\n              };\n              this.props.uploadAdminPhoto(\n                response.data.user[0].id,\n                data,\n                newUser\n              );\n            } else {\n              let newUser = {\n                ..._.last(response.data.user),\n                user: _.head(response.data.user),\n                professors: [],\n                students: [],\n                parents: [],\n              };\n              this.props.addNewUser(newUser);\n            }\n            this.props.successAddUserHandling();\n            this.handleCancel();\n            this.props.cancel();\n          }\n        })\n        .catch((err) => {});\n    }\n  };\n  handleCancelImport() {\n    this.props.cancelModalImport();\n  }\n  handleCancel() {\n    this.setState({\n      activeStep: 0,\n      previewVisible: false,\n      name: \"\",\n      surname: \"\",\n      gender: \"\",\n      date_of_birth: moment().year() - 6 + \"-01-01\",\n      address: \"\",\n      phone: \"\",\n      zip_code: \"\",\n      status: true,\n      cin: \"\",\n      realm: \"\",\n      password: \"\",\n      username: \"\",\n      email: \"\",\n      emailVerified: false,\n      nameParent: \"\",\n      surnameParent: \"\",\n      genderParent: \"\",\n      date_of_birthParent: moment().year() - 18 + \"-01-01\",\n      addressParent: \"\",\n      phoneParent: \"\",\n      statusParent: true,\n      cinParent: \"\",\n      zip_codeParent: \"\",\n      realmParent: \"\",\n      passwordParent: \"\",\n      usernameParent: \"\",\n      emailParent: \"\",\n      emailVerifiedParent: false,\n      date_start_contract: \"\",\n      date_end_contract: \"\",\n      establishment_id: 0,\n      role_id: 0,\n      subject_id: \"\",\n      class_id: 0,\n      serviceId: [],\n      userPhotos: null,\n      parentStudentphoto: null,\n      Arabname: \"\",\n      Arabsurname: \"\",\n      affectedParents: [],\n      newParentsList: [],\n    });\n    // this.props.close();\n  }\n\n  isemail(value) {\n    if (value.length > 0)\n      return /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@(([[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(\n        value\n      );\n    else return true;\n  }\n\n  onChangeHandler = (event) => {\n    this.setState({ selectedFile: event.target.files[0] });\n  };\n  onClickHandler = () => {\n    if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n      this.props.uploadExcel(\n        this.state.selectedFile,\n        this.state.establishment_id\n      );\n    } else {\n      this.props.uploadExcel(\n        this.state.selectedFile,\n        this.props.userProfile.establishment_id\n      );\n    }\n\n    this.props.cancelModalImport();\n  };\n\n  render() {\n    const steps = this.getSteps() ? this.getSteps() : 0;\n    const { activeStep, roleList, establishmentList } = this.state;\n    console.log(\"this.props.classeSettings\", this.props.classeSettings);\n\n    return (\n      <div className=\"app-wrapper\">\n        <Modal isOpen={this.props.open}>\n          <ModalHeader\n            toggle={this.props.cancel}\n            className=\"modal-box-header bg-primary text-white\"\n          >\n            {<IntlMessages id=\"pages.stuppUserPage\" />}\n          </ModalHeader>\n          <ModalBody>\n            <form className=\"container\" onSubmit={this.handleSubmit}>\n              <div className=\"row\">\n                <div className=\"w-100\">\n                  <Stepper\n                    activeStep={activeStep}\n                    alternativeLabel\n                    className=\"horizontal-stepper-linear\"\n                  >\n                    {steps.map((label, index) => {\n                      return (\n                        <Step\n                          key={label}\n                          className={`horizontal-stepper ${\n                            index === activeStep ? \"active\" : \"\"\n                          }`}\n                        >\n                          <StepLabel className=\"stepperlabel\">\n                            {label}\n                          </StepLabel>\n                        </Step>\n                      );\n                    })}\n                  </Stepper>\n                </div>\n                {this.state.activeStep === steps.length ? (\n                  <div className=\"w-100\">\n                    <Typography className=\"my-2\">\n                      All steps completed - you&quot;re finished\n                    </Typography>\n                    <Button onClick={this.handleReset}>Reset</Button>\n                  </div>\n                ) : (\n                  <div className=\"w-100\">\n                    {this.getStepContent(activeStep, roleList)}\n                    <Button\n                      disabled={activeStep === 0}\n                      onClick={this.handleBack}\n                      className=\"mr-2\"\n                    >\n                      {<IntlMessages id=\"stuppUser.button.back\" />}\n                    </Button>\n\n                    {activeStep === steps.length - 1 ? (\n                      <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        type=\"submit\"\n                        disabled={this.Validation_Steps(steps) ? false : true}\n                        className=\"jr-btn\"\n                      >\n                        {<IntlMessages id=\"stuppUser.button.finish\" />}\n                      </Button>\n                    ) : (\n                      <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={this.handleNext}\n                        disabled={this.Validation_Steps(steps) ? false : true}\n                      >\n                        {\" \"}\n                        {<IntlMessages id=\"stuppUser.button.Next\" />}\n                      </Button>\n                    )}\n                  </div>\n                )}\n              </div>\n            </form>\n          </ModalBody>\n        </Modal>\n\n        <Modal isOpen={this.props.openModalImport}>\n          <ModalHeader\n            toggle={this.handleCancelImport}\n            className=\"modal-box-header bg-primary text-white\"\n          >\n            {<IntlMessages id=\"pages.stuppUserPage\" />}\n          </ModalHeader>\n          <ModalBody>\n            <form className=\"container\" onSubmit={this.handleSubmit}>\n              <RoleContext.Consumer>\n                {({ role }) => (\n                  <Can\n                    role={role}\n                    perform=\"user-import-excel:visit\"\n                    yes={() => (\n                      <div className=\"row\">\n                        <Can\n                          role={role}\n                          perform=\"user-import-excel-filter-establishment:visit\"\n                          yes={() => (\n                            <div className=\"col-sm-6\">\n                              <TextField\n                                required\n                                id=\"establishment\"\n                                select\n                                label={\n                                  <IntlMessages id=\"components.student.formadd.establishment\" />\n                                }\n                                value={this.state.establishment_id}\n                                onChange={this.handleChange(\"establishment_id\")}\n                                SelectProps={{}}\n                                margin=\"normal\"\n                                fullWidth\n                              >\n                                {establishmentList.map((establishment) => (\n                                  <MenuItem\n                                    key={establishment.id}\n                                    value={establishment.id}\n                                  >\n                                    {establishment.name}\n                                  </MenuItem>\n                                ))}\n                              </TextField>\n                            </div>\n                          )}\n                        />\n                        <div className=\"col-md-12 text-center \">\n                          <br />\n                          <br />\n                          <input\n                            type=\"file\"\n                            name=\"file\"\n                            onChange={this.onChangeHandler}\n                          />\n                        </div>\n                        <div className=\"col-md-12 text-left \">\n                          <br />\n                          <br />\n                          <Button\n                            variant=\"contained\"\n                            className=\"jr-btn bg-indigo text-white \"\n                            onClick={this.onClickHandler}\n                          >\n                            {\n                              <IntlMessages id=\"components.establishments.formadd.buttonAdd\" />\n                            }\n                          </Button>\n                          <Button\n                            variant=\"contained\"\n                            className=\"jr-btn bg-grey text-white \"\n                            onClick={this.handleCancelImport}\n                          >\n                            {\n                              <IntlMessages id=\"components.establishments.formadd.buttonCancel\" />\n                            }\n                          </Button>\n                        </div>\n                      </div>\n                    )}\n                  />\n                )}\n              </RoleContext.Consumer>\n            </form>\n          </ModalBody>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    establishments: state.establishment.remoteEstablishments,\n    services: state.service.remoteServices,\n    userProfile: state.auth.userProfile,\n    users: state.stuppUsers.remoteStuppUsers,\n    classLevels: state.ClassLevels.remoteLevels,\n    classSections: state.classSections.remoteSections,\n    classes: state.classes,\n    levels: state.levelsReducer.levels,\n    sections: state.SectionsReducer.Section,\n    classeSettings: state.ClassSettingsReducer.classSettings,\n  };\n}\n\nexport default connect(\n  mapStateToProps,\n  {\n    successHandling,\n    getAllUsers,\n    getServices,\n    getEstablishment,\n    getUserProfile,\n    getLevels,\n    getSections,\n    getClassesByEstablishmentId,\n    getServicesByEstablishmentId,\n    uploadExcel,\n    uploadUserPhoto,\n    addNewUser,\n    successAddUserHandling,\n    uploadAdminPhoto,\n    uploadProfAndStudentPhoto,\n  }\n)(AddUser);\n"]},"metadata":{},"sourceType":"module"}