{"ast":null,"code":"import baseUrl from \"../config/config\";\nimport axios from \"axios\";\nimport { DATA_LOADED_STUPPUSER, SHOW_ERROR_MESSAGE, HIDE_ERROR_MESSAGE, HIDE_SUCCESS_MESSAGE, SHOW_SUCCESS_MESSAGE, HIDE_WARNING_MESSAGE, SHOW_WARNING_MESSAGE, DATA_NEW_STUPPUSER } from \"../constants/ActionTypes\";\nimport _ from \"lodash\";\nimport { getError } from \"../Error/Error\";\nimport { classService } from \"../_services/class.service\";\nimport { roleIdStudent } from \"../config/config\";\n\nfunction getUsersByRole(usersList, role_id, establishment_id) {\n  let usersByRole = [];\n  establishment_id ? usersByRole = _.filter(usersList, function (user) {\n    return _.some(user.profiles, {\n      role_id: role_id,\n      establishment_id: establishment_id\n    });\n  }) : usersByRole = _.filter(usersList, function (user) {\n    return _.some(user.profiles, {\n      role_id: role_id\n    });\n  });\n  return usersByRole;\n}\n\nfunction getUserFromProfileId(usersList, profile_id) {\n  let userInfo = [];\n  userInfo = _.filter(usersList, function (user) {\n    return _.some(user.profiles, {\n      id: profile_id\n    });\n  });\n  return _.first(userInfo);\n}\n\nexport function getAllUsers() {\n  return function (dispatch) {\n    axios.get(`${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user`).then(res => {\n      dispatch({\n        type: DATA_LOADED_STUPPUSER,\n        payload: res.data\n      });\n    });\n  };\n}\nexport function getAllUsersByEstablishmentId(establishment_id) {\n  return function (dispatch) {\n    axios.get(`${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[include]=professors&filter[include]=students&filter[include]=parents&filter[where][and][0][establishment_id]=` + establishment_id).then(res => {\n      const list = res.data;\n      const serviceList = list.filter(element => element.user.status === true);\n      dispatch({\n        type: DATA_LOADED_STUPPUSER,\n        payload: serviceList\n      });\n    });\n  };\n}\nexport function fetchAllUsers() {\n  return function (dispatch) {\n    axios.get(`${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[include]=professors&filter[include]=students`).then(res => {\n      const list = res.data;\n      const serviceList = list.filter(element => element.user.status === true);\n      dispatch({\n        type: DATA_LOADED_STUPPUSER,\n        payload: serviceList\n      });\n    });\n  };\n}\nexport function addStuppUser(stuppUser, userPhoto, parentStudentPhoto) {\n  if (stuppUser.nameParent !== \"\") {\n    return function (dispatch) {\n      var fileExtension1 = \"\";\n      var fileName1 = \"\";\n      var fileExtension2 = \"\";\n      var fileName2 = \"\";\n\n      if (userPhoto !== null) {\n        fileExtension1 = userPhoto.name.replace(/^.*\\./, \"\");\n        fileName1 = stuppUser.cin + stuppUser.establishment_Name + \".\" + fileExtension1;\n      } else {\n        fileName1 = null;\n      }\n\n      if (parentStudentPhoto !== null) {\n        fileExtension2 = parentStudentPhoto.name.replace(/^.*\\./, \"\");\n        fileName2 = stuppUser.cinParent + stuppUser.establishment_Name + \".\" + fileExtension2;\n      } else {\n        fileName2 = null;\n      }\n\n      axios.post(`${baseUrl.baseUrl}/users/create?access_token=${localStorage.token}`, {\n        name: stuppUser.name,\n        surname: stuppUser.surname,\n        gender: stuppUser.gender,\n        date_of_birth: stuppUser.date_of_birth,\n        address: stuppUser.address,\n        phone: stuppUser.phone,\n        status: true,\n        cin: stuppUser.cin,\n        zip_code: stuppUser.zip_code,\n        realm: stuppUser.name,\n        username: stuppUser.name + \".\" + stuppUser.surname,\n        email: stuppUser.email,\n        password: \"123456\",\n        emailVerified: false,\n        nameParent: stuppUser.nameParent,\n        surnameParent: stuppUser.surnameParent,\n        genderParent: stuppUser.genderParent,\n        date_of_birthParent: stuppUser.date_of_birthParent,\n        addressParent: stuppUser.addressParent,\n        phoneParent: stuppUser.phoneParent,\n        statusParent: true,\n        cinParent: stuppUser.cinParent,\n        zip_codeParent: stuppUser.zip_codeParent,\n        realmParent: stuppUser.nameParent,\n        usernameParent: stuppUser.nameParent + \".\" + stuppUser.surnameParent,\n        emailParent: stuppUser.emailParent,\n        passwordParent: \"123456\",\n        emailVerifiedParent: false,\n        date_start_contract: stuppUser.date_start_contract,\n        date_end_contract: stuppUser.date_end_contract,\n        establishment_id: stuppUser.establishment_id,\n        role_id: stuppUser.role_id,\n        listOfSubjects: stuppUser.listOfSubjects,\n        class_id: stuppUser.class_id,\n        service_id: stuppUser.service_id,\n        photo: fileName1,\n        parentStudentphoto: fileName2\n      }).then(response => {\n        dispatch(uploadStudentParentFile(response.data, userPhoto, parentStudentPhoto, stuppUser.establishment_Name, fileName1, fileName2));\n      }).catch(error => {\n        console.log(error.message);\n        alert(\"Merci de vérifier votre champ obligatoire\");\n      });\n    };\n  } else {\n    return function (dispatch) {\n      var fileExtension1 = \"\";\n      var fileName1 = \"\";\n\n      if (userPhoto !== null) {\n        fileExtension1 = userPhoto.name.replace(/^.*\\./, \"\");\n        fileName1 = stuppUser.cin + stuppUser.establishment_Name + \".\" + fileExtension1;\n      } else {\n        fileName1 = null;\n      }\n\n      axios.post(`${baseUrl.baseUrl}/users/create?access_token=${localStorage.token}`, {\n        name: stuppUser.name,\n        surname: stuppUser.surname,\n        gender: stuppUser.gender,\n        date_of_birth: stuppUser.date_of_birth,\n        address: stuppUser.address,\n        phone: stuppUser.phone,\n        status: true,\n        cin: stuppUser.cin,\n        zip_code: stuppUser.zip_code,\n        realm: stuppUser.name,\n        username: stuppUser.name + \".\" + stuppUser.surname,\n        email: stuppUser.email,\n        password: \"123456\",\n        emailVerified: false,\n        nameParent: stuppUser.nameParent,\n        surnameParent: stuppUser.surnameParent,\n        genderParent: stuppUser.genderParent,\n        date_of_birthParent: stuppUser.date_of_birthParent,\n        addressParent: stuppUser.addressParent,\n        phoneParent: stuppUser.phoneParent,\n        statusParent: true,\n        cinParent: stuppUser.cinParent,\n        zip_codeParent: stuppUser.zip_codeParent,\n        realmParent: stuppUser.nameParent,\n        usernameParent: stuppUser.nameParent + \".\" + stuppUser.surnameParent,\n        emailParent: stuppUser.emailParent,\n        passwordParent: \"123456\",\n        emailVerifiedParent: false,\n        date_start_contract: stuppUser.date_start_contract,\n        date_end_contract: stuppUser.date_end_contract,\n        establishment_id: stuppUser.establishment_id,\n        role_id: stuppUser.role_id,\n        listOfSubjects: stuppUser.listOfSubjects,\n        class_id: stuppUser.class_id,\n        service_id: stuppUser.service_id,\n        photo: fileName1,\n        parentStudentphoto: null\n      }).then(response => {\n        dispatch(uploadFile(response.data.user, userPhoto, stuppUser.establishment_Name, fileName1));\n      }).catch(error => {\n        console.log(error.message);\n        alert(\"Merci de vérifier votre champ obligatoire\");\n      });\n    };\n  }\n}\nexport function uploadFile(payload, file, establishmentName, fileName) {\n  if (fileName !== null) {\n    return function (dispatch) {\n      const myNewFile = new File([file], fileName, {\n        type: file.type\n      });\n      let formadata = new FormData();\n      formadata.append(\"image\", myNewFile);\n      const establishLogoUrl = `${baseUrl.baseUrl}/containers/` + establishmentName + `/upload?access_token=${localStorage.token}`;\n      axios({\n        url: establishLogoUrl,\n        method: \"POST\",\n        data: formadata\n      }).then(response => {\n        dispatch({\n          type: \"ADD_STUPPUSER\",\n          payload: payload\n        });\n        alert(\"L'ajout est effectué avec succès\");\n      }).catch(err => {});\n    };\n  } else {\n    return function (dispatch) {\n      dispatch({\n        type: \"ADD_STUPPUSER\",\n        payload: payload\n      });\n      alert(\"L'ajout est effectué avec succès\");\n    };\n  }\n}\nexport function uploadStudentParentFile(payload, file, file2, establishmentName, fileName1, fileName2) {\n  if (fileName1 !== null && fileName2 !== null) {\n    return function (dispatch) {\n      const myNewFile = new File([file], fileName1, {\n        type: file.type\n      });\n      let formadata = new FormData();\n      formadata.append(\"image\", myNewFile);\n      const establishLogoUrl = `${baseUrl.baseUrl}/containers/` + establishmentName + `/upload?access_token=${localStorage.token}`;\n      axios({\n        url: establishLogoUrl,\n        method: \"POST\",\n        data: formadata\n      }).then(response => {\n        const myNewFile2 = new File([file2], fileName2, {\n          type: file2.type\n        });\n        let formadata2 = new FormData();\n        formadata2.append(\"image\", myNewFile2);\n        const establishLogoUrl = `${baseUrl.baseUrl}/containers/` + establishmentName + `/upload?access_token=${localStorage.token}`;\n        axios({\n          url: establishLogoUrl,\n          method: \"POST\",\n          data: formadata2\n        }).then(response => {\n          dispatch({\n            type: \"ADD_STUPPUSER\",\n            payload: payload.user\n          });\n          alert(\"L'ajout est effectué avec succès\");\n        }).catch(err => {\n          console.log(\"error\", err);\n        });\n      }).catch(err => {\n        console.log(\"error\", err);\n      });\n    };\n  } else if (fileName1 !== null && fileName2 === null) {\n    return function (dispatch) {\n      const myNewFile = new File([file], fileName1, {\n        type: file.type\n      });\n      let formadata = new FormData();\n      formadata.append(\"image\", myNewFile);\n      const establishLogoUrl = `${baseUrl.baseUrl}/containers/` + establishmentName + `/upload?access_token=${localStorage.token}`;\n      axios({\n        url: establishLogoUrl,\n        method: \"POST\",\n        data: formadata\n      }).then(response => {\n        dispatch({\n          type: \"ADD_STUPPUSER\",\n          payload: payload.user\n        });\n        alert(\"L'ajout est effectué avec succès\");\n      }).catch(err => {\n        console.log(\"error\", err);\n      });\n    };\n  } else if (fileName1 === null && fileName2 !== null) {\n    return function (dispatch) {\n      const myNewFile = new File([file2], fileName2, {\n        type: file2.type\n      });\n      let formadata = new FormData();\n      formadata.append(\"image\", myNewFile);\n      const establishLogoUrl = `${baseUrl.baseUrl}/containers/` + establishmentName + `/upload?access_token=${localStorage.token}`;\n      axios({\n        url: establishLogoUrl,\n        method: \"POST\",\n        data: formadata\n      }).then(response => {\n        dispatch({\n          type: \"ADD_STUPPUSER\",\n          payload: payload.user\n        });\n        alert(\"L'ajout est effectué avec succès\");\n      }).catch(err => {\n        console.log(\"error\", err);\n      });\n    };\n  } else {\n    return function (dispatch) {\n      dispatch({\n        type: \"ADD_STUPPUSER\",\n        payload: payload.user\n      });\n      alert(\"L'ajout est effectué avec succès\");\n    };\n  }\n}\nexport function editPassword(data) {\n  return function (dispatch) {\n    axios.post(`${baseUrl.baseUrl}/users/change-password?access_token=` + localStorage.token, {\n      oldPassword: data.currentPass,\n      newPassword: data.newPass\n    }).then(response => {\n      dispatch({\n        type: \"EDIT_PASSWORD\",\n        payload: response.data\n      });\n      dispatch({\n        type: SHOW_SUCCESS_MESSAGE,\n        payload: \"Le changement de votre mot de passe est effectué avec succès\"\n      });\n      setTimeout(() => {\n        dispatch({\n          type: HIDE_SUCCESS_MESSAGE\n        });\n      }, 4000);\n    }).catch(error => {\n      dispatch({\n        type: SHOW_ERROR_MESSAGE,\n        payload: \"Une erreur est survenue lors de la création merci de vérifier votre mot de passe\"\n      });\n      setTimeout(() => {\n        dispatch({\n          type: HIDE_ERROR_MESSAGE\n        });\n      }, 4000);\n    });\n  };\n}\nexport function editStuppUser(stuppUser, file, establishmentName) {\n  if (file !== null) {\n    if (stuppUser.photo !== null) {\n      return function (dispatch) {\n        let formadata = new FormData();\n        formadata.append(\"image\", file);\n        const establishLogoUrl = `${baseUrl.baseUrl}/containers/` + establishmentName + `/files/` + stuppUser.photo + `?access_token=${localStorage.token}`;\n        axios({\n          url: establishLogoUrl,\n          method: \"DELETE\",\n          data: formadata\n        }).then(response => {\n          dispatch(uploadUserPhoto(stuppUser, file, establishmentName));\n        }).catch(err => {\n          console.log(\"error\", err);\n        });\n      };\n    } else {\n      return function (dispatch) {\n        dispatch(uploadUserPhoto(stuppUser, file, establishmentName));\n      };\n    }\n  } else {\n    return function (dispatch) {\n      axios.patch(`${baseUrl.baseUrl}/users/` + stuppUser.id + `?access_token=${localStorage.token}`, {\n        name: stuppUser.name,\n        surname: stuppUser.surname,\n        gender: stuppUser.gender,\n        date_of_birth: stuppUser.date_of_birth,\n        address: stuppUser.address,\n        phone: stuppUser.phone,\n        status: true,\n        cin: stuppUser.cin,\n        zip_code: stuppUser.zip_code,\n        realm: stuppUser.name,\n        username: stuppUser.name + \".\" + stuppUser.surname,\n        email: stuppUser.email,\n        photo: stuppUser.photo\n      }).then(response => {\n        dispatch({\n          type: \"EDIT_STUPPUSER\",\n          payload: response.data\n        });\n        dispatch(editServices(stuppUser));\n      }).catch(function (error) {\n        console.log(\"error\");\n      });\n    };\n  }\n}\nexport function editServices(stuppUser) {\n  const serviceList = stuppUser.services;\n\n  if (stuppUser.services.length > 0) {\n    axios.get(`${baseUrl.baseUrl}/students/findOne?access_token=?access_token=${localStorage.token}&filter={\"where\":{\"profile_id\":` + stuppUser.profile_id + `}}`).then(response => {\n      const student_id = response.data.id;\n      axios.get(`${baseUrl.baseUrl}/students_services?access_token=${localStorage.token}&filter={\"where\":{\"student_id\":` + student_id + `}}`).then(response => {\n        if (response.data.length === 0) {\n          serviceList.map(service => {\n            axios.post(`${baseUrl.baseUrl}/students_services?access_token=${localStorage.token}`, {\n              assignment_date: new Date(),\n              status: true,\n              student_id: student_id,\n              service_id: service\n            }).then(response => {}).catch(err => {\n              console.log(\"error\", err);\n            });\n          });\n        } else {\n          let oldStudentService = response.data;\n          let studentService = oldStudentService.map(service => service.service_id);\n          const servicesID = studentService.concat(serviceList);\n          const uniq = [...new Set(servicesID)];\n          const NewServices = uniq.filter(n => !studentService.includes(n));\n          NewServices.map(service => {\n            axios.post(`${baseUrl.baseUrl}/students_services?access_token=${localStorage.token}`, {\n              assignment_date: new Date(),\n              status: true,\n              student_id: student_id,\n              service_id: service\n            }).then(response => {}).catch(err => {\n              console.log(\"error\", err);\n            });\n          });\n        }\n      });\n      alert(\"La modification est effectué avec succès\", response.data.id);\n    }).catch(err => {\n      console.log(\"error\", err);\n    });\n  } else {\n    return function (dispatch) {\n      alert(\"La modification est effectué avec succès\");\n    };\n  }\n}\nexport function updateUserDataPhoto(stuppUser, file, establishmentName) {\n  return function (dispatch) {\n    const fileExtension = file.name.replace(/^.*\\./, \"\");\n    const fileName = stuppUser.id + stuppUser.cin + \".\" + fileExtension;\n    axios.patch(`${baseUrl.baseUrl}/users/` + stuppUser.id + `?access_token=${localStorage.token}`, {\n      name: stuppUser.name,\n      surname: stuppUser.surname,\n      gender: stuppUser.gender,\n      date_of_birth: stuppUser.date_of_birth,\n      address: stuppUser.address,\n      phone: stuppUser.phone,\n      status: true,\n      cin: stuppUser.cin,\n      zip_code: stuppUser.zip_code,\n      realm: stuppUser.name,\n      username: stuppUser.name + \".\" + stuppUser.surname,\n      email: stuppUser.email,\n      photo: fileName\n    }).then(response => {\n      dispatch({\n        type: \"EDIT_STUPPUSER\",\n        payload: response.data\n      });\n      alert(\"La modification est effectué avec succès\");\n    }).catch(function (error) {\n      console.log(\"error\");\n    });\n  };\n}\nexport function deleteUser(idItem) {\n  return function (dispatch) {\n    axios.get(`${baseUrl.baseUrl}/users/` + idItem + `?access_token=${localStorage.token}`).then(res => {\n      const datastuppUser = res.data;\n      axios.patch(`${baseUrl.baseUrl}/users/` + datastuppUser.id + `?access_token=${localStorage.token}`, {\n        status: false\n      }).then(response => {\n        dispatch({\n          type: \"DELETE_STUPPUSER\",\n          payload: response.data\n        });\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: \"La suppression a été effectuée avec succès\"\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_SUCCESS_MESSAGE\n          });\n        }, 2000);\n      }).catch(function (error) {\n        console.log(\"error\", error);\n      });\n    });\n  };\n}\nexport function deleteStuppUser(idItem) {\n  return function (dispatch) {\n    axios.get(`${baseUrl.baseUrl}/users/` + idItem + `?access_token=${localStorage.token}`).then(res => {\n      const datastuppUser = res.data;\n      axios.put(`${baseUrl.baseUrl}/users/` + datastuppUser.id + `?access_token=${localStorage.token}`, {\n        name: datastuppUser.name,\n        surname: datastuppUser.surname,\n        gender: datastuppUser.gender,\n        date_of_birth: datastuppUser.date_of_birth,\n        address: datastuppUser.address,\n        phone: datastuppUser.phone,\n        status: false,\n        cin: datastuppUser.cin,\n        zip_code: datastuppUser.zip_code,\n        photo: datastuppUser.photo,\n        realm: datastuppUser.realm,\n        username: datastuppUser.username,\n        email: datastuppUser.email,\n        password: \"123456\",\n        emailVerified: datastuppUser.emailVerified,\n        id: datastuppUser.id\n      }).then(response => {\n        dispatch({\n          type: \"DELETE_STUPPUSER\",\n          payload: response.data\n        });\n      }).catch(function (error) {\n        console.log(\"error\", error);\n      });\n    });\n  };\n}\nexport function uploadUserPhoto(id, stuppUser) {\n  return function (dispatch) {\n    const fileExtension = stuppUser.photo.name.replace(/^.*\\./, \"\");\n    const fileName = \"user\" + id + \".\" + fileExtension;\n    const myNewFile = new File([stuppUser.photo], fileName, {\n      type: stuppUser.photo.type\n    });\n    let formadata = new FormData();\n    formadata.append(\"image\", myNewFile);\n    const establishLogoUrl = `${baseUrl.baseUrl}/containers/` + stuppUser.establishment_Name + `/upload?access_token=${localStorage.token}`;\n    axios({\n      url: establishLogoUrl,\n      method: \"POST\",\n      data: formadata\n    }).then(response => {\n      axios.patch(`${baseUrl.baseUrl}/users/` + id + `?access_token=${localStorage.token}`, {\n        photo: fileName\n      }).then(res => {});\n    }).catch(err => {\n      console.log(\"error\", err);\n    });\n  };\n}\nexport function addUser(stuppUser, fileName1) {\n  return function (dispatch) {\n    axios.post(`${baseUrl.baseUrl}/users/create-user?access_token=${localStorage.token}`, {\n      stuppUser\n    }).then(response => {\n      let newFormat = { ...response.data.user[1],\n        user: response.data.user[0],\n        professors: [response.data.user[2]],\n        students: [response.data.user[2]],\n        parents: []\n      };\n\n      if (response.data.user.statusCode === undefined) {\n        dispatch({\n          type: \"ADD_STUPPUSER\",\n          payload: newFormat\n        });\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: \"La création est effectué avec succès\"\n        });\n      } else {\n        dispatch({\n          type: SHOW_ERROR_MESSAGE,\n          payload: getError(response.data.user.statusCode)\n        });\n      }\n\n      setTimeout(function () {\n        if (response.data.user.statusCode === undefined) {\n          dispatch({\n            type: HIDE_SUCCESS_MESSAGE\n          });\n\n          if (stuppUser.photo !== null) {\n            dispatch(uploadUserPhoto(response.data.user[0].id, stuppUser));\n          }\n        } else {\n          dispatch({\n            type: HIDE_ERROR_MESSAGE\n          });\n        }\n      }.bind(this), 3000);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n}\nexport function editUser(stuppUser) {\n  return function (dispatch) {\n    dispatch({\n      type: \"EDIT_STUPPUSER_COMMON_INFORMATION\",\n      payload: stuppUser\n    });\n  };\n}\nexport function addSignature(data) {\n  return function (dispatch) {\n    axios.get(`${baseUrl.baseUrl}/users/` + data.idItem + `?access_token=${localStorage.token}`).then(res => {\n      const datastuppUser = res.data;\n      const fileExtension = data.file.name.replace(/^.*\\./, \"\");\n      const fileName = \"Signature_\" + datastuppUser.id + datastuppUser.cin + \".\" + fileExtension;\n      const myNewFile = new File([data.file], fileName, {\n        type: data.file.type\n      });\n      let formadata = new FormData();\n      formadata.append(\"image\", myNewFile);\n      axios.put(`${baseUrl.baseUrl}/users/` + datastuppUser.id + `?access_token=${localStorage.token}`, {\n        name: datastuppUser.name,\n        surname: datastuppUser.surname,\n        gender: datastuppUser.gender,\n        date_of_birth: datastuppUser.date_of_birth,\n        address: datastuppUser.address,\n        phone: datastuppUser.phone,\n        status: false,\n        cin: datastuppUser.cin,\n        zip_code: datastuppUser.zip_code,\n        photo: datastuppUser.photo,\n        realm: datastuppUser.realm,\n        username: datastuppUser.username,\n        email: datastuppUser.email,\n        password: \"123456\",\n        emailVerified: datastuppUser.emailVerified,\n        id: datastuppUser.id,\n        user_signature: fileName\n      }).then(response => {\n        var object = {};\n        object.file = data.file;\n        object.fileName = fileName;\n        object.establishmentID = data.establishmentID;\n        object.user = response.data;\n        dispatch(updateSignaturePhoto(object));\n      }).catch(function (error) {\n        console.log(\"error\", error);\n      });\n    });\n  };\n}\nexport function updateSignaturePhoto(data) {\n  const fileName = data.fileName;\n  const myNewFile = new File([data.file], data.fileName, {\n    type: data.file.type\n  });\n  let formadata = new FormData();\n  formadata.append(\"image\", myNewFile);\n  return function (dispatch) {\n    axios.get(`${baseUrl.baseUrl}/establishments/` + data.establishmentID + `?access_token=${localStorage.token}`).then(res => {\n      const establishLogoUrl = `${baseUrl.baseUrl}/containers/` + res.data.name + `/upload?access_token=${localStorage.token}`;\n      axios({\n        url: establishLogoUrl,\n        method: \"POST\",\n        data: formadata\n      }).then(response => {\n        dispatch({\n          type: \"EDIT_PROFILE_SIGNATURE\",\n          payload: data.user\n        });\n      }).catch(err => {\n        console.log(\"error\", err);\n      });\n    }).catch(function (error) {\n      console.log(\"error\", error);\n    });\n  };\n}\nexport function errorHandling() {\n  return function (dispatch) {\n    dispatch({\n      type: SHOW_ERROR_MESSAGE,\n      payload: \"Une erreur est survenue lors de la modification merci d'essayer à nouveau\"\n    });\n    setTimeout(() => {\n      dispatch({\n        type: HIDE_ERROR_MESSAGE\n      });\n    }, 4000);\n  };\n}\nexport function successHandling() {\n  return function (dispatch) {\n    dispatch({\n      type: SHOW_SUCCESS_MESSAGE,\n      payload: \"La modification est effectuée avec succès\"\n    });\n    setTimeout(() => {\n      dispatch({\n        type: HIDE_SUCCESS_MESSAGE\n      });\n    }, 4000);\n  };\n}\nexport function successAddUserHandling() {\n  return function (dispatch) {\n    dispatch({\n      type: SHOW_SUCCESS_MESSAGE,\n      payload: \"L'ajout est effectuée avec succès\"\n    });\n    setTimeout(() => {\n      dispatch({\n        type: HIDE_SUCCESS_MESSAGE\n      });\n    }, 4000);\n  };\n}\nexport function successHandlingSteper() {\n  return function (dispatch) {\n    dispatch({\n      type: \"SHOW_SUCCESS_STEPER\",\n      payload: \"La modification est effectuée avec succès pour l'étape précédente\"\n    });\n    setTimeout(() => {\n      dispatch({\n        type: \"HIDE_SUCCESS_STEPER\"\n      });\n    }, 4000);\n  };\n}\nexport function errorHandlingSteper() {\n  return function (dispatch) {\n    dispatch({\n      type: \"SHOW_ERROR_STEPER\",\n      payload: \"Une erreur est survenue lors de la modification merci d'essayer à nouveau\"\n    });\n    setTimeout(() => {\n      dispatch({\n        type: \"HIDE_ERROR_STEPER\"\n      });\n    }, 4000);\n  };\n}\nexport function uploadExcel(file, establishmentId) {\n  let apiEndpoint = \"\";\n\n  if (file !== null) {\n    let dataEstablishment = {};\n    return dispatch => {\n      apiEndpoint = `/establishments/` + establishmentId + `?access_token=${localStorage.token}`;\n      classService.get(apiEndpoint).then(response => {\n        dataEstablishment = {\n          establishment_id: response.data.id,\n          establishment_Name: response.data.name,\n          file_name: file.name\n        };\n        const data = new FormData();\n        data.append(\"file\", file);\n        apiEndpoint = `/containers/` + response.data.name + `/upload?access_token=${localStorage.token}`;\n        classService.post(apiEndpoint, data).then(response => {\n          let apiEndpoint = `/users/addUserByExcel?access_token=${localStorage.token}`;\n          classService.post(apiEndpoint, dataEstablishment).then(response => {\n            if (response.data.users.statusCode === undefined) {\n              dispatch({\n                type: \"ADD_STUPPUSER\",\n                payload: response.data.users\n              });\n\n              if (!_.isEmpty(response.data.errorUser)) {\n                let emails = _.join(_.map(response.data.errorUser, \"Email\"), \" ,\");\n\n                dispatch({\n                  type: SHOW_WARNING_MESSAGE,\n                  payload: `Une erreur est survenue lors de la création des utilisateurs suivants: ${emails} `\n                });\n                dispatch(getAllUsersByEstablishmentId(establishmentId));\n                setTimeout(() => {\n                  dispatch({\n                    type: HIDE_WARNING_MESSAGE\n                  });\n                }, 6000);\n              } else {\n                dispatch(getAllUsersByEstablishmentId(establishmentId));\n                dispatch({\n                  type: SHOW_SUCCESS_MESSAGE,\n                  payload: \"La création est effectué avec succès\"\n                });\n                setTimeout(() => {\n                  dispatch({\n                    type: HIDE_SUCCESS_MESSAGE\n                  });\n                }, 4000);\n              }\n            } else {\n              dispatch({\n                type: SHOW_ERROR_MESSAGE,\n                payload: getError(response.data.users.statusCode)\n              });\n              setTimeout(() => {\n                dispatch({\n                  type: HIDE_ERROR_MESSAGE\n                });\n              }, 4000);\n            }\n          });\n        });\n      });\n    };\n  } else {\n    alert(\"erreur\");\n  }\n}\nexport function getAllStudentByEstablishmentId(establishment_id) {\n  return function (dispatch) {\n    axios.get(`${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[include]=students&filter[where][and][0][establishment_id]=${establishment_id}&filter[where][and][1][role_id]=${roleIdStudent}`).then(res => {\n      const list = res.data;\n      const serviceList = list.filter(element => element.user.status === true);\n      dispatch({\n        type: DATA_LOADED_STUPPUSER,\n        payload: serviceList\n      });\n    });\n  };\n}\nexport function addNewUser(newUser) {\n  return function (dispatch) {\n    dispatch({\n      type: DATA_NEW_STUPPUSER,\n      payload: newUser\n    });\n  };\n}\nexport function uploadAdminPhoto(id, stuppUser, newUser) {\n  return function (dispatch) {\n    const fileExtension = stuppUser.photo.name.replace(/^.*\\./, \"\");\n    const fileName = \"user\" + id + \".\" + fileExtension;\n    const myNewFile = new File([stuppUser.photo], fileName, {\n      type: stuppUser.photo.type\n    });\n    let formadata = new FormData();\n    formadata.append(\"image\", myNewFile);\n    const establishLogoUrl = `${baseUrl.baseUrl}/containers/` + stuppUser.establishment_Name + `/upload?access_token=${localStorage.token}`;\n    axios({\n      url: establishLogoUrl,\n      method: \"POST\",\n      data: formadata\n    }).then(response => {\n      axios.patch(`${baseUrl.baseUrl}/users/` + id + `?access_token=${localStorage.token}`, {\n        photo: fileName\n      }).then(res => {\n        let userInfo = { ...newUser,\n          user: res.data\n        };\n        dispatch(addNewUser(userInfo));\n      });\n    }).catch(err => {\n      console.log(\"error\", err);\n    });\n  };\n}\nexport function uploadProfAndStudentPhoto(id, stuppUser, fileName) {\n  return function (dispatch) {\n    const myNewFile = new File([stuppUser.photo], fileName, {\n      type: stuppUser.photo.type\n    });\n    let formadata = new FormData();\n    formadata.append(\"image\", myNewFile);\n    const establishLogoUrl = `${baseUrl.baseUrl}/containers/` + stuppUser.establishment_Name + `/upload?access_token=${localStorage.token}`;\n    axios({\n      url: establishLogoUrl,\n      method: \"POST\",\n      data: formadata\n    }).then(response => {\n      axios.patch(`${baseUrl.baseUrl}/users/` + id + `?access_token=${localStorage.token}`, {\n        photo: fileName\n      }).then(res => {});\n    }).catch(err => {\n      console.log(\"error\", err);\n    });\n  };\n}\nexport { getUsersByRole, getUserFromProfileId };","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/actions/stuppUserAction.js"],"names":["baseUrl","axios","DATA_LOADED_STUPPUSER","SHOW_ERROR_MESSAGE","HIDE_ERROR_MESSAGE","HIDE_SUCCESS_MESSAGE","SHOW_SUCCESS_MESSAGE","HIDE_WARNING_MESSAGE","SHOW_WARNING_MESSAGE","DATA_NEW_STUPPUSER","_","getError","classService","roleIdStudent","getUsersByRole","usersList","role_id","establishment_id","usersByRole","filter","user","some","profiles","getUserFromProfileId","profile_id","userInfo","id","first","getAllUsers","dispatch","get","localStorage","token","then","res","type","payload","data","getAllUsersByEstablishmentId","list","serviceList","element","status","fetchAllUsers","addStuppUser","stuppUser","userPhoto","parentStudentPhoto","nameParent","fileExtension1","fileName1","fileExtension2","fileName2","name","replace","cin","establishment_Name","cinParent","post","surname","gender","date_of_birth","address","phone","zip_code","realm","username","email","password","emailVerified","surnameParent","genderParent","date_of_birthParent","addressParent","phoneParent","statusParent","zip_codeParent","realmParent","usernameParent","emailParent","passwordParent","emailVerifiedParent","date_start_contract","date_end_contract","listOfSubjects","class_id","service_id","photo","parentStudentphoto","response","uploadStudentParentFile","catch","error","console","log","message","alert","uploadFile","file","establishmentName","fileName","myNewFile","File","formadata","FormData","append","establishLogoUrl","url","method","err","file2","myNewFile2","formadata2","editPassword","oldPassword","currentPass","newPassword","newPass","setTimeout","editStuppUser","uploadUserPhoto","patch","editServices","services","length","student_id","map","service","assignment_date","Date","oldStudentService","studentService","servicesID","concat","uniq","Set","NewServices","n","includes","updateUserDataPhoto","fileExtension","deleteUser","idItem","datastuppUser","deleteStuppUser","put","addUser","newFormat","professors","students","parents","statusCode","undefined","bind","editUser","addSignature","user_signature","object","establishmentID","updateSignaturePhoto","errorHandling","successHandling","successAddUserHandling","successHandlingSteper","errorHandlingSteper","uploadExcel","establishmentId","apiEndpoint","dataEstablishment","file_name","users","isEmpty","errorUser","emails","join","getAllStudentByEstablishmentId","addNewUser","newUser","uploadAdminPhoto","uploadProfAndStudentPhoto"],"mappings":"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","sourcesContent":["import baseUrl from \"../config/config\";\nimport axios from \"axios\";\nimport {\n  DATA_LOADED_STUPPUSER,\n  SHOW_ERROR_MESSAGE,\n  HIDE_ERROR_MESSAGE,\n  HIDE_SUCCESS_MESSAGE,\n  SHOW_SUCCESS_MESSAGE,\n  HIDE_WARNING_MESSAGE,\n  SHOW_WARNING_MESSAGE,\n  DATA_NEW_STUPPUSER\n} from \"../constants/ActionTypes\";\nimport _ from \"lodash\";\nimport { getError } from \"../Error/Error\";\nimport { classService } from \"../_services/class.service\";\nimport { roleIdStudent } from \"../config/config\";\nfunction getUsersByRole(usersList, role_id, establishment_id) {\n  let usersByRole = [];\n  establishment_id\n    ? (usersByRole = _.filter(usersList, function (user) {\n      return _.some(user.profiles, {\n        role_id: role_id,\n        establishment_id: establishment_id,\n      });\n    }))\n    : (usersByRole = _.filter(usersList, function (user) {\n      return _.some(user.profiles, { role_id: role_id });\n    }));\n  return usersByRole;\n}\n\nfunction getUserFromProfileId(usersList, profile_id) {\n  let userInfo = [];\n  userInfo = _.filter(usersList, function (user) {\n    return _.some(user.profiles, { id: profile_id });\n  });\n  return _.first(userInfo);\n}\nexport function getAllUsers() {\n  return function (dispatch) {\n    axios\n      .get(\n        `${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user`\n      )\n      .then((res) => {\n        dispatch({ type: DATA_LOADED_STUPPUSER, payload: res.data });\n      });\n  };\n}\n\nexport function getAllUsersByEstablishmentId(establishment_id) {\n  return function (dispatch) {\n    axios\n      .get(\n        `${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[include]=professors&filter[include]=students&filter[include]=parents&filter[where][and][0][establishment_id]=` +\n        establishment_id\n      )\n\n      .then((res) => {\n        const list = res.data;\n        const serviceList = list.filter(\n          (element) => element.user.status === true\n        );\n        dispatch({ type: DATA_LOADED_STUPPUSER, payload: serviceList });\n      });\n  };\n}\n\nexport function fetchAllUsers() {\n  return function (dispatch) {\n    axios\n      .get(\n        `${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[include]=professors&filter[include]=students`\n      )\n\n      .then((res) => {\n        const list = res.data;\n        const serviceList = list.filter(\n          (element) => element.user.status === true\n        );\n        dispatch({ type: DATA_LOADED_STUPPUSER, payload: serviceList });\n      });\n  };\n}\n\nexport function addStuppUser(stuppUser, userPhoto, parentStudentPhoto) {\n  if (stuppUser.nameParent !== \"\") {\n    return function (dispatch) {\n      var fileExtension1 = \"\";\n      var fileName1 = \"\";\n      var fileExtension2 = \"\";\n      var fileName2 = \"\";\n      if (userPhoto !== null) {\n        fileExtension1 = userPhoto.name.replace(/^.*\\./, \"\");\n        fileName1 =\n          stuppUser.cin + stuppUser.establishment_Name + \".\" + fileExtension1;\n      } else {\n        fileName1 = null;\n      }\n      if (parentStudentPhoto !== null) {\n        fileExtension2 = parentStudentPhoto.name.replace(/^.*\\./, \"\");\n        fileName2 =\n          stuppUser.cinParent +\n          stuppUser.establishment_Name +\n          \".\" +\n          fileExtension2;\n      } else {\n        fileName2 = null;\n      }\n      axios\n        .post(\n          `${baseUrl.baseUrl}/users/create?access_token=${localStorage.token}`,\n          {\n            name: stuppUser.name,\n            surname: stuppUser.surname,\n            gender: stuppUser.gender,\n            date_of_birth: stuppUser.date_of_birth,\n            address: stuppUser.address,\n            phone: stuppUser.phone,\n            status: true,\n            cin: stuppUser.cin,\n            zip_code: stuppUser.zip_code,\n            realm: stuppUser.name,\n            username: stuppUser.name + \".\" + stuppUser.surname,\n            email: stuppUser.email,\n            password: \"123456\",\n            emailVerified: false,\n            nameParent: stuppUser.nameParent,\n            surnameParent: stuppUser.surnameParent,\n            genderParent: stuppUser.genderParent,\n            date_of_birthParent: stuppUser.date_of_birthParent,\n            addressParent: stuppUser.addressParent,\n            phoneParent: stuppUser.phoneParent,\n            statusParent: true,\n            cinParent: stuppUser.cinParent,\n            zip_codeParent: stuppUser.zip_codeParent,\n            realmParent: stuppUser.nameParent,\n            usernameParent:\n              stuppUser.nameParent + \".\" + stuppUser.surnameParent,\n            emailParent: stuppUser.emailParent,\n            passwordParent: \"123456\",\n            emailVerifiedParent: false,\n            date_start_contract: stuppUser.date_start_contract,\n            date_end_contract: stuppUser.date_end_contract,\n            establishment_id: stuppUser.establishment_id,\n            role_id: stuppUser.role_id,\n            listOfSubjects: stuppUser.listOfSubjects,\n            class_id: stuppUser.class_id,\n            service_id: stuppUser.service_id,\n            photo: fileName1,\n            parentStudentphoto: fileName2,\n          }\n        )\n        .then((response) => {\n          dispatch(\n            uploadStudentParentFile(\n              response.data,\n              userPhoto,\n              parentStudentPhoto,\n              stuppUser.establishment_Name,\n              fileName1,\n              fileName2\n            )\n          );\n        })\n        .catch((error) => {\n          console.log(error.message);\n          alert(\"Merci de vérifier votre champ obligatoire\");\n        });\n    };\n  } else {\n    return function (dispatch) {\n      var fileExtension1 = \"\";\n      var fileName1 = \"\";\n      if (userPhoto !== null) {\n        fileExtension1 = userPhoto.name.replace(/^.*\\./, \"\");\n        fileName1 =\n          stuppUser.cin + stuppUser.establishment_Name + \".\" + fileExtension1;\n      } else {\n        fileName1 = null;\n      }\n\n      axios\n        .post(\n          `${baseUrl.baseUrl}/users/create?access_token=${localStorage.token}`,\n          {\n            name: stuppUser.name,\n            surname: stuppUser.surname,\n            gender: stuppUser.gender,\n            date_of_birth: stuppUser.date_of_birth,\n            address: stuppUser.address,\n            phone: stuppUser.phone,\n            status: true,\n            cin: stuppUser.cin,\n            zip_code: stuppUser.zip_code,\n            realm: stuppUser.name,\n            username: stuppUser.name + \".\" + stuppUser.surname,\n            email: stuppUser.email,\n            password: \"123456\",\n            emailVerified: false,\n            nameParent: stuppUser.nameParent,\n            surnameParent: stuppUser.surnameParent,\n            genderParent: stuppUser.genderParent,\n            date_of_birthParent: stuppUser.date_of_birthParent,\n            addressParent: stuppUser.addressParent,\n            phoneParent: stuppUser.phoneParent,\n            statusParent: true,\n            cinParent: stuppUser.cinParent,\n            zip_codeParent: stuppUser.zip_codeParent,\n            realmParent: stuppUser.nameParent,\n            usernameParent:\n              stuppUser.nameParent + \".\" + stuppUser.surnameParent,\n            emailParent: stuppUser.emailParent,\n            passwordParent: \"123456\",\n            emailVerifiedParent: false,\n            date_start_contract: stuppUser.date_start_contract,\n            date_end_contract: stuppUser.date_end_contract,\n            establishment_id: stuppUser.establishment_id,\n            role_id: stuppUser.role_id,\n            listOfSubjects: stuppUser.listOfSubjects,\n            class_id: stuppUser.class_id,\n            service_id: stuppUser.service_id,\n            photo: fileName1,\n            parentStudentphoto: null,\n          }\n        )\n        .then((response) => {\n          dispatch(\n            uploadFile(\n              response.data.user,\n              userPhoto,\n              stuppUser.establishment_Name,\n              fileName1\n            )\n          );\n        })\n        .catch((error) => {\n          console.log(error.message);\n          alert(\"Merci de vérifier votre champ obligatoire\");\n        });\n    };\n  }\n}\n\nexport function uploadFile(payload, file, establishmentName, fileName) {\n  if (fileName !== null) {\n    return function (dispatch) {\n      const myNewFile = new File([file], fileName, { type: file.type });\n      let formadata = new FormData();\n      formadata.append(\"image\", myNewFile);\n      const establishLogoUrl =\n        `${baseUrl.baseUrl}/containers/` +\n        establishmentName +\n        `/upload?access_token=${localStorage.token}`;\n      axios({\n        url: establishLogoUrl,\n        method: \"POST\",\n        data: formadata,\n      })\n        .then((response) => {\n          dispatch({ type: \"ADD_STUPPUSER\", payload: payload });\n          alert(\"L'ajout est effectué avec succès\");\n        })\n        .catch((err) => { });\n    };\n  } else {\n    return function (dispatch) {\n      dispatch({ type: \"ADD_STUPPUSER\", payload: payload });\n      alert(\"L'ajout est effectué avec succès\");\n    };\n  }\n}\n\nexport function uploadStudentParentFile(\n  payload,\n  file,\n  file2,\n  establishmentName,\n  fileName1,\n  fileName2\n) {\n  if (fileName1 !== null && fileName2 !== null) {\n    return function (dispatch) {\n      const myNewFile = new File([file], fileName1, { type: file.type });\n      let formadata = new FormData();\n      formadata.append(\"image\", myNewFile);\n      const establishLogoUrl =\n        `${baseUrl.baseUrl}/containers/` +\n        establishmentName +\n        `/upload?access_token=${localStorage.token}`;\n      axios({\n        url: establishLogoUrl,\n        method: \"POST\",\n        data: formadata,\n      })\n        .then((response) => {\n          const myNewFile2 = new File([file2], fileName2, { type: file2.type });\n          let formadata2 = new FormData();\n          formadata2.append(\"image\", myNewFile2);\n          const establishLogoUrl =\n            `${baseUrl.baseUrl}/containers/` +\n            establishmentName +\n            `/upload?access_token=${localStorage.token}`;\n          axios({\n            url: establishLogoUrl,\n            method: \"POST\",\n            data: formadata2,\n          })\n            .then((response) => {\n              dispatch({ type: \"ADD_STUPPUSER\", payload: payload.user });\n              alert(\"L'ajout est effectué avec succès\");\n            })\n            .catch((err) => {\n              console.log(\"error\", err);\n            });\n        })\n        .catch((err) => {\n          console.log(\"error\", err);\n        });\n    };\n  } else if (fileName1 !== null && fileName2 === null) {\n    return function (dispatch) {\n      const myNewFile = new File([file], fileName1, { type: file.type });\n      let formadata = new FormData();\n      formadata.append(\"image\", myNewFile);\n      const establishLogoUrl =\n        `${baseUrl.baseUrl}/containers/` +\n        establishmentName +\n        `/upload?access_token=${localStorage.token}`;\n      axios({\n        url: establishLogoUrl,\n        method: \"POST\",\n        data: formadata,\n      })\n        .then((response) => {\n          dispatch({ type: \"ADD_STUPPUSER\", payload: payload.user });\n          alert(\"L'ajout est effectué avec succès\");\n        })\n        .catch((err) => {\n          console.log(\"error\", err);\n        });\n    };\n  } else if (fileName1 === null && fileName2 !== null) {\n    return function (dispatch) {\n      const myNewFile = new File([file2], fileName2, { type: file2.type });\n      let formadata = new FormData();\n      formadata.append(\"image\", myNewFile);\n      const establishLogoUrl =\n        `${baseUrl.baseUrl}/containers/` +\n        establishmentName +\n        `/upload?access_token=${localStorage.token}`;\n      axios({\n        url: establishLogoUrl,\n        method: \"POST\",\n        data: formadata,\n      })\n        .then((response) => {\n          dispatch({ type: \"ADD_STUPPUSER\", payload: payload.user });\n          alert(\"L'ajout est effectué avec succès\");\n        })\n        .catch((err) => {\n          console.log(\"error\", err);\n        });\n    };\n  } else {\n    return function (dispatch) {\n      dispatch({ type: \"ADD_STUPPUSER\", payload: payload.user });\n      alert(\"L'ajout est effectué avec succès\");\n    };\n  }\n}\nexport function editPassword(data) {\n  return function (dispatch) {\n    axios\n      .post(\n        `${baseUrl.baseUrl}/users/change-password?access_token=` +\n        localStorage.token,\n        {\n          oldPassword: data.currentPass,\n          newPassword: data.newPass,\n        }\n      )\n      .then((response) => {\n        dispatch({ type: \"EDIT_PASSWORD\", payload: response.data });\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload:\n            \"Le changement de votre mot de passe est effectué avec succès\",\n        });\n        setTimeout(() => {\n          dispatch({ type: HIDE_SUCCESS_MESSAGE });\n        }, 4000);\n      })\n      .catch((error) => {\n        dispatch({\n          type: SHOW_ERROR_MESSAGE,\n          payload:\n            \"Une erreur est survenue lors de la création merci de vérifier votre mot de passe\",\n        });\n        setTimeout(() => {\n          dispatch({ type: HIDE_ERROR_MESSAGE });\n        }, 4000);\n      });\n  };\n}\nexport function editStuppUser(stuppUser, file, establishmentName) {\n  if (file !== null) {\n    if (stuppUser.photo !== null) {\n      return function (dispatch) {\n        let formadata = new FormData();\n        formadata.append(\"image\", file);\n        const establishLogoUrl =\n          `${baseUrl.baseUrl}/containers/` +\n          establishmentName +\n          `/files/` +\n          stuppUser.photo +\n          `?access_token=${localStorage.token}`;\n        axios({\n          url: establishLogoUrl,\n          method: \"DELETE\",\n          data: formadata,\n        })\n          .then((response) => {\n            dispatch(uploadUserPhoto(stuppUser, file, establishmentName));\n          })\n          .catch((err) => {\n            console.log(\"error\", err);\n          });\n      };\n    } else {\n      return function (dispatch) {\n        dispatch(uploadUserPhoto(stuppUser, file, establishmentName));\n      };\n    }\n  } else {\n    return function (dispatch) {\n      axios\n        .patch(\n          `${baseUrl.baseUrl}/users/` +\n          stuppUser.id +\n          `?access_token=${localStorage.token}`,\n          {\n            name: stuppUser.name,\n            surname: stuppUser.surname,\n            gender: stuppUser.gender,\n            date_of_birth: stuppUser.date_of_birth,\n            address: stuppUser.address,\n            phone: stuppUser.phone,\n            status: true,\n            cin: stuppUser.cin,\n            zip_code: stuppUser.zip_code,\n            realm: stuppUser.name,\n            username: stuppUser.name + \".\" + stuppUser.surname,\n            email: stuppUser.email,\n            photo: stuppUser.photo,\n          }\n        )\n        .then((response) => {\n          dispatch({ type: \"EDIT_STUPPUSER\", payload: response.data });\n          dispatch(editServices(stuppUser));\n        })\n        .catch(function (error) {\n          console.log(\"error\");\n        });\n    };\n  }\n}\nexport function editServices(stuppUser) {\n  const serviceList = stuppUser.services;\n  if (stuppUser.services.length > 0) {\n    axios\n      .get(\n        `${baseUrl.baseUrl}/students/findOne?access_token=?access_token=${localStorage.token}&filter={\"where\":{\"profile_id\":` +\n        stuppUser.profile_id +\n        `}}`\n      )\n      .then((response) => {\n        const student_id = response.data.id;\n        axios\n          .get(\n            `${baseUrl.baseUrl}/students_services?access_token=${localStorage.token}&filter={\"where\":{\"student_id\":` +\n            student_id +\n            `}}`\n          )\n          .then((response) => {\n            if (response.data.length === 0) {\n              serviceList.map((service) => {\n                axios\n                  .post(\n                    `${baseUrl.baseUrl}/students_services?access_token=${localStorage.token}`,\n                    {\n                      assignment_date: new Date(),\n                      status: true,\n                      student_id: student_id,\n                      service_id: service,\n                    }\n                  )\n                  .then((response) => { })\n                  .catch((err) => {\n                    console.log(\"error\", err);\n                  });\n              });\n            } else {\n              let oldStudentService = response.data;\n              let studentService = oldStudentService.map(\n                (service) => service.service_id\n              );\n              const servicesID = studentService.concat(serviceList);\n              const uniq = [...new Set(servicesID)];\n              const NewServices = uniq.filter(\n                (n) => !studentService.includes(n)\n              );\n              NewServices.map((service) => {\n                axios\n                  .post(\n                    `${baseUrl.baseUrl}/students_services?access_token=${localStorage.token}`,\n                    {\n                      assignment_date: new Date(),\n                      status: true,\n                      student_id: student_id,\n                      service_id: service,\n                    }\n                  )\n                  .then((response) => { })\n                  .catch((err) => {\n                    console.log(\"error\", err);\n                  });\n              });\n            }\n          });\n        alert(\"La modification est effectué avec succès\", response.data.id);\n      })\n      .catch((err) => {\n        console.log(\"error\", err);\n      });\n  } else {\n    return function (dispatch) {\n      alert(\"La modification est effectué avec succès\");\n    };\n  }\n}\n\nexport function updateUserDataPhoto(stuppUser, file, establishmentName) {\n  return function (dispatch) {\n    const fileExtension = file.name.replace(/^.*\\./, \"\");\n    const fileName = stuppUser.id + stuppUser.cin + \".\" + fileExtension;\n    axios\n      .patch(\n        `${baseUrl.baseUrl}/users/` +\n        stuppUser.id +\n        `?access_token=${localStorage.token}`,\n        {\n          name: stuppUser.name,\n          surname: stuppUser.surname,\n          gender: stuppUser.gender,\n          date_of_birth: stuppUser.date_of_birth,\n          address: stuppUser.address,\n          phone: stuppUser.phone,\n          status: true,\n          cin: stuppUser.cin,\n          zip_code: stuppUser.zip_code,\n          realm: stuppUser.name,\n          username: stuppUser.name + \".\" + stuppUser.surname,\n          email: stuppUser.email,\n          photo: fileName,\n        }\n      )\n      .then((response) => {\n        dispatch({ type: \"EDIT_STUPPUSER\", payload: response.data });\n        alert(\"La modification est effectué avec succès\");\n      })\n      .catch(function (error) {\n        console.log(\"error\");\n      });\n  };\n}\n\nexport function deleteUser(idItem) {\n  return function (dispatch) {\n    axios\n      .get(\n        `${baseUrl.baseUrl}/users/` +\n        idItem +\n        `?access_token=${localStorage.token}`\n      )\n      .then((res) => {\n        const datastuppUser = res.data;\n        axios\n          .patch(\n            `${baseUrl.baseUrl}/users/` +\n            datastuppUser.id +\n            `?access_token=${localStorage.token}`,\n            {\n              status: false,\n            }\n          )\n          .then((response) => {\n            dispatch({ type: \"DELETE_STUPPUSER\", payload: response.data });\n            dispatch({\n              type: SHOW_SUCCESS_MESSAGE,\n              payload: \"La suppression a été effectuée avec succès\",\n            });\n\n            setTimeout(() => {\n              dispatch({ type: HIDE_SUCCESS_MESSAGE });\n            }, 2000);\n          })\n          .catch(function (error) {\n            console.log(\"error\", error);\n          });\n      });\n  };\n}\n\nexport function deleteStuppUser(idItem) {\n  return function (dispatch) {\n    axios\n      .get(\n        `${baseUrl.baseUrl}/users/` +\n        idItem +\n        `?access_token=${localStorage.token}`\n      )\n      .then((res) => {\n        const datastuppUser = res.data;\n        axios\n          .put(\n            `${baseUrl.baseUrl}/users/` +\n            datastuppUser.id +\n            `?access_token=${localStorage.token}`,\n            {\n              name: datastuppUser.name,\n              surname: datastuppUser.surname,\n              gender: datastuppUser.gender,\n              date_of_birth: datastuppUser.date_of_birth,\n              address: datastuppUser.address,\n              phone: datastuppUser.phone,\n              status: false,\n              cin: datastuppUser.cin,\n              zip_code: datastuppUser.zip_code,\n              photo: datastuppUser.photo,\n              realm: datastuppUser.realm,\n              username: datastuppUser.username,\n              email: datastuppUser.email,\n              password: \"123456\",\n              emailVerified: datastuppUser.emailVerified,\n              id: datastuppUser.id,\n            }\n          )\n          .then((response) => {\n            dispatch({ type: \"DELETE_STUPPUSER\", payload: response.data });\n          })\n          .catch(function (error) {\n            console.log(\"error\", error);\n          });\n      });\n  };\n}\n\nexport function uploadUserPhoto(id, stuppUser) {\n  return function (dispatch) {\n    const fileExtension = stuppUser.photo.name.replace(/^.*\\./, \"\");\n    const fileName = \"user\" + id + \".\" + fileExtension;\n    const myNewFile = new File([stuppUser.photo], fileName, {\n      type: stuppUser.photo.type,\n    });\n    let formadata = new FormData();\n    formadata.append(\"image\", myNewFile);\n    const establishLogoUrl =\n      `${baseUrl.baseUrl}/containers/` +\n      stuppUser.establishment_Name +\n      `/upload?access_token=${localStorage.token}`;\n    axios({\n      url: establishLogoUrl,\n      method: \"POST\",\n      data: formadata,\n    })\n      .then((response) => {\n        axios\n          .patch(\n            `${baseUrl.baseUrl}/users/` +\n            id +\n            `?access_token=${localStorage.token}`,\n            { photo: fileName }\n          )\n          .then((res) => {\n          });\n      })\n      .catch((err) => {\n        console.log(\"error\", err);\n      });\n  };\n}\n\nexport function addUser(stuppUser, fileName1) {\n  return function (dispatch) {\n    axios\n      .post(\n        `${baseUrl.baseUrl}/users/create-user?access_token=${localStorage.token}`,\n        { stuppUser }\n      )\n      .then((response) => {\n        let newFormat = {\n          ...response.data.user[1],\n          user: response.data.user[0],\n          professors: [response.data.user[2]],\n          students: [response.data.user[2]],\n          parents: [],\n        };\n        if (response.data.user.statusCode === undefined) {\n          dispatch({ type: \"ADD_STUPPUSER\", payload: newFormat });\n          dispatch({\n            type: SHOW_SUCCESS_MESSAGE,\n            payload: \"La création est effectué avec succès\",\n          });\n        } else {\n          dispatch({\n            type: SHOW_ERROR_MESSAGE,\n            payload: getError(response.data.user.statusCode),\n          });\n        }\n        setTimeout(\n          function () {\n            if (response.data.user.statusCode === undefined) {\n              dispatch({ type: HIDE_SUCCESS_MESSAGE });\n              if (stuppUser.photo !== null) {\n                dispatch(uploadUserPhoto(response.data.user[0].id, stuppUser));\n              }\n            } else {\n              dispatch({ type: HIDE_ERROR_MESSAGE });\n            }\n          }.bind(this),\n          3000\n        );\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n}\nexport function editUser(stuppUser) {\n  return function (dispatch) {\n    dispatch({ type: \"EDIT_STUPPUSER_COMMON_INFORMATION\", payload: stuppUser });\n  };\n}\n\nexport function addSignature(data) {\n  return function (dispatch) {\n    axios\n      .get(\n        `${baseUrl.baseUrl}/users/` +\n        data.idItem +\n        `?access_token=${localStorage.token}`\n      )\n      .then((res) => {\n        const datastuppUser = res.data;\n        const fileExtension = data.file.name.replace(/^.*\\./, \"\");\n        const fileName =\n          \"Signature_\" +\n          datastuppUser.id +\n          datastuppUser.cin +\n          \".\" +\n          fileExtension;\n        const myNewFile = new File([data.file], fileName, {\n          type: data.file.type,\n        });\n        let formadata = new FormData();\n        formadata.append(\"image\", myNewFile);\n        axios\n          .put(\n            `${baseUrl.baseUrl}/users/` +\n            datastuppUser.id +\n            `?access_token=${localStorage.token}`,\n            {\n              name: datastuppUser.name,\n              surname: datastuppUser.surname,\n              gender: datastuppUser.gender,\n              date_of_birth: datastuppUser.date_of_birth,\n              address: datastuppUser.address,\n              phone: datastuppUser.phone,\n              status: false,\n              cin: datastuppUser.cin,\n              zip_code: datastuppUser.zip_code,\n              photo: datastuppUser.photo,\n              realm: datastuppUser.realm,\n              username: datastuppUser.username,\n              email: datastuppUser.email,\n              password: \"123456\",\n              emailVerified: datastuppUser.emailVerified,\n              id: datastuppUser.id,\n              user_signature: fileName,\n            }\n          )\n          .then((response) => {\n            var object = {};\n            object.file = data.file;\n            object.fileName = fileName;\n            object.establishmentID = data.establishmentID;\n            object.user = response.data;\n            dispatch(updateSignaturePhoto(object));\n          })\n          .catch(function (error) {\n            console.log(\"error\", error);\n          });\n      });\n  };\n}\n\nexport function updateSignaturePhoto(data) {\n  const fileName = data.fileName;\n  const myNewFile = new File([data.file], data.fileName, {\n    type: data.file.type,\n  });\n  let formadata = new FormData();\n  formadata.append(\"image\", myNewFile);\n  return function (dispatch) {\n    axios\n      .get(\n        `${baseUrl.baseUrl}/establishments/` +\n        data.establishmentID +\n        `?access_token=${localStorage.token}`\n      )\n      .then((res) => {\n        const establishLogoUrl =\n          `${baseUrl.baseUrl}/containers/` +\n          res.data.name +\n          `/upload?access_token=${localStorage.token}`;\n        axios({\n          url: establishLogoUrl,\n          method: \"POST\",\n          data: formadata,\n        })\n          .then((response) => {\n            dispatch({ type: \"EDIT_PROFILE_SIGNATURE\", payload: data.user });\n          })\n          .catch((err) => {\n            console.log(\"error\", err);\n          });\n      })\n      .catch(function (error) {\n        console.log(\"error\", error);\n      });\n  };\n}\n\nexport function errorHandling() {\n  return function (dispatch) {\n    dispatch({\n      type: SHOW_ERROR_MESSAGE,\n      payload:\n        \"Une erreur est survenue lors de la modification merci d'essayer à nouveau\",\n    });\n    setTimeout(() => {\n      dispatch({ type: HIDE_ERROR_MESSAGE });\n    }, 4000);\n  };\n}\n\nexport function successHandling() {\n  return function (dispatch) {\n    dispatch({\n      type: SHOW_SUCCESS_MESSAGE,\n      payload: \"La modification est effectuée avec succès\",\n    });\n    setTimeout(() => {\n      dispatch({ type: HIDE_SUCCESS_MESSAGE });\n    }, 4000);\n  };\n}\nexport function successAddUserHandling() {\n  return function (dispatch) {\n    dispatch({\n      type: SHOW_SUCCESS_MESSAGE,\n      payload: \"L'ajout est effectuée avec succès\",\n    });\n    setTimeout(() => {\n      dispatch({ type: HIDE_SUCCESS_MESSAGE });\n    }, 4000);\n  };\n}\nexport function successHandlingSteper() {\n  return function (dispatch) {\n    dispatch({\n      type: \"SHOW_SUCCESS_STEPER\",\n      payload:\n        \"La modification est effectuée avec succès pour l'étape précédente\",\n    });\n    setTimeout(() => {\n      dispatch({ type: \"HIDE_SUCCESS_STEPER\" });\n    }, 4000);\n  };\n}\nexport function errorHandlingSteper() {\n  return function (dispatch) {\n    dispatch({\n      type: \"SHOW_ERROR_STEPER\",\n      payload:\n        \"Une erreur est survenue lors de la modification merci d'essayer à nouveau\",\n    });\n    setTimeout(() => {\n      dispatch({ type: \"HIDE_ERROR_STEPER\" });\n    }, 4000);\n  };\n}\n\nexport function uploadExcel(file, establishmentId) {\n  let apiEndpoint = \"\";\n  if (file !== null) {\n    let dataEstablishment = {};\n    return (dispatch) => {\n      apiEndpoint =\n        `/establishments/` +\n        establishmentId +\n        `?access_token=${localStorage.token}`;\n      classService.get(apiEndpoint).then((response) => {\n        dataEstablishment = {\n          establishment_id: response.data.id,\n          establishment_Name: response.data.name,\n          file_name: file.name,\n        };\n        const data = new FormData();\n        data.append(\"file\", file);\n        apiEndpoint =\n          `/containers/` +\n          response.data.name +\n          `/upload?access_token=${localStorage.token}`;\n        classService.post(apiEndpoint, data).then((response) => {\n          let apiEndpoint = `/users/addUserByExcel?access_token=${localStorage.token}`;\n          classService.post(apiEndpoint, dataEstablishment).then((response) => {\n            if (response.data.users.statusCode === undefined) {\n              dispatch({ type: \"ADD_STUPPUSER\", payload: response.data.users });\n              if (!_.isEmpty(response.data.errorUser)) {\n                let emails = _.join(\n                  _.map(response.data.errorUser, \"Email\"),\n                  \" ,\"\n                );\n                dispatch({\n                  type: SHOW_WARNING_MESSAGE,\n                  payload: `Une erreur est survenue lors de la création des utilisateurs suivants: ${emails} `,\n                });\n                dispatch(getAllUsersByEstablishmentId(establishmentId));\n                setTimeout(() => {\n                  dispatch({ type: HIDE_WARNING_MESSAGE });\n                }, 6000);\n              } else {\n                dispatch(getAllUsersByEstablishmentId(establishmentId));\n                dispatch({\n                  type: SHOW_SUCCESS_MESSAGE,\n                  payload: \"La création est effectué avec succès\",\n                });\n                setTimeout(() => {\n                  dispatch({ type: HIDE_SUCCESS_MESSAGE });\n                }, 4000);\n              }\n            } else {\n              dispatch({\n                type: SHOW_ERROR_MESSAGE,\n                payload: getError(response.data.users.statusCode),\n              });\n              setTimeout(() => {\n                dispatch({ type: HIDE_ERROR_MESSAGE });\n              }, 4000);\n            }\n          });\n        });\n      });\n    };\n  } else {\n    alert(\"erreur\");\n  }\n}\n\nexport function getAllStudentByEstablishmentId(establishment_id) {\n  return function (dispatch) {\n    axios\n      .get(\n        `${baseUrl.baseUrl}/profiles?access_token=${localStorage.token}&filter[include]=user&filter[include]=students&filter[where][and][0][establishment_id]=${establishment_id}&filter[where][and][1][role_id]=${roleIdStudent}`\n      )\n      .then((res) => {\n        const list = res.data;\n        const serviceList = list.filter(\n          (element) => element.user.status === true\n        );\n        dispatch({ type: DATA_LOADED_STUPPUSER, payload: serviceList });\n      });\n  };\n}\n\nexport function addNewUser(newUser) {\n  return function (dispatch) {\n\n    dispatch({ type: DATA_NEW_STUPPUSER, payload: newUser });\n  };\n}\n\nexport function uploadAdminPhoto(id, stuppUser, newUser) {\n  return function (dispatch) {\n    const fileExtension = stuppUser.photo.name.replace(/^.*\\./, \"\");\n    const fileName = \"user\" + id + \".\" + fileExtension;\n    const myNewFile = new File([stuppUser.photo], fileName, {\n      type: stuppUser.photo.type,\n    });\n    let formadata = new FormData();\n    formadata.append(\"image\", myNewFile);\n    const establishLogoUrl = `${baseUrl.baseUrl}/containers/` + stuppUser.establishment_Name + `/upload?access_token=${localStorage.token}`;\n    axios({\n      url: establishLogoUrl,\n      method: \"POST\",\n      data: formadata,\n    }).then((response) => {\n      axios.patch(`${baseUrl.baseUrl}/users/` + id + `?access_token=${localStorage.token}`, { photo: fileName })\n        .then((res) => {\n          let userInfo = {\n            ...newUser,\n            user: res.data\n          }\n          dispatch(addNewUser(userInfo))\n        });\n    })\n      .catch((err) => {\n        console.log(\"error\", err);\n      });\n  };\n}\n\nexport function uploadProfAndStudentPhoto(id, stuppUser, fileName) {\n  return function (dispatch) {\n    const myNewFile = new File([stuppUser.photo], fileName, {\n      type: stuppUser.photo.type,\n    });\n    let formadata = new FormData();\n    formadata.append(\"image\", myNewFile);\n    const establishLogoUrl =\n      `${baseUrl.baseUrl}/containers/` +\n      stuppUser.establishment_Name +\n      `/upload?access_token=${localStorage.token}`;\n    axios({\n      url: establishLogoUrl,\n      method: \"POST\",\n      data: formadata,\n    })\n      .then((response) => {\n          axios.patch(`${baseUrl.baseUrl}/users/` + id + `?access_token=${localStorage.token}`, { photo: fileName })\n            .then((res) => {\n\n            });\n      \n      }).catch((err) => {\n        console.log(\"error\", err);\n      });\n\n  };\n}\n\n\n\n\n\nexport { getUsersByRole, getUserFromProfileId };\n"]},"metadata":{},"sourceType":"module"}