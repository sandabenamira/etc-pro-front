{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/UsersManagement/Users.js\";\nimport React from 'react';\nimport CardBox from '../../../../../components/CardBox/index';\nimport { connect } from 'react-redux';\nimport ArchiveUsers from './ArchiveUsers';\nimport UsersList from './UsersList';\nimport { UncontrolledAlert } from 'reactstrap';\nimport AddUsers from './AddUsers';\nimport { getAllRole } from '../../../../../actions/usersAction';\nimport { getSchoolYearEtabs } from '../../../../../actions/SchoolYearEtabAction';\nimport countriesList from '../../../../../constants/const';\nimport { addUsers, getAllUsersForAdmin, getAllUsersForSuperAdministrator } from '../../../../../actions/usersAction';\nimport Can from '../../../../../can';\nimport { RoleContext } from '../../../../../Context';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport { roleIdSuperAdmin, roleIdAdmin, roleIdProfessor, roleIdStudent, roleIdDirector, roleIdParent, roleIdSupervisor } from '../../../../../config/config';\nimport { addUserPermitted } from '../../../../../constants/validationFunctions';\n\nclass Users extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChangeStudentClass = selectedOption => {\n      this.setState({\n        studentClass: selectedOption.id,\n        levelId: selectedOption.levelId,\n        sectionId: selectedOption.sectionId\n      });\n    };\n\n    this.handleChangeAlerte = name => {\n      this.setState({\n        sessionExist: true,\n        messageAlerte: 'Il existe déja une licence pour cet etablissement'\n      });\n      setTimeout(() => {\n        this.setState({\n          sessionExist: false,\n          messageAlerte: ''\n        });\n      }, 4000);\n    };\n\n    this.handleChangeEducationType = name => event => {\n      let obj = JSON.parse(event.target.value);\n      this.setState({\n        educationItem: obj,\n        educationTypeId: obj.id\n      });\n    };\n\n    this.handleChangePhone = value => {\n      this.setState({\n        userPhoneNumber: value\n      });\n    };\n\n    this.handleChange = name => event => {\n      this.setState({\n        [name]: event.target.value\n      });\n    };\n\n    this.handleChangeBirthdayDate = date => {\n      this.setState({\n        birthdayDate: date\n      });\n    };\n\n    this.handleChangeRole = selectedOption => {\n      if (selectedOption.id == roleIdStudent) {\n        this.setState({\n          birthdayDate: moment().year() - 6 + '-01-01'\n        });\n      }\n\n      this.setState({\n        roleId: selectedOption.id,\n        roleName: selectedOption.label\n      });\n    };\n\n    this.handleChangeSchoolYear = selectedOption => {\n      this.setState({\n        schoolyearId: selectedOption.id\n      });\n    };\n\n    this.handleChangeClassRoom = (selectedOption, name, index) => {\n      if (name === 'classId') {\n        let subjectsList = [];\n        this.props.courseAssignment.map(element => {\n          if (element.fk_id_class_v4 === selectedOption.id) {\n            var object = {};\n            object.label = element.subject.name;\n            object.id = element.id;\n            object.value = element.id;\n            subjectsList.push(object);\n          }\n        });\n        let newListSubjects = this.state.listOfSubjects.map((objSubject, i) => i === index ? { ...objSubject,\n          [name]: selectedOption.value,\n          subjects: subjectsList\n        } : objSubject);\n        this.setState({\n          listOfSubjects: newListSubjects\n        });\n      } else if (name === 'subjectId') {\n        let newListSubjects = this.state.listOfSubjects.map((objSubject, i) => i === index ? { ...objSubject,\n          [name]: selectedOption.value\n        } : objSubject);\n        this.setState({\n          listOfSubjects: newListSubjects\n        });\n      }\n    };\n\n    this.addNewSubject = index => {\n      let listOfSubjects = [];\n      this.state.listOfSubjects.map(element => {\n        listOfSubjects.push({\n          id: element.id,\n          classId: element.classId,\n          subjectId: element.subjectId,\n          subjects: element.subjects,\n          isAdded: true\n        });\n      });\n      listOfSubjects.push({\n        id: index,\n        classId: 0,\n        subjectId: 0,\n        subjects: [],\n        isAdded: false\n      });\n      this.setState({\n        listOfSubjects\n      });\n    };\n\n    this.deleteChoice = index => {\n      let listOfSubjectsClasses = this.state.listOfSubjects.filter((element, i) => i !== index);\n      this.setState({\n        listOfSubjects: listOfSubjectsClasses\n      });\n    };\n\n    this.handleChangeSubject = selectedOption => {\n      this.setState({\n        subjectId: selectedOption.id,\n        subjectItem: selectedOption\n      });\n    };\n\n    this.handleChangeParent = selectedOption => {\n      this.setState({\n        parentId: selectedOption.id\n      });\n    };\n\n    this.handleChangeStudent = selectedOption => {\n      this.setState({\n        studentId: selectedOption.id\n      });\n    };\n\n    this.handleChangeCountries = selectedOption => {\n      this.setState({\n        userCountry: selectedOption.id\n      });\n    };\n\n    this.handleChangeEstablishments = selectedOption => {\n      this.setState({\n        establishmentId: selectedOption.id\n      });\n    };\n\n    this.handleChangeFunctions = selectedOption => {\n      this.setState({\n        functionName: selectedOption.label\n      });\n    };\n\n    this.uploadPhoto = e => {\n      if (e.target.files[0] !== undefined) {\n        let file = e.target.files[0];\n        this.setState({\n          userPhoto: file,\n          photoText: file.name\n        });\n      } else {\n        this.setState({\n          messageAlerte: \"Vous n'avez pas choisir une photo\",\n          alerteFiltre: true\n        });\n        setTimeout(() => {\n          this.setState({\n            messageAlerte: '',\n            alerteFiltre: false\n          });\n        }, 4000);\n      }\n    };\n\n    this.openArchive = () => {\n      this.setState(previousState => ({\n        openArchive: !previousState.openArchive\n      }));\n    };\n\n    this.handleChangeFilterRole = name => event => {\n      if (name === 'filterRoleId') {\n        let filterRole = [];\n\n        if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n          filterRole = this.props.usersReducer.users.filter(element => element.roleId == event.target.value);\n        } //  else {\n        //   filterClasses = this.props.ClassSettings.filter(\n        //     (element) => element.fk_id_level_v4 == event.target.value\n        //   );\n        // }\n\n\n        this.setState({\n          [name]: event.target.value,\n          filterRole\n        });\n      }\n    };\n\n    this.handleChangeFilterLevel = name => event => {\n      if (name === 'filterLevelId') {\n        let filterLevel = [];\n\n        if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n          filterLevel = this.props.usersReducer.users.filter(element => element.roleId == event.target.value);\n        } //  else {\n        //   filterClasses = this.props.ClassSettings.filter(\n        //     (element) => element.fk_id_level_v4 == event.target.value\n        //   );\n        // }\n\n\n        this.setState({\n          [name]: event.target.value,\n          filterLevel\n        });\n      }\n    };\n\n    this.state = {\n      listRoles: [],\n      listSchoolYears: [],\n      roleId: '',\n      roleName: '',\n      schoolyearId: '',\n      classRoomId: '',\n      subjectId: '',\n      parentId: null,\n      studentId: null,\n      userName: '',\n      userLastName: '',\n      userNationnality: '',\n      userCIN: '',\n      userID: '',\n      userMail: '',\n      userPhoneNumber: '',\n      userAdress: '',\n      userCountry: '',\n      userZipCode: '',\n      userPhoto: '',\n      userGender: '',\n      birthdayDate: moment().year() - 18 + '-01-01',\n      birthdayPlace: '',\n      countriesList: [],\n      usefulInformation: '',\n      userPapiersFiles: [],\n      nameUserPapiersFiles: [],\n      isOpen: false,\n      openArchive: false,\n      start_date: new Date(),\n      end_date: new Date(),\n      isOpenArchive: false,\n      messageAlerte: '',\n      photoText: '',\n      nameFiles: [],\n      establishmentsList: [],\n      establishmentId: '',\n      classRoomList: [],\n      subjectsList: [],\n      classForStudent: [],\n      studentClass: '',\n      functionName: '',\n      missingValue: false,\n      alertMessage: '',\n      subjectItem: {},\n      listOfSubjects: [{\n        id: 0,\n        classId: 0,\n        subjectId: 0,\n        subjects: []\n      }],\n      parentsList: [],\n      studentsList: [],\n      levelId: null,\n      sectionId: null,\n      userList: [],\n      permissionList: []\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleArchive = this.handleArchive.bind(this);\n    this.handleChangeBirthdayDate = this.handleChangeBirthdayDate.bind(this);\n    this.openArchiveModal = this.openArchiveModal.bind(this);\n    this.handleChangeAlerte = this.handleChangeAlerte.bind(this);\n    this.handleChangeRole = this.handleChangeRole.bind(this);\n    this.handleChangeSchoolYear = this.handleChangeSchoolYear.bind(this);\n    this.handleChangeClassRoom = this.handleChangeClassRoom.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.handleChangeParent = this.handleChangeParent.bind(this);\n    this.handleChangeStudent = this.handleChangeStudent.bind(this);\n    this.handleChangeCountries = this.handleChangeCountries.bind(this);\n    this.attachFile = this.attachFile.bind(this);\n    this.uploadPhoto = this.uploadPhoto.bind(this);\n    this.openArchive = this.openArchive.bind(this);\n    this.handleChangeEstablishments = this.handleChangeEstablishments.bind(this);\n    this.handleChangeStudentClass = this.handleChangeStudentClass.bind(this);\n    this.handleChangeFunctions = this.handleChangeFunctions.bind(this);\n    this.handleChangePhone = this.handleChangePhone.bind(this);\n    this.handleChangeFilterRole = this.handleChangeFilterRole.bind(this);\n    this.handleChangeFilterLevel = this.handleChangeFilterLevel.bind(this);\n    this.addNewSubject = this.addNewSubject.bind(this);\n    this.deleteChoice = this.deleteChoice.bind(this);\n  }\n\n  openArchiveModal() {\n    this.setState(previousState => ({\n      isOpenArchive: !previousState.isOpenArchive\n    }));\n  }\n\n  handleCancel() {\n    this.setState({\n      isOpen: false\n    });\n  } // openAddModal() {\n  //   this.setState({ isOpen: true });\n  // }\n\n\n  openAddModal() {\n    this.setState(previousState => ({\n      isOpen: !previousState.isOpen\n    }));\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    let AssignementIdProf = [];\n    this.state.listOfSubjects.map(element => {\n      if (element.subjectId != 0) {\n        AssignementIdProf.push(element.subjectId);\n      }\n    });\n\n    if (this.state.roleId === '' || this.state.schoolyearId === '') {\n      this.setState({\n        missingValue: true,\n        alertMessage: 'Il faut remplir les champs obligatoires '\n      });\n      setTimeout(() => {\n        this.setState({\n          alertMessage: '',\n          missingValue: false\n        });\n      }, 4000);\n    } else {\n      if (this.state.roleId === roleIdProfessor && AssignementIdProf.length === 0) {\n        this.setState({\n          missingValue: true,\n          alertMessage: 'Il faut affecter une classe et une matiére pour le professeur '\n        });\n        setTimeout(() => {\n          this.setState({\n            alertMessage: '',\n            missingValue: false\n          });\n        }, 4000);\n      } else {\n        this.openAddModal();\n        let data = {\n          name: this.state.userName,\n          surname: this.state.userLastName,\n          gender: this.state.userGender,\n          dateOfBirth: this.state.birthdayDate,\n          placeOfBirth: this.state.birthdayPlace,\n          address: this.state.userAdress,\n          nationality: this.state.userNationnality,\n          phone: this.state.userPhoneNumber,\n          status: true,\n          cin: this.state.userCIN,\n          zipCode: this.state.userZipCode,\n          userCountry: this.state.userCountry,\n          userPhoto: this.state.userPhoto,\n          userPapiersFiles: this.state.userPapiersFiles,\n          name_ar: 'string',\n          surname_ar: 'string',\n          email: this.state.userMail,\n          roleId: this.state.roleId,\n          establishmentId: this.state.establishmentId,\n          assignClassSubject: AssignementIdProf,\n          studentClass: this.state.studentClass,\n          schoolyearId: this.state.schoolyearId,\n          functionName: this.state.functionName,\n          password: '123456',\n          login: 'login1',\n          levelId: this.state.levelId,\n          sectionId: this.state.sectionId,\n          usefulInformation: this.state.usefulInformation,\n          parentId: this.state.parentId,\n          studentId: this.state.studentId\n        };\n        console.log(data, 'data avant action');\n        this.props.addUsers(data);\n        this.setState({\n          userName: '',\n          userLastName: '',\n          userGender: '',\n          birthdayDate: moment().year() - 18 + '-01-01',\n          birthdayPlace: '',\n          userAdress: '',\n          userNationnality: '',\n          userPhoneNumber: '',\n          status: true,\n          userCIN: '',\n          userZipCode: '',\n          userPhoto: '',\n          userPapiersfiles: [],\n          userCountry: '',\n          name_ar: '',\n          surname_ar: '',\n          userMail: '',\n          establishmentId: this.props.userProfile.establishment_id,\n          schoolyearId: null,\n          studentClass: null,\n          subjectId: null,\n          functionName: '',\n          levelId: null,\n          sectionId: null,\n          parentId: null,\n          studentId: null,\n          usefulInformation: ''\n        });\n      }\n    }\n  }\n\n  handleArchive(event) {\n    event.preventDefault();\n    this.openAddModal();\n    this.setState({});\n  }\n\n  attachFile(e) {\n    var oldFiles = this.state.userPapiersFiles;\n    var files = Object.values(e.target.files);\n    var nameFiles = this.state.nameUserPapiersFiles;\n\n    if (files !== undefined && this.state.nameUserPapiersFiles.length + files.length < 6) {\n      files.map(element => {\n        nameFiles.push(element.name);\n        oldFiles.push(element);\n      });\n      this.setState({\n        userPapiersfiles: oldFiles,\n        nameFiles\n      });\n    } else {\n      this.setState({\n        messageAlerte: 'vous avez dépasser 5 fichiers',\n        alerteStatus: true\n      });\n      setTimeout(() => {\n        this.setState({\n          messageAlerte: '',\n          alerteStatus: false\n        });\n      }, 4000);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.ClassSettings !== this.props.ClassSettings) {\n      let classForStudent = [];\n      classForStudent = this.props.ClassSettings.map(element => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        object.sectionId = element.fk_id_section_v4;\n        object.levelId = element.fk_id_level_v4;\n        return object;\n      });\n      this.setState({\n        classForStudent\n      });\n    }\n\n    if (prevProps.courseAssignment !== this.props.courseAssignment) {\n      let classRoomList = [];\n      classRoomList = this.props.courseAssignment.map(element => {\n        var object = {};\n        object.label = element.class.name;\n        object.id = element.class.id;\n        object.value = element.class.id;\n        return object;\n      });\n\n      let classRoomListFiltredByID = _.uniqBy(classRoomList, 'id');\n\n      this.setState({\n        classRoomList: classRoomListFiltredByID\n      });\n    }\n\n    if (prevProps.usersReducer.roles !== this.props.usersReducer.roles || prevProps.userPermission !== this.props.userPermission) {\n      let listRoles = [];\n      this.props.usersReducer.roles.map(element => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n\n        if (this.props.userProfile.role_id == roleIdSuperAdmin) {\n          listRoles.push(object);\n        } else {\n          let permitted = false;\n          permitted = addUserPermitted(object.label, this.props.userPermission);\n\n          if (permitted) {\n            listRoles.push(object);\n          }\n        }\n      });\n      this.setState({\n        listRoles: listRoles\n      });\n    }\n\n    if (prevProps.userProfile.establishment_id !== this.props.userProfile.establishment_id) {\n      this.setState({\n        establishmentId: this.props.userProfile.establishment_id\n      });\n    }\n\n    if (prevProps.establishments !== this.props.establishments) {\n      let establishmentsList = [];\n      establishmentsList = this.props.establishments.map(element => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        return object;\n      });\n      this.setState({\n        establishmentsList\n      });\n    }\n\n    if (prevProps.schoolYearEtabs !== this.props.schoolYearEtabs) {\n      let listSchoolYears = [];\n      listSchoolYears = this.props.schoolYearEtabs.map(element => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        object.startDate = element.start_date;\n        object.endtDate = element.end_date;\n        return object;\n      });\n      let countriesListUser = [];\n      countriesListUser = countriesList.countriesList.map(element => {\n        var object = {};\n        object.label = element.name_fr;\n        object.id = element.code;\n        object.value = element.code;\n        return object;\n      });\n      this.setState({\n        listSchoolYears: listSchoolYears,\n        countriesList: countriesListUser\n      });\n    }\n\n    if (prevProps.usersReducer !== this.props.usersReducer) {\n      let parentsList = [];\n      parentsList = this.props.usersReducer.parents.map(element => {\n        var object = {};\n        object.label = element.name + ' ' + element.surname;\n        object.id = element.parentId[0];\n        object.value = element.parentId[0];\n        return object;\n      });\n      let studentsList = [];\n      studentsList = this.props.usersReducer.students.map(element => {\n        var object = {};\n        object.label = element.name + ' ' + element.surname;\n        object.id = element.studentId[0];\n        object.value = element.studentId[0];\n        return object;\n      });\n      this.setState({\n        parentsList,\n        studentsList\n      });\n    }\n\n    if (prevProps.usersReducer.users !== this.props.usersReducer.users) {\n      this.setState({\n        userList: this.props.usersReducer\n      });\n    }\n\n    if (prevProps.userPermission !== this.props.userPermission) {\n      this.setState({\n        permissionList: this.props.userPermission\n      });\n    }\n  }\n\n  UNSAFE_componentWillMount() {\n    this.props.getAllRole();\n    this.props.getSchoolYearEtabs();\n    this.props.getAllUsersForAdmin(this.props.userProfile.establishment_id, this.props.userProfile.school_year_id);\n    this.props.getAllUsersForSuperAdministrator();\n  }\n\n  componentDidMount() {\n    if (this.props.userPermission != undefined) {\n      this.setState({\n        permissionList: this.props.userPermission\n      });\n    }\n\n    if (this.props.establishments != undefined) {\n      let establishmentsList = [];\n      establishmentsList = this.props.establishments.map(element => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        return object;\n      });\n      this.setState({\n        establishmentsList,\n        establishmentId: this.props.userProfile.establishment_id\n      });\n    }\n\n    if (this.props.ClassSettings != undefined) {\n      let classForStudent = [];\n      classForStudent = this.props.ClassSettings.map(element => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        return object;\n      });\n      this.setState({\n        classForStudent\n      });\n    }\n\n    if (this.props.courseAssignment != undefined) {\n      let classRoomList = [];\n      classRoomList = this.props.courseAssignment.map(element => {\n        var object = {};\n        object.label = element.class.name;\n        object.id = element.class.id;\n        object.value = element.class.id;\n        return object;\n      });\n\n      let classRoomListFiltredByID = _.uniqBy(classRoomList, 'id');\n\n      this.setState({\n        classRoomList: classRoomListFiltredByID\n      });\n    }\n\n    if (typeof this.props.usersReducer.parents != 'undefined') {\n      let parentsList = [];\n      parentsList = this.props.usersReducer.parents.map(element => {\n        var object = {};\n        object.label = element.name + ' ' + element.surname;\n        object.id = element.id;\n        object.value = element.id;\n        return object;\n      });\n      this.setState({\n        parentsList\n      });\n    }\n\n    if (this.props.usersReducer.students != undefined) {\n      let studentsList = [];\n      studentsList = this.props.usersReducer.students.map(element => {\n        var object = {};\n        object.label = element.name + ' ' + element.surname;\n        object.id = element.studentId[0];\n        object.value = element.studentId[0];\n        return object;\n      });\n      this.setState({\n        studentsList\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper\",\n      style: {\n        marginLeft: '5%',\n        marginRight: '10%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 630,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"  d-flex flex-column mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 637,\n        columnNumber: 9\n      }\n    }, this.state.missingValue ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-danger text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 639,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 640,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 641,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 643,\n        columnNumber: 15\n      }\n    }, \" \", this.state.alertMessage, \" \")) : '', this.props.successStatus ? /*#__PURE__*/React.createElement(UncontrolledAlert, {\n      className: \"alert-addon-card bg-success bg-success text-white shadow-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 649,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"icon-addon alert-addon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 650,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 651,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"d-inline-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 653,\n        columnNumber: 15\n      }\n    }, \" \", this.props.message, \" \")) : '', this.state.listRoles.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bd-highlight\",\n      style: {\n        width: '90%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 659,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12 col-sm-12 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 660,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(AddUsers, {\n      openAddModal: this.openAddModal,\n      handleCancel: this.handleCancel,\n      handleChange: this.handleChange,\n      handleSubmit: this.handleSubmit,\n      handleArchive: this.handleArchive,\n      handleChangeRole: this.handleChangeRole,\n      handleChangeSchoolYear: this.handleChangeSchoolYear,\n      handleChangeClassRoom: this.handleChangeClassRoom,\n      handleChangeBirthdayDate: this.handleChangeBirthdayDate,\n      handleChangeSubject: this.handleChangeSubject,\n      handleChangeParent: this.handleChangeParent,\n      handleChangeStudent: this.handleChangeStudent,\n      handleChangeCountries: this.handleChangeCountries,\n      handleChangeStudentClass: this.handleChangeStudentClass,\n      attachFile: this.attachFile,\n      uploadPhoto: this.uploadPhoto,\n      openArchive: this.openArchive,\n      handleChangeEstablishments: this.handleChangeEstablishments,\n      handleChangeFunctions: this.handleChangeFunctions,\n      handleChangePhone: this.handleChangePhone,\n      addNewSubject: this.addNewSubject,\n      deleteChoice: this.deleteChoice,\n      parentsList: this.state.parentsList,\n      studentsList: this.state.studentsList,\n      values: this.state,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 661,\n        columnNumber: 17\n      }\n    }))) : '', !this.state.openArchive ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \" bd-highlight\",\n      style: {\n        width: '90%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 715,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CardBox, {\n      styleName: \"col-lg-12 col-sm-12 col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 716,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(UsersList, {\n      usersList: this.state.userList,\n      permissionList: this.state.permissionList,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 718,\n        columnNumber: 17\n      }\n    }))) : ''));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    usersReducer: state.usersReducer,\n    userProfile: state.auth.userProfile,\n    establishments: state.establishment.remoteEstablishments,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    schoolYearEtabs: state.schoolYearEtab.remoteSchoolYearEtab,\n    courseAssignment: state.AssignementReducer.courseAssignment,\n    ClassSettings: state.ClassSettingsReducer.classSettings,\n    userPermission: state.PermissionReducer.userPermission\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getAllRole,\n  getSchoolYearEtabs,\n  addUsers,\n  getAllUsersForAdmin,\n  getAllUsersForSuperAdministrator\n})(Users);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Administration/routes/UsersManagement/Users.js"],"names":["React","CardBox","connect","ArchiveUsers","UsersList","UncontrolledAlert","AddUsers","getAllRole","getSchoolYearEtabs","countriesList","addUsers","getAllUsersForAdmin","getAllUsersForSuperAdministrator","Can","RoleContext","_","moment","roleIdSuperAdmin","roleIdAdmin","roleIdProfessor","roleIdStudent","roleIdDirector","roleIdParent","roleIdSupervisor","addUserPermitted","Users","Component","constructor","props","handleChangeStudentClass","selectedOption","setState","studentClass","id","levelId","sectionId","handleChangeAlerte","name","sessionExist","messageAlerte","setTimeout","handleChangeEducationType","event","obj","JSON","parse","target","value","educationItem","educationTypeId","handleChangePhone","userPhoneNumber","handleChange","handleChangeBirthdayDate","date","birthdayDate","handleChangeRole","year","roleId","roleName","label","handleChangeSchoolYear","schoolyearId","handleChangeClassRoom","index","subjectsList","courseAssignment","map","element","fk_id_class_v4","object","subject","push","newListSubjects","state","listOfSubjects","objSubject","i","subjects","addNewSubject","classId","subjectId","isAdded","deleteChoice","listOfSubjectsClasses","filter","handleChangeSubject","subjectItem","handleChangeParent","parentId","handleChangeStudent","studentId","handleChangeCountries","userCountry","handleChangeEstablishments","establishmentId","handleChangeFunctions","functionName","uploadPhoto","e","files","undefined","file","userPhoto","photoText","alerteFiltre","openArchive","previousState","handleChangeFilterRole","filterRole","userProfile","role_id","usersReducer","users","handleChangeFilterLevel","filterLevel","listRoles","listSchoolYears","classRoomId","userName","userLastName","userNationnality","userCIN","userID","userMail","userAdress","userZipCode","userGender","birthdayPlace","usefulInformation","userPapiersFiles","nameUserPapiersFiles","isOpen","start_date","Date","end_date","isOpenArchive","nameFiles","establishmentsList","classRoomList","classForStudent","missingValue","alertMessage","parentsList","studentsList","userList","permissionList","openAddModal","bind","handleCancel","handleSubmit","handleArchive","openArchiveModal","attachFile","preventDefault","AssignementIdProf","length","data","surname","gender","dateOfBirth","placeOfBirth","address","nationality","phone","status","cin","zipCode","name_ar","surname_ar","email","assignClassSubject","password","login","console","log","userPapiersfiles","establishment_id","oldFiles","Object","values","alerteStatus","componentDidUpdate","prevProps","ClassSettings","fk_id_section_v4","fk_id_level_v4","class","classRoomListFiltredByID","uniqBy","roles","userPermission","permitted","establishments","schoolYearEtabs","startDate","endtDate","countriesListUser","name_fr","code","parents","students","UNSAFE_componentWillMount","school_year_id","componentDidMount","render","marginLeft","marginRight","successStatus","message","width","mapStateToProps","auth","establishment","remoteEstablishments","alert","success","errorStatus","error","schoolYearEtab","remoteSchoolYearEtab","AssignementReducer","ClassSettingsReducer","classSettings","PermissionReducer"],"mappings":"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","sourcesContent":["import React from 'react';\nimport CardBox from '../../../../../components/CardBox/index';\nimport { connect } from 'react-redux';\nimport ArchiveUsers from './ArchiveUsers';\nimport UsersList from './UsersList';\nimport { UncontrolledAlert } from 'reactstrap';\nimport AddUsers from './AddUsers';\nimport { getAllRole } from '../../../../../actions/usersAction';\nimport { getSchoolYearEtabs } from '../../../../../actions/SchoolYearEtabAction';\nimport countriesList from '../../../../../constants/const';\nimport {\n  addUsers,\n  getAllUsersForAdmin,\n  getAllUsersForSuperAdministrator,\n} from '../../../../../actions/usersAction';\nimport Can from '../../../../../can';\nimport { RoleContext } from '../../../../../Context';\nimport _ from 'lodash';\nimport moment from 'moment';\nimport {\n  roleIdSuperAdmin,\n  roleIdAdmin,\n  roleIdProfessor,\n  roleIdStudent,\n  roleIdDirector,\n  roleIdParent,\n  roleIdSupervisor,\n} from '../../../../../config/config';\nimport { addUserPermitted } from '../../../../../constants/validationFunctions';\nclass Users extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      listRoles: [],\n      listSchoolYears: [],\n      roleId: '',\n      roleName: '',\n      schoolyearId: '',\n      classRoomId: '',\n      subjectId: '',\n      parentId: null,\n      studentId: null,\n      userName: '',\n      userLastName: '',\n      userNationnality: '',\n      userCIN: '',\n      userID: '',\n      userMail: '',\n      userPhoneNumber: '',\n      userAdress: '',\n      userCountry: '',\n      userZipCode: '',\n      userPhoto: '',\n      userGender: '',\n      birthdayDate: moment().year() - 18 + '-01-01',\n      birthdayPlace: '',\n      countriesList: [],\n      usefulInformation: '',\n      userPapiersFiles: [],\n      nameUserPapiersFiles: [],\n      isOpen: false,\n      openArchive: false,\n      start_date: new Date(),\n      end_date: new Date(),\n      isOpenArchive: false,\n      messageAlerte: '',\n      photoText: '',\n      nameFiles: [],\n      establishmentsList: [],\n      establishmentId: '',\n      classRoomList: [],\n      subjectsList: [],\n      classForStudent: [],\n      studentClass: '',\n      functionName: '',\n      missingValue: false,\n      alertMessage: '',\n      subjectItem: {},\n      listOfSubjects: [\n        {\n          id: 0,\n          classId: 0,\n          subjectId: 0,\n          subjects: [],\n        },\n      ],\n      parentsList: [],\n      studentsList: [],\n      levelId: null,\n      sectionId: null,\n      userList:[],\n      permissionList:[]\n    };\n    this.openAddModal = this.openAddModal.bind(this);\n    this.handleCancel = this.handleCancel.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleArchive = this.handleArchive.bind(this);\n    this.handleChangeBirthdayDate = this.handleChangeBirthdayDate.bind(this);\n    this.openArchiveModal = this.openArchiveModal.bind(this);\n    this.handleChangeAlerte = this.handleChangeAlerte.bind(this);\n    this.handleChangeRole = this.handleChangeRole.bind(this);\n    this.handleChangeSchoolYear = this.handleChangeSchoolYear.bind(this);\n    this.handleChangeClassRoom = this.handleChangeClassRoom.bind(this);\n    this.handleChangeSubject = this.handleChangeSubject.bind(this);\n    this.handleChangeParent = this.handleChangeParent.bind(this);\n    this.handleChangeStudent = this.handleChangeStudent.bind(this);\n    this.handleChangeCountries = this.handleChangeCountries.bind(this);\n    this.attachFile = this.attachFile.bind(this);\n    this.uploadPhoto = this.uploadPhoto.bind(this);\n    this.openArchive = this.openArchive.bind(this);\n    this.handleChangeEstablishments = this.handleChangeEstablishments.bind(this);\n    this.handleChangeStudentClass = this.handleChangeStudentClass.bind(this);\n    this.handleChangeFunctions = this.handleChangeFunctions.bind(this);\n    this.handleChangePhone = this.handleChangePhone.bind(this);\n    this.handleChangeFilterRole = this.handleChangeFilterRole.bind(this);\n    this.handleChangeFilterLevel = this.handleChangeFilterLevel.bind(this);\n    this.addNewSubject = this.addNewSubject.bind(this);\n    this.deleteChoice = this.deleteChoice.bind(this);\n  }\n  handleChangeStudentClass = (selectedOption) => {\n    this.setState({\n      studentClass: selectedOption.id,\n      levelId: selectedOption.levelId,\n      sectionId: selectedOption.sectionId,\n    });\n  };\n  handleChangeAlerte = (name) => {\n    this.setState({\n      sessionExist: true,\n      messageAlerte: 'Il existe déja une licence pour cet etablissement',\n    });\n    setTimeout(() => {\n      this.setState({ sessionExist: false, messageAlerte: '' });\n    }, 4000);\n  };\n  handleChangeEducationType = (name) => (event) => {\n    let obj = JSON.parse(event.target.value);\n\n    this.setState({ educationItem: obj, educationTypeId: obj.id });\n  };\n  openArchiveModal() {\n    this.setState((previousState) => ({\n      isOpenArchive: !previousState.isOpenArchive,\n    }));\n  }\n  handleCancel() {\n    this.setState({ isOpen: false });\n  }\n  // openAddModal() {\n  //   this.setState({ isOpen: true });\n  // }\n  openAddModal() {\n    this.setState((previousState) => ({\n      isOpen: !previousState.isOpen,\n    }));\n  }\n  handleSubmit(event) {\n    event.preventDefault();\n    let AssignementIdProf = [];\n    this.state.listOfSubjects.map((element) => {\n      if (element.subjectId != 0) {\n        AssignementIdProf.push(element.subjectId);\n      }\n    });\n    if (this.state.roleId === '' || this.state.schoolyearId === '') {\n      this.setState({\n        missingValue: true,\n        alertMessage: 'Il faut remplir les champs obligatoires ',\n      });\n      setTimeout(() => {\n        this.setState({ alertMessage: '', missingValue: false });\n      }, 4000);\n    } else {\n      if (this.state.roleId === roleIdProfessor && AssignementIdProf.length === 0) {\n        this.setState({\n          missingValue: true,\n          alertMessage: 'Il faut affecter une classe et une matiére pour le professeur ',\n        });\n        setTimeout(() => {\n          this.setState({ alertMessage: '', missingValue: false });\n        }, 4000);\n      } else {\n        this.openAddModal();\n        let data = {\n          name: this.state.userName,\n          surname: this.state.userLastName,\n          gender: this.state.userGender,\n          dateOfBirth: this.state.birthdayDate,\n          placeOfBirth: this.state.birthdayPlace,\n          address: this.state.userAdress,\n          nationality: this.state.userNationnality,\n          phone: this.state.userPhoneNumber,\n          status: true,\n          cin: this.state.userCIN,\n          zipCode: this.state.userZipCode,\n          userCountry: this.state.userCountry,\n          userPhoto: this.state.userPhoto,\n          userPapiersFiles: this.state.userPapiersFiles,\n          name_ar: 'string',\n          surname_ar: 'string',\n          email: this.state.userMail,\n          roleId: this.state.roleId,\n          establishmentId: this.state.establishmentId,\n          assignClassSubject: AssignementIdProf,\n          studentClass: this.state.studentClass,\n          schoolyearId: this.state.schoolyearId,\n          functionName: this.state.functionName,\n          password: '123456',\n          login: 'login1',\n          levelId: this.state.levelId,\n          sectionId: this.state.sectionId,\n          usefulInformation: this.state.usefulInformation,\n          parentId: this.state.parentId,\n          studentId: this.state.studentId,\n        };\n        console.log(data, 'data avant action');\n        this.props.addUsers(data);\n        this.setState({\n          userName: '',\n          userLastName: '',\n          userGender: '',\n          birthdayDate: moment().year() - 18 + '-01-01',\n          birthdayPlace: '',\n          userAdress: '',\n          userNationnality: '',\n          userPhoneNumber: '',\n          status: true,\n          userCIN: '',\n          userZipCode: '',\n          userPhoto: '',\n          userPapiersfiles: [],\n          userCountry: '',\n          name_ar: '',\n          surname_ar: '',\n          userMail: '',\n          establishmentId: this.props.userProfile.establishment_id,\n          schoolyearId: null,\n          studentClass: null,\n          subjectId: null,\n          functionName: '',\n          levelId: null,\n          sectionId: null,\n          parentId: null,\n          studentId: null,\n          usefulInformation: '',\n        });\n      }\n    }\n  }\n  handleChangePhone = (value) => {\n    this.setState({ userPhoneNumber: value });\n  };\n  handleArchive(event) {\n    event.preventDefault();\n    this.openAddModal();\n    this.setState({});\n  }\n  handleChange = (name) => (event) => {\n    this.setState({ [name]: event.target.value });\n  };\n  handleChangeBirthdayDate = (date) => {\n    this.setState({ birthdayDate: date });\n  };\n  handleChangeRole = (selectedOption) => {\n    if (selectedOption.id == roleIdStudent) {\n      this.setState({\n        birthdayDate: moment().year() - 6 + '-01-01',\n      });\n    }\n    this.setState({\n      roleId: selectedOption.id,\n      roleName: selectedOption.label,\n    });\n  };\n  handleChangeSchoolYear = (selectedOption) => {\n    this.setState({ schoolyearId: selectedOption.id });\n  };\n  handleChangeClassRoom = (selectedOption, name, index) => {\n    if (name === 'classId') {\n      let subjectsList = [];\n      this.props.courseAssignment.map((element) => {\n        if (element.fk_id_class_v4 === selectedOption.id) {\n          var object = {};\n          object.label = element.subject.name;\n          object.id = element.id;\n          object.value = element.id;\n          subjectsList.push(object);\n        }\n      });\n      let newListSubjects = this.state.listOfSubjects.map((objSubject, i) =>\n        i === index\n          ? {\n              ...objSubject,\n              [name]: selectedOption.value,\n              subjects: subjectsList,\n            }\n          : objSubject\n      );\n      this.setState({ listOfSubjects: newListSubjects });\n    } else if (name === 'subjectId') {\n      let newListSubjects = this.state.listOfSubjects.map((objSubject, i) =>\n        i === index ? { ...objSubject, [name]: selectedOption.value } : objSubject\n      );\n      this.setState({ listOfSubjects: newListSubjects });\n    }\n  };\n  addNewSubject = (index) => {\n    let listOfSubjects = [];\n    this.state.listOfSubjects.map((element) => {\n      listOfSubjects.push({\n        id: element.id,\n        classId: element.classId,\n        subjectId: element.subjectId,\n        subjects: element.subjects,\n        isAdded: true,\n      });\n    });\n    listOfSubjects.push({\n      id: index,\n      classId: 0,\n      subjectId: 0,\n      subjects: [],\n      isAdded: false,\n    });\n\n    this.setState({ listOfSubjects });\n  };\n  deleteChoice = (index) => {\n    let listOfSubjectsClasses = this.state.listOfSubjects.filter((element, i) => i !== index);\n    this.setState({ listOfSubjects: listOfSubjectsClasses });\n  };\n\n  handleChangeSubject = (selectedOption) => {\n    this.setState({\n      subjectId: selectedOption.id,\n      subjectItem: selectedOption,\n    });\n  };\n  handleChangeParent = (selectedOption) => {\n    this.setState({ parentId: selectedOption.id });\n  };\n  handleChangeStudent = (selectedOption) => {\n    this.setState({ studentId: selectedOption.id });\n  };\n  handleChangeCountries = (selectedOption) => {\n    this.setState({ userCountry: selectedOption.id });\n  };\n  handleChangeEstablishments = (selectedOption) => {\n    this.setState({ establishmentId: selectedOption.id });\n  };\n  handleChangeFunctions = (selectedOption) => {\n    this.setState({ functionName: selectedOption.label });\n  };\n  attachFile(e) {\n    var oldFiles = this.state.userPapiersFiles;\n    var files = Object.values(e.target.files);\n    var nameFiles = this.state.nameUserPapiersFiles;\n    if (files !== undefined && this.state.nameUserPapiersFiles.length + files.length < 6) {\n      files.map((element) => {\n        nameFiles.push(element.name);\n        oldFiles.push(element);\n      });\n      this.setState({ userPapiersfiles: oldFiles, nameFiles });\n    } else {\n      this.setState({\n        messageAlerte: 'vous avez dépasser 5 fichiers',\n        alerteStatus: true,\n      });\n      setTimeout(() => {\n        this.setState({ messageAlerte: '', alerteStatus: false });\n      }, 4000);\n    }\n  }\n  uploadPhoto = (e) => {\n    if (e.target.files[0] !== undefined) {\n      let file = e.target.files[0];\n      this.setState({ userPhoto: file, photoText: file.name });\n    } else {\n      this.setState({\n        messageAlerte: \"Vous n'avez pas choisir une photo\",\n        alerteFiltre: true,\n      });\n      setTimeout(() => {\n        this.setState({ messageAlerte: '', alerteFiltre: false });\n      }, 4000);\n    }\n  };\n  openArchive = () => {\n    this.setState((previousState) => ({\n      openArchive: !previousState.openArchive,\n    }));\n  };\n  handleChangeFilterRole = (name) => (event) => {\n    if (name === 'filterRoleId') {\n      let filterRole = [];\n      if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n        filterRole = this.props.usersReducer.users.filter(\n          (element) => element.roleId == event.target.value\n        );\n      }\n      //  else {\n      //   filterClasses = this.props.ClassSettings.filter(\n      //     (element) => element.fk_id_level_v4 == event.target.value\n      //   );\n      // }\n\n      this.setState({\n        [name]: event.target.value,\n        filterRole,\n      });\n    }\n  };\n  handleChangeFilterLevel = (name) => (event) => {\n    if (name === 'filterLevelId') {\n      let filterLevel = [];\n      if (this.props.userProfile.role_id === roleIdSuperAdmin) {\n        filterLevel = this.props.usersReducer.users.filter(\n          (element) => element.roleId == event.target.value\n        );\n      }\n      //  else {\n      //   filterClasses = this.props.ClassSettings.filter(\n      //     (element) => element.fk_id_level_v4 == event.target.value\n      //   );\n      // }\n\n      this.setState({\n        [name]: event.target.value,\n        filterLevel,\n      });\n    }\n  };\n  componentDidUpdate(prevProps) {\n    if (prevProps.ClassSettings !== this.props.ClassSettings) {\n      let classForStudent = [];\n      classForStudent = this.props.ClassSettings.map((element) => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        object.sectionId = element.fk_id_section_v4;\n        object.levelId = element.fk_id_level_v4;\n        return object;\n      });\n      this.setState({ classForStudent });\n    }\n    if (prevProps.courseAssignment !== this.props.courseAssignment) {\n      let classRoomList = [];\n      classRoomList = this.props.courseAssignment.map((element) => {\n        var object = {};\n        object.label = element.class.name;\n        object.id = element.class.id;\n        object.value = element.class.id;\n        return object;\n      });\n      let classRoomListFiltredByID = _.uniqBy(classRoomList, 'id');\n      this.setState({ classRoomList: classRoomListFiltredByID });\n    }\n\n    if (\n      prevProps.usersReducer.roles !== this.props.usersReducer.roles ||\n      prevProps.userPermission !== this.props.userPermission\n    ) {\n      let listRoles = [];\n\n      this.props.usersReducer.roles.map((element) => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        if (this.props.userProfile.role_id == roleIdSuperAdmin) {\n          listRoles.push(object);\n        } else {\n          let permitted = false;\n          permitted = addUserPermitted(object.label, this.props.userPermission);\n          if (permitted) {\n            listRoles.push(object);\n          }\n        }\n      });\n      this.setState({ listRoles: listRoles });\n    }\n\n    if (prevProps.userProfile.establishment_id !== this.props.userProfile.establishment_id) {\n      this.setState({\n        establishmentId: this.props.userProfile.establishment_id,\n      });\n    }\n\n    if (prevProps.establishments !== this.props.establishments) {\n      let establishmentsList = [];\n      establishmentsList = this.props.establishments.map((element) => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        return object;\n      });\n      this.setState({ establishmentsList });\n    }\n\n    if (prevProps.schoolYearEtabs !== this.props.schoolYearEtabs) {\n      let listSchoolYears = [];\n      listSchoolYears = this.props.schoolYearEtabs.map((element) => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        object.startDate = element.start_date;\n        object.endtDate = element.end_date;\n        return object;\n      });\n      let countriesListUser = [];\n      countriesListUser = countriesList.countriesList.map((element) => {\n        var object = {};\n        object.label = element.name_fr;\n        object.id = element.code;\n        object.value = element.code;\n        return object;\n      });\n      this.setState({\n        listSchoolYears: listSchoolYears,\n        countriesList: countriesListUser,\n      });\n    }\n    if (prevProps.usersReducer !== this.props.usersReducer) {\n      let parentsList = [];\n      parentsList = this.props.usersReducer.parents.map((element) => {\n        var object = {};\n        object.label = element.name + ' ' + element.surname;\n        object.id = element.parentId[0];\n        object.value = element.parentId[0];\n        return object;\n      });\n      let studentsList = [];\n      studentsList = this.props.usersReducer.students.map((element) => {\n        var object = {};\n        object.label = element.name + ' ' + element.surname;\n        object.id = element.studentId[0];\n        object.value = element.studentId[0];\n        return object;\n      });\n      this.setState({ parentsList, studentsList });\n    }\n    if (prevProps.usersReducer.users !== this.props.usersReducer.users) {\n      this.setState({ userList: this.props.usersReducer });\n    }\n    if (prevProps.userPermission !== this.props.userPermission) {\n      this.setState({ permissionList: this.props.userPermission });\n    }\n  }\n  UNSAFE_componentWillMount() {\n    this.props.getAllRole();\n    this.props.getSchoolYearEtabs();\n    this.props.getAllUsersForAdmin(\n      this.props.userProfile.establishment_id,\n      this.props.userProfile.school_year_id\n    );\n    this.props.getAllUsersForSuperAdministrator();\n  }\n  componentDidMount() {\n    if (this.props.userPermission != undefined) {\n      this.setState({ permissionList: this.props.userPermission });\n\n    }\n    if (this.props.establishments != undefined) {\n      let establishmentsList = [];\n      establishmentsList = this.props.establishments.map((element) => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        return object;\n      });\n      this.setState({\n        establishmentsList,\n        establishmentId: this.props.userProfile.establishment_id,\n      });\n    }\n    if (this.props.ClassSettings != undefined) {\n      let classForStudent = [];\n      classForStudent = this.props.ClassSettings.map((element) => {\n        var object = {};\n        object.label = element.name;\n        object.id = element.id;\n        object.value = element.id;\n        return object;\n      });\n      this.setState({ classForStudent });\n    }\n    if (this.props.courseAssignment != undefined) {\n      let classRoomList = [];\n      classRoomList = this.props.courseAssignment.map((element) => {\n        var object = {};\n        object.label = element.class.name;\n        object.id = element.class.id;\n        object.value = element.class.id;\n        return object;\n      });\n      let classRoomListFiltredByID = _.uniqBy(classRoomList, 'id');\n      this.setState({ classRoomList: classRoomListFiltredByID });\n    }\n    if (typeof this.props.usersReducer.parents != 'undefined') {\n      let parentsList = [];\n      parentsList = this.props.usersReducer.parents.map((element) => {\n        var object = {};\n        object.label = element.name + ' ' + element.surname;\n        object.id = element.id;\n        object.value = element.id;\n        return object;\n      });\n      this.setState({ parentsList });\n    }\n    if (this.props.usersReducer.students != undefined) {\n      let studentsList = [];\n      studentsList = this.props.usersReducer.students.map((element) => {\n        var object = {};\n        object.label = element.name + ' ' + element.surname;\n        object.id = element.studentId[0];\n        object.value = element.studentId[0];\n        return object;\n      });\n      this.setState({ studentsList });\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className=\"app-wrapper\"\n        style={{\n          marginLeft: '5%',\n          marginRight: '10%',\n        }}\n      >\n        <div className=\"  d-flex flex-column mb-3\">\n          {this.state.missingValue ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-success bg-danger text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\"> {this.state.alertMessage} </span>\n            </UncontrolledAlert>\n          ) : (\n            ''\n          )}\n          {this.props.successStatus ? (\n            <UncontrolledAlert className=\"alert-addon-card bg-success bg-success text-white shadow-lg\">\n              <span className=\"icon-addon alert-addon\">\n                <i className=\"zmdi zmdi-cloud-done zmdi-hc-fw zmdi-hc-lg\" />\n              </span>\n              <span className=\"d-inline-block\"> {this.props.message} </span>\n            </UncontrolledAlert>\n          ) : (\n            ''\n          )}\n          {this.state.listRoles.length > 0 ? (\n            <div className=\" bd-highlight\" style={{ width: '90%' }}>\n              <CardBox styleName=\"col-lg-12 col-sm-12 col-md-12\">\n                <AddUsers\n                  openAddModal={this.openAddModal}\n                  handleCancel={this.handleCancel}\n                  handleChange={this.handleChange}\n                  handleSubmit={this.handleSubmit}\n                  handleArchive={this.handleArchive}\n                  handleChangeRole={this.handleChangeRole}\n                  handleChangeSchoolYear={this.handleChangeSchoolYear}\n                  handleChangeClassRoom={this.handleChangeClassRoom}\n                  handleChangeBirthdayDate={this.handleChangeBirthdayDate}\n                  handleChangeSubject={this.handleChangeSubject}\n                  handleChangeParent={this.handleChangeParent}\n                  handleChangeStudent={this.handleChangeStudent}\n                  handleChangeCountries={this.handleChangeCountries}\n                  handleChangeStudentClass={this.handleChangeStudentClass}\n                  attachFile={this.attachFile}\n                  uploadPhoto={this.uploadPhoto}\n                  openArchive={this.openArchive}\n                  handleChangeEstablishments={this.handleChangeEstablishments}\n                  handleChangeFunctions={this.handleChangeFunctions}\n                  handleChangePhone={this.handleChangePhone}\n                  addNewSubject={this.addNewSubject}\n                  deleteChoice={this.deleteChoice}\n                  parentsList={this.state.parentsList}\n                  studentsList={this.state.studentsList}\n                  values={this.state}\n                />\n              </CardBox>\n            </div>\n          ) : (\n            ''\n          )}\n\n          {/* <RoleContext.Consumer>\n            {({ role }) => (\n              <Can\n                role={role}\n                perform=\"add-service\"\n                yes={() => (\n                  <>\n                    {this.state.openArchive ? (\n                      <div>\n                        <ArchiveUsers openArchive={this.openArchive} />\n                      </div>\n                    ) : (\n                      ''\n                    )}\n                  </>\n                )}\n                establishements\n              />\n            )}\n          </RoleContext.Consumer> */}\n          {!this.state.openArchive ? (\n            <div className=\" bd-highlight\" style={{ width: '90%' }}>\n              <CardBox styleName=\"col-lg-12 col-sm-12 col-md-12\">\n                {/* <UsersList usersList={this.props.usersReducer} /> */}\n                <UsersList usersList={this.state.userList}\n                permissionList={this.state.permissionList} />\n              </CardBox>\n            </div>\n          ) : (\n            ''\n          )}\n        </div>\n        {/* <div className=\" bd-highlight\" style={{ width: '90%' }}>\n          <CardBox styleName=\"col-lg-12 col-sm-12 col-md-12\">\n            <ArchiveUsers\n              isOpenArchive={this.state.isOpenArchive}\n              openArchiveModal={this.openArchiveModal}\n            />\n          </CardBox>\n        </div> */}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    usersReducer: state.usersReducer,\n    userProfile: state.auth.userProfile,\n    establishments: state.establishment.remoteEstablishments,\n    successStatus: state.alert.success,\n    errorStatus: state.alert.error,\n    message: state.alert.message,\n    schoolYearEtabs: state.schoolYearEtab.remoteSchoolYearEtab,\n    courseAssignment: state.AssignementReducer.courseAssignment,\n    ClassSettings: state.ClassSettingsReducer.classSettings,\n    userPermission: state.PermissionReducer.userPermission,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  getAllRole,\n  getSchoolYearEtabs,\n  addUsers,\n  getAllUsersForAdmin,\n  getAllUsersForSuperAdministrator,\n})(Users);\n"]},"metadata":{},"sourceType":"module"}