{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Calendar/routes/Emploi/TimeTable.js\";\nimport React from 'react';\nimport HTML5Backend from 'react-dnd-html5-backend';\nimport { DragDropContext } from 'react-dnd';\nimport BigCalendar from 'react-big-calendar';\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop';\nimport 'react-big-calendar/lib/addons/dragAndDrop/styles.css';\nimport moment from 'moment';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport { connect } from \"react-redux\";\nimport ContainerHeader from '../../../../../components/ContainerHeader';\nimport CardBox from '../../../../../components/CardBox/index';\nimport AddSupplies from './AddSupplies';\nimport Can from \"../../../../../can\";\nimport { RoleContext } from \"../../../../../Context\";\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport Button from '@material-ui/core/Button';\nimport { classService } from '../../../../../_services/class.service';\nimport _ from 'lodash';\nimport { removeEventList } from \"../../../../../actions/planningActions\";\nimport { roleIdAdmin, roleIdProfessor, roleIdSuperAdmin } from \"../../../../../config/config\";\nconst localizer = BigCalendar.momentLocalizer(moment);\nconst DragAndDropCalendar = withDragAndDrop(BigCalendar);\n\nclass TimeTable extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleRequestClose = () => {\n      this.setState({\n        open: false\n      });\n    };\n\n    this.state = {\n      events: [],\n      establishment: '',\n      establishmentClass: [],\n      classe: '',\n      supplieModal: false,\n      eventId: '',\n      eventFrequency: '',\n      eventRoom: '',\n      eventSubject: '',\n      eventProfessorName: '',\n      eventProfessorSurname: '',\n      open: false,\n      eventSupplie: []\n    }; // this.addSupplies = this.addSupplies.bind(this);\n\n    this.annuleModal = this.annuleModal.bind(this);\n    this.handleClickEvent = this.handleClickEvent.bind(this);\n    this.handleRequestClose = this.handleRequestClose.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      events: this.props.events\n    });\n  }\n\n  componentWillUnmount() {\n    // if (this.props.userProfile.role_id === roleIdAdmin || this.props.userProfile.role_id === roleIdSuperAdmin) {\n    this.props.dispatch(removeEventList()); // } else { }\n  }\n\n  annuleModal() {\n    this.setState({\n      supplieModal: false,\n      eventId: ''\n    });\n  }\n\n  handleClickEvent(event) {\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      this.setState({\n        supplieModal: true,\n        eventId: event.id\n      });\n    } else {\n      let apiEndpoint = `/profiles?access_token=${localStorage.token}&filter[where][id]=` + parseInt(event.professor_profile) + `&filter[include][user]`;\n      classService.get(apiEndpoint).then(res => {\n        this.setState({\n          eventType: event.event_type,\n          eventFrequency: event.frequency,\n          eventRoom: event.room_name,\n          eventSubject: event.subject_name,\n          eventProfessorName: res.data[0].user.name,\n          eventProfessorSurname: res.data[0].user.surname,\n          eventSupplie: event.supplies,\n          open: true\n        });\n      });\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.state.events !== nextProps.events) {\n      this.setState({\n        events: nextProps.events\n      });\n    }\n  }\n\n  eventStyleGetter(event, start, end, isSelected) {\n    let diff = moment.utc(moment(event.end, \"DD/MM/YYYY HH:mm\").diff(moment(event.start, \"DD/MM/YYYY HH:mm\"))).format(\"HH:mm\");\n    const mn = moment.duration(diff).asMinutes();\n    let height = mn * 1.3 * 0.33 + 'px';\n    var backgroundColor = '#' + event.hexa_color;\n    var style = {\n      backgroundColor: backgroundColor,\n      opacity: 0.8,\n      color: 'black',\n      border: '0px',\n      display: 'block',\n      borderRadius: '5px',\n      paddingTop: height\n    };\n    return {\n      style: style\n    };\n  }\n\n  Event({\n    event\n  }) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 7\n      }\n    }, event.event_type === 'exam' ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 40\n      }\n    }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.note.exam\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 45\n      }\n    })) : null, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    }, \" \", event.subject_id && '  ' + event.subject_name)), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }\n    }, event.room_name && 'Salle:  ' + event.room_name, \"  \"));\n  }\n\n  EventAgenda({\n    event\n  }) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 12\n      }\n    }, event.event_type === 'exam' ? /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 38\n      }\n    }, \" \", event.event_type) : null, /*#__PURE__*/React.createElement(\"em\", {\n      style: {\n        color: 'magenta'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 7\n      }\n    }, event.subject_name), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 7\n      }\n    }, event.room_name), \"  \", /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 33\n      }\n    }, event.room_name));\n  }\n\n  render() {\n    let startHours = '';\n    let startMinutes = '';\n    let endHours = '';\n    let endMinutes = '';\n\n    if (this.props.startTime && this.props.endTime) {\n      const startTime = this.props.startTime.split(':');\n      const endTime = this.props.endTime.split(':');\n      startHours = startTime[0];\n      startMinutes = startTime[1];\n      endHours = endTime[0];\n      endMinutes = endTime[1];\n    } else {\n      startHours = '07';\n      startMinutes = '00';\n      endHours = '21';\n      endMinutes = '00';\n    }\n\n    let now = new Date();\n    const startDayTime = new Date();\n    const endDayTime = new Date();\n    startDayTime.setHours(startHours);\n    startDayTime.setMinutes(startMinutes);\n    endDayTime.setHours(endHours);\n    endDayTime.setMinutes(endMinutes);\n    return /*#__PURE__*/React.createElement(RoleContext.Consumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 7\n      }\n    }, ({\n      role\n    }) => /*#__PURE__*/React.createElement(\"div\", {\n      className: \"animated slideInUpTiny animation-duration-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(ContainerHeader, {\n      title: /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"model.timetable\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 37\n        }\n      }),\n      match: this.props.match,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"emploi-supplies:add\",\n      yes: () => /*#__PURE__*/React.createElement(AddSupplies, {\n        isOpen: this.state.supplieModal,\n        annuleModal: this.annuleModal,\n        eventId: this.state.eventId,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 17\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"emploi-filter:visit\",\n      yes: () => /*#__PURE__*/React.createElement(CardBox, {\n        styleName: \"col-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"row\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Can, {\n        role: role,\n        perform: \"emploi-filter-establishment:visit\",\n        yes: () => /*#__PURE__*/React.createElement(\"div\", {\n          className: \"col-lg-3 col-sm-6 col-12\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(FormControl, {\n          className: \"w-100 mb-2\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(InputLabel, {\n          htmlFor: \"age-simple\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"components.professor.formadd.etablissement_id\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 63\n          }\n        })), /*#__PURE__*/React.createElement(Select, {\n          value: this.props.establishment,\n          onChange: this.props.handleChange('establishment'),\n          input: /*#__PURE__*/React.createElement(Input, {\n            id: \"establishment\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 38\n            }\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 29\n          }\n        }, /*#__PURE__*/React.createElement(MenuItem, {\n          value: \"\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 31\n          }\n        }, /*#__PURE__*/React.createElement(\"em\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 33\n          }\n        }, /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"autocomplete.emploidutemps.none\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 38\n          }\n        }))), this.props.establishments.map(establishment => /*#__PURE__*/React.createElement(MenuItem, {\n          key: establishment.id,\n          value: establishment.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 33\n          }\n        }, establishment.name))))),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-lg-3 col-sm-6 col-12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(FormControl, {\n        className: \"w-100 mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(InputLabel, {\n        htmlFor: \"age-simple\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(IntlMessages, {\n        id: \"components.note.class\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 59\n        }\n      })), /*#__PURE__*/React.createElement(Select, {\n        value: this.props.classe,\n        onChange: this.props.handleChangeClasse('classe'),\n        input: /*#__PURE__*/React.createElement(Input, {\n          id: \"classe\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 34\n          }\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 25\n        }\n      }, this.props.establishmentClass.map(classe => /*#__PURE__*/React.createElement(MenuItem, {\n        key: classe.id,\n        value: classe.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 29\n        }\n      }, classe.name))))))),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(DragAndDropCalendar, {\n      selectable: true,\n      localizer: localizer,\n      events: this.state.events // onEventDrop={this.moveEvent}\n      ,\n      defaultView: \"week\",\n      defaultDate: now,\n      eventPropGetter: this.eventStyleGetter,\n      components: {\n        event: this.Event,\n        agenda: {\n          event: this.EventAgenda\n        }\n      },\n      onSelectEvent: event => this.handleClickEvent(event),\n      messages: {\n        month: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"timetable.month\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 24\n          }\n        }),\n        day: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"timetable.day\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 22\n          }\n        }),\n        today: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"timetable.today\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 24\n          }\n        }),\n        previous: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"appModule.back\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 27\n          }\n        }),\n        next: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"appModule.next\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 23\n          }\n        }),\n        agenda: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"timetable.agenda\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 25\n          }\n        }),\n        week: /*#__PURE__*/React.createElement(IntlMessages, {\n          id: \"timetable.week\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 23\n          }\n        })\n      },\n      step: 30,\n      timeslots: 1,\n      min: startDayTime,\n      max: endDayTime,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Dialog, {\n      open: this.state.open,\n      TransitionComponent: Slide,\n      onClose: this.handleRequestClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DialogTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.planning.lesson.details\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(DialogContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 17\n      }\n    }, this.state.eventType === \"exam\" ? /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 21\n      }\n    }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.event.planning.modal.add.name.event_type\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 26\n      }\n    }), \"  :\", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 102\n      }\n    }, this.state.eventType)) : null, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 19\n      }\n    }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.note.subject\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 24\n      }\n    }), \"  :\", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 72\n      }\n    }, this.state.eventSubject)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 19\n      }\n    }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"calandar.popup.details.frequency\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 24\n      }\n    }), \": \", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 80\n      }\n    }, this.state.eventFrequency), \" \"), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 19\n      }\n    }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"room.name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 24\n      }\n    }), \": \", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 57\n      }\n    }, this.state.eventRoom)), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 19\n      }\n    }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"toDo.professor\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 24\n      }\n    }), \": \", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 62\n      }\n    }, this.state.eventProfessorName, \"  \", this.state.eventProfessorSurname)), /*#__PURE__*/React.createElement(Can, {\n      role: role,\n      perform: \"emploi-display-supplie\",\n      yes: () => {\n        if (!_.isEmpty(this.state.eventSupplie)) {\n          return /*#__PURE__*/React.createElement(\"li\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 27\n            }\n          }, \" \", /*#__PURE__*/React.createElement(\"span\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 32\n            }\n          }, \" \", /*#__PURE__*/React.createElement(IntlMessages, {\n            id: \"supplie\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 39\n            }\n          }), \" \"), \":\", this.state.eventSupplie.map((supplie, index) => /*#__PURE__*/React.createElement(\"div\", {\n            key: index,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 31\n            }\n          }, supplie.name, \" : \", supplie.description)));\n        } else {\n          return null;\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 19\n      }\n    }))), /*#__PURE__*/React.createElement(DialogActions, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: this.handleRequestClose,\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"components.establishments.formadd.buttonCancel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 20\n      }\n    }))))));\n  }\n\n}\n\nTimeTable.contextType = RoleContext; // const mapStateToProps = (state) => {\n//   return {\n//     classes: state.classes,\n//     establishments: state.establishment.remoteEstablishments,\n//     userProfile: state.auth.userProfile,\n//     subjects: state.subject.remoteSubjects,\n//     rooms: state.rooms,\n//     professors: state.professor.remoteProfessors,\n//    // events: state.planning.events,\n//   }\n// }\n\nTimeTable = DragDropContext(HTML5Backend)(TimeTable);\nexport default connect()(TimeTable);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Calendar/routes/Emploi/TimeTable.js"],"names":["React","HTML5Backend","DragDropContext","BigCalendar","withDragAndDrop","moment","Input","InputLabel","MenuItem","FormControl","Select","IntlMessages","connect","ContainerHeader","CardBox","AddSupplies","Can","RoleContext","Dialog","DialogActions","DialogContent","DialogTitle","Slide","Button","classService","_","removeEventList","roleIdAdmin","roleIdProfessor","roleIdSuperAdmin","localizer","momentLocalizer","DragAndDropCalendar","TimeTable","Component","constructor","props","handleRequestClose","setState","open","state","events","establishment","establishmentClass","classe","supplieModal","eventId","eventFrequency","eventRoom","eventSubject","eventProfessorName","eventProfessorSurname","eventSupplie","annuleModal","bind","handleClickEvent","componentDidMount","componentWillUnmount","dispatch","event","userProfile","role_id","id","apiEndpoint","localStorage","token","parseInt","professor_profile","get","then","res","eventType","event_type","frequency","room_name","subject_name","data","user","name","surname","supplies","componentWillReceiveProps","nextProps","eventStyleGetter","start","end","isSelected","diff","utc","format","mn","duration","asMinutes","height","backgroundColor","hexa_color","style","opacity","color","border","display","borderRadius","paddingTop","Event","subject_id","EventAgenda","render","startHours","startMinutes","endHours","endMinutes","startTime","endTime","split","now","Date","startDayTime","endDayTime","setHours","setMinutes","role","match","handleChange","establishments","map","handleChangeClasse","agenda","month","day","today","previous","next","week","isEmpty","supplie","index","description","contextType"],"mappings":"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","sourcesContent":["\nimport React from 'react'\nimport HTML5Backend from 'react-dnd-html5-backend'\nimport { DragDropContext } from 'react-dnd'\nimport BigCalendar from 'react-big-calendar'\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop';\nimport 'react-big-calendar/lib/addons/dragAndDrop/styles.css';\nimport moment from 'moment';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport IntlMessages from '../../../../../util/IntlMessages';\nimport { connect } from \"react-redux\";\nimport ContainerHeader from '../../../../../components/ContainerHeader';\nimport CardBox from '../../../../../components/CardBox/index';\nimport AddSupplies from './AddSupplies';\nimport Can from \"../../../../../can\";\nimport { RoleContext } from \"../../../../../Context\";\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Slide from '@material-ui/core/Slide';\nimport Button from '@material-ui/core/Button';\nimport { classService } from '../../../../../_services/class.service';\nimport _ from 'lodash';\nimport { removeEventList } from \"../../../../../actions/planningActions\";\nimport { roleIdAdmin, roleIdProfessor, roleIdSuperAdmin } from \"../../../../../config/config\"\n\n\n\n\nconst localizer = BigCalendar.momentLocalizer(moment);\n\nconst DragAndDropCalendar = withDragAndDrop(BigCalendar);\n\nclass TimeTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      events: [],\n      establishment: '',\n      establishmentClass: [],\n      classe: '',\n      supplieModal: false,\n      eventId: '',\n      eventFrequency: '',\n      eventRoom: '',\n      eventSubject: '',\n      eventProfessorName: '',\n      eventProfessorSurname: '',\n      open: false,\n      eventSupplie: []\n    };\n    // this.addSupplies = this.addSupplies.bind(this);\n    this.annuleModal = this.annuleModal.bind(this);\n    this.handleClickEvent = this.handleClickEvent.bind(this);\n    this.handleRequestClose = this.handleRequestClose.bind(this);\n\n\n  }\n  componentDidMount() {\n    this.setState({\n      events: this.props.events\n    })\n\n  }\n  componentWillUnmount() {\n    // if (this.props.userProfile.role_id === roleIdAdmin || this.props.userProfile.role_id === roleIdSuperAdmin) {\n      this.props.dispatch(removeEventList())\n    // } else { }\n\n  }\n\n\n  annuleModal() {\n    this.setState({\n      supplieModal: false, eventId: ''\n    })\n  }\n\n  handleRequestClose = () => {\n    this.setState({\n      open: false\n    })\n  }\n  handleClickEvent(event) {\n    if (this.props.userProfile.role_id === roleIdProfessor) {\n      this.setState({ supplieModal: true, eventId: event.id });\n\n\n    } else {\n      let apiEndpoint = `/profiles?access_token=${localStorage.token}&filter[where][id]=` + parseInt(event.professor_profile) + `&filter[include][user]`\n      classService.get(apiEndpoint)\n        .then(res => {\n\n          this.setState({\n            eventType: event.event_type,\n            eventFrequency: event.frequency,\n            eventRoom: event.room_name,\n            eventSubject: event.subject_name,\n            eventProfessorName: res.data[0].user.name,\n            eventProfessorSurname: res.data[0].user.surname,\n            eventSupplie: event.supplies,\n            open: true\n          })\n        })\n\n\n    }\n\n  }\n  componentWillReceiveProps(nextProps) {\n    if (this.state.events !== nextProps.events) {\n      this.setState({\n        events: nextProps.events\n      })\n    }\n  }\n  eventStyleGetter(event, start, end, isSelected) {\n\n    let diff = moment.utc(moment(event.end, \"DD/MM/YYYY HH:mm\").diff(moment(event.start, \"DD/MM/YYYY HH:mm\"))).format(\"HH:mm\")\n    const mn = moment.duration(diff).asMinutes()\n    let height = (mn * 1.3) * 0.33 + 'px'\n    var backgroundColor = '#' + event.hexa_color;\n    var style = {\n      backgroundColor: backgroundColor,\n      opacity: 0.8,\n      color: 'black',\n      border: '0px',\n      display: 'block',\n      borderRadius: '5px',\n      paddingTop: height\n\n    };\n    return {\n      style: style\n    };\n  }\n  Event({ event }) {\n    return (\n      <span>\n        {event.event_type === 'exam' ? <p> {<IntlMessages id=\"components.note.exam\" />}</p> : null}\n        <strong>\n          <p> {event.subject_id && ('  ' + event.subject_name)}</p>\n        </strong>\n        <p>{event.room_name && ('Salle:  ' + event.room_name)}  </p>\n      </span>\n    )\n  }\n  EventAgenda({ event }) {\n    return <span>\n      {event.event_type === 'exam' ? <p> {event.event_type}</p> : null\n      }\n      <em style={{ color: 'magenta' }}>{event.subject_name}</em>\n      <p>{event.room_name}</p>  <p>{event.room_name}</p>\n    </span>\n  }\n\n\n  render() {\n    let startHours = ''\n    let startMinutes = ''\n    let endHours = ''\n    let endMinutes = ''\n    if (this.props.startTime && this.props.endTime) {\n      const startTime = this.props.startTime.split(':');\n      const endTime = this.props.endTime.split(':');\n      startHours = startTime[0]\n      startMinutes = startTime[1]\n      endHours = endTime[0]\n      endMinutes = endTime[1]\n    } else {\n      startHours = '07'\n      startMinutes = '00'\n      endHours = '21'\n      endMinutes = '00'\n    }\n    let now = new Date();\n    const startDayTime = new Date();\n    const endDayTime = new Date();\n    startDayTime.setHours(startHours); startDayTime.setMinutes(startMinutes);\n    endDayTime.setHours(endHours); endDayTime.setMinutes(endMinutes);\n    return (\n      <RoleContext.Consumer>\n        {({ role }) => (\n          <div className=\"animated slideInUpTiny animation-duration-3\">\n            <ContainerHeader title={<IntlMessages id=\"model.timetable\" />} match={this.props.match} />\n\n\n            <Can\n              role={role}\n              perform=\"emploi-supplies:add\"\n              yes={() => (\n                <AddSupplies isOpen={this.state.supplieModal} annuleModal={this.annuleModal} eventId={this.state.eventId} />\n              )}\n            />\n            <Can\n              role={role}\n              perform=\"emploi-filter:visit\"\n              yes={() => (\n                <CardBox styleName=\"col-12\" >\n                  <div className=\"row\">\n                    <Can\n                      role={role}\n                      perform=\"emploi-filter-establishment:visit\"\n\n                      yes={() => (\n                        <div className=\"col-lg-3 col-sm-6 col-12\">\n\n                          <FormControl className=\"w-100 mb-2\">\n                            <InputLabel htmlFor=\"age-simple\">{<IntlMessages id=\"components.professor.formadd.etablissement_id\" />}</InputLabel>\n                            <Select\n                              value={this.props.establishment}\n                              onChange={this.props.handleChange('establishment')}\n                              input={<Input id=\"establishment\" />}\n                            >\n                              <MenuItem value=\"\">\n                                <em>{<IntlMessages id=\"autocomplete.emploidutemps.none\" />}</em>\n                              </MenuItem>\n                              {this.props.establishments.map(establishment => (\n                                <MenuItem key={establishment.id} value={establishment.id}>\n                                  {establishment.name}\n                                </MenuItem>\n                              ))}\n                            </Select>\n                          </FormControl>\n                        </div>\n                      )}\n                    />\n                    <div className=\"col-lg-3 col-sm-6 col-12\">\n                      <FormControl className=\"w-100 mb-2\">\n                        <InputLabel htmlFor=\"age-simple\">{<IntlMessages id=\"components.note.class\" />}</InputLabel>\n                        <Select\n                          value={this.props.classe}\n                          onChange={this.props.handleChangeClasse('classe')}\n                          input={<Input id=\"classe\" />}\n                        >\n                          {this.props.establishmentClass.map(classe => (\n                            <MenuItem key={classe.id} value={classe.id}>\n                              {classe.name}\n                            </MenuItem>\n                          ))}\n                        </Select>\n                      </FormControl>\n                    </div>\n                  </div>\n                </CardBox>\n              )}\n            />\n            <DragAndDropCalendar\n              selectable\n              localizer={localizer}\n              events={this.state.events}\n              // onEventDrop={this.moveEvent}\n              defaultView='week'\n              defaultDate={now}\n              eventPropGetter={(this.eventStyleGetter)}\n              components={{\n                event: this.Event,\n                agenda: {\n                  event: this.EventAgenda\n                }\n              }}\n              onSelectEvent={event => this.handleClickEvent(event)}\n              messages={{\n                month: <IntlMessages id=\"timetable.month\" />,\n                day: <IntlMessages id=\"timetable.day\" />,\n                today: <IntlMessages id=\"timetable.today\" />,\n                previous: <IntlMessages id=\"appModule.back\" />,\n                next: <IntlMessages id=\"appModule.next\" />,\n                agenda: <IntlMessages id=\"timetable.agenda\" />,\n                week: <IntlMessages id=\"timetable.week\" />,\n              }}\n              step={30}\n              timeslots={1}\n              min={startDayTime}\n              max={endDayTime}\n            />\n            <Dialog open={this.state.open} TransitionComponent={Slide} onClose={this.handleRequestClose}>\n              <DialogTitle>\n                <IntlMessages id=\"components.planning.lesson.details\" />\n              </DialogTitle>\n              <DialogContent>\n                <ul>\n                  {\n                    this.state.eventType  ===\"exam\" ?\n                    <li> <IntlMessages id=\"components.event.planning.modal.add.name.event_type\" />  :<span>{this.state.eventType}</span></li>\n                 : null\n\n                  }\n\n                  <li> <IntlMessages id=\"components.note.subject\" />  :<span>{this.state.eventSubject}</span></li>\n                  <li> <IntlMessages id=\"calandar.popup.details.frequency\" />: <span>{this.state.eventFrequency}</span> </li>\n                  <li> <IntlMessages id=\"room.name\" />: <span>{this.state.eventRoom}</span></li>\n                  <li> <IntlMessages id=\"toDo.professor\" />: <span>{this.state.eventProfessorName}  {this.state.eventProfessorSurname}</span></li>\n                  <Can\n                    role={role}\n                    perform=\"emploi-display-supplie\"\n                    yes={() => {\n                      if (!_.isEmpty(this.state.eventSupplie)) {\n                        return (\n                          <li> <span> <IntlMessages id=\"supplie\" /> </span>:\n                            {this.state.eventSupplie.map((supplie, index) => (\n                              <div key={index} >{supplie.name} : {supplie.description}</div>\n                            ))}</li>\n                        )\n                      } else { return null }\n                    }}\n                  />\n                </ul>\n               \n              </DialogContent>\n              <DialogActions>\n                <Button onClick={this.handleRequestClose} color=\"primary\">\n                  {<IntlMessages id=\"components.establishments.formadd.buttonCancel\" />}\n                </Button>\n              </DialogActions>\n            </Dialog>\n          </div>\n        )}\n\n      </RoleContext.Consumer>\n\n    )\n  }\n}\nTimeTable.contextType = RoleContext;\n// const mapStateToProps = (state) => {\n//   return {\n//     classes: state.classes,\n//     establishments: state.establishment.remoteEstablishments,\n//     userProfile: state.auth.userProfile,\n//     subjects: state.subject.remoteSubjects,\n//     rooms: state.rooms,\n//     professors: state.professor.remoteProfessors,\n//    // events: state.planning.events,\n\n//   }\n// }\n\nTimeTable = DragDropContext(HTML5Backend)(TimeTable);\nexport default connect()(TimeTable)\n"]},"metadata":{},"sourceType":"module"}