{"ast":null,"code":"var _jsxFileName = \"/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Complaint/ReclamDetail.js\";\nimport React from \"react\";\nimport CustomScrollbars from \"../../../util/CustomScrollbars\";\nimport { Modal, ModalHeader } from \"reactstrap\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../config/config\";\nimport IntlMessages from \"../../../util/IntlMessages\";\nimport { connect } from \"react-redux\";\nimport Fab from \"@material-ui/core/Fab\";\nimport { roleIdSuperAdmin } from \"../../../config/config\";\nimport { roleIdAdmin } from \"../../../config/config\";\nimport { roleIdProfessor } from \"../../../config/config\";\nimport { roleIdParent } from \"../../../config/config\";\nimport { roleIdStudent } from \"../../../config/config\";\nimport { roleIdSupervisor } from \"../../../config/config\";\nimport { roleIdDirector } from \"../../../config/config\";\nimport { classService } from \"../../../_services/class.service\";\nimport Button from \"@material-ui/core/Button\";\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nimport _ from \"lodash\";\nvar options = {\n  weekday: \"long\",\n  year: \"numeric\",\n  month: \"short\",\n  day: \"numeric\"\n};\n\nvar dateFormat = require(\"dateformat\");\n\nclass ReclamDetail extends React.Component {\n  constructor() {\n    super();\n    this._isMounted = false;\n    this.state = {\n      anchorEl: undefined,\n      open: false,\n      showDetail: false,\n      receiverInfo: \"\",\n      url: \"\",\n      openCompose: false,\n      receiverProfile: \"\"\n    };\n  }\n\n  componentWillMount() {\n    this._isMounted = true;\n    axios.get(`${baseUrl.baseUrl}/profiles/` + this.props.data.receiver_id + `/user?access_token=${localStorage.token}`).then(res => {\n      if (this._isMounted) {\n        const receiverInfo = res.data;\n        this.setState({\n          receiverInfo\n        });\n      }\n    });\n    axios.get(`${baseUrl.baseUrl}/profiles/` + this.props.data.receiver_id + `?access_token=${localStorage.token}`).then(res => {\n      if (this._isMounted) {\n        const receiverProfile = res.data;\n        this.setState({\n          receiverProfile\n        });\n      }\n    });\n    var apiEndpoint = `/establishments/` + this.props.userProfile.establishment_id + `?access_token=${localStorage.token}`;\n    classService.get(apiEndpoint).then(response => {\n      if (response) {\n        this.setState({\n          establishmentName: response.data.name\n        });\n        var apiEndpoint = `/containers/checkFileExist/${response.data.name}?access_token=${localStorage.token}`;\n        classService.get(apiEndpoint).then(response => {\n          if (response) {\n            let fileList = _.isEmpty(response.data.checkFile) ? null : response.data.checkFile.find(item => item.name === this.props.data.files);\n            const establishLogoUrl = _.isEmpty(fileList) ? null : `/containers/` + this.state.establishmentName + \"/download/\" + fileList.name + `?access_token=${localStorage.token}`;\n\n            if (establishLogoUrl !== null) {\n              classService.getPhoto(establishLogoUrl).then(response => {\n                if (response) {\n                  const fileExtension = this.props.data.files.replace(/^.*\\./, \"\");\n\n                  if (fileExtension === \"pdf\") {\n                    var arr = response.data;\n                    var data2 = new Uint8Array(arr);\n                    var blob = new Blob([data2], {\n                      type: \"application/pdf\"\n                    });\n                    var url = URL.createObjectURL(blob);\n                    this.setState({\n                      url: url\n                    });\n                  } else {\n                    var arr = response.data;\n                    var data2 = new Uint8Array(arr);\n                    var blob = new Blob([data2], {\n                      type: \"video/*\"\n                    });\n                    var url = URL.createObjectURL(blob);\n                    this.setState({\n                      url: url\n                    });\n                  }\n                }\n              }).catch(err => {\n                console.log(\"erorrrrrrrrr\", err);\n              });\n            } else {\n              this.setState({\n                url: null\n              });\n            }\n          }\n        });\n      }\n    });\n  }\n\n  getNameRole(id) {\n    if (this.props.settings.languageId === \"tunisia\") {\n      return id === roleIdSuperAdmin ? \"superadmin\" : id === roleIdAdmin ? \"مشرف\" : id === roleIdProfessor ? \"أستاذ\" : id === roleIdParent ? \"الولي\" : id === roleIdStudent ? \"تلميذ\" : id === roleIdDirector ? \"مشرف اول\" : id === roleIdDirector ? \"مدير\" : \"\";\n    } else if (this.props.settings.languageId === \"english\") {\n      return id === roleIdSuperAdmin ? \"Superadmin\" : id === roleIdAdmin ? \"Admin\" : id === roleIdProfessor ? \"Professor\" : id === roleIdParent ? \"Parent\" : id === roleIdStudent ? \"Student\" : id === roleIdSupervisor ? \"Superviseur\" : id === roleIdDirector ? \"Director\" : \"\";\n    } else {\n      return id === roleIdSuperAdmin ? \"superadmin\" : id === roleIdAdmin ? \"Administrateur\" : id === roleIdProfessor ? \"Professeur\" : id === roleIdParent ? \"Parent\" : id === roleIdStudent ? \"Élève\" : id === roleIdSupervisor ? \"Superviseur\" : id === roleIdDirector ? \"Directeur\" : \"\";\n    }\n  }\n\n  render() {\n    const {\n      data,\n      width,\n      onClose\n    } = this.props;\n    const statusStyle = data.status_complaint.includes(\"non traitée\") ? \"text-white bg-danger\" : data.status_complaint.includes(\"en cours\") ? \"bg-amber\" : \"text-white bg-success\";\n    const nameSender = data.profile.user.name + \" \" + data.profile.user.surname;\n    const nameReceiver = this.state.receiverInfo.name + \" \" + this.state.receiverInfo.surname;\n    const nameSender_AR = data.profile.user.surname_ar + \" \" + data.profile.user.name_ar;\n    const nameReceiver_AR = this.state.receiverInfo.surname_ar + \" \" + this.state.receiverInfo.name_ar;\n    const RoleSender = this.getNameRole(this.props.data.profile.role_id);\n    const RoleReceiver = this.getNameRole(this.state.receiverProfile.role_id);\n    const statusComplaint = data.status_complaint.includes(\"non traitée\") ? /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"Reclam.non.trait\\xE9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 7\n      }\n    }) : data.status_complaint.includes(\"en cours\") ? /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"Reclam.encours\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 7\n      }\n    }) : /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"Reclam.Trait\\xE9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 7\n      }\n    });\n    return /*#__PURE__*/React.createElement(Modal, {\n      className: \"modal-box modal-box-mail\",\n      isOpen: this.props.open,\n      style: {\n        zIndex: 2600\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ModalHeader, {\n      className: \"modal-box-header bg-primary text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }\n    }, this.props.type === \"Reçues\" ? /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"Reclam.detail.recue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 13\n      }\n    }) : /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"Reclam.detail.envoy\\xE9e\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(IconButton, {\n      className: \"text-white\",\n      onClick: onClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CloseIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"module-detail mail-detail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"jr-card text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: `jr-card-header-color bg-gradient-primary`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"jr-card-header-top\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      className: \"mb-0 text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 19\n      }\n    }, this.props.settings.languageId === \"tunisia\" ? new Date(data.date_hour_reclamation).toLocaleDateString(\"ar-TN\", options) : this.props.settings.languageId === \"english\" ? new Date(data.date_hour_reclamation).toLocaleDateString(\"en-US\", options) : new Date(data.date_hour_reclamation).toLocaleDateString(\"fr-FR\", options)))), /*#__PURE__*/React.createElement(\"img\", {\n      className: \"rounded-circle size-90 avatar-shadow mb-3\",\n      src: \"https://pngimage.net/wp-content/uploads/2018/05/admin-avatar-png-1.png\",\n      alt: \"Team Member\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"jr-card-hd-content\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 15\n      }\n    }, this.props.type === \"Reçues\" ? this.props.settings.languageId == \"tunisia\" && nameSender_AR != \"null null\" ? /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"mb-0 text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"Reclam.detail.from\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 23\n      }\n    }), \" \", nameSender_AR) : /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"mb-0 text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"Reclam.detail.from\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 23\n      }\n    }), \" \", nameSender) : this.props.settings.languageId == \"tunisia\" && nameReceiver_AR != \"null null\" ? /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"mb-0 text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"Reclam.detail.to\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 21\n      }\n    }), \" \", nameReceiver_AR) : /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"mb-0 text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"Reclam.detail.to\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 21\n      }\n    }), \" \", nameReceiver), this.props.type === \"Reçues\" ? /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"mb-0 text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 19\n      }\n    }, RoleSender) : /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"mb-0 text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 19\n      }\n    }, RoleReceiver)), this.props.type === \"Reçues\" ? /*#__PURE__*/React.createElement(Fab, {\n      className: \"jr-badge-up bg-success\",\n      onClick: () => {\n        this.props.compose();\n        onClose();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"zmdi zmdi-mail-send\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 19\n      }\n    })) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"jr-card-body pt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"complaint.Sujet\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 19\n      }\n    }), \" \", \"    :   \"), data.subject), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"font\", {\n      size: \"+2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 17\n      }\n    }, \" \", data.message)), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 15\n      }\n    }, this.props.type === \"Reçues\" ? localStorage.roles_id == roleIdAdmin ? /*#__PURE__*/React.createElement(\"div\", {\n      className: ` badge text-uppercase ${statusStyle}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 21\n      }\n    }, statusComplaint) : \"\" : localStorage.roles_id != roleIdAdmin ? /*#__PURE__*/React.createElement(\"div\", {\n      className: ` badge text-uppercase ${statusStyle}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 19\n      }\n    }, statusComplaint) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 15\n      }\n    }, this.state.url == null ? \"\" : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      style: {\n        backgroundColor: \"#009D88\",\n        color: \"#fff\",\n        marginTop: \"3%\"\n      },\n      startIcon: /*#__PURE__*/React.createElement(GetAppIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 34\n        }\n      }),\n      href: this.state.url,\n      download: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(IntlMessages, {\n      id: \"complaint.t\\xE9l\\xE9charger\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 23\n      }\n    }))))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    settings: state.settings.locale,\n    userProfile: state.auth.userProfile\n  };\n};\n\nexport default connect(mapStateToProps)(ReclamDetail);","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/app/routes/Complaint/ReclamDetail.js"],"names":["React","CustomScrollbars","Modal","ModalHeader","IconButton","CloseIcon","axios","baseUrl","IntlMessages","connect","Fab","roleIdSuperAdmin","roleIdAdmin","roleIdProfessor","roleIdParent","roleIdStudent","roleIdSupervisor","roleIdDirector","classService","Button","GetAppIcon","_","options","weekday","year","month","day","dateFormat","require","ReclamDetail","Component","constructor","_isMounted","state","anchorEl","undefined","open","showDetail","receiverInfo","url","openCompose","receiverProfile","componentWillMount","get","props","data","receiver_id","localStorage","token","then","res","setState","apiEndpoint","userProfile","establishment_id","response","establishmentName","name","fileList","isEmpty","checkFile","find","item","files","establishLogoUrl","getPhoto","fileExtension","replace","arr","data2","Uint8Array","blob","Blob","type","URL","createObjectURL","catch","err","console","log","getNameRole","id","settings","languageId","render","width","onClose","statusStyle","status_complaint","includes","nameSender","profile","user","surname","nameReceiver","nameSender_AR","surname_ar","name_ar","nameReceiver_AR","RoleSender","role_id","RoleReceiver","statusComplaint","zIndex","Date","date_hour_reclamation","toLocaleDateString","compose","subject","message","roles_id","backgroundColor","color","marginTop","mapStateToProps","locale","auth"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport CustomScrollbars from \"../../../util/CustomScrollbars\";\nimport { Modal, ModalHeader } from \"reactstrap\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport axios from \"axios\";\nimport baseUrl from \"../../../config/config\";\nimport IntlMessages from \"../../../util/IntlMessages\";\nimport { connect } from \"react-redux\";\nimport Fab from \"@material-ui/core/Fab\";\nimport { roleIdSuperAdmin } from \"../../../config/config\";\nimport { roleIdAdmin } from \"../../../config/config\";\nimport { roleIdProfessor } from \"../../../config/config\";\nimport { roleIdParent } from \"../../../config/config\";\nimport { roleIdStudent } from \"../../../config/config\";\nimport { roleIdSupervisor } from \"../../../config/config\";\nimport { roleIdDirector } from \"../../../config/config\";\nimport { classService } from \"../../../_services/class.service\";\nimport Button from \"@material-ui/core/Button\";\nimport GetAppIcon from \"@material-ui/icons/GetApp\";\nimport _ from \"lodash\";\nvar options = {\n  weekday: \"long\",\n  year: \"numeric\",\n  month: \"short\",\n  day: \"numeric\",\n};\nvar dateFormat = require(\"dateformat\");\n\nclass ReclamDetail extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      anchorEl: undefined,\n      open: false,\n      showDetail: false,\n      receiverInfo: \"\",\n      url: \"\",\n      openCompose: false,\n      receiverProfile: \"\",\n    };\n  }\n  _isMounted = false;\n  componentWillMount() {\n    this._isMounted = true;\n\n    axios\n      .get(\n        `${baseUrl.baseUrl}/profiles/` +\n          this.props.data.receiver_id +\n          `/user?access_token=${localStorage.token}`\n      )\n      .then((res) => {\n        if (this._isMounted) {\n          const receiverInfo = res.data;\n          this.setState({ receiverInfo });\n        }\n      });\n    axios\n      .get(\n        `${baseUrl.baseUrl}/profiles/` +\n          this.props.data.receiver_id +\n          `?access_token=${localStorage.token}`\n      )\n      .then((res) => {\n        if (this._isMounted) {\n          const receiverProfile = res.data;\n          this.setState({ receiverProfile });\n        }\n      });\n\n    var apiEndpoint =\n      `/establishments/` +\n      this.props.userProfile.establishment_id +\n      `?access_token=${localStorage.token}`;\n    classService.get(apiEndpoint).then((response) => {\n      if (response) {\n        this.setState({\n          establishmentName: response.data.name,\n        });\n        var apiEndpoint = `/containers/checkFileExist/${response.data.name}?access_token=${localStorage.token}`;\n        classService.get(apiEndpoint).then((response) => {\n          if (response) {\n            let fileList = _.isEmpty(response.data.checkFile)\n              ? null\n              : response.data.checkFile.find(\n                  (item) => item.name === this.props.data.files\n                );\n            const establishLogoUrl = _.isEmpty(fileList)\n              ? null\n              : `/containers/` +\n                this.state.establishmentName +\n                \"/download/\" +\n                fileList.name +\n                `?access_token=${localStorage.token}`;\n            if (establishLogoUrl !== null) {\n              classService\n                .getPhoto(establishLogoUrl)\n                .then((response) => {\n                  if (response) {\n                    const fileExtension = this.props.data.files.replace(\n                      /^.*\\./,\n                      \"\"\n                    );\n                    if (fileExtension === \"pdf\") {\n                      var arr = response.data;\n                      var data2 = new Uint8Array(arr);\n                      var blob = new Blob([data2], { type: \"application/pdf\" });\n                      var url = URL.createObjectURL(blob);\n                      this.setState({\n                        url: url,\n                      });\n                    } else {\n                      var arr = response.data;\n                      var data2 = new Uint8Array(arr);\n                      var blob = new Blob([data2], { type: \"video/*\" });\n                      var url = URL.createObjectURL(blob);\n                      this.setState({\n                        url: url,\n                      });\n                    }\n                  }\n                })\n                .catch((err) => {\n                  console.log(\"erorrrrrrrrr\", err);\n                });\n            } else {\n              this.setState({\n                url: null,\n              });\n            }\n          }\n        });\n      }\n    });\n  }\n  getNameRole(id) {\n    if (this.props.settings.languageId === \"tunisia\") {\n      return id === roleIdSuperAdmin\n        ? \"superadmin\"\n        : id === roleIdAdmin\n        ? \"مشرف\"\n        : id === roleIdProfessor\n        ? \"أستاذ\"\n        : id === roleIdParent\n        ? \"الولي\"\n        : id === roleIdStudent\n        ? \"تلميذ\"\n        : id === roleIdDirector\n        ? \"مشرف اول\"\n        : id === roleIdDirector\n        ? \"مدير\"\n        : \"\";\n    } else if (this.props.settings.languageId === \"english\") {\n      return id === roleIdSuperAdmin\n        ? \"Superadmin\"\n        : id === roleIdAdmin\n        ? \"Admin\"\n        : id === roleIdProfessor\n        ? \"Professor\"\n        : id === roleIdParent\n        ? \"Parent\"\n        : id === roleIdStudent\n        ? \"Student\"\n        : id === roleIdSupervisor\n        ? \"Superviseur\"\n        : id === roleIdDirector\n        ? \"Director\"\n        : \"\";\n    } else {\n      return id === roleIdSuperAdmin\n        ? \"superadmin\"\n        : id === roleIdAdmin\n        ? \"Administrateur\"\n        : id === roleIdProfessor\n        ? \"Professeur\"\n        : id === roleIdParent\n        ? \"Parent\"\n        : id === roleIdStudent\n        ? \"Élève\"\n        : id === roleIdSupervisor\n        ? \"Superviseur\"\n        : id === roleIdDirector\n        ? \"Directeur\"\n        : \"\";\n    }\n  }\n\n  render() {\n    const { data, width, onClose } = this.props;\n    const statusStyle = data.status_complaint.includes(\"non traitée\")\n      ? \"text-white bg-danger\"\n      : data.status_complaint.includes(\"en cours\")\n      ? \"bg-amber\"\n      : \"text-white bg-success\";\n\n    const nameSender = data.profile.user.name + \" \" + data.profile.user.surname;\n    const nameReceiver =\n      this.state.receiverInfo.name + \" \" + this.state.receiverInfo.surname;\n    const nameSender_AR =\n      data.profile.user.surname_ar + \" \" + data.profile.user.name_ar;\n    const nameReceiver_AR =\n      this.state.receiverInfo.surname_ar +\n      \" \" +\n      this.state.receiverInfo.name_ar;\n    const RoleSender = this.getNameRole(this.props.data.profile.role_id);\n    const RoleReceiver = this.getNameRole(this.state.receiverProfile.role_id);\n    const statusComplaint = data.status_complaint.includes(\"non traitée\") ? (\n      <IntlMessages id=\"Reclam.non.traité\" />\n    ) : data.status_complaint.includes(\"en cours\") ? (\n      <IntlMessages id=\"Reclam.encours\" />\n    ) : (\n      <IntlMessages id=\"Reclam.Traité\" />\n    );\n    return (\n      <Modal\n        className=\"modal-box modal-box-mail\"\n        isOpen={this.props.open}\n        style={{ zIndex: 2600 }}\n      >\n        <ModalHeader className=\"modal-box-header bg-primary text-white\">\n          {this.props.type === \"Reçues\" ? (\n            <IntlMessages id=\"Reclam.detail.recue\" />\n          ) : (\n            <IntlMessages id=\"Reclam.detail.envoyée\" />\n          )}\n\n          <IconButton className=\"text-white\" onClick={onClose}>\n            <CloseIcon />\n          </IconButton>\n        </ModalHeader>\n        <div className=\"module-detail mail-detail\">\n          <div className=\"jr-card text-center\">\n            <div className={`jr-card-header-color bg-gradient-primary`}>\n              <div className=\"jr-card-header-top\">\n                <div>\n                  <h3 className=\"mb-0 text-white\">\n                    {this.props.settings.languageId === \"tunisia\"\n                      ? new Date(data.date_hour_reclamation).toLocaleDateString(\n                          \"ar-TN\",\n                          options\n                        )\n                      : this.props.settings.languageId === \"english\"\n                      ? new Date(data.date_hour_reclamation).toLocaleDateString(\n                          \"en-US\",\n                          options\n                        )\n                      : new Date(data.date_hour_reclamation).toLocaleDateString(\n                          \"fr-FR\",\n                          options\n                        )}\n                  </h3>\n                </div>\n              </div>\n\n              <img\n                className=\"rounded-circle size-90 avatar-shadow mb-3\"\n                src=\"https://pngimage.net/wp-content/uploads/2018/05/admin-avatar-png-1.png\"\n                alt=\"Team Member\"\n              />\n\n              <div className=\"jr-card-hd-content\">\n                {this.props.type === \"Reçues\" ? (\n                  this.props.settings.languageId == \"tunisia\" &&\n                  nameSender_AR != \"null null\" ? (\n                    <h4 className=\"mb-0 text-white\">\n                      <IntlMessages id=\"Reclam.detail.from\" /> {nameSender_AR}\n                    </h4>\n                  ) : (\n                    <h4 className=\"mb-0 text-white\">\n                      <IntlMessages id=\"Reclam.detail.from\" /> {nameSender}\n                    </h4>\n                  )\n                ) : this.props.settings.languageId == \"tunisia\" &&\n                  nameReceiver_AR != \"null null\" ? (\n                  <h4 className=\"mb-0 text-white\">\n                    <IntlMessages id=\"Reclam.detail.to\" /> {nameReceiver_AR}\n                  </h4>\n                ) : (\n                  <h4 className=\"mb-0 text-white\">\n                    <IntlMessages id=\"Reclam.detail.to\" /> {nameReceiver}\n                  </h4>\n                )}\n                {this.props.type === \"Reçues\" ? (\n                  <h4 className=\"mb-0 text-white\">{RoleSender}</h4>\n                ) : (\n                  <h4 className=\"mb-0 text-white\">{RoleReceiver}</h4>\n                )}\n              </div>\n              {this.props.type === \"Reçues\" ? (\n                <Fab\n                  className=\"jr-badge-up bg-success\"\n                  onClick={() => {\n                    this.props.compose();\n                    onClose();\n                  }}\n                >\n                  <i className=\"zmdi zmdi-mail-send\" />\n                </Fab>\n              ) : (\n                \"\"\n              )}\n            </div>\n            <div className=\"jr-card-body pt-2\">\n              <div>\n                <strong>\n                  <IntlMessages id=\"complaint.Sujet\" /> {\"    :   \"}\n                </strong>\n                {data.subject}\n              </div>\n\n              <div>\n                <font size=\"+2\"> {data.message}</font>\n              </div>\n              <div>\n                {this.props.type === \"Reçues\" ? (\n                  localStorage.roles_id == roleIdAdmin ? (\n                    <div className={` badge text-uppercase ${statusStyle}`}>\n                      {statusComplaint}\n                    </div>\n                  ) : (\n                    \"\"\n                  )\n                ) : localStorage.roles_id != roleIdAdmin ? (\n                  <div className={` badge text-uppercase ${statusStyle}`}>\n                    {statusComplaint}\n                  </div>\n                ) : (\n                  \"\"\n                )}\n              </div>\n              <div>\n                {this.state.url == null ? (\n                  \"\"\n                ) : (\n                  <div>\n                    <Button\n                      variant=\"contained\"\n                      style={{\n                        backgroundColor: \"#009D88\",\n                        color: \"#fff\",\n                        marginTop: \"3%\",\n                      }}\n                      startIcon={<GetAppIcon />}\n                      href={this.state.url}\n                      download\n                    >\n                      <IntlMessages id=\"complaint.télécharger\" />\n                    </Button>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </Modal>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    settings: state.settings.locale,\n    userProfile: state.auth.userProfile,\n  };\n};\n\nexport default connect(mapStateToProps)(ReclamDetail);\n"]},"metadata":{},"sourceType":"module"}