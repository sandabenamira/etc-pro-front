{"ast":null,"code":"import { classService } from '../_services/class.service';\nimport { ADD_SCHOOL_SESSION, SHOW_SUCCESS_MESSAGE, HIDE_SUCCESS_MESSAGE, SHOW_ERROR_MESSAGE, HIDE_ERROR_MESSAGE, GET_SCHOOL_SESSION, EDIT_SCHOOL_SESSION, DELETE_SCHOOL_SESSION, ARCHIVED_GET_SCHOOL_SESSION } from '../constants/ActionTypes';\nexport function addSchoolSession(data) {\n  let newObj = {\n    name: data.name,\n    start_date: data.start_date,\n    end_date: data.end_date,\n    fk_id_school_year: data.fk_id_school_year,\n    fk_id_education_type_v4: data.fk_id_education_type_v4,\n    status: true\n  };\n  return dispatch => {\n    let apiEndpoint = `/school_session_v4?access_token=${localStorage.token}`;\n    classService.post(apiEndpoint, newObj).then(response => {\n      if (response) {\n        let object = { ...response.data,\n          educationType: data.educationType\n        };\n        dispatch({\n          type: ADD_SCHOOL_SESSION,\n          payload: object\n        });\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: 'La création est effectuée avec succès'\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_SUCCESS_MESSAGE\n          });\n        }, 4000);\n      } else {\n        dispatch({\n          type: SHOW_ERROR_MESSAGE,\n          payload: \"Une erreur est survenue lors de la création merci d'essayer à nouveau\"\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_ERROR_MESSAGE\n          });\n        }, 4000);\n      }\n    });\n  };\n}\nexport function editSchoolSession(data) {\n  return dispatch => {\n    let apiEndpoint = `/school_session_v4/${data.id}?access_token=${localStorage.token}`;\n    classService.patch(apiEndpoint, data).then(response => {\n      if (response) {\n        let object = { ...response.data,\n          educationType: data.educationType\n        };\n        dispatch({\n          type: EDIT_SCHOOL_SESSION,\n          payload: object\n        });\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: 'La modification est effectuée avec succès'\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_SUCCESS_MESSAGE\n          });\n        }, 4000);\n      } else {\n        dispatch({\n          type: SHOW_ERROR_MESSAGE,\n          payload: \"Une erreur est survenue lors de la création merci d'essayer à nouveau\"\n        });\n        setTimeout(() => {\n          dispatch({\n            type: HIDE_ERROR_MESSAGE\n          });\n        }, 4000);\n      }\n    });\n  };\n}\nexport function getSchoolSession(establishementId, schoolYearId) {\n  return dispatch => {\n    let apiEndpoint = `/school_session_v4?access_token=${localStorage.token}&filter[include][educationType]`;\n    classService.get(apiEndpoint).then(response => {\n      if (response) {\n        const list = response.data;\n        const SchoolSessionList = list.filter(element => element.status && element.educationType.fk_id_establishment == establishementId && element.educationType.fk_id_school_year == schoolYearId);\n        const ArchivedSchoolSessionListList = list.filter(element => element.status == false && element.educationType.fk_id_establishment == establishementId && element.educationType.fk_id_school_year == schoolYearId);\n        dispatch({\n          type: GET_SCHOOL_SESSION,\n          payload: SchoolSessionList\n        });\n        dispatch({\n          type: ARCHIVED_GET_SCHOOL_SESSION,\n          payload: ArchivedSchoolSessionListList\n        });\n      }\n    });\n  };\n}\nexport function deleteSchoolSession(itemId) {\n  return dispatch => {\n    let apiEndpoint = `/school_session_v4/` + itemId.id + `?access_token=${localStorage.token}`;\n    classService.patch(apiEndpoint, {\n      status: false\n    }).then(response => {\n      dispatch({\n        type: DELETE_SCHOOL_SESSION,\n        payload: response.data\n      });\n    }).catch(function (error) {});\n  };\n}","map":{"version":3,"sources":["/home/oem/Documents/projects/educap/classebook-front-web/src/actions/SchoolSessionAction.js"],"names":["classService","ADD_SCHOOL_SESSION","SHOW_SUCCESS_MESSAGE","HIDE_SUCCESS_MESSAGE","SHOW_ERROR_MESSAGE","HIDE_ERROR_MESSAGE","GET_SCHOOL_SESSION","EDIT_SCHOOL_SESSION","DELETE_SCHOOL_SESSION","ARCHIVED_GET_SCHOOL_SESSION","addSchoolSession","data","newObj","name","start_date","end_date","fk_id_school_year","fk_id_education_type_v4","status","dispatch","apiEndpoint","localStorage","token","post","then","response","object","educationType","type","payload","setTimeout","editSchoolSession","id","patch","getSchoolSession","establishementId","schoolYearId","get","list","SchoolSessionList","filter","element","fk_id_establishment","ArchivedSchoolSessionListList","deleteSchoolSession","itemId","catch","error"],"mappings":"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","sourcesContent":["import { classService } from '../_services/class.service';\nimport {\n  ADD_SCHOOL_SESSION,\n  SHOW_SUCCESS_MESSAGE,\n  HIDE_SUCCESS_MESSAGE,\n  SHOW_ERROR_MESSAGE,\n  HIDE_ERROR_MESSAGE,\n  GET_SCHOOL_SESSION,\n  EDIT_SCHOOL_SESSION,\n  DELETE_SCHOOL_SESSION,\n  ARCHIVED_GET_SCHOOL_SESSION,\n} from '../constants/ActionTypes';\nexport function addSchoolSession(data) {\n  let newObj = {\n    name: data.name,\n    start_date: data.start_date,\n    end_date: data.end_date,\n    fk_id_school_year: data.fk_id_school_year,\n    fk_id_education_type_v4: data.fk_id_education_type_v4,\n    status: true,\n  };\n  return (dispatch) => {\n    let apiEndpoint = `/school_session_v4?access_token=${localStorage.token}`;\n    classService.post(apiEndpoint, newObj).then((response) => {\n      if (response) {\n        let object = {\n          ...response.data,\n          educationType: data.educationType,\n        };\n\n        dispatch({ type: ADD_SCHOOL_SESSION, payload: object });\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: 'La création est effectuée avec succès',\n        });\n        setTimeout(() => {\n          dispatch({ type: HIDE_SUCCESS_MESSAGE });\n        }, 4000);\n      } else {\n        dispatch({\n          type: SHOW_ERROR_MESSAGE,\n          payload:\n            \"Une erreur est survenue lors de la création merci d'essayer à nouveau\",\n        });\n        setTimeout(() => {\n          dispatch({ type: HIDE_ERROR_MESSAGE });\n        }, 4000);\n      }\n    });\n  };\n}\n\nexport function editSchoolSession(data) {\n  return (dispatch) => {\n    let apiEndpoint = `/school_session_v4/${data.id}?access_token=${localStorage.token}`;\n    classService.patch(apiEndpoint, data).then((response) => {\n      if (response) {\n        let object = {\n          ...response.data,\n          educationType: data.educationType,\n        };\n        dispatch({ type: EDIT_SCHOOL_SESSION, payload: object });\n        dispatch({\n          type: SHOW_SUCCESS_MESSAGE,\n          payload: 'La modification est effectuée avec succès',\n        });\n        setTimeout(() => {\n          dispatch({ type: HIDE_SUCCESS_MESSAGE });\n        }, 4000);\n      } else {\n        dispatch({\n          type: SHOW_ERROR_MESSAGE,\n          payload:\n            \"Une erreur est survenue lors de la création merci d'essayer à nouveau\",\n        });\n        setTimeout(() => {\n          dispatch({ type: HIDE_ERROR_MESSAGE });\n        }, 4000);\n      }\n    });\n  };\n}\n\nexport function getSchoolSession(establishementId, schoolYearId) {\n  return (dispatch) => {\n    let apiEndpoint = `/school_session_v4?access_token=${localStorage.token}&filter[include][educationType]`;\n    classService.get(apiEndpoint).then((response) => {\n      if (response) {\n        const list = response.data;\n        const SchoolSessionList = list.filter(\n          (element) =>\n            element.status &&\n            element.educationType.fk_id_establishment == establishementId &&\n            element.educationType.fk_id_school_year == schoolYearId\n        );\n        const ArchivedSchoolSessionListList = list.filter(\n          (element) =>\n            element.status == false &&\n            element.educationType.fk_id_establishment == establishementId &&\n            element.educationType.fk_id_school_year == schoolYearId\n        );\n        dispatch({ type: GET_SCHOOL_SESSION, payload: SchoolSessionList });\n        dispatch({\n          type: ARCHIVED_GET_SCHOOL_SESSION,\n          payload: ArchivedSchoolSessionListList,\n        });\n      }\n    });\n  };\n}\n\nexport function deleteSchoolSession(itemId) {\n  return (dispatch) => {\n    let apiEndpoint =\n      `/school_session_v4/` + itemId.id + `?access_token=${localStorage.token}`;\n    classService\n      .patch(apiEndpoint, {\n        status: false,\n      })\n      .then((response) => {\n        dispatch({ type: DELETE_SCHOOL_SESSION, payload: response.data });\n      })\n      .catch(function(error) {});\n  };\n}\n"]},"metadata":{},"sourceType":"module"}